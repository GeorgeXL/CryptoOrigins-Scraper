var y0=e=>{throw TypeError(e)};var _m=(e,t,n)=>t.has(e)||y0("Cannot "+n);var k=(e,t,n)=>(_m(e,t,"read from private field"),n?n.call(e):t.get(e)),Ne=(e,t,n)=>t.has(e)?y0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),de=(e,t,n,r)=>(_m(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),He=(e,t,n)=>(_m(e,t,"access private method"),n);var Xu=(e,t,n,r)=>({set _(s){de(e,t,s,n)},get _(){return k(e,t,r)}});function Bj(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function Kj(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function MP(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var Vj={exports:{}},cf={},qj={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wu=Symbol.for("react.element"),DP=Symbol.for("react.portal"),$P=Symbol.for("react.fragment"),LP=Symbol.for("react.strict_mode"),FP=Symbol.for("react.profiler"),zP=Symbol.for("react.provider"),UP=Symbol.for("react.context"),BP=Symbol.for("react.forward_ref"),KP=Symbol.for("react.suspense"),VP=Symbol.for("react.memo"),qP=Symbol.for("react.lazy"),x0=Symbol.iterator;function HP(e){return e===null||typeof e!="object"?null:(e=x0&&e[x0]||e["@@iterator"],typeof e=="function"?e:null)}var Hj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wj=Object.assign,Gj={};function bl(e,t,n){this.props=e,this.context=t,this.refs=Gj,this.updater=n||Hj}bl.prototype.isReactComponent={};bl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};bl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Qj(){}Qj.prototype=bl.prototype;function Kv(e,t,n){this.props=e,this.context=t,this.refs=Gj,this.updater=n||Hj}var Vv=Kv.prototype=new Qj;Vv.constructor=Kv;Wj(Vv,bl.prototype);Vv.isPureReactComponent=!0;var w0=Array.isArray,Yj=Object.prototype.hasOwnProperty,qv={current:null},Jj={key:!0,ref:!0,__self:!0,__source:!0};function Xj(e,t,n){var r,s={},a=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)Yj.call(t,r)&&!Jj.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:wu,type:e,key:a,ref:i,props:s,_owner:qv.current}}function WP(e,t){return{$$typeof:wu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Hv(e){return typeof e=="object"&&e!==null&&e.$$typeof===wu}function GP(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var b0=/\/+/g;function Em(e,t){return typeof e=="object"&&e!==null&&e.key!=null?GP(""+e.key):t.toString(36)}function $d(e,t,n,r,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case wu:case DP:i=!0}}if(i)return i=e,s=s(i),e=r===""?"."+Em(i,0):r,w0(s)?(n="",e!=null&&(n=e.replace(b0,"$&/")+"/"),$d(s,t,n,"",function(u){return u})):s!=null&&(Hv(s)&&(s=WP(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(b0,"$&/")+"/")+e)),t.push(s)),1;if(i=0,r=r===""?".":r+":",w0(e))for(var l=0;l<e.length;l++){a=e[l];var c=r+Em(a,l);i+=$d(a,t,n,c,s)}else if(c=HP(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=r+Em(a,l++),i+=$d(a,t,n,c,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Zu(e,t,n){if(e==null)return e;var r=[],s=0;return $d(e,r,"","",function(a){return t.call(n,a,s++)}),r}function QP(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Bn={current:null},Ld={transition:null},YP={ReactCurrentDispatcher:Bn,ReactCurrentBatchConfig:Ld,ReactCurrentOwner:qv};function Zj(){throw Error("act(...) is not supported in production builds of React.")}rt.Children={map:Zu,forEach:function(e,t,n){Zu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Zu(e,function(){t++}),t},toArray:function(e){return Zu(e,function(t){return t})||[]},only:function(e){if(!Hv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};rt.Component=bl;rt.Fragment=$P;rt.Profiler=FP;rt.PureComponent=Kv;rt.StrictMode=LP;rt.Suspense=KP;rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YP;rt.act=Zj;rt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Wj({},e.props),s=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=qv.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Yj.call(t,c)&&!Jj.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:wu,type:e.type,key:s,ref:a,props:r,_owner:i}};rt.createContext=function(e){return e={$$typeof:UP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:zP,_context:e},e.Consumer=e};rt.createElement=Xj;rt.createFactory=function(e){var t=Xj.bind(null,e);return t.type=e,t};rt.createRef=function(){return{current:null}};rt.forwardRef=function(e){return{$$typeof:BP,render:e}};rt.isValidElement=Hv;rt.lazy=function(e){return{$$typeof:qP,_payload:{_status:-1,_result:e},_init:QP}};rt.memo=function(e,t){return{$$typeof:VP,type:e,compare:t===void 0?null:t}};rt.startTransition=function(e){var t=Ld.transition;Ld.transition={};try{e()}finally{Ld.transition=t}};rt.unstable_act=Zj;rt.useCallback=function(e,t){return Bn.current.useCallback(e,t)};rt.useContext=function(e){return Bn.current.useContext(e)};rt.useDebugValue=function(){};rt.useDeferredValue=function(e){return Bn.current.useDeferredValue(e)};rt.useEffect=function(e,t){return Bn.current.useEffect(e,t)};rt.useId=function(){return Bn.current.useId()};rt.useImperativeHandle=function(e,t,n){return Bn.current.useImperativeHandle(e,t,n)};rt.useInsertionEffect=function(e,t){return Bn.current.useInsertionEffect(e,t)};rt.useLayoutEffect=function(e,t){return Bn.current.useLayoutEffect(e,t)};rt.useMemo=function(e,t){return Bn.current.useMemo(e,t)};rt.useReducer=function(e,t,n){return Bn.current.useReducer(e,t,n)};rt.useRef=function(e){return Bn.current.useRef(e)};rt.useState=function(e){return Bn.current.useState(e)};rt.useSyncExternalStore=function(e,t,n){return Bn.current.useSyncExternalStore(e,t,n)};rt.useTransition=function(){return Bn.current.useTransition()};rt.version="18.3.1";qj.exports=rt;var d=qj.exports;const Pe=Kj(d),uf=Bj({__proto__:null,default:Pe},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JP=d,XP=Symbol.for("react.element"),ZP=Symbol.for("react.fragment"),eA=Object.prototype.hasOwnProperty,tA=JP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nA={key:!0,ref:!0,__self:!0,__source:!0};function eS(e,t,n){var r,s={},a=null,i=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)eA.call(t,r)&&!nA.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:XP,type:e,key:a,ref:i,props:s,_owner:tA.current}}cf.Fragment=ZP;cf.jsx=eS;cf.jsxs=eS;Vj.exports=cf;var o=Vj.exports,tS={exports:{}},yr={},nS={exports:{}},rS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,U){var D=A.length;A.push(U);e:for(;0<D;){var B=D-1>>>1,ue=A[B];if(0<s(ue,U))A[B]=U,A[D]=ue,D=B;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var U=A[0],D=A.pop();if(D!==U){A[0]=D;e:for(var B=0,ue=A.length,_e=ue>>>1;B<_e;){var ye=2*(B+1)-1,Be=A[ye],Ie=ye+1,pe=A[Ie];if(0>s(Be,D))Ie<ue&&0>s(pe,Be)?(A[B]=pe,A[Ie]=D,B=Ie):(A[B]=Be,A[ye]=D,B=ye);else if(Ie<ue&&0>s(pe,D))A[B]=pe,A[Ie]=D,B=Ie;else break e}}return U}function s(A,U){var D=A.sortIndex-U.sortIndex;return D!==0?D:A.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],u=[],h=1,f=null,m=3,p=!1,x=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(A){for(var U=n(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=A)r(u),U.sortIndex=U.expirationTime,t(c,U);else break;U=n(u)}}function j(A){if(g=!1,b(A),!x)if(n(c)!==null)x=!0,Y(S);else{var U=n(u);U!==null&&O(j,U.startTime-A)}}function S(A,U){x=!1,g&&(g=!1,w(_),_=-1),p=!0;var D=m;try{for(b(U),f=n(c);f!==null&&(!(f.expirationTime>U)||A&&!T());){var B=f.callback;if(typeof B=="function"){f.callback=null,m=f.priorityLevel;var ue=B(f.expirationTime<=U);U=e.unstable_now(),typeof ue=="function"?f.callback=ue:f===n(c)&&r(c),b(U)}else r(c);f=n(c)}if(f!==null)var _e=!0;else{var ye=n(u);ye!==null&&O(j,ye.startTime-U),_e=!1}return _e}finally{f=null,m=D,p=!1}}var C=!1,N=null,_=-1,E=5,M=-1;function T(){return!(e.unstable_now()-M<E)}function R(){if(N!==null){var A=e.unstable_now();M=A;var U=!0;try{U=N(!0,A)}finally{U?W():(C=!1,N=null)}}else C=!1}var W;if(typeof v=="function")W=function(){v(R)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,he=Q.port2;Q.port1.onmessage=R,W=function(){he.postMessage(null)}}else W=function(){y(R,0)};function Y(A){N=A,C||(C=!0,W())}function O(A,U){_=y(function(){A(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){x||p||(x=!0,Y(S))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(A){switch(m){case 1:case 2:case 3:var U=3;break;default:U=m}var D=m;m=U;try{return A()}finally{m=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,U){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var D=m;m=A;try{return U()}finally{m=D}},e.unstable_scheduleCallback=function(A,U,D){var B=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?B+D:B):D=B,A){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=D+ue,A={id:h++,callback:U,priorityLevel:A,startTime:D,expirationTime:ue,sortIndex:-1},D>B?(A.sortIndex=D,t(u,A),n(c)===null&&A===n(u)&&(g?(w(_),_=-1):g=!0,O(j,D-B))):(A.sortIndex=ue,t(c,A),x||p||(x=!0,Y(S))),A},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(A){var U=m;return function(){var D=m;m=U;try{return A.apply(this,arguments)}finally{m=D}}}})(rS);nS.exports=rS;var rA=nS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sA=d,vr=rA;function ie(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sS=new Set,kc={};function qa(e,t){nl(e,t),nl(e+"Capture",t)}function nl(e,t){for(kc[e]=t,e=0;e<t.length;e++)sS.add(t[e])}var Vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ip=Object.prototype.hasOwnProperty,oA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,j0={},S0={};function aA(e){return Ip.call(S0,e)?!0:Ip.call(j0,e)?!1:oA.test(e)?S0[e]=!0:(j0[e]=!0,!1)}function iA(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function lA(e,t,n,r){if(t===null||typeof t>"u"||iA(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Kn(e,t,n,r,s,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){jn[e]=new Kn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];jn[t]=new Kn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){jn[e]=new Kn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){jn[e]=new Kn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){jn[e]=new Kn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){jn[e]=new Kn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){jn[e]=new Kn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){jn[e]=new Kn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){jn[e]=new Kn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Wv=/[\-:]([a-z])/g;function Gv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Wv,Gv);jn[t]=new Kn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Wv,Gv);jn[t]=new Kn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Wv,Gv);jn[t]=new Kn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){jn[e]=new Kn(e,1,!1,e.toLowerCase(),null,!1,!1)});jn.xlinkHref=new Kn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){jn[e]=new Kn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Qv(e,t,n,r){var s=jn.hasOwnProperty(t)?jn[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(lA(t,n,s,r)&&(n=null),r||s===null?aA(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Js=sA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ed=Symbol.for("react.element"),hi=Symbol.for("react.portal"),fi=Symbol.for("react.fragment"),Yv=Symbol.for("react.strict_mode"),Mp=Symbol.for("react.profiler"),oS=Symbol.for("react.provider"),aS=Symbol.for("react.context"),Jv=Symbol.for("react.forward_ref"),Dp=Symbol.for("react.suspense"),$p=Symbol.for("react.suspense_list"),Xv=Symbol.for("react.memo"),io=Symbol.for("react.lazy"),iS=Symbol.for("react.offscreen"),N0=Symbol.iterator;function Hl(e){return e===null||typeof e!="object"?null:(e=N0&&e[N0]||e["@@iterator"],typeof e=="function"?e:null)}var Qt=Object.assign,km;function sc(e){if(km===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);km=t&&t[1]||""}return`
`+km+e}var Tm=!1;function Rm(e,t){if(!e||Tm)return"";Tm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=r.stack.split(`
`),i=s.length-1,l=a.length-1;1<=i&&0<=l&&s[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==a[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==a[l]){var c=`
`+s[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{Tm=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?sc(e):""}function cA(e){switch(e.tag){case 5:return sc(e.type);case 16:return sc("Lazy");case 13:return sc("Suspense");case 19:return sc("SuspenseList");case 0:case 2:case 15:return e=Rm(e.type,!1),e;case 11:return e=Rm(e.type.render,!1),e;case 1:return e=Rm(e.type,!0),e;default:return""}}function Lp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fi:return"Fragment";case hi:return"Portal";case Mp:return"Profiler";case Yv:return"StrictMode";case Dp:return"Suspense";case $p:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case aS:return(e.displayName||"Context")+".Consumer";case oS:return(e._context.displayName||"Context")+".Provider";case Jv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Xv:return t=e.displayName||null,t!==null?t:Lp(e.type)||"Memo";case io:t=e._payload,e=e._init;try{return Lp(e(t))}catch{}}return null}function uA(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lp(t);case 8:return t===Yv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Lo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function lS(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function dA(e){var t=lS(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function td(e){e._valueTracker||(e._valueTracker=dA(e))}function cS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=lS(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ah(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Fp(e,t){var n=t.checked;return Qt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function C0(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Lo(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function uS(e,t){t=t.checked,t!=null&&Qv(e,"checked",t,!1)}function zp(e,t){uS(e,t);var n=Lo(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Up(e,t.type,n):t.hasOwnProperty("defaultValue")&&Up(e,t.type,Lo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function _0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Up(e,t,n){(t!=="number"||ah(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var oc=Array.isArray;function _i(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Lo(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Bp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ie(91));return Qt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function E0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ie(92));if(oc(n)){if(1<n.length)throw Error(ie(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Lo(n)}}function dS(e,t){var n=Lo(t.value),r=Lo(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function k0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function hS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?hS(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var nd,fS=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(nd=nd||document.createElement("div"),nd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=nd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Tc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var fc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hA=["Webkit","ms","Moz","O"];Object.keys(fc).forEach(function(e){hA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fc[t]=fc[e]})});function mS(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||fc.hasOwnProperty(e)&&fc[e]?(""+t).trim():t+"px"}function pS(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=mS(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var fA=Qt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vp(e,t){if(t){if(fA[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ie(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ie(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ie(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ie(62))}}function qp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hp=null;function Zv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wp=null,Ei=null,ki=null;function T0(e){if(e=Su(e)){if(typeof Wp!="function")throw Error(ie(280));var t=e.stateNode;t&&(t=pf(t),Wp(e.stateNode,e.type,t))}}function gS(e){Ei?ki?ki.push(e):ki=[e]:Ei=e}function vS(){if(Ei){var e=Ei,t=ki;if(ki=Ei=null,T0(e),t)for(e=0;e<t.length;e++)T0(t[e])}}function yS(e,t){return e(t)}function xS(){}var Pm=!1;function wS(e,t,n){if(Pm)return e(t,n);Pm=!0;try{return yS(e,t,n)}finally{Pm=!1,(Ei!==null||ki!==null)&&(xS(),vS())}}function Rc(e,t){var n=e.stateNode;if(n===null)return null;var r=pf(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ie(231,t,typeof n));return n}var Gp=!1;if(Vs)try{var Wl={};Object.defineProperty(Wl,"passive",{get:function(){Gp=!0}}),window.addEventListener("test",Wl,Wl),window.removeEventListener("test",Wl,Wl)}catch{Gp=!1}function mA(e,t,n,r,s,a,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var mc=!1,ih=null,lh=!1,Qp=null,pA={onError:function(e){mc=!0,ih=e}};function gA(e,t,n,r,s,a,i,l,c){mc=!1,ih=null,mA.apply(pA,arguments)}function vA(e,t,n,r,s,a,i,l,c){if(gA.apply(this,arguments),mc){if(mc){var u=ih;mc=!1,ih=null}else throw Error(ie(198));lh||(lh=!0,Qp=u)}}function Ha(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function bS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function R0(e){if(Ha(e)!==e)throw Error(ie(188))}function yA(e){var t=e.alternate;if(!t){if(t=Ha(e),t===null)throw Error(ie(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return R0(s),e;if(a===r)return R0(s),t;a=a.sibling}throw Error(ie(188))}if(n.return!==r.return)n=s,r=a;else{for(var i=!1,l=s.child;l;){if(l===n){i=!0,n=s,r=a;break}if(l===r){i=!0,r=s,n=a;break}l=l.sibling}if(!i){for(l=a.child;l;){if(l===n){i=!0,n=a,r=s;break}if(l===r){i=!0,r=a,n=s;break}l=l.sibling}if(!i)throw Error(ie(189))}}if(n.alternate!==r)throw Error(ie(190))}if(n.tag!==3)throw Error(ie(188));return n.stateNode.current===n?e:t}function jS(e){return e=yA(e),e!==null?SS(e):null}function SS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=SS(e);if(t!==null)return t;e=e.sibling}return null}var NS=vr.unstable_scheduleCallback,P0=vr.unstable_cancelCallback,xA=vr.unstable_shouldYield,wA=vr.unstable_requestPaint,rn=vr.unstable_now,bA=vr.unstable_getCurrentPriorityLevel,ey=vr.unstable_ImmediatePriority,CS=vr.unstable_UserBlockingPriority,ch=vr.unstable_NormalPriority,jA=vr.unstable_LowPriority,_S=vr.unstable_IdlePriority,df=null,xs=null;function SA(e){if(xs&&typeof xs.onCommitFiberRoot=="function")try{xs.onCommitFiberRoot(df,e,void 0,(e.current.flags&128)===128)}catch{}}var ns=Math.clz32?Math.clz32:_A,NA=Math.log,CA=Math.LN2;function _A(e){return e>>>=0,e===0?32:31-(NA(e)/CA|0)|0}var rd=64,sd=4194304;function ac(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uh(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,i=n&268435455;if(i!==0){var l=i&~s;l!==0?r=ac(l):(a&=i,a!==0&&(r=ac(a)))}else i=n&~s,i!==0?r=ac(i):a!==0&&(r=ac(a));if(r===0)return 0;if(t!==0&&t!==r&&(t&s)===0&&(s=r&-r,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ns(t),s=1<<n,r|=e[n],t&=~s;return r}function EA(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kA(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-ns(a),l=1<<i,c=s[i];c===-1?((l&n)===0||(l&r)!==0)&&(s[i]=EA(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function Yp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ES(){var e=rd;return rd<<=1,(rd&4194240)===0&&(rd=64),e}function Am(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bu(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ns(t),e[t]=n}function TA(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ns(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}function ty(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ns(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Ct=0;function kS(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var TS,ny,RS,PS,AS,Jp=!1,od=[],Eo=null,ko=null,To=null,Pc=new Map,Ac=new Map,uo=[],RA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function A0(e,t){switch(e){case"focusin":case"focusout":Eo=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":To=null;break;case"pointerover":case"pointerout":Pc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ac.delete(t.pointerId)}}function Gl(e,t,n,r,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},t!==null&&(t=Su(t),t!==null&&ny(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function PA(e,t,n,r,s){switch(t){case"focusin":return Eo=Gl(Eo,e,t,n,r,s),!0;case"dragenter":return ko=Gl(ko,e,t,n,r,s),!0;case"mouseover":return To=Gl(To,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return Pc.set(a,Gl(Pc.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Ac.set(a,Gl(Ac.get(a)||null,e,t,n,r,s)),!0}return!1}function OS(e){var t=ha(e.target);if(t!==null){var n=Ha(t);if(n!==null){if(t=n.tag,t===13){if(t=bS(n),t!==null){e.blockedOn=t,AS(e.priority,function(){RS(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Hp=r,n.target.dispatchEvent(r),Hp=null}else return t=Su(n),t!==null&&ny(t),e.blockedOn=n,!1;t.shift()}return!0}function O0(e,t,n){Fd(e)&&n.delete(t)}function AA(){Jp=!1,Eo!==null&&Fd(Eo)&&(Eo=null),ko!==null&&Fd(ko)&&(ko=null),To!==null&&Fd(To)&&(To=null),Pc.forEach(O0),Ac.forEach(O0)}function Ql(e,t){e.blockedOn===t&&(e.blockedOn=null,Jp||(Jp=!0,vr.unstable_scheduleCallback(vr.unstable_NormalPriority,AA)))}function Oc(e){function t(s){return Ql(s,e)}if(0<od.length){Ql(od[0],e);for(var n=1;n<od.length;n++){var r=od[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Eo!==null&&Ql(Eo,e),ko!==null&&Ql(ko,e),To!==null&&Ql(To,e),Pc.forEach(t),Ac.forEach(t),n=0;n<uo.length;n++)r=uo[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<uo.length&&(n=uo[0],n.blockedOn===null);)OS(n),n.blockedOn===null&&uo.shift()}var Ti=Js.ReactCurrentBatchConfig,dh=!0;function OA(e,t,n,r){var s=Ct,a=Ti.transition;Ti.transition=null;try{Ct=1,ry(e,t,n,r)}finally{Ct=s,Ti.transition=a}}function IA(e,t,n,r){var s=Ct,a=Ti.transition;Ti.transition=null;try{Ct=4,ry(e,t,n,r)}finally{Ct=s,Ti.transition=a}}function ry(e,t,n,r){if(dh){var s=Xp(e,t,n,r);if(s===null)Bm(e,t,r,hh,n),A0(e,r);else if(PA(s,e,t,n,r))r.stopPropagation();else if(A0(e,r),t&4&&-1<RA.indexOf(e)){for(;s!==null;){var a=Su(s);if(a!==null&&TS(a),a=Xp(e,t,n,r),a===null&&Bm(e,t,r,hh,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else Bm(e,t,r,null,n)}}var hh=null;function Xp(e,t,n,r){if(hh=null,e=Zv(r),e=ha(e),e!==null)if(t=Ha(e),t===null)e=null;else if(n=t.tag,n===13){if(e=bS(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return hh=e,null}function IS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bA()){case ey:return 1;case CS:return 4;case ch:case jA:return 16;case _S:return 536870912;default:return 16}default:return 16}}var Co=null,sy=null,zd=null;function MS(){if(zd)return zd;var e,t=sy,n=t.length,r,s="value"in Co?Co.value:Co.textContent,a=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===s[a-r];r++);return zd=s.slice(e,1<r?1-r:void 0)}function Ud(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ad(){return!0}function I0(){return!1}function xr(e){function t(n,r,s,a,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ad:I0,this.isPropagationStopped=I0,this}return Qt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ad)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ad)},persist:function(){},isPersistent:ad}),t}var jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oy=xr(jl),ju=Qt({},jl,{view:0,detail:0}),MA=xr(ju),Om,Im,Yl,hf=Qt({},ju,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ay,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yl&&(Yl&&e.type==="mousemove"?(Om=e.screenX-Yl.screenX,Im=e.screenY-Yl.screenY):Im=Om=0,Yl=e),Om)},movementY:function(e){return"movementY"in e?e.movementY:Im}}),M0=xr(hf),DA=Qt({},hf,{dataTransfer:0}),$A=xr(DA),LA=Qt({},ju,{relatedTarget:0}),Mm=xr(LA),FA=Qt({},jl,{animationName:0,elapsedTime:0,pseudoElement:0}),zA=xr(FA),UA=Qt({},jl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),BA=xr(UA),KA=Qt({},jl,{data:0}),D0=xr(KA),VA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WA(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=HA[e])?!!t[e]:!1}function ay(){return WA}var GA=Qt({},ju,{key:function(e){if(e.key){var t=VA[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ud(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qA[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ay,charCode:function(e){return e.type==="keypress"?Ud(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ud(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),QA=xr(GA),YA=Qt({},hf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$0=xr(YA),JA=Qt({},ju,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ay}),XA=xr(JA),ZA=Qt({},jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),eO=xr(ZA),tO=Qt({},hf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),nO=xr(tO),rO=[9,13,27,32],iy=Vs&&"CompositionEvent"in window,pc=null;Vs&&"documentMode"in document&&(pc=document.documentMode);var sO=Vs&&"TextEvent"in window&&!pc,DS=Vs&&(!iy||pc&&8<pc&&11>=pc),L0=" ",F0=!1;function $S(e,t){switch(e){case"keyup":return rO.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mi=!1;function oO(e,t){switch(e){case"compositionend":return LS(t);case"keypress":return t.which!==32?null:(F0=!0,L0);case"textInput":return e=t.data,e===L0&&F0?null:e;default:return null}}function aO(e,t){if(mi)return e==="compositionend"||!iy&&$S(e,t)?(e=MS(),zd=sy=Co=null,mi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return DS&&t.locale!=="ko"?null:t.data;default:return null}}var iO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function z0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!iO[e.type]:t==="textarea"}function FS(e,t,n,r){gS(r),t=fh(t,"onChange"),0<t.length&&(n=new oy("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var gc=null,Ic=null;function lO(e){YS(e,0)}function ff(e){var t=vi(e);if(cS(t))return e}function cO(e,t){if(e==="change")return t}var zS=!1;if(Vs){var Dm;if(Vs){var $m="oninput"in document;if(!$m){var U0=document.createElement("div");U0.setAttribute("oninput","return;"),$m=typeof U0.oninput=="function"}Dm=$m}else Dm=!1;zS=Dm&&(!document.documentMode||9<document.documentMode)}function B0(){gc&&(gc.detachEvent("onpropertychange",US),Ic=gc=null)}function US(e){if(e.propertyName==="value"&&ff(Ic)){var t=[];FS(t,Ic,e,Zv(e)),wS(lO,t)}}function uO(e,t,n){e==="focusin"?(B0(),gc=t,Ic=n,gc.attachEvent("onpropertychange",US)):e==="focusout"&&B0()}function dO(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ff(Ic)}function hO(e,t){if(e==="click")return ff(t)}function fO(e,t){if(e==="input"||e==="change")return ff(t)}function mO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var as=typeof Object.is=="function"?Object.is:mO;function Mc(e,t){if(as(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ip.call(t,s)||!as(e[s],t[s]))return!1}return!0}function K0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function V0(e,t){var n=K0(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=K0(n)}}function BS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?BS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function KS(){for(var e=window,t=ah();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ah(e.document)}return t}function ly(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function pO(e){var t=KS(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&BS(n.ownerDocument.documentElement,n)){if(r!==null&&ly(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=V0(n,a);var i=V0(n,r);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gO=Vs&&"documentMode"in document&&11>=document.documentMode,pi=null,Zp=null,vc=null,eg=!1;function q0(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;eg||pi==null||pi!==ah(r)||(r=pi,"selectionStart"in r&&ly(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vc&&Mc(vc,r)||(vc=r,r=fh(Zp,"onSelect"),0<r.length&&(t=new oy("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pi)))}function id(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var gi={animationend:id("Animation","AnimationEnd"),animationiteration:id("Animation","AnimationIteration"),animationstart:id("Animation","AnimationStart"),transitionend:id("Transition","TransitionEnd")},Lm={},VS={};Vs&&(VS=document.createElement("div").style,"AnimationEvent"in window||(delete gi.animationend.animation,delete gi.animationiteration.animation,delete gi.animationstart.animation),"TransitionEvent"in window||delete gi.transitionend.transition);function mf(e){if(Lm[e])return Lm[e];if(!gi[e])return e;var t=gi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in VS)return Lm[e]=t[n];return e}var qS=mf("animationend"),HS=mf("animationiteration"),WS=mf("animationstart"),GS=mf("transitionend"),QS=new Map,H0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vo(e,t){QS.set(e,t),qa(t,[e])}for(var Fm=0;Fm<H0.length;Fm++){var zm=H0[Fm],vO=zm.toLowerCase(),yO=zm[0].toUpperCase()+zm.slice(1);Vo(vO,"on"+yO)}Vo(qS,"onAnimationEnd");Vo(HS,"onAnimationIteration");Vo(WS,"onAnimationStart");Vo("dblclick","onDoubleClick");Vo("focusin","onFocus");Vo("focusout","onBlur");Vo(GS,"onTransitionEnd");nl("onMouseEnter",["mouseout","mouseover"]);nl("onMouseLeave",["mouseout","mouseover"]);nl("onPointerEnter",["pointerout","pointerover"]);nl("onPointerLeave",["pointerout","pointerover"]);qa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qa("onBeforeInput",["compositionend","keypress","textInput","paste"]);qa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xO=new Set("cancel close invalid load scroll toggle".split(" ").concat(ic));function W0(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,vA(r,t,void 0,e),e.currentTarget=null}function YS(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;W0(s,l,u),a=c}else for(i=0;i<r.length;i++){if(l=r[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;W0(s,l,u),a=c}}}if(lh)throw e=Qp,lh=!1,Qp=null,e}function Mt(e,t){var n=t[og];n===void 0&&(n=t[og]=new Set);var r=e+"__bubble";n.has(r)||(JS(t,e,2,!1),n.add(r))}function Um(e,t,n){var r=0;t&&(r|=4),JS(n,e,r,t)}var ld="_reactListening"+Math.random().toString(36).slice(2);function Dc(e){if(!e[ld]){e[ld]=!0,sS.forEach(function(n){n!=="selectionchange"&&(xO.has(n)||Um(n,!1,e),Um(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ld]||(t[ld]=!0,Um("selectionchange",!1,t))}}function JS(e,t,n,r){switch(IS(t)){case 1:var s=OA;break;case 4:s=IA;break;default:s=ry}n=s.bind(null,t,n,e),s=void 0,!Gp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Bm(e,t,n,r,s){var a=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;l!==null;){if(i=ha(l),i===null)return;if(c=i.tag,c===5||c===6){r=a=i;continue e}l=l.parentNode}}r=r.return}wS(function(){var u=a,h=Zv(n),f=[];e:{var m=QS.get(e);if(m!==void 0){var p=oy,x=e;switch(e){case"keypress":if(Ud(n)===0)break e;case"keydown":case"keyup":p=QA;break;case"focusin":x="focus",p=Mm;break;case"focusout":x="blur",p=Mm;break;case"beforeblur":case"afterblur":p=Mm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=M0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=$A;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=XA;break;case qS:case HS:case WS:p=zA;break;case GS:p=eO;break;case"scroll":p=MA;break;case"wheel":p=nO;break;case"copy":case"cut":case"paste":p=BA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=$0}var g=(t&4)!==0,y=!g&&e==="scroll",w=g?m!==null?m+"Capture":null:m;g=[];for(var v=u,b;v!==null;){b=v;var j=b.stateNode;if(b.tag===5&&j!==null&&(b=j,w!==null&&(j=Rc(v,w),j!=null&&g.push($c(v,j,b)))),y)break;v=v.return}0<g.length&&(m=new p(m,x,null,n,h),f.push({event:m,listeners:g}))}}if((t&7)===0){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&n!==Hp&&(x=n.relatedTarget||n.fromElement)&&(ha(x)||x[qs]))break e;if((p||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,p?(x=n.relatedTarget||n.toElement,p=u,x=x?ha(x):null,x!==null&&(y=Ha(x),x!==y||x.tag!==5&&x.tag!==6)&&(x=null)):(p=null,x=u),p!==x)){if(g=M0,j="onMouseLeave",w="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=$0,j="onPointerLeave",w="onPointerEnter",v="pointer"),y=p==null?m:vi(p),b=x==null?m:vi(x),m=new g(j,v+"leave",p,n,h),m.target=y,m.relatedTarget=b,j=null,ha(h)===u&&(g=new g(w,v+"enter",x,n,h),g.target=b,g.relatedTarget=y,j=g),y=j,p&&x)t:{for(g=p,w=x,v=0,b=g;b;b=Za(b))v++;for(b=0,j=w;j;j=Za(j))b++;for(;0<v-b;)g=Za(g),v--;for(;0<b-v;)w=Za(w),b--;for(;v--;){if(g===w||w!==null&&g===w.alternate)break t;g=Za(g),w=Za(w)}g=null}else g=null;p!==null&&G0(f,m,p,g,!1),x!==null&&y!==null&&G0(f,y,x,g,!0)}}e:{if(m=u?vi(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var S=cO;else if(z0(m))if(zS)S=fO;else{S=dO;var C=uO}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=hO);if(S&&(S=S(e,u))){FS(f,S,n,h);break e}C&&C(e,m,u),e==="focusout"&&(C=m._wrapperState)&&C.controlled&&m.type==="number"&&Up(m,"number",m.value)}switch(C=u?vi(u):window,e){case"focusin":(z0(C)||C.contentEditable==="true")&&(pi=C,Zp=u,vc=null);break;case"focusout":vc=Zp=pi=null;break;case"mousedown":eg=!0;break;case"contextmenu":case"mouseup":case"dragend":eg=!1,q0(f,n,h);break;case"selectionchange":if(gO)break;case"keydown":case"keyup":q0(f,n,h)}var N;if(iy)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else mi?$S(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(DS&&n.locale!=="ko"&&(mi||_!=="onCompositionStart"?_==="onCompositionEnd"&&mi&&(N=MS()):(Co=h,sy="value"in Co?Co.value:Co.textContent,mi=!0)),C=fh(u,_),0<C.length&&(_=new D0(_,e,null,n,h),f.push({event:_,listeners:C}),N?_.data=N:(N=LS(n),N!==null&&(_.data=N)))),(N=sO?oO(e,n):aO(e,n))&&(u=fh(u,"onBeforeInput"),0<u.length&&(h=new D0("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=N))}YS(f,t)})}function $c(e,t,n){return{instance:e,listener:t,currentTarget:n}}function fh(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Rc(e,n),a!=null&&r.unshift($c(e,a,s)),a=Rc(e,t),a!=null&&r.push($c(e,a,s))),e=e.return}return r}function Za(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function G0(e,t,n,r,s){for(var a=t._reactName,i=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Rc(n,a),c!=null&&i.unshift($c(n,c,l))):s||(c=Rc(n,a),c!=null&&i.push($c(n,c,l)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var wO=/\r\n?/g,bO=/\u0000|\uFFFD/g;function Q0(e){return(typeof e=="string"?e:""+e).replace(wO,`
`).replace(bO,"")}function cd(e,t,n){if(t=Q0(t),Q0(e)!==t&&n)throw Error(ie(425))}function mh(){}var tg=null,ng=null;function rg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var sg=typeof setTimeout=="function"?setTimeout:void 0,jO=typeof clearTimeout=="function"?clearTimeout:void 0,Y0=typeof Promise=="function"?Promise:void 0,SO=typeof queueMicrotask=="function"?queueMicrotask:typeof Y0<"u"?function(e){return Y0.resolve(null).then(e).catch(NO)}:sg;function NO(e){setTimeout(function(){throw e})}function Km(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Oc(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Oc(t)}function Ro(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function J0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Sl=Math.random().toString(36).slice(2),vs="__reactFiber$"+Sl,Lc="__reactProps$"+Sl,qs="__reactContainer$"+Sl,og="__reactEvents$"+Sl,CO="__reactListeners$"+Sl,_O="__reactHandles$"+Sl;function ha(e){var t=e[vs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qs]||n[vs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=J0(e);e!==null;){if(n=e[vs])return n;e=J0(e)}return t}e=n,n=e.parentNode}return null}function Su(e){return e=e[vs]||e[qs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ie(33))}function pf(e){return e[Lc]||null}var ag=[],yi=-1;function qo(e){return{current:e}}function Dt(e){0>yi||(e.current=ag[yi],ag[yi]=null,yi--)}function Ot(e,t){yi++,ag[yi]=e.current,e.current=t}var Fo={},In=qo(Fo),Zn=qo(!1),Pa=Fo;function rl(e,t){var n=e.type.contextTypes;if(!n)return Fo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function er(e){return e=e.childContextTypes,e!=null}function ph(){Dt(Zn),Dt(In)}function X0(e,t,n){if(In.current!==Fo)throw Error(ie(168));Ot(In,t),Ot(Zn,n)}function XS(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(ie(108,uA(e)||"Unknown",s));return Qt({},n,r)}function gh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fo,Pa=In.current,Ot(In,e),Ot(Zn,Zn.current),!0}function Z0(e,t,n){var r=e.stateNode;if(!r)throw Error(ie(169));n?(e=XS(e,t,Pa),r.__reactInternalMemoizedMergedChildContext=e,Dt(Zn),Dt(In),Ot(In,e)):Dt(Zn),Ot(Zn,n)}var Os=null,gf=!1,Vm=!1;function ZS(e){Os===null?Os=[e]:Os.push(e)}function EO(e){gf=!0,ZS(e)}function Ho(){if(!Vm&&Os!==null){Vm=!0;var e=0,t=Ct;try{var n=Os;for(Ct=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Os=null,gf=!1}catch(s){throw Os!==null&&(Os=Os.slice(e+1)),NS(ey,Ho),s}finally{Ct=t,Vm=!1}}return null}var xi=[],wi=0,vh=null,yh=0,kr=[],Tr=0,Aa=null,Ls=1,Fs="";function ra(e,t){xi[wi++]=yh,xi[wi++]=vh,vh=e,yh=t}function eN(e,t,n){kr[Tr++]=Ls,kr[Tr++]=Fs,kr[Tr++]=Aa,Aa=e;var r=Ls;e=Fs;var s=32-ns(r)-1;r&=~(1<<s),n+=1;var a=32-ns(t)+s;if(30<a){var i=s-s%5;a=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Ls=1<<32-ns(t)+s|n<<s|r,Fs=a+e}else Ls=1<<a|n<<s|r,Fs=e}function cy(e){e.return!==null&&(ra(e,1),eN(e,1,0))}function uy(e){for(;e===vh;)vh=xi[--wi],xi[wi]=null,yh=xi[--wi],xi[wi]=null;for(;e===Aa;)Aa=kr[--Tr],kr[Tr]=null,Fs=kr[--Tr],kr[Tr]=null,Ls=kr[--Tr],kr[Tr]=null}var mr=null,fr=null,Bt=!1,Xr=null;function tN(e,t){var n=Or(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ew(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,mr=e,fr=Ro(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,mr=e,fr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Aa!==null?{id:Ls,overflow:Fs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Or(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,mr=e,fr=null,!0):!1;default:return!1}}function ig(e){return(e.mode&1)!==0&&(e.flags&128)===0}function lg(e){if(Bt){var t=fr;if(t){var n=t;if(!ew(e,t)){if(ig(e))throw Error(ie(418));t=Ro(n.nextSibling);var r=mr;t&&ew(e,t)?tN(r,n):(e.flags=e.flags&-4097|2,Bt=!1,mr=e)}}else{if(ig(e))throw Error(ie(418));e.flags=e.flags&-4097|2,Bt=!1,mr=e}}}function tw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;mr=e}function ud(e){if(e!==mr)return!1;if(!Bt)return tw(e),Bt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!rg(e.type,e.memoizedProps)),t&&(t=fr)){if(ig(e))throw nN(),Error(ie(418));for(;t;)tN(e,t),t=Ro(t.nextSibling)}if(tw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ie(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){fr=Ro(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}fr=null}}else fr=mr?Ro(e.stateNode.nextSibling):null;return!0}function nN(){for(var e=fr;e;)e=Ro(e.nextSibling)}function sl(){fr=mr=null,Bt=!1}function dy(e){Xr===null?Xr=[e]:Xr.push(e)}var kO=Js.ReactCurrentBatchConfig;function Jl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ie(309));var r=n.stateNode}if(!r)throw Error(ie(147,e));var s=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var l=s.refs;i===null?delete l[a]:l[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(ie(284));if(!n._owner)throw Error(ie(290,e))}return e}function dd(e,t){throw e=Object.prototype.toString.call(t),Error(ie(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nw(e){var t=e._init;return t(e._payload)}function rN(e){function t(w,v){if(e){var b=w.deletions;b===null?(w.deletions=[v],w.flags|=16):b.push(v)}}function n(w,v){if(!e)return null;for(;v!==null;)t(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function s(w,v){return w=Io(w,v),w.index=0,w.sibling=null,w}function a(w,v,b){return w.index=b,e?(b=w.alternate,b!==null?(b=b.index,b<v?(w.flags|=2,v):b):(w.flags|=2,v)):(w.flags|=1048576,v)}function i(w){return e&&w.alternate===null&&(w.flags|=2),w}function l(w,v,b,j){return v===null||v.tag!==6?(v=Jm(b,w.mode,j),v.return=w,v):(v=s(v,b),v.return=w,v)}function c(w,v,b,j){var S=b.type;return S===fi?h(w,v,b.props.children,j,b.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===io&&nw(S)===v.type)?(j=s(v,b.props),j.ref=Jl(w,v,b),j.return=w,j):(j=Gd(b.type,b.key,b.props,null,w.mode,j),j.ref=Jl(w,v,b),j.return=w,j)}function u(w,v,b,j){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Xm(b,w.mode,j),v.return=w,v):(v=s(v,b.children||[]),v.return=w,v)}function h(w,v,b,j,S){return v===null||v.tag!==7?(v=Ea(b,w.mode,j,S),v.return=w,v):(v=s(v,b),v.return=w,v)}function f(w,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Jm(""+v,w.mode,b),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ed:return b=Gd(v.type,v.key,v.props,null,w.mode,b),b.ref=Jl(w,null,v),b.return=w,b;case hi:return v=Xm(v,w.mode,b),v.return=w,v;case io:var j=v._init;return f(w,j(v._payload),b)}if(oc(v)||Hl(v))return v=Ea(v,w.mode,b,null),v.return=w,v;dd(w,v)}return null}function m(w,v,b,j){var S=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:l(w,v,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ed:return b.key===S?c(w,v,b,j):null;case hi:return b.key===S?u(w,v,b,j):null;case io:return S=b._init,m(w,v,S(b._payload),j)}if(oc(b)||Hl(b))return S!==null?null:h(w,v,b,j,null);dd(w,b)}return null}function p(w,v,b,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return w=w.get(b)||null,l(v,w,""+j,S);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ed:return w=w.get(j.key===null?b:j.key)||null,c(v,w,j,S);case hi:return w=w.get(j.key===null?b:j.key)||null,u(v,w,j,S);case io:var C=j._init;return p(w,v,b,C(j._payload),S)}if(oc(j)||Hl(j))return w=w.get(b)||null,h(v,w,j,S,null);dd(v,j)}return null}function x(w,v,b,j){for(var S=null,C=null,N=v,_=v=0,E=null;N!==null&&_<b.length;_++){N.index>_?(E=N,N=null):E=N.sibling;var M=m(w,N,b[_],j);if(M===null){N===null&&(N=E);break}e&&N&&M.alternate===null&&t(w,N),v=a(M,v,_),C===null?S=M:C.sibling=M,C=M,N=E}if(_===b.length)return n(w,N),Bt&&ra(w,_),S;if(N===null){for(;_<b.length;_++)N=f(w,b[_],j),N!==null&&(v=a(N,v,_),C===null?S=N:C.sibling=N,C=N);return Bt&&ra(w,_),S}for(N=r(w,N);_<b.length;_++)E=p(N,w,_,b[_],j),E!==null&&(e&&E.alternate!==null&&N.delete(E.key===null?_:E.key),v=a(E,v,_),C===null?S=E:C.sibling=E,C=E);return e&&N.forEach(function(T){return t(w,T)}),Bt&&ra(w,_),S}function g(w,v,b,j){var S=Hl(b);if(typeof S!="function")throw Error(ie(150));if(b=S.call(b),b==null)throw Error(ie(151));for(var C=S=null,N=v,_=v=0,E=null,M=b.next();N!==null&&!M.done;_++,M=b.next()){N.index>_?(E=N,N=null):E=N.sibling;var T=m(w,N,M.value,j);if(T===null){N===null&&(N=E);break}e&&N&&T.alternate===null&&t(w,N),v=a(T,v,_),C===null?S=T:C.sibling=T,C=T,N=E}if(M.done)return n(w,N),Bt&&ra(w,_),S;if(N===null){for(;!M.done;_++,M=b.next())M=f(w,M.value,j),M!==null&&(v=a(M,v,_),C===null?S=M:C.sibling=M,C=M);return Bt&&ra(w,_),S}for(N=r(w,N);!M.done;_++,M=b.next())M=p(N,w,_,M.value,j),M!==null&&(e&&M.alternate!==null&&N.delete(M.key===null?_:M.key),v=a(M,v,_),C===null?S=M:C.sibling=M,C=M);return e&&N.forEach(function(R){return t(w,R)}),Bt&&ra(w,_),S}function y(w,v,b,j){if(typeof b=="object"&&b!==null&&b.type===fi&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ed:e:{for(var S=b.key,C=v;C!==null;){if(C.key===S){if(S=b.type,S===fi){if(C.tag===7){n(w,C.sibling),v=s(C,b.props.children),v.return=w,w=v;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===io&&nw(S)===C.type){n(w,C.sibling),v=s(C,b.props),v.ref=Jl(w,C,b),v.return=w,w=v;break e}n(w,C);break}else t(w,C);C=C.sibling}b.type===fi?(v=Ea(b.props.children,w.mode,j,b.key),v.return=w,w=v):(j=Gd(b.type,b.key,b.props,null,w.mode,j),j.ref=Jl(w,v,b),j.return=w,w=j)}return i(w);case hi:e:{for(C=b.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(w,v.sibling),v=s(v,b.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else t(w,v);v=v.sibling}v=Xm(b,w.mode,j),v.return=w,w=v}return i(w);case io:return C=b._init,y(w,v,C(b._payload),j)}if(oc(b))return x(w,v,b,j);if(Hl(b))return g(w,v,b,j);dd(w,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(w,v.sibling),v=s(v,b),v.return=w,w=v):(n(w,v),v=Jm(b,w.mode,j),v.return=w,w=v),i(w)):n(w,v)}return y}var ol=rN(!0),sN=rN(!1),xh=qo(null),wh=null,bi=null,hy=null;function fy(){hy=bi=wh=null}function my(e){var t=xh.current;Dt(xh),e._currentValue=t}function cg(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ri(e,t){wh=e,hy=bi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Jn=!0),e.firstContext=null)}function $r(e){var t=e._currentValue;if(hy!==e)if(e={context:e,memoizedValue:t,next:null},bi===null){if(wh===null)throw Error(ie(308));bi=e,wh.dependencies={lanes:0,firstContext:e}}else bi=bi.next=e;return t}var fa=null;function py(e){fa===null?fa=[e]:fa.push(e)}function oN(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,py(t)):(n.next=s.next,s.next=n),t.interleaved=n,Hs(e,r)}function Hs(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var lo=!1;function gy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aN(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Po(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(ht&2)!==0){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Hs(e,n)}return s=r.interleaved,s===null?(t.next=t,py(r)):(t.next=s.next,s.next=t),r.interleaved=t,Hs(e,n)}function Bd(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ty(e,n)}}function rw(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=i:a=a.next=i,n=n.next}while(n!==null);a===null?s=a=t:a=a.next=t}else s=a=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function bh(e,t,n,r){var s=e.updateQueue;lo=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?a=u:i.next=u,i=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==i&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(a!==null){var f=s.baseState;i=0,h=u=c=null,l=a;do{var m=l.lane,p=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,g=l;switch(m=t,p=n,g.tag){case 1:if(x=g.payload,typeof x=="function"){f=x.call(p,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,m=typeof x=="function"?x.call(p,f,m):x,m==null)break e;f=Qt({},f,m);break e;case 2:lo=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=p,c=f):h=h.next=p,i|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);Ia|=i,e.lanes=i,e.memoizedState=f}}function sw(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ie(191,s));s.call(r)}}}var Nu={},ws=qo(Nu),Fc=qo(Nu),zc=qo(Nu);function ma(e){if(e===Nu)throw Error(ie(174));return e}function vy(e,t){switch(Ot(zc,t),Ot(Fc,e),Ot(ws,Nu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Kp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Kp(t,e)}Dt(ws),Ot(ws,t)}function al(){Dt(ws),Dt(Fc),Dt(zc)}function iN(e){ma(zc.current);var t=ma(ws.current),n=Kp(t,e.type);t!==n&&(Ot(Fc,e),Ot(ws,n))}function yy(e){Fc.current===e&&(Dt(ws),Dt(Fc))}var Vt=qo(0);function jh(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qm=[];function xy(){for(var e=0;e<qm.length;e++)qm[e]._workInProgressVersionPrimary=null;qm.length=0}var Kd=Js.ReactCurrentDispatcher,Hm=Js.ReactCurrentBatchConfig,Oa=0,Gt=null,cn=null,fn=null,Sh=!1,yc=!1,Uc=0,TO=0;function _n(){throw Error(ie(321))}function wy(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!as(e[n],t[n]))return!1;return!0}function by(e,t,n,r,s,a){if(Oa=a,Gt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Kd.current=e===null||e.memoizedState===null?OO:IO,e=n(r,s),yc){a=0;do{if(yc=!1,Uc=0,25<=a)throw Error(ie(301));a+=1,fn=cn=null,t.updateQueue=null,Kd.current=MO,e=n(r,s)}while(yc)}if(Kd.current=Nh,t=cn!==null&&cn.next!==null,Oa=0,fn=cn=Gt=null,Sh=!1,t)throw Error(ie(300));return e}function jy(){var e=Uc!==0;return Uc=0,e}function fs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Gt.memoizedState=fn=e:fn=fn.next=e,fn}function Lr(){if(cn===null){var e=Gt.alternate;e=e!==null?e.memoizedState:null}else e=cn.next;var t=fn===null?Gt.memoizedState:fn.next;if(t!==null)fn=t,cn=e;else{if(e===null)throw Error(ie(310));cn=e,e={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},fn===null?Gt.memoizedState=fn=e:fn=fn.next=e}return fn}function Bc(e,t){return typeof t=="function"?t(e):t}function Wm(e){var t=Lr(),n=t.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=e;var r=cn,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var i=s.next;s.next=a.next,a.next=i}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var l=i=null,c=null,u=a;do{var h=u.lane;if((Oa&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,i=r):c=c.next=f,Gt.lanes|=h,Ia|=h}u=u.next}while(u!==null&&u!==a);c===null?i=r:c.next=l,as(r,t.memoizedState)||(Jn=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do a=s.lane,Gt.lanes|=a,Ia|=a,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Gm(e){var t=Lr(),n=t.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do a=e(a,i.action),i=i.next;while(i!==s);as(a,t.memoizedState)||(Jn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function lN(){}function cN(e,t){var n=Gt,r=Lr(),s=t(),a=!as(r.memoizedState,s);if(a&&(r.memoizedState=s,Jn=!0),r=r.queue,Sy(hN.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||fn!==null&&fn.memoizedState.tag&1){if(n.flags|=2048,Kc(9,dN.bind(null,n,r,s,t),void 0,null),gn===null)throw Error(ie(349));(Oa&30)!==0||uN(n,t,s)}return s}function uN(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Gt.updateQueue,t===null?(t={lastEffect:null,stores:null},Gt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function dN(e,t,n,r){t.value=n,t.getSnapshot=r,fN(t)&&mN(e)}function hN(e,t,n){return n(function(){fN(t)&&mN(e)})}function fN(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!as(e,n)}catch{return!0}}function mN(e){var t=Hs(e,1);t!==null&&rs(t,e,1,-1)}function ow(e){var t=fs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bc,lastRenderedState:e},t.queue=e,e=e.dispatch=AO.bind(null,Gt,e),[t.memoizedState,e]}function Kc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Gt.updateQueue,t===null?(t={lastEffect:null,stores:null},Gt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function pN(){return Lr().memoizedState}function Vd(e,t,n,r){var s=fs();Gt.flags|=e,s.memoizedState=Kc(1|t,n,void 0,r===void 0?null:r)}function vf(e,t,n,r){var s=Lr();r=r===void 0?null:r;var a=void 0;if(cn!==null){var i=cn.memoizedState;if(a=i.destroy,r!==null&&wy(r,i.deps)){s.memoizedState=Kc(t,n,a,r);return}}Gt.flags|=e,s.memoizedState=Kc(1|t,n,a,r)}function aw(e,t){return Vd(8390656,8,e,t)}function Sy(e,t){return vf(2048,8,e,t)}function gN(e,t){return vf(4,2,e,t)}function vN(e,t){return vf(4,4,e,t)}function yN(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xN(e,t,n){return n=n!=null?n.concat([e]):null,vf(4,4,yN.bind(null,t,e),n)}function Ny(){}function wN(e,t){var n=Lr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&wy(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function bN(e,t){var n=Lr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&wy(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function jN(e,t,n){return(Oa&21)===0?(e.baseState&&(e.baseState=!1,Jn=!0),e.memoizedState=n):(as(n,t)||(n=ES(),Gt.lanes|=n,Ia|=n,e.baseState=!0),t)}function RO(e,t){var n=Ct;Ct=n!==0&&4>n?n:4,e(!0);var r=Hm.transition;Hm.transition={};try{e(!1),t()}finally{Ct=n,Hm.transition=r}}function SN(){return Lr().memoizedState}function PO(e,t,n){var r=Oo(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},NN(e))CN(t,n);else if(n=oN(e,t,n,r),n!==null){var s=zn();rs(n,e,r,s),_N(n,t,r)}}function AO(e,t,n){var r=Oo(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(NN(e))CN(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,l=a(i,n);if(s.hasEagerState=!0,s.eagerState=l,as(l,i)){var c=t.interleaved;c===null?(s.next=s,py(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=oN(e,t,s,r),n!==null&&(s=zn(),rs(n,e,r,s),_N(n,t,r))}}function NN(e){var t=e.alternate;return e===Gt||t!==null&&t===Gt}function CN(e,t){yc=Sh=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function _N(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ty(e,n)}}var Nh={readContext:$r,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useInsertionEffect:_n,useLayoutEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useMutableSource:_n,useSyncExternalStore:_n,useId:_n,unstable_isNewReconciler:!1},OO={readContext:$r,useCallback:function(e,t){return fs().memoizedState=[e,t===void 0?null:t],e},useContext:$r,useEffect:aw,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Vd(4194308,4,yN.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vd(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vd(4,2,e,t)},useMemo:function(e,t){var n=fs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=fs();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=PO.bind(null,Gt,e),[r.memoizedState,e]},useRef:function(e){var t=fs();return e={current:e},t.memoizedState=e},useState:ow,useDebugValue:Ny,useDeferredValue:function(e){return fs().memoizedState=e},useTransition:function(){var e=ow(!1),t=e[0];return e=RO.bind(null,e[1]),fs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Gt,s=fs();if(Bt){if(n===void 0)throw Error(ie(407));n=n()}else{if(n=t(),gn===null)throw Error(ie(349));(Oa&30)!==0||uN(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,aw(hN.bind(null,r,a,e),[e]),r.flags|=2048,Kc(9,dN.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=fs(),t=gn.identifierPrefix;if(Bt){var n=Fs,r=Ls;n=(r&~(1<<32-ns(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Uc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=TO++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},IO={readContext:$r,useCallback:wN,useContext:$r,useEffect:Sy,useImperativeHandle:xN,useInsertionEffect:gN,useLayoutEffect:vN,useMemo:bN,useReducer:Wm,useRef:pN,useState:function(){return Wm(Bc)},useDebugValue:Ny,useDeferredValue:function(e){var t=Lr();return jN(t,cn.memoizedState,e)},useTransition:function(){var e=Wm(Bc)[0],t=Lr().memoizedState;return[e,t]},useMutableSource:lN,useSyncExternalStore:cN,useId:SN,unstable_isNewReconciler:!1},MO={readContext:$r,useCallback:wN,useContext:$r,useEffect:Sy,useImperativeHandle:xN,useInsertionEffect:gN,useLayoutEffect:vN,useMemo:bN,useReducer:Gm,useRef:pN,useState:function(){return Gm(Bc)},useDebugValue:Ny,useDeferredValue:function(e){var t=Lr();return cn===null?t.memoizedState=e:jN(t,cn.memoizedState,e)},useTransition:function(){var e=Gm(Bc)[0],t=Lr().memoizedState;return[e,t]},useMutableSource:lN,useSyncExternalStore:cN,useId:SN,unstable_isNewReconciler:!1};function Wr(e,t){if(e&&e.defaultProps){t=Qt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ug(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Qt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var yf={isMounted:function(e){return(e=e._reactInternals)?Ha(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=zn(),s=Oo(e),a=zs(r,s);a.payload=t,n!=null&&(a.callback=n),t=Po(e,a,s),t!==null&&(rs(t,e,s,r),Bd(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=zn(),s=Oo(e),a=zs(r,s);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Po(e,a,s),t!==null&&(rs(t,e,s,r),Bd(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=zn(),r=Oo(e),s=zs(n,r);s.tag=2,t!=null&&(s.callback=t),t=Po(e,s,r),t!==null&&(rs(t,e,r,n),Bd(t,e,r))}};function iw(e,t,n,r,s,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,i):t.prototype&&t.prototype.isPureReactComponent?!Mc(n,r)||!Mc(s,a):!0}function EN(e,t,n){var r=!1,s=Fo,a=t.contextType;return typeof a=="object"&&a!==null?a=$r(a):(s=er(t)?Pa:In.current,r=t.contextTypes,a=(r=r!=null)?rl(e,s):Fo),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yf,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function lw(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&yf.enqueueReplaceState(t,t.state,null)}function dg(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},gy(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=$r(a):(a=er(t)?Pa:In.current,s.context=rl(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(ug(e,t,a,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&yf.enqueueReplaceState(s,s.state,null),bh(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function il(e,t){try{var n="",r=t;do n+=cA(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function Qm(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function hg(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var DO=typeof WeakMap=="function"?WeakMap:Map;function kN(e,t,n){n=zs(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){_h||(_h=!0,jg=r),hg(e,t)},n}function TN(e,t,n){n=zs(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){hg(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){hg(e,t),typeof r!="function"&&(Ao===null?Ao=new Set([this]):Ao.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function cw(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new DO;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=YO.bind(null,e,t,n),t.then(e,e))}function uw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function dw(e,t,n,r,s){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=zs(-1,1),t.tag=2,Po(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var $O=Js.ReactCurrentOwner,Jn=!1;function Ln(e,t,n,r){t.child=e===null?sN(t,null,n,r):ol(t,e.child,n,r)}function hw(e,t,n,r,s){n=n.render;var a=t.ref;return Ri(t,s),r=by(e,t,n,r,a,s),n=jy(),e!==null&&!Jn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ws(e,t,s)):(Bt&&n&&cy(t),t.flags|=1,Ln(e,t,r,s),t.child)}function fw(e,t,n,r,s){if(e===null){var a=n.type;return typeof a=="function"&&!Ay(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,RN(e,t,a,r,s)):(e=Gd(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,(e.lanes&s)===0){var i=a.memoizedProps;if(n=n.compare,n=n!==null?n:Mc,n(i,r)&&e.ref===t.ref)return Ws(e,t,s)}return t.flags|=1,e=Io(a,r),e.ref=t.ref,e.return=t,t.child=e}function RN(e,t,n,r,s){if(e!==null){var a=e.memoizedProps;if(Mc(a,r)&&e.ref===t.ref)if(Jn=!1,t.pendingProps=r=a,(e.lanes&s)!==0)(e.flags&131072)!==0&&(Jn=!0);else return t.lanes=e.lanes,Ws(e,t,s)}return fg(e,t,n,r,s)}function PN(e,t,n){var r=t.pendingProps,s=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ot(Si,ir),ir|=n;else{if((n&1073741824)===0)return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ot(Si,ir),ir|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Ot(Si,ir),ir|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ot(Si,ir),ir|=r;return Ln(e,t,s,n),t.child}function AN(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function fg(e,t,n,r,s){var a=er(n)?Pa:In.current;return a=rl(t,a),Ri(t,s),n=by(e,t,n,r,a,s),r=jy(),e!==null&&!Jn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ws(e,t,s)):(Bt&&r&&cy(t),t.flags|=1,Ln(e,t,n,s),t.child)}function mw(e,t,n,r,s){if(er(n)){var a=!0;gh(t)}else a=!1;if(Ri(t,s),t.stateNode===null)qd(e,t),EN(t,n,r),dg(t,n,r,s),r=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=$r(u):(u=er(n)?Pa:In.current,u=rl(t,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||c!==u)&&lw(t,i,r,u),lo=!1;var m=t.memoizedState;i.state=m,bh(t,r,i,s),c=t.memoizedState,l!==r||m!==c||Zn.current||lo?(typeof h=="function"&&(ug(t,n,h,r),c=t.memoizedState),(l=lo||iw(t,n,l,r,m,c,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=u,r=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,aN(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Wr(t.type,l),i.props=u,f=t.pendingProps,m=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=$r(c):(c=er(n)?Pa:In.current,c=rl(t,c));var p=n.getDerivedStateFromProps;(h=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==f||m!==c)&&lw(t,i,r,c),lo=!1,m=t.memoizedState,i.state=m,bh(t,r,i,s);var x=t.memoizedState;l!==f||m!==x||Zn.current||lo?(typeof p=="function"&&(ug(t,n,p,r),x=t.memoizedState),(u=lo||iw(t,n,u,r,m,x,c)||!1)?(h||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,x,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,x,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),i.props=r,i.state=x,i.context=c,r=u):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return mg(e,t,n,r,a,s)}function mg(e,t,n,r,s,a){AN(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return s&&Z0(t,n,!1),Ws(e,t,a);r=t.stateNode,$O.current=t;var l=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=ol(t,e.child,null,a),t.child=ol(t,null,l,a)):Ln(e,t,l,a),t.memoizedState=r.state,s&&Z0(t,n,!0),t.child}function ON(e){var t=e.stateNode;t.pendingContext?X0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&X0(e,t.context,!1),vy(e,t.containerInfo)}function pw(e,t,n,r,s){return sl(),dy(s),t.flags|=256,Ln(e,t,n,r),t.child}var pg={dehydrated:null,treeContext:null,retryLane:0};function gg(e){return{baseLanes:e,cachePool:null,transitions:null}}function IN(e,t,n){var r=t.pendingProps,s=Vt.current,a=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ot(Vt,s&1),e===null)return lg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(i=r.children,e=r.fallback,a?(r=t.mode,a=t.child,i={mode:"hidden",children:i},(r&1)===0&&a!==null?(a.childLanes=0,a.pendingProps=i):a=bf(i,r,0,null),e=Ea(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=gg(n),t.memoizedState=pg,e):Cy(t,i));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return LO(e,t,i,r,l,s,n);if(a){a=r.fallback,i=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return(i&1)===0&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Io(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Io(l,a):(a=Ea(a,i,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,i=e.child.memoizedState,i=i===null?gg(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~n,t.memoizedState=pg,r}return a=e.child,e=a.sibling,r=Io(a,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Cy(e,t){return t=bf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function hd(e,t,n,r){return r!==null&&dy(r),ol(t,e.child,null,n),e=Cy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function LO(e,t,n,r,s,a,i){if(n)return t.flags&256?(t.flags&=-257,r=Qm(Error(ie(422))),hd(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=bf({mode:"visible",children:r.children},s,0,null),a=Ea(a,s,i,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,(t.mode&1)!==0&&ol(t,e.child,null,i),t.child.memoizedState=gg(i),t.memoizedState=pg,a);if((t.mode&1)===0)return hd(e,t,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(ie(419)),r=Qm(a,r,void 0),hd(e,t,i,r)}if(l=(i&e.childLanes)!==0,Jn||l){if(r=gn,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=(s&(r.suspendedLanes|i))!==0?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Hs(e,s),rs(r,e,s,-1))}return Py(),r=Qm(Error(ie(421))),hd(e,t,i,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=JO.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,fr=Ro(s.nextSibling),mr=t,Bt=!0,Xr=null,e!==null&&(kr[Tr++]=Ls,kr[Tr++]=Fs,kr[Tr++]=Aa,Ls=e.id,Fs=e.overflow,Aa=t),t=Cy(t,r.children),t.flags|=4096,t)}function gw(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),cg(e.return,t,n)}function Ym(e,t,n,r,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function MN(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(Ln(e,t,r.children,n),r=Vt.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gw(e,n,t);else if(e.tag===19)gw(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ot(Vt,r),(t.mode&1)===0)t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&jh(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ym(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&jh(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ym(t,!0,n,null,a);break;case"together":Ym(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qd(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ia|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(ie(153));if(t.child!==null){for(e=t.child,n=Io(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Io(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function FO(e,t,n){switch(t.tag){case 3:ON(t),sl();break;case 5:iN(t);break;case 1:er(t.type)&&gh(t);break;case 4:vy(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ot(xh,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ot(Vt,Vt.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?IN(e,t,n):(Ot(Vt,Vt.current&1),e=Ws(e,t,n),e!==null?e.sibling:null);Ot(Vt,Vt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return MN(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ot(Vt,Vt.current),r)break;return null;case 22:case 23:return t.lanes=0,PN(e,t,n)}return Ws(e,t,n)}var DN,vg,$N,LN;DN=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vg=function(){};$N=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,ma(ws.current);var a=null;switch(n){case"input":s=Fp(e,s),r=Fp(e,r),a=[];break;case"select":s=Qt({},s,{value:void 0}),r=Qt({},r,{value:void 0}),a=[];break;case"textarea":s=Bp(e,s),r=Bp(e,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=mh)}Vp(n,r);var i;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(kc.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(kc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Mt("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};LN=function(e,t,n,r){n!==r&&(t.flags|=4)};function Xl(e,t){if(!Bt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function En(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function zO(e,t,n){var r=t.pendingProps;switch(uy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return En(t),null;case 1:return er(t.type)&&ph(),En(t),null;case 3:return r=t.stateNode,al(),Dt(Zn),Dt(In),xy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ud(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Xr!==null&&(Cg(Xr),Xr=null))),vg(e,t),En(t),null;case 5:yy(t);var s=ma(zc.current);if(n=t.type,e!==null&&t.stateNode!=null)$N(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ie(166));return En(t),null}if(e=ma(ws.current),ud(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[vs]=t,r[Lc]=a,e=(t.mode&1)!==0,n){case"dialog":Mt("cancel",r),Mt("close",r);break;case"iframe":case"object":case"embed":Mt("load",r);break;case"video":case"audio":for(s=0;s<ic.length;s++)Mt(ic[s],r);break;case"source":Mt("error",r);break;case"img":case"image":case"link":Mt("error",r),Mt("load",r);break;case"details":Mt("toggle",r);break;case"input":C0(r,a),Mt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Mt("invalid",r);break;case"textarea":E0(r,a),Mt("invalid",r)}Vp(n,a),s=null;for(var i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&cd(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&cd(r.textContent,l,e),s=["children",""+l]):kc.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Mt("scroll",r)}switch(n){case"input":td(r),_0(r,a,!0);break;case"textarea":td(r),k0(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=mh)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=hS(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[vs]=t,e[Lc]=r,DN(e,t,!1,!1),t.stateNode=e;e:{switch(i=qp(n,r),n){case"dialog":Mt("cancel",e),Mt("close",e),s=r;break;case"iframe":case"object":case"embed":Mt("load",e),s=r;break;case"video":case"audio":for(s=0;s<ic.length;s++)Mt(ic[s],e);s=r;break;case"source":Mt("error",e),s=r;break;case"img":case"image":case"link":Mt("error",e),Mt("load",e),s=r;break;case"details":Mt("toggle",e),s=r;break;case"input":C0(e,r),s=Fp(e,r),Mt("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Qt({},r,{value:void 0}),Mt("invalid",e);break;case"textarea":E0(e,r),s=Bp(e,r),Mt("invalid",e);break;default:s=r}Vp(n,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?pS(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&fS(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Tc(e,c):typeof c=="number"&&Tc(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(kc.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Mt("scroll",e):c!=null&&Qv(e,a,c,i))}switch(n){case"input":td(e),_0(e,r,!1);break;case"textarea":td(e),k0(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Lo(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?_i(e,!!r.multiple,a,!1):r.defaultValue!=null&&_i(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=mh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return En(t),null;case 6:if(e&&t.stateNode!=null)LN(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ie(166));if(n=ma(zc.current),ma(ws.current),ud(t)){if(r=t.stateNode,n=t.memoizedProps,r[vs]=t,(a=r.nodeValue!==n)&&(e=mr,e!==null))switch(e.tag){case 3:cd(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&cd(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vs]=t,t.stateNode=r}return En(t),null;case 13:if(Dt(Vt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Bt&&fr!==null&&(t.mode&1)!==0&&(t.flags&128)===0)nN(),sl(),t.flags|=98560,a=!1;else if(a=ud(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(ie(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ie(317));a[vs]=t}else sl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;En(t),a=!1}else Xr!==null&&(Cg(Xr),Xr=null),a=!0;if(!a)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Vt.current&1)!==0?dn===0&&(dn=3):Py())),t.updateQueue!==null&&(t.flags|=4),En(t),null);case 4:return al(),vg(e,t),e===null&&Dc(t.stateNode.containerInfo),En(t),null;case 10:return my(t.type._context),En(t),null;case 17:return er(t.type)&&ph(),En(t),null;case 19:if(Dt(Vt),a=t.memoizedState,a===null)return En(t),null;if(r=(t.flags&128)!==0,i=a.rendering,i===null)if(r)Xl(a,!1);else{if(dn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=jh(e),i!==null){for(t.flags|=128,Xl(a,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ot(Vt,Vt.current&1|2),t.child}e=e.sibling}a.tail!==null&&rn()>ll&&(t.flags|=128,r=!0,Xl(a,!1),t.lanes=4194304)}else{if(!r)if(e=jh(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Xl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!Bt)return En(t),null}else 2*rn()-a.renderingStartTime>ll&&n!==1073741824&&(t.flags|=128,r=!0,Xl(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(n=a.last,n!==null?n.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=rn(),t.sibling=null,n=Vt.current,Ot(Vt,r?n&1|2:n&1),t):(En(t),null);case 22:case 23:return Ry(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(ir&1073741824)!==0&&(En(t),t.subtreeFlags&6&&(t.flags|=8192)):En(t),null;case 24:return null;case 25:return null}throw Error(ie(156,t.tag))}function UO(e,t){switch(uy(t),t.tag){case 1:return er(t.type)&&ph(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return al(),Dt(Zn),Dt(In),xy(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return yy(t),null;case 13:if(Dt(Vt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ie(340));sl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Dt(Vt),null;case 4:return al(),null;case 10:return my(t.type._context),null;case 22:case 23:return Ry(),null;case 24:return null;default:return null}}var fd=!1,Rn=!1,BO=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function ji(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xt(e,t,r)}else n.current=null}function yg(e,t,n){try{n()}catch(r){Xt(e,t,r)}}var vw=!1;function KO(e,t){if(tg=dh,e=KS(),ly(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var i=0,l=-1,c=-1,u=0,h=0,f=e,m=null;t:for(;;){for(var p;f!==n||s!==0&&f.nodeType!==3||(l=i+s),f!==a||r!==0&&f.nodeType!==3||(c=i+r),f.nodeType===3&&(i+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===e)break t;if(m===n&&++u===s&&(l=i),m===a&&++h===r&&(c=i),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ng={focusedElem:e,selectionRange:n},dh=!1,Ce=t;Ce!==null;)if(t=Ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ce=e;else for(;Ce!==null;){t=Ce;try{var x=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,y=x.memoizedState,w=t.stateNode,v=w.getSnapshotBeforeUpdate(t.elementType===t.type?g:Wr(t.type,g),y);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(j){Xt(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,Ce=e;break}Ce=t.return}return x=vw,vw=!1,x}function xc(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&yg(t,n,a)}s=s.next}while(s!==r)}}function xf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function xg(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function FN(e){var t=e.alternate;t!==null&&(e.alternate=null,FN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[vs],delete t[Lc],delete t[og],delete t[CO],delete t[_O])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zN(e){return e.tag===5||e.tag===3||e.tag===4}function yw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=mh));else if(r!==4&&(e=e.child,e!==null))for(wg(e,t,n),e=e.sibling;e!==null;)wg(e,t,n),e=e.sibling}function bg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(bg(e,t,n),e=e.sibling;e!==null;)bg(e,t,n),e=e.sibling}var xn=null,Jr=!1;function to(e,t,n){for(n=n.child;n!==null;)UN(e,t,n),n=n.sibling}function UN(e,t,n){if(xs&&typeof xs.onCommitFiberUnmount=="function")try{xs.onCommitFiberUnmount(df,n)}catch{}switch(n.tag){case 5:Rn||ji(n,t);case 6:var r=xn,s=Jr;xn=null,to(e,t,n),xn=r,Jr=s,xn!==null&&(Jr?(e=xn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):xn.removeChild(n.stateNode));break;case 18:xn!==null&&(Jr?(e=xn,n=n.stateNode,e.nodeType===8?Km(e.parentNode,n):e.nodeType===1&&Km(e,n),Oc(e)):Km(xn,n.stateNode));break;case 4:r=xn,s=Jr,xn=n.stateNode.containerInfo,Jr=!0,to(e,t,n),xn=r,Jr=s;break;case 0:case 11:case 14:case 15:if(!Rn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,i=a.destroy;a=a.tag,i!==void 0&&((a&2)!==0||(a&4)!==0)&&yg(n,t,i),s=s.next}while(s!==r)}to(e,t,n);break;case 1:if(!Rn&&(ji(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Xt(n,t,l)}to(e,t,n);break;case 21:to(e,t,n);break;case 22:n.mode&1?(Rn=(r=Rn)||n.memoizedState!==null,to(e,t,n),Rn=r):to(e,t,n);break;default:to(e,t,n)}}function xw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new BO),t.forEach(function(r){var s=XO.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Vr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:xn=l.stateNode,Jr=!1;break e;case 3:xn=l.stateNode.containerInfo,Jr=!0;break e;case 4:xn=l.stateNode.containerInfo,Jr=!0;break e}l=l.return}if(xn===null)throw Error(ie(160));UN(a,i,s),xn=null,Jr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Xt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)BN(t,e),t=t.sibling}function BN(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vr(t,e),hs(e),r&4){try{xc(3,e,e.return),xf(3,e)}catch(g){Xt(e,e.return,g)}try{xc(5,e,e.return)}catch(g){Xt(e,e.return,g)}}break;case 1:Vr(t,e),hs(e),r&512&&n!==null&&ji(n,n.return);break;case 5:if(Vr(t,e),hs(e),r&512&&n!==null&&ji(n,n.return),e.flags&32){var s=e.stateNode;try{Tc(s,"")}catch(g){Xt(e,e.return,g)}}if(r&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,i=n!==null?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&uS(s,a),qp(l,i);var u=qp(l,a);for(i=0;i<c.length;i+=2){var h=c[i],f=c[i+1];h==="style"?pS(s,f):h==="dangerouslySetInnerHTML"?fS(s,f):h==="children"?Tc(s,f):Qv(s,h,f,u)}switch(l){case"input":zp(s,a);break;case"textarea":dS(s,a);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?_i(s,!!a.multiple,p,!1):m!==!!a.multiple&&(a.defaultValue!=null?_i(s,!!a.multiple,a.defaultValue,!0):_i(s,!!a.multiple,a.multiple?[]:"",!1))}s[Lc]=a}catch(g){Xt(e,e.return,g)}}break;case 6:if(Vr(t,e),hs(e),r&4){if(e.stateNode===null)throw Error(ie(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){Xt(e,e.return,g)}}break;case 3:if(Vr(t,e),hs(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Oc(t.containerInfo)}catch(g){Xt(e,e.return,g)}break;case 4:Vr(t,e),hs(e);break;case 13:Vr(t,e),hs(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(ky=rn())),r&4&&xw(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(Rn=(u=Rn)||h,Vr(t,e),Rn=u):Vr(t,e),hs(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&(e.mode&1)!==0)for(Ce=e,h=e.child;h!==null;){for(f=Ce=h;Ce!==null;){switch(m=Ce,p=m.child,m.tag){case 0:case 11:case 14:case 15:xc(4,m,m.return);break;case 1:ji(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(g){Xt(r,n,g)}}break;case 5:ji(m,m.return);break;case 22:if(m.memoizedState!==null){bw(f);continue}}p!==null?(p.return=m,Ce=p):bw(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=mS("display",i))}catch(g){Xt(e,e.return,g)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Xt(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Vr(t,e),hs(e),r&4&&xw(e);break;case 21:break;default:Vr(t,e),hs(e)}}function hs(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(zN(n)){var r=n;break e}n=n.return}throw Error(ie(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Tc(s,""),r.flags&=-33);var a=yw(e);bg(e,a,s);break;case 3:case 4:var i=r.stateNode.containerInfo,l=yw(e);wg(e,l,i);break;default:throw Error(ie(161))}}catch(c){Xt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function VO(e,t,n){Ce=e,KN(e)}function KN(e,t,n){for(var r=(e.mode&1)!==0;Ce!==null;){var s=Ce,a=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||fd;if(!i){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Rn;l=fd;var u=Rn;if(fd=i,(Rn=c)&&!u)for(Ce=s;Ce!==null;)i=Ce,c=i.child,i.tag===22&&i.memoizedState!==null?jw(s):c!==null?(c.return=i,Ce=c):jw(s);for(;a!==null;)Ce=a,KN(a),a=a.sibling;Ce=s,fd=l,Rn=u}ww(e)}else(s.subtreeFlags&8772)!==0&&a!==null?(a.return=s,Ce=a):ww(e)}}function ww(e){for(;Ce!==null;){var t=Ce;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Rn||xf(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Rn)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Wr(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&sw(t,a,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}sw(t,i,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Oc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}Rn||t.flags&512&&xg(t)}catch(m){Xt(t,t.return,m)}}if(t===e){Ce=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ce=n;break}Ce=t.return}}function bw(e){for(;Ce!==null;){var t=Ce;if(t===e){Ce=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ce=n;break}Ce=t.return}}function jw(e){for(;Ce!==null;){var t=Ce;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{xf(4,t)}catch(c){Xt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Xt(t,s,c)}}var a=t.return;try{xg(t)}catch(c){Xt(t,a,c)}break;case 5:var i=t.return;try{xg(t)}catch(c){Xt(t,i,c)}}}catch(c){Xt(t,t.return,c)}if(t===e){Ce=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ce=l;break}Ce=t.return}}var qO=Math.ceil,Ch=Js.ReactCurrentDispatcher,_y=Js.ReactCurrentOwner,Mr=Js.ReactCurrentBatchConfig,ht=0,gn=null,an=null,bn=0,ir=0,Si=qo(0),dn=0,Vc=null,Ia=0,wf=0,Ey=0,wc=null,Yn=null,ky=0,ll=1/0,Ps=null,_h=!1,jg=null,Ao=null,md=!1,_o=null,Eh=0,bc=0,Sg=null,Hd=-1,Wd=0;function zn(){return(ht&6)!==0?rn():Hd!==-1?Hd:Hd=rn()}function Oo(e){return(e.mode&1)===0?1:(ht&2)!==0&&bn!==0?bn&-bn:kO.transition!==null?(Wd===0&&(Wd=ES()),Wd):(e=Ct,e!==0||(e=window.event,e=e===void 0?16:IS(e.type)),e)}function rs(e,t,n,r){if(50<bc)throw bc=0,Sg=null,Error(ie(185));bu(e,n,r),((ht&2)===0||e!==gn)&&(e===gn&&((ht&2)===0&&(wf|=n),dn===4&&ho(e,bn)),tr(e,r),n===1&&ht===0&&(t.mode&1)===0&&(ll=rn()+500,gf&&Ho()))}function tr(e,t){var n=e.callbackNode;kA(e,t);var r=uh(e,e===gn?bn:0);if(r===0)n!==null&&P0(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&P0(n),t===1)e.tag===0?EO(Sw.bind(null,e)):ZS(Sw.bind(null,e)),SO(function(){(ht&6)===0&&Ho()}),n=null;else{switch(kS(r)){case 1:n=ey;break;case 4:n=CS;break;case 16:n=ch;break;case 536870912:n=_S;break;default:n=ch}n=JN(n,VN.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function VN(e,t){if(Hd=-1,Wd=0,(ht&6)!==0)throw Error(ie(327));var n=e.callbackNode;if(Pi()&&e.callbackNode!==n)return null;var r=uh(e,e===gn?bn:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=kh(e,r);else{t=r;var s=ht;ht|=2;var a=HN();(gn!==e||bn!==t)&&(Ps=null,ll=rn()+500,_a(e,t));do try{GO();break}catch(l){qN(e,l)}while(!0);fy(),Ch.current=a,ht=s,an!==null?t=0:(gn=null,bn=0,t=dn)}if(t!==0){if(t===2&&(s=Yp(e),s!==0&&(r=s,t=Ng(e,s))),t===1)throw n=Vc,_a(e,0),ho(e,r),tr(e,rn()),n;if(t===6)ho(e,r);else{if(s=e.current.alternate,(r&30)===0&&!HO(s)&&(t=kh(e,r),t===2&&(a=Yp(e),a!==0&&(r=a,t=Ng(e,a))),t===1))throw n=Vc,_a(e,0),ho(e,r),tr(e,rn()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(ie(345));case 2:sa(e,Yn,Ps);break;case 3:if(ho(e,r),(r&130023424)===r&&(t=ky+500-rn(),10<t)){if(uh(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){zn(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=sg(sa.bind(null,e,Yn,Ps),t);break}sa(e,Yn,Ps);break;case 4:if(ho(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-ns(r);a=1<<i,i=t[i],i>s&&(s=i),r&=~a}if(r=s,r=rn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qO(r/1960))-r,10<r){e.timeoutHandle=sg(sa.bind(null,e,Yn,Ps),r);break}sa(e,Yn,Ps);break;case 5:sa(e,Yn,Ps);break;default:throw Error(ie(329))}}}return tr(e,rn()),e.callbackNode===n?VN.bind(null,e):null}function Ng(e,t){var n=wc;return e.current.memoizedState.isDehydrated&&(_a(e,t).flags|=256),e=kh(e,t),e!==2&&(t=Yn,Yn=n,t!==null&&Cg(t)),e}function Cg(e){Yn===null?Yn=e:Yn.push.apply(Yn,e)}function HO(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!as(a(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ho(e,t){for(t&=~Ey,t&=~wf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ns(t),r=1<<n;e[n]=-1,t&=~r}}function Sw(e){if((ht&6)!==0)throw Error(ie(327));Pi();var t=uh(e,0);if((t&1)===0)return tr(e,rn()),null;var n=kh(e,t);if(e.tag!==0&&n===2){var r=Yp(e);r!==0&&(t=r,n=Ng(e,r))}if(n===1)throw n=Vc,_a(e,0),ho(e,t),tr(e,rn()),n;if(n===6)throw Error(ie(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sa(e,Yn,Ps),tr(e,rn()),null}function Ty(e,t){var n=ht;ht|=1;try{return e(t)}finally{ht=n,ht===0&&(ll=rn()+500,gf&&Ho())}}function Ma(e){_o!==null&&_o.tag===0&&(ht&6)===0&&Pi();var t=ht;ht|=1;var n=Mr.transition,r=Ct;try{if(Mr.transition=null,Ct=1,e)return e()}finally{Ct=r,Mr.transition=n,ht=t,(ht&6)===0&&Ho()}}function Ry(){ir=Si.current,Dt(Si)}function _a(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,jO(n)),an!==null)for(n=an.return;n!==null;){var r=n;switch(uy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ph();break;case 3:al(),Dt(Zn),Dt(In),xy();break;case 5:yy(r);break;case 4:al();break;case 13:Dt(Vt);break;case 19:Dt(Vt);break;case 10:my(r.type._context);break;case 22:case 23:Ry()}n=n.return}if(gn=e,an=e=Io(e.current,null),bn=ir=t,dn=0,Vc=null,Ey=wf=Ia=0,Yn=wc=null,fa!==null){for(t=0;t<fa.length;t++)if(n=fa[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var i=a.next;a.next=s,r.next=i}n.pending=r}fa=null}return e}function qN(e,t){do{var n=an;try{if(fy(),Kd.current=Nh,Sh){for(var r=Gt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Sh=!1}if(Oa=0,fn=cn=Gt=null,yc=!1,Uc=0,_y.current=null,n===null||n.return===null){dn=1,Vc=t,an=null;break}e:{var a=e,i=n.return,l=n,c=t;if(t=bn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if((h.mode&1)===0&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=uw(i);if(p!==null){p.flags&=-257,dw(p,i,l,a,t),p.mode&1&&cw(a,u,t),t=p,c=u;var x=t.updateQueue;if(x===null){var g=new Set;g.add(c),t.updateQueue=g}else x.add(c);break e}else{if((t&1)===0){cw(a,u,t),Py();break e}c=Error(ie(426))}}else if(Bt&&l.mode&1){var y=uw(i);if(y!==null){(y.flags&65536)===0&&(y.flags|=256),dw(y,i,l,a,t),dy(il(c,l));break e}}a=c=il(c,l),dn!==4&&(dn=2),wc===null?wc=[a]:wc.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var w=kN(a,c,t);rw(a,w);break e;case 1:l=c;var v=a.type,b=a.stateNode;if((a.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ao===null||!Ao.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=TN(a,l,t);rw(a,j);break e}}a=a.return}while(a!==null)}GN(n)}catch(S){t=S,an===n&&n!==null&&(an=n=n.return);continue}break}while(!0)}function HN(){var e=Ch.current;return Ch.current=Nh,e===null?Nh:e}function Py(){(dn===0||dn===3||dn===2)&&(dn=4),gn===null||(Ia&268435455)===0&&(wf&268435455)===0||ho(gn,bn)}function kh(e,t){var n=ht;ht|=2;var r=HN();(gn!==e||bn!==t)&&(Ps=null,_a(e,t));do try{WO();break}catch(s){qN(e,s)}while(!0);if(fy(),ht=n,Ch.current=r,an!==null)throw Error(ie(261));return gn=null,bn=0,dn}function WO(){for(;an!==null;)WN(an)}function GO(){for(;an!==null&&!xA();)WN(an)}function WN(e){var t=YN(e.alternate,e,ir);e.memoizedProps=e.pendingProps,t===null?GN(e):an=t,_y.current=null}function GN(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=zO(n,t,ir),n!==null){an=n;return}}else{if(n=UO(n,t),n!==null){n.flags&=32767,an=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{dn=6,an=null;return}}if(t=t.sibling,t!==null){an=t;return}an=t=e}while(t!==null);dn===0&&(dn=5)}function sa(e,t,n){var r=Ct,s=Mr.transition;try{Mr.transition=null,Ct=1,QO(e,t,n,r)}finally{Mr.transition=s,Ct=r}return null}function QO(e,t,n,r){do Pi();while(_o!==null);if((ht&6)!==0)throw Error(ie(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ie(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(TA(e,a),e===gn&&(an=gn=null,bn=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||md||(md=!0,JN(ch,function(){return Pi(),null})),a=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||a){a=Mr.transition,Mr.transition=null;var i=Ct;Ct=1;var l=ht;ht|=4,_y.current=null,KO(e,n),BN(n,e),pO(ng),dh=!!tg,ng=tg=null,e.current=n,VO(n),wA(),ht=l,Ct=i,Mr.transition=a}else e.current=n;if(md&&(md=!1,_o=e,Eh=s),a=e.pendingLanes,a===0&&(Ao=null),SA(n.stateNode),tr(e,rn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(_h)throw _h=!1,e=jg,jg=null,e;return(Eh&1)!==0&&e.tag!==0&&Pi(),a=e.pendingLanes,(a&1)!==0?e===Sg?bc++:(bc=0,Sg=e):bc=0,Ho(),null}function Pi(){if(_o!==null){var e=kS(Eh),t=Mr.transition,n=Ct;try{if(Mr.transition=null,Ct=16>e?16:e,_o===null)var r=!1;else{if(e=_o,_o=null,Eh=0,(ht&6)!==0)throw Error(ie(331));var s=ht;for(ht|=4,Ce=e.current;Ce!==null;){var a=Ce,i=a.child;if((Ce.flags&16)!==0){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Ce=u;Ce!==null;){var h=Ce;switch(h.tag){case 0:case 11:case 15:xc(8,h,a)}var f=h.child;if(f!==null)f.return=h,Ce=f;else for(;Ce!==null;){h=Ce;var m=h.sibling,p=h.return;if(FN(h),h===u){Ce=null;break}if(m!==null){m.return=p,Ce=m;break}Ce=p}}}var x=a.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Ce=a}}if((a.subtreeFlags&2064)!==0&&i!==null)i.return=a,Ce=i;else e:for(;Ce!==null;){if(a=Ce,(a.flags&2048)!==0)switch(a.tag){case 0:case 11:case 15:xc(9,a,a.return)}var w=a.sibling;if(w!==null){w.return=a.return,Ce=w;break e}Ce=a.return}}var v=e.current;for(Ce=v;Ce!==null;){i=Ce;var b=i.child;if((i.subtreeFlags&2064)!==0&&b!==null)b.return=i,Ce=b;else e:for(i=v;Ce!==null;){if(l=Ce,(l.flags&2048)!==0)try{switch(l.tag){case 0:case 11:case 15:xf(9,l)}}catch(S){Xt(l,l.return,S)}if(l===i){Ce=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,Ce=j;break e}Ce=l.return}}if(ht=s,Ho(),xs&&typeof xs.onPostCommitFiberRoot=="function")try{xs.onPostCommitFiberRoot(df,e)}catch{}r=!0}return r}finally{Ct=n,Mr.transition=t}}return!1}function Nw(e,t,n){t=il(n,t),t=kN(e,t,1),e=Po(e,t,1),t=zn(),e!==null&&(bu(e,1,t),tr(e,t))}function Xt(e,t,n){if(e.tag===3)Nw(e,e,n);else for(;t!==null;){if(t.tag===3){Nw(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ao===null||!Ao.has(r))){e=il(n,e),e=TN(t,e,1),t=Po(t,e,1),e=zn(),t!==null&&(bu(t,1,e),tr(t,e));break}}t=t.return}}function YO(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=zn(),e.pingedLanes|=e.suspendedLanes&n,gn===e&&(bn&n)===n&&(dn===4||dn===3&&(bn&130023424)===bn&&500>rn()-ky?_a(e,0):Ey|=n),tr(e,t)}function QN(e,t){t===0&&((e.mode&1)===0?t=1:(t=sd,sd<<=1,(sd&130023424)===0&&(sd=4194304)));var n=zn();e=Hs(e,t),e!==null&&(bu(e,t,n),tr(e,n))}function JO(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),QN(e,n)}function XO(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ie(314))}r!==null&&r.delete(t),QN(e,n)}var YN;YN=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Zn.current)Jn=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return Jn=!1,FO(e,t,n);Jn=(e.flags&131072)!==0}else Jn=!1,Bt&&(t.flags&1048576)!==0&&eN(t,yh,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qd(e,t),e=t.pendingProps;var s=rl(t,In.current);Ri(t,n),s=by(null,t,r,e,s,n);var a=jy();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,er(r)?(a=!0,gh(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,gy(t),s.updater=yf,t.stateNode=s,s._reactInternals=t,dg(t,r,e,n),t=mg(null,t,r,!0,a,n)):(t.tag=0,Bt&&a&&cy(t),Ln(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qd(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=eI(r),e=Wr(r,e),s){case 0:t=fg(null,t,r,e,n);break e;case 1:t=mw(null,t,r,e,n);break e;case 11:t=hw(null,t,r,e,n);break e;case 14:t=fw(null,t,r,Wr(r.type,e),n);break e}throw Error(ie(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Wr(r,s),fg(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Wr(r,s),mw(e,t,r,s,n);case 3:e:{if(ON(t),e===null)throw Error(ie(387));r=t.pendingProps,a=t.memoizedState,s=a.element,aN(e,t),bh(t,r,null,n);var i=t.memoizedState;if(r=i.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=il(Error(ie(423)),t),t=pw(e,t,r,n,s);break e}else if(r!==s){s=il(Error(ie(424)),t),t=pw(e,t,r,n,s);break e}else for(fr=Ro(t.stateNode.containerInfo.firstChild),mr=t,Bt=!0,Xr=null,n=sN(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(sl(),r===s){t=Ws(e,t,n);break e}Ln(e,t,r,n)}t=t.child}return t;case 5:return iN(t),e===null&&lg(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,rg(r,s)?i=null:a!==null&&rg(r,a)&&(t.flags|=32),AN(e,t),Ln(e,t,i,n),t.child;case 6:return e===null&&lg(t),null;case 13:return IN(e,t,n);case 4:return vy(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ol(t,null,r,n):Ln(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Wr(r,s),hw(e,t,r,s,n);case 7:return Ln(e,t,t.pendingProps,n),t.child;case 8:return Ln(e,t,t.pendingProps.children,n),t.child;case 12:return Ln(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,i=s.value,Ot(xh,r._currentValue),r._currentValue=i,a!==null)if(as(a.value,i)){if(a.children===s.children&&!Zn.current){t=Ws(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){i=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=zs(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),cg(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(ie(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),cg(i,n,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}Ln(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ri(t,n),s=$r(s),r=r(s),t.flags|=1,Ln(e,t,r,n),t.child;case 14:return r=t.type,s=Wr(r,t.pendingProps),s=Wr(r.type,s),fw(e,t,r,s,n);case 15:return RN(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Wr(r,s),qd(e,t),t.tag=1,er(r)?(e=!0,gh(t)):e=!1,Ri(t,n),EN(t,r,s),dg(t,r,s,n),mg(null,t,r,!0,e,n);case 19:return MN(e,t,n);case 22:return PN(e,t,n)}throw Error(ie(156,t.tag))};function JN(e,t){return NS(e,t)}function ZO(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(e,t,n,r){return new ZO(e,t,n,r)}function Ay(e){return e=e.prototype,!(!e||!e.isReactComponent)}function eI(e){if(typeof e=="function")return Ay(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Jv)return 11;if(e===Xv)return 14}return 2}function Io(e,t){var n=e.alternate;return n===null?(n=Or(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gd(e,t,n,r,s,a){var i=2;if(r=e,typeof e=="function")Ay(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case fi:return Ea(n.children,s,a,t);case Yv:i=8,s|=8;break;case Mp:return e=Or(12,n,t,s|2),e.elementType=Mp,e.lanes=a,e;case Dp:return e=Or(13,n,t,s),e.elementType=Dp,e.lanes=a,e;case $p:return e=Or(19,n,t,s),e.elementType=$p,e.lanes=a,e;case iS:return bf(n,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case oS:i=10;break e;case aS:i=9;break e;case Jv:i=11;break e;case Xv:i=14;break e;case io:i=16,r=null;break e}throw Error(ie(130,e==null?e:typeof e,""))}return t=Or(i,n,t,s),t.elementType=e,t.type=r,t.lanes=a,t}function Ea(e,t,n,r){return e=Or(7,e,r,t),e.lanes=n,e}function bf(e,t,n,r){return e=Or(22,e,r,t),e.elementType=iS,e.lanes=n,e.stateNode={isHidden:!1},e}function Jm(e,t,n){return e=Or(6,e,null,t),e.lanes=n,e}function Xm(e,t,n){return t=Or(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function tI(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Am(0),this.expirationTimes=Am(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Am(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Oy(e,t,n,r,s,a,i,l,c){return e=new tI(e,t,n,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Or(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gy(a),e}function nI(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function XN(e){if(!e)return Fo;e=e._reactInternals;e:{if(Ha(e)!==e||e.tag!==1)throw Error(ie(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(er(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ie(171))}if(e.tag===1){var n=e.type;if(er(n))return XS(e,n,t)}return t}function ZN(e,t,n,r,s,a,i,l,c){return e=Oy(n,r,!0,e,s,a,i,l,c),e.context=XN(null),n=e.current,r=zn(),s=Oo(n),a=zs(r,s),a.callback=t??null,Po(n,a,s),e.current.lanes=s,bu(e,s,r),tr(e,r),e}function jf(e,t,n,r){var s=t.current,a=zn(),i=Oo(s);return n=XN(n),t.context===null?t.context=n:t.pendingContext=n,t=zs(a,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Po(s,t,i),e!==null&&(rs(e,s,i,a),Bd(e,s,i)),i}function Th(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Cw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Iy(e,t){Cw(e,t),(e=e.alternate)&&Cw(e,t)}function rI(){return null}var e1=typeof reportError=="function"?reportError:function(e){console.error(e)};function My(e){this._internalRoot=e}Sf.prototype.render=My.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ie(409));jf(e,t,null,null)};Sf.prototype.unmount=My.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ma(function(){jf(null,e,null,null)}),t[qs]=null}};function Sf(e){this._internalRoot=e}Sf.prototype.unstable_scheduleHydration=function(e){if(e){var t=PS();e={blockedOn:null,target:e,priority:t};for(var n=0;n<uo.length&&t!==0&&t<uo[n].priority;n++);uo.splice(n,0,e),n===0&&OS(e)}};function Dy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Nf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function _w(){}function sI(e,t,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var u=Th(i);a.call(u)}}var i=ZN(t,r,e,0,null,!1,!1,"",_w);return e._reactRootContainer=i,e[qs]=i.current,Dc(e.nodeType===8?e.parentNode:e),Ma(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Th(c);l.call(u)}}var c=Oy(e,0,!1,null,null,!1,!1,"",_w);return e._reactRootContainer=c,e[qs]=c.current,Dc(e.nodeType===8?e.parentNode:e),Ma(function(){jf(t,c,n,r)}),c}function Cf(e,t,n,r,s){var a=n._reactRootContainer;if(a){var i=a;if(typeof s=="function"){var l=s;s=function(){var c=Th(i);l.call(c)}}jf(t,i,e,s)}else i=sI(n,t,e,s,r);return Th(i)}TS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ac(t.pendingLanes);n!==0&&(ty(t,n|1),tr(t,rn()),(ht&6)===0&&(ll=rn()+500,Ho()))}break;case 13:Ma(function(){var r=Hs(e,1);if(r!==null){var s=zn();rs(r,e,1,s)}}),Iy(e,1)}};ny=function(e){if(e.tag===13){var t=Hs(e,134217728);if(t!==null){var n=zn();rs(t,e,134217728,n)}Iy(e,134217728)}};RS=function(e){if(e.tag===13){var t=Oo(e),n=Hs(e,t);if(n!==null){var r=zn();rs(n,e,t,r)}Iy(e,t)}};PS=function(){return Ct};AS=function(e,t){var n=Ct;try{return Ct=e,t()}finally{Ct=n}};Wp=function(e,t,n){switch(t){case"input":if(zp(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=pf(r);if(!s)throw Error(ie(90));cS(r),zp(r,s)}}}break;case"textarea":dS(e,n);break;case"select":t=n.value,t!=null&&_i(e,!!n.multiple,t,!1)}};yS=Ty;xS=Ma;var oI={usingClientEntryPoint:!1,Events:[Su,vi,pf,gS,vS,Ty]},Zl={findFiberByHostInstance:ha,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aI={bundleType:Zl.bundleType,version:Zl.version,rendererPackageName:Zl.rendererPackageName,rendererConfig:Zl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Js.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=jS(e),e===null?null:e.stateNode},findFiberByHostInstance:Zl.findFiberByHostInstance||rI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pd.isDisabled&&pd.supportsFiber)try{df=pd.inject(aI),xs=pd}catch{}}yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oI;yr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dy(t))throw Error(ie(200));return nI(e,t,null,n)};yr.createRoot=function(e,t){if(!Dy(e))throw Error(ie(299));var n=!1,r="",s=e1;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Oy(e,1,!1,null,null,n,!1,r,s),e[qs]=t.current,Dc(e.nodeType===8?e.parentNode:e),new My(t)};yr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ie(188)):(e=Object.keys(e).join(","),Error(ie(268,e)));return e=jS(t),e=e===null?null:e.stateNode,e};yr.flushSync=function(e){return Ma(e)};yr.hydrate=function(e,t,n){if(!Nf(t))throw Error(ie(200));return Cf(null,e,t,!0,n)};yr.hydrateRoot=function(e,t,n){if(!Dy(e))throw Error(ie(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",i=e1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=ZN(t,null,e,1,n??null,s,!1,a,i),e[qs]=t.current,Dc(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Sf(t)};yr.render=function(e,t,n){if(!Nf(t))throw Error(ie(200));return Cf(null,e,t,!1,n)};yr.unmountComponentAtNode=function(e){if(!Nf(e))throw Error(ie(40));return e._reactRootContainer?(Ma(function(){Cf(null,null,e,!1,function(){e._reactRootContainer=null,e[qs]=null})}),!0):!1};yr.unstable_batchedUpdates=Ty;yr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Nf(n))throw Error(ie(200));if(e==null||e._reactInternals===void 0)throw Error(ie(38));return Cf(e,t,n,!1,r)};yr.version="18.3.1-next-f1338f8080-20240426";function t1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t1)}catch(e){console.error(e)}}t1(),tS.exports=yr;var Ir=tS.exports;const n1=Kj(Ir);var r1,Ew=Ir;r1=Ew.createRoot,Ew.hydrateRoot;function iI(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,s,a,i=[],l="",c=e.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(i.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),a=s.indexOf(".",1),i.push(s.substring(1,~r?r:~a?a:s.length)),l+=~r&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(l+=(~r?"?":"")+"\\"+s.substring(a))):l+="/"+s;return{keys:i,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}var s1={exports:{}},o1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cl=d;function lI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cI=typeof Object.is=="function"?Object.is:lI,uI=cl.useState,dI=cl.useEffect,hI=cl.useLayoutEffect,fI=cl.useDebugValue;function mI(e,t){var n=t(),r=uI({inst:{value:n,getSnapshot:t}}),s=r[0].inst,a=r[1];return hI(function(){s.value=n,s.getSnapshot=t,Zm(s)&&a({inst:s})},[e,n,t]),dI(function(){return Zm(s)&&a({inst:s}),e(function(){Zm(s)&&a({inst:s})})},[e]),fI(n),n}function Zm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cI(e,n)}catch{return!0}}function pI(e,t){return t()}var gI=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?pI:mI;o1.useSyncExternalStore=cl.useSyncExternalStore!==void 0?cl.useSyncExternalStore:gI;s1.exports=o1;var vI=s1.exports;const yI=uf.useInsertionEffect,xI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wI=xI?d.useLayoutEffect:d.useEffect,bI=yI||wI,a1=e=>{const t=d.useRef([e,(...n)=>t[0](...n)]).current;return bI(()=>{t[0]=e}),t[1]},jI="popstate",$y="pushState",Ly="replaceState",SI="hashchange",kw=[jI,$y,Ly,SI],NI=e=>{for(const t of kw)addEventListener(t,e);return()=>{for(const t of kw)removeEventListener(t,e)}},i1=(e,t)=>vI.useSyncExternalStore(NI,e,t),CI=()=>location.search,_I=({ssrSearch:e=""}={})=>i1(CI,()=>e),Tw=()=>location.pathname,EI=({ssrPath:e}={})=>i1(Tw,e?()=>e:Tw),kI=(e,{replace:t=!1,state:n=null}={})=>history[t?Ly:$y](n,"",e),TI=(e={})=>[EI(e),kI],Rw=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Rw]>"u"){for(const e of[$y,Ly]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),r=new Event(e);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,Rw,{value:!0})}const RI=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",l1=(e="")=>e==="/"?"":e,PI=(e,t)=>e[0]==="~"?e.slice(1):l1(t)+e,AI=(e="",t)=>RI(Pw(l1(e)),Pw(t)),Pw=e=>{try{return decodeURI(e)}catch{return e}},c1={hook:TI,searchHook:_I,parser:iI,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:e=>e},u1=d.createContext(c1),Cu=()=>d.useContext(u1),d1={},h1=d.createContext(d1),_f=()=>d.useContext(h1),Ef=e=>{const[t,n]=e.hook(e);return[AI(e.base,t),a1((r,s)=>n(PI(r,e.base),s))]},_u=()=>Ef(Cu()),f1=(e,t,n,r)=>{const{pattern:s,keys:a}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",r),i=s.exec(n)||[],[l,...c]=i;return l!==void 0?[!0,(()=>{const u=a!==!1?Object.fromEntries(a.map((f,m)=>[f,c[m]])):i.groups;let h={...c};return u&&Object.assign(h,u),h})(),...r?[l]:[]]:[!1,null]},OI=({children:e,...t})=>{var h,f;const n=Cu(),r=t.hook?c1:n;let s=r;const[a,i]=((h=t.ssrPath)==null?void 0:h.split("?"))??[];i&&(t.ssrSearch=i,t.ssrPath=a),t.hrefs=t.hrefs??((f=t.hook)==null?void 0:f.hrefs);let l=d.useRef({}),c=l.current,u=c;for(let m in r){const p=m==="base"?r[m]+(t[m]||""):t[m]||r[m];c===u&&p!==u[m]&&(l.current=u={...u}),u[m]=p,(p!==r[m]||p!==s[m])&&(s=u)}return d.createElement(u1.Provider,{value:s,children:e})},Aw=({children:e,component:t},n)=>t?d.createElement(t,{params:n}):typeof e=="function"?e(n):e,II=e=>{let t=d.useRef(d1);const n=t.current;return t.current=Object.keys(e).length!==Object.keys(n).length||Object.entries(e).some(([r,s])=>s!==n[r])?e:n},Wn=({path:e,nest:t,match:n,...r})=>{const s=Cu(),[a]=Ef(s),[i,l,c]=n??f1(s.parser,e,a,t),u=II({..._f(),...l});if(!i)return null;const h=c?d.createElement(OI,{base:c},Aw(r,u)):Aw(r,u);return d.createElement(h1.Provider,{value:u,children:h})},kn=d.forwardRef((e,t)=>{const n=Cu(),[r,s]=Ef(n),{to:a="",href:i=a,onClick:l,asChild:c,children:u,className:h,replace:f,state:m,...p}=e,x=a1(y=>{y.ctrlKey||y.metaKey||y.altKey||y.shiftKey||y.button!==0||(l==null||l(y),y.defaultPrevented||(y.preventDefault(),s(i,e)))}),g=n.hrefs(i[0]==="~"?i.slice(1):n.base+i,n);return c&&d.isValidElement(u)?d.cloneElement(u,{onClick:x,href:g}):d.createElement("a",{...p,onClick:x,href:g,className:h!=null&&h.call?h(r===i):h,children:u,ref:t})}),m1=e=>Array.isArray(e)?e.flatMap(t=>m1(t&&t.type===d.Fragment?t.props.children:t)):[e],MI=({children:e,location:t})=>{const n=Cu(),[r]=Ef(n);for(const s of m1(e)){let a=0;if(d.isValidElement(s)&&(a=f1(n.parser,s.props.path,t||r,s.props.nest))[0])return d.cloneElement(s,{match:a})}return null};var Wa=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},DI={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},po,Bv,Rj,$I=(Rj=class{constructor(){Ne(this,po,DI);Ne(this,Bv,!1)}setTimeoutProvider(e){de(this,po,e)}setTimeout(e,t){return k(this,po).setTimeout(e,t)}clearTimeout(e){k(this,po).clearTimeout(e)}setInterval(e,t){return k(this,po).setInterval(e,t)}clearInterval(e){k(this,po).clearInterval(e)}},po=new WeakMap,Bv=new WeakMap,Rj),pa=new $I;function LI(e){setTimeout(e,0)}var Da=typeof window>"u"||"Deno"in globalThis;function Tn(){}function FI(e,t){return typeof e=="function"?e(t):e}function _g(e){return typeof e=="number"&&e>=0&&e!==1/0}function p1(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Mo(e,t){return typeof e=="function"?e(t):e}function Cr(e,t){return typeof e=="function"?e(t):e}function Ow(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:i,stale:l}=e;if(i){if(r){if(t.queryHash!==Fy(i,t.options))return!1}else if(!qc(t.queryKey,i))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||a&&!a(t))}function Iw(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if($a(t.options.mutationKey)!==$a(a))return!1}else if(!qc(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function Fy(e,t){return((t==null?void 0:t.queryKeyHashFn)||$a)(e)}function $a(e){return JSON.stringify(e,(t,n)=>Eg(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function qc(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>qc(e[n],t[n])):!1}var zI=Object.prototype.hasOwnProperty;function zy(e,t){if(e===t)return e;const n=Mw(e)&&Mw(t);if(!n&&!(Eg(e)&&Eg(t)))return t;const s=(n?e:Object.keys(e)).length,a=n?t:Object.keys(t),i=a.length,l=n?new Array(i):{};let c=0;for(let u=0;u<i;u++){const h=n?u:a[u],f=e[h],m=t[h];if(f===m){l[h]=f,(n?u<s:zI.call(e,h))&&c++;continue}if(f===null||m===null||typeof f!="object"||typeof m!="object"){l[h]=m;continue}const p=zy(f,m);l[h]=p,p===f&&c++}return s===i&&c===s?e:l}function Hc(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Mw(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Eg(e){if(!Dw(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Dw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Dw(e){return Object.prototype.toString.call(e)==="[object Object]"}function UI(e){return new Promise(t=>{pa.setTimeout(t,e)})}function kg(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?zy(e,t):t}function BI(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function KI(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Uy=Symbol();function g1(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Uy?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function v1(e,t){return typeof e=="function"?e(...t):!!e}var va,go,Ui,Pj,VI=(Pj=class extends Wa{constructor(){super();Ne(this,va);Ne(this,go);Ne(this,Ui);de(this,Ui,t=>{if(!Da&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){k(this,go)||this.setEventListener(k(this,Ui))}onUnsubscribe(){var t;this.hasListeners()||((t=k(this,go))==null||t.call(this),de(this,go,void 0))}setEventListener(t){var n;de(this,Ui,t),(n=k(this,go))==null||n.call(this),de(this,go,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){k(this,va)!==t&&(de(this,va,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof k(this,va)=="boolean"?k(this,va):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},va=new WeakMap,go=new WeakMap,Ui=new WeakMap,Pj),By=new VI;function Tg(){let e,t;const n=new Promise((s,a)=>{e=s,t=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var qI=LI;function HI(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=qI;const a=l=>{t?e.push(l):s(()=>{n(l)})},i=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Zt=HI(),Bi,vo,Ki,Aj,WI=(Aj=class extends Wa{constructor(){super();Ne(this,Bi,!0);Ne(this,vo);Ne(this,Ki);de(this,Ki,t=>{if(!Da&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){k(this,vo)||this.setEventListener(k(this,Ki))}onUnsubscribe(){var t;this.hasListeners()||((t=k(this,vo))==null||t.call(this),de(this,vo,void 0))}setEventListener(t){var n;de(this,Ki,t),(n=k(this,vo))==null||n.call(this),de(this,vo,t(this.setOnline.bind(this)))}setOnline(t){k(this,Bi)!==t&&(de(this,Bi,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return k(this,Bi)}},Bi=new WeakMap,vo=new WeakMap,Ki=new WeakMap,Aj),Rh=new WI;function GI(e){return Math.min(1e3*2**e,3e4)}function y1(e){return(e??"online")==="online"?Rh.isOnline():!0}var Rg=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function x1(e){let t=!1,n=0,r;const s=Tg(),a=()=>s.status!=="pending",i=g=>{var y;if(!a()){const w=new Rg(g);m(w),(y=e.onCancel)==null||y.call(e,w)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>By.isFocused()&&(e.networkMode==="always"||Rh.isOnline())&&e.canRun(),h=()=>y1(e.networkMode)&&e.canRun(),f=g=>{a()||(r==null||r(),s.resolve(g))},m=g=>{a()||(r==null||r(),s.reject(g))},p=()=>new Promise(g=>{var y;r=w=>{(a()||u())&&g(w)},(y=e.onPause)==null||y.call(e)}).then(()=>{var g;r=void 0,a()||(g=e.onContinue)==null||g.call(e)}),x=()=>{if(a())return;let g;const y=n===0?e.initialPromise:void 0;try{g=y??e.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(f).catch(w=>{var C;if(a())return;const v=e.retry??(Da?0:3),b=e.retryDelay??GI,j=typeof b=="function"?b(n,w):b,S=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,w);if(t||!S){m(w);return}n++,(C=e.onFail)==null||C.call(e,n,w),UI(j).then(()=>u()?void 0:p()).then(()=>{t?m(w):x()})})};return{promise:s,status:()=>s.status,cancel:i,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?x():p().then(x),s)}}var ya,Oj,w1=(Oj=class{constructor(){Ne(this,ya)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),_g(this.gcTime)&&de(this,ya,pa.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Da?1/0:300*1e3))}clearGcTimeout(){k(this,ya)&&(pa.clearTimeout(k(this,ya)),de(this,ya,void 0))}},ya=new WeakMap,Oj),xa,Vi,Sr,wa,hn,hu,ba,Qr,Rs,Ij,QI=(Ij=class extends w1{constructor(t){super();Ne(this,Qr);Ne(this,xa);Ne(this,Vi);Ne(this,Sr);Ne(this,wa);Ne(this,hn);Ne(this,hu);Ne(this,ba);de(this,ba,!1),de(this,hu,t.defaultOptions),this.setOptions(t.options),this.observers=[],de(this,wa,t.client),de(this,Sr,k(this,wa).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,de(this,xa,Lw(this.options)),this.state=t.state??k(this,xa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=k(this,hn))==null?void 0:t.promise}setOptions(t){if(this.options={...k(this,hu),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Lw(this.options);n.data!==void 0&&(this.setState($w(n.data,n.dataUpdatedAt)),de(this,xa,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&k(this,Sr).remove(this)}setData(t,n){const r=kg(this.state.data,t,this.options);return He(this,Qr,Rs).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){He(this,Qr,Rs).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=k(this,hn))==null?void 0:r.promise;return(s=k(this,hn))==null||s.cancel(t),n?n.then(Tn).catch(Tn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(k(this,xa))}isActive(){return this.observers.some(t=>Cr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Uy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Mo(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!p1(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=k(this,hn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=k(this,hn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),k(this,Sr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(k(this,hn)&&(k(this,ba)?k(this,hn).cancel({revert:!0}):k(this,hn).cancelRetry()),this.scheduleGc()),k(this,Sr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||He(this,Qr,Rs).call(this,{type:"invalidate"})}async fetch(t,n){var c,u,h,f,m,p,x,g,y,w,v,b;if(this.state.fetchStatus!=="idle"&&((c=k(this,hn))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(k(this,hn))return k(this,hn).continueRetry(),k(this,hn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const j=this.observers.find(S=>S.options.queryFn);j&&this.setOptions(j.options)}const r=new AbortController,s=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(de(this,ba,!0),r.signal)})},a=()=>{const j=g1(this.options,n),C=(()=>{const N={client:k(this,wa),queryKey:this.queryKey,meta:this.meta};return s(N),N})();return de(this,ba,!1),this.options.persister?this.options.persister(j,C,this):j(C)},l=(()=>{const j={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:k(this,wa),state:this.state,fetchFn:a};return s(j),j})();(u=this.options.behavior)==null||u.onFetch(l,this),de(this,Vi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&He(this,Qr,Rs).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),de(this,hn,x1({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:j=>{j instanceof Rg&&j.revert&&this.setState({...k(this,Vi),fetchStatus:"idle"}),r.abort()},onFail:(j,S)=>{He(this,Qr,Rs).call(this,{type:"failed",failureCount:j,error:S})},onPause:()=>{He(this,Qr,Rs).call(this,{type:"pause"})},onContinue:()=>{He(this,Qr,Rs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const j=await k(this,hn).start();if(j===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(j),(p=(m=k(this,Sr).config).onSuccess)==null||p.call(m,j,this),(g=(x=k(this,Sr).config).onSettled)==null||g.call(x,j,this.state.error,this),j}catch(j){if(j instanceof Rg){if(j.silent)return k(this,hn).promise;if(j.revert){if(this.state.data===void 0)throw j;return this.state.data}}throw He(this,Qr,Rs).call(this,{type:"error",error:j}),(w=(y=k(this,Sr).config).onError)==null||w.call(y,j,this),(b=(v=k(this,Sr).config).onSettled)==null||b.call(v,this.state.data,j,this),j}finally{this.scheduleGc()}}},xa=new WeakMap,Vi=new WeakMap,Sr=new WeakMap,wa=new WeakMap,hn=new WeakMap,hu=new WeakMap,ba=new WeakMap,Qr=new WeakSet,Rs=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...b1(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...$w(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return de(this,Vi,t.manual?s:void 0),s;case"error":const a=t.error;return{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Zt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),k(this,Sr).notify({query:this,type:"updated",action:t})})},Ij);function b1(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:y1(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function $w(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Lw(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Gn,ct,fu,Dn,ja,qi,Is,yo,mu,Hi,Wi,Sa,Na,xo,Gi,St,lc,Pg,Ag,Og,Ig,Mg,Dg,$g,j1,Mj,Ky=(Mj=class extends Wa{constructor(t,n){super();Ne(this,St);Ne(this,Gn);Ne(this,ct);Ne(this,fu);Ne(this,Dn);Ne(this,ja);Ne(this,qi);Ne(this,Is);Ne(this,yo);Ne(this,mu);Ne(this,Hi);Ne(this,Wi);Ne(this,Sa);Ne(this,Na);Ne(this,xo);Ne(this,Gi,new Set);this.options=n,de(this,Gn,t),de(this,yo,null),de(this,Is,Tg()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(k(this,ct).addObserver(this),Fw(k(this,ct),this.options)?He(this,St,lc).call(this):this.updateResult(),He(this,St,Ig).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Lg(k(this,ct),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Lg(k(this,ct),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,He(this,St,Mg).call(this),He(this,St,Dg).call(this),k(this,ct).removeObserver(this)}setOptions(t){const n=this.options,r=k(this,ct);if(this.options=k(this,Gn).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Cr(this.options.enabled,k(this,ct))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");He(this,St,$g).call(this),k(this,ct).setOptions(this.options),n._defaulted&&!Hc(this.options,n)&&k(this,Gn).getQueryCache().notify({type:"observerOptionsUpdated",query:k(this,ct),observer:this});const s=this.hasListeners();s&&zw(k(this,ct),r,this.options,n)&&He(this,St,lc).call(this),this.updateResult(),s&&(k(this,ct)!==r||Cr(this.options.enabled,k(this,ct))!==Cr(n.enabled,k(this,ct))||Mo(this.options.staleTime,k(this,ct))!==Mo(n.staleTime,k(this,ct)))&&He(this,St,Pg).call(this);const a=He(this,St,Ag).call(this);s&&(k(this,ct)!==r||Cr(this.options.enabled,k(this,ct))!==Cr(n.enabled,k(this,ct))||a!==k(this,xo))&&He(this,St,Og).call(this,a)}getOptimisticResult(t){const n=k(this,Gn).getQueryCache().build(k(this,Gn),t),r=this.createResult(n,t);return JI(this,r)&&(de(this,Dn,r),de(this,qi,this.options),de(this,ja,k(this,ct).state)),r}getCurrentResult(){return k(this,Dn)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&k(this,Is).status==="pending"&&k(this,Is).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(t){k(this,Gi).add(t)}getCurrentQuery(){return k(this,ct)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=k(this,Gn).defaultQueryOptions(t),r=k(this,Gn).getQueryCache().build(k(this,Gn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return He(this,St,lc).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),k(this,Dn)))}createResult(t,n){var E;const r=k(this,ct),s=this.options,a=k(this,Dn),i=k(this,ja),l=k(this,qi),u=t!==r?t.state:k(this,fu),{state:h}=t;let f={...h},m=!1,p;if(n._optimisticResults){const M=this.hasListeners(),T=!M&&Fw(t,n),R=M&&zw(t,r,n,s);(T||R)&&(f={...f,...b1(h.data,t.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:x,errorUpdatedAt:g,status:y}=f;p=f.data;let w=!1;if(n.placeholderData!==void 0&&p===void 0&&y==="pending"){let M;a!=null&&a.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(M=a.data,w=!0):M=typeof n.placeholderData=="function"?n.placeholderData((E=k(this,Wi))==null?void 0:E.state.data,k(this,Wi)):n.placeholderData,M!==void 0&&(y="success",p=kg(a==null?void 0:a.data,M,n),m=!0)}if(n.select&&p!==void 0&&!w)if(a&&p===(i==null?void 0:i.data)&&n.select===k(this,mu))p=k(this,Hi);else try{de(this,mu,n.select),p=n.select(p),p=kg(a==null?void 0:a.data,p,n),de(this,Hi,p),de(this,yo,null)}catch(M){de(this,yo,M)}k(this,yo)&&(x=k(this,yo),p=k(this,Hi),g=Date.now(),y="error");const v=f.fetchStatus==="fetching",b=y==="pending",j=y==="error",S=b&&v,C=p!==void 0,_={status:y,fetchStatus:f.fetchStatus,isPending:b,isSuccess:y==="success",isError:j,isInitialLoading:S,isLoading:S,data:p,dataUpdatedAt:f.dataUpdatedAt,error:x,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:v,isRefetching:v&&!b,isLoadingError:j&&!C,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:j&&C,isStale:Vy(t,n),refetch:this.refetch,promise:k(this,Is),isEnabled:Cr(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const M=W=>{_.status==="error"?W.reject(_.error):_.data!==void 0&&W.resolve(_.data)},T=()=>{const W=de(this,Is,_.promise=Tg());M(W)},R=k(this,Is);switch(R.status){case"pending":t.queryHash===r.queryHash&&M(R);break;case"fulfilled":(_.status==="error"||_.data!==R.value)&&T();break;case"rejected":(_.status!=="error"||_.error!==R.reason)&&T();break}}return _}updateResult(){const t=k(this,Dn),n=this.createResult(k(this,ct),this.options);if(de(this,ja,k(this,ct).state),de(this,qi,this.options),k(this,ja).data!==void 0&&de(this,Wi,k(this,ct)),Hc(n,t))return;de(this,Dn,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!k(this,Gi).size)return!0;const i=new Set(a??k(this,Gi));return this.options.throwOnError&&i.add("error"),Object.keys(k(this,Dn)).some(l=>{const c=l;return k(this,Dn)[c]!==t[c]&&i.has(c)})};He(this,St,j1).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&He(this,St,Ig).call(this)}},Gn=new WeakMap,ct=new WeakMap,fu=new WeakMap,Dn=new WeakMap,ja=new WeakMap,qi=new WeakMap,Is=new WeakMap,yo=new WeakMap,mu=new WeakMap,Hi=new WeakMap,Wi=new WeakMap,Sa=new WeakMap,Na=new WeakMap,xo=new WeakMap,Gi=new WeakMap,St=new WeakSet,lc=function(t){He(this,St,$g).call(this);let n=k(this,ct).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Tn)),n},Pg=function(){He(this,St,Mg).call(this);const t=Mo(this.options.staleTime,k(this,ct));if(Da||k(this,Dn).isStale||!_g(t))return;const r=p1(k(this,Dn).dataUpdatedAt,t)+1;de(this,Sa,pa.setTimeout(()=>{k(this,Dn).isStale||this.updateResult()},r))},Ag=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(k(this,ct)):this.options.refetchInterval)??!1},Og=function(t){He(this,St,Dg).call(this),de(this,xo,t),!(Da||Cr(this.options.enabled,k(this,ct))===!1||!_g(k(this,xo))||k(this,xo)===0)&&de(this,Na,pa.setInterval(()=>{(this.options.refetchIntervalInBackground||By.isFocused())&&He(this,St,lc).call(this)},k(this,xo)))},Ig=function(){He(this,St,Pg).call(this),He(this,St,Og).call(this,He(this,St,Ag).call(this))},Mg=function(){k(this,Sa)&&(pa.clearTimeout(k(this,Sa)),de(this,Sa,void 0))},Dg=function(){k(this,Na)&&(pa.clearInterval(k(this,Na)),de(this,Na,void 0))},$g=function(){const t=k(this,Gn).getQueryCache().build(k(this,Gn),this.options);if(t===k(this,ct))return;const n=k(this,ct);de(this,ct,t),de(this,fu,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},j1=function(t){Zt.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(k(this,Dn))}),k(this,Gn).getQueryCache().notify({query:k(this,ct),type:"observerResultsUpdated"})})},Mj);function YI(e,t){return Cr(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Fw(e,t){return YI(e,t)||e.state.data!==void 0&&Lg(e,t,t.refetchOnMount)}function Lg(e,t,n){if(Cr(t.enabled,e)!==!1&&Mo(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Vy(e,t)}return!1}function zw(e,t,n,r){return(e!==t||Cr(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Vy(e,n)}function Vy(e,t){return Cr(t.enabled,e)!==!1&&e.isStaleByTime(Mo(t.staleTime,e))}function JI(e,t){return!Hc(e.getCurrentResult(),t)}function Uw(e){return{onFetch:(t,n)=>{var h,f,m,p,x;const r=t.options,s=(m=(f=(h=t.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,a=((p=t.state.data)==null?void 0:p.pages)||[],i=((x=t.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const y=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},w=g1(t.options,t.fetchOptions),v=async(b,j,S)=>{if(g)return Promise.reject();if(j==null&&b.pages.length)return Promise.resolve(b);const N=(()=>{const T={client:t.client,queryKey:t.queryKey,pageParam:j,direction:S?"backward":"forward",meta:t.options.meta};return y(T),T})(),_=await w(N),{maxPages:E}=t.options,M=S?KI:BI;return{pages:M(b.pages,_,E),pageParams:M(b.pageParams,j,E)}};if(s&&a.length){const b=s==="backward",j=b?XI:Bw,S={pages:a,pageParams:i},C=j(r,S);l=await v(S,C,b)}else{const b=e??a.length;do{const j=c===0?i[0]??r.initialPageParam:Bw(r,l);if(c>0&&j==null)break;l=await v(l,j),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var g,y;return(y=(g=t.options).persister)==null?void 0:y.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function Bw(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function XI(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var pu,ms,$n,Ca,ps,oo,Dj,ZI=(Dj=class extends w1{constructor(t){super();Ne(this,ps);Ne(this,pu);Ne(this,ms);Ne(this,$n);Ne(this,Ca);de(this,pu,t.client),this.mutationId=t.mutationId,de(this,$n,t.mutationCache),de(this,ms,[]),this.state=t.state||S1(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){k(this,ms).includes(t)||(k(this,ms).push(t),this.clearGcTimeout(),k(this,$n).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){de(this,ms,k(this,ms).filter(n=>n!==t)),this.scheduleGc(),k(this,$n).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){k(this,ms).length||(this.state.status==="pending"?this.scheduleGc():k(this,$n).remove(this))}continue(){var t;return((t=k(this,Ca))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,l,c,u,h,f,m,p,x,g,y,w,v,b,j,S,C,N,_,E;const n=()=>{He(this,ps,oo).call(this,{type:"continue"})},r={client:k(this,pu),meta:this.options.meta,mutationKey:this.options.mutationKey};de(this,Ca,x1({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(M,T)=>{He(this,ps,oo).call(this,{type:"failed",failureCount:M,error:T})},onPause:()=>{He(this,ps,oo).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>k(this,$n).canRun(this)}));const s=this.state.status==="pending",a=!k(this,Ca).canStart();try{if(s)n();else{He(this,ps,oo).call(this,{type:"pending",variables:t,isPaused:a}),await((l=(i=k(this,$n).config).onMutate)==null?void 0:l.call(i,t,this,r));const T=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,r));T!==this.state.context&&He(this,ps,oo).call(this,{type:"pending",context:T,variables:t,isPaused:a})}const M=await k(this,Ca).start();return await((f=(h=k(this,$n).config).onSuccess)==null?void 0:f.call(h,M,t,this.state.context,this,r)),await((p=(m=this.options).onSuccess)==null?void 0:p.call(m,M,t,this.state.context,r)),await((g=(x=k(this,$n).config).onSettled)==null?void 0:g.call(x,M,null,this.state.variables,this.state.context,this,r)),await((w=(y=this.options).onSettled)==null?void 0:w.call(y,M,null,t,this.state.context,r)),He(this,ps,oo).call(this,{type:"success",data:M}),M}catch(M){try{throw await((b=(v=k(this,$n).config).onError)==null?void 0:b.call(v,M,t,this.state.context,this,r)),await((S=(j=this.options).onError)==null?void 0:S.call(j,M,t,this.state.context,r)),await((N=(C=k(this,$n).config).onSettled)==null?void 0:N.call(C,void 0,M,this.state.variables,this.state.context,this,r)),await((E=(_=this.options).onSettled)==null?void 0:E.call(_,void 0,M,t,this.state.context,r)),M}finally{He(this,ps,oo).call(this,{type:"error",error:M})}}finally{k(this,$n).runNext(this)}}},pu=new WeakMap,ms=new WeakMap,$n=new WeakMap,Ca=new WeakMap,ps=new WeakSet,oo=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Zt.batch(()=>{k(this,ms).forEach(r=>{r.onMutationUpdate(t)}),k(this,$n).notify({mutation:this,type:"updated",action:t})})},Dj);function S1(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ms,Yr,gu,$j,eM=($j=class extends Wa{constructor(t={}){super();Ne(this,Ms);Ne(this,Yr);Ne(this,gu);this.config=t,de(this,Ms,new Set),de(this,Yr,new Map),de(this,gu,0)}build(t,n,r){const s=new ZI({client:t,mutationCache:this,mutationId:++Xu(this,gu)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){k(this,Ms).add(t);const n=gd(t);if(typeof n=="string"){const r=k(this,Yr).get(n);r?r.push(t):k(this,Yr).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(k(this,Ms).delete(t)){const n=gd(t);if(typeof n=="string"){const r=k(this,Yr).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&k(this,Yr).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=gd(t);if(typeof n=="string"){const r=k(this,Yr).get(n),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=gd(t);if(typeof n=="string"){const s=(r=k(this,Yr).get(n))==null?void 0:r.find(a=>a!==t&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Zt.batch(()=>{k(this,Ms).forEach(t=>{this.notify({type:"removed",mutation:t})}),k(this,Ms).clear(),k(this,Yr).clear()})}getAll(){return Array.from(k(this,Ms))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Iw(n,r))}findAll(t={}){return this.getAll().filter(n=>Iw(t,n))}notify(t){Zt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Zt.batch(()=>Promise.all(t.map(n=>n.continue().catch(Tn))))}},Ms=new WeakMap,Yr=new WeakMap,gu=new WeakMap,$j);function gd(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Ds,wo,Qn,$s,Ks,Qd,Fg,Lj,tM=(Lj=class extends Wa{constructor(n,r){super();Ne(this,Ks);Ne(this,Ds);Ne(this,wo);Ne(this,Qn);Ne(this,$s);de(this,Ds,n),this.setOptions(r),this.bindMethods(),He(this,Ks,Qd).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=k(this,Ds).defaultMutationOptions(n),Hc(this.options,r)||k(this,Ds).getMutationCache().notify({type:"observerOptionsUpdated",mutation:k(this,Qn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&$a(r.mutationKey)!==$a(this.options.mutationKey)?this.reset():((s=k(this,Qn))==null?void 0:s.state.status)==="pending"&&k(this,Qn).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=k(this,Qn))==null||n.removeObserver(this)}onMutationUpdate(n){He(this,Ks,Qd).call(this),He(this,Ks,Fg).call(this,n)}getCurrentResult(){return k(this,wo)}reset(){var n;(n=k(this,Qn))==null||n.removeObserver(this),de(this,Qn,void 0),He(this,Ks,Qd).call(this),He(this,Ks,Fg).call(this)}mutate(n,r){var s;return de(this,$s,r),(s=k(this,Qn))==null||s.removeObserver(this),de(this,Qn,k(this,Ds).getMutationCache().build(k(this,Ds),this.options)),k(this,Qn).addObserver(this),k(this,Qn).execute(n)}},Ds=new WeakMap,wo=new WeakMap,Qn=new WeakMap,$s=new WeakMap,Ks=new WeakSet,Qd=function(){var r;const n=((r=k(this,Qn))==null?void 0:r.state)??S1();de(this,wo,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Fg=function(n){Zt.batch(()=>{var r,s,a,i,l,c,u,h;if(k(this,$s)&&this.hasListeners()){const f=k(this,wo).variables,m=k(this,wo).context,p={client:k(this,Ds),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((s=(r=k(this,$s)).onSuccess)==null||s.call(r,n.data,f,m,p),(i=(a=k(this,$s)).onSettled)==null||i.call(a,n.data,null,f,m,p)):(n==null?void 0:n.type)==="error"&&((c=(l=k(this,$s)).onError)==null||c.call(l,n.error,f,m,p),(h=(u=k(this,$s)).onSettled)==null||h.call(u,void 0,n.error,f,m,p))}this.listeners.forEach(f=>{f(k(this,wo))})})},Lj);function Kw(e,t){const n=new Set(t);return e.filter(r=>!n.has(r))}function nM(e,t,n){const r=e.slice(0);return r[t]=n,r}var Qi,ar,Yi,Ji,Nr,bo,vu,yu,xu,Sn,zg,Ug,Bg,Kg,Vg,Fj,rM=(Fj=class extends Wa{constructor(t,n,r){super();Ne(this,Sn);Ne(this,Qi);Ne(this,ar);Ne(this,Yi);Ne(this,Ji);Ne(this,Nr);Ne(this,bo);Ne(this,vu);Ne(this,yu);Ne(this,xu,[]);de(this,Qi,t),de(this,Ji,r),de(this,Yi,[]),de(this,Nr,[]),de(this,ar,[]),this.setQueries(n)}onSubscribe(){this.listeners.size===1&&k(this,Nr).forEach(t=>{t.subscribe(n=>{He(this,Sn,Kg).call(this,t,n)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,k(this,Nr).forEach(t=>{t.destroy()})}setQueries(t,n){de(this,Yi,t),de(this,Ji,n),Zt.batch(()=>{const r=k(this,Nr),s=He(this,Sn,Bg).call(this,k(this,Yi));de(this,xu,s),s.forEach(f=>f.observer.setOptions(f.defaultedQueryOptions));const a=s.map(f=>f.observer),i=a.map(f=>f.getCurrentResult()),l=r.length!==a.length,c=a.some((f,m)=>f!==r[m]),u=l||c,h=u?!0:i.some((f,m)=>{const p=k(this,ar)[m];return!p||!Hc(f,p)});!u&&!h||(u&&de(this,Nr,a),de(this,ar,i),this.hasListeners()&&(u&&(Kw(r,a).forEach(f=>{f.destroy()}),Kw(a,r).forEach(f=>{f.subscribe(m=>{He(this,Sn,Kg).call(this,f,m)})})),He(this,Sn,Vg).call(this)))})}getCurrentResult(){return k(this,ar)}getQueries(){return k(this,Nr).map(t=>t.getCurrentQuery())}getObservers(){return k(this,Nr)}getOptimisticResult(t,n){const r=He(this,Sn,Bg).call(this,t),s=r.map(a=>a.observer.getOptimisticResult(a.defaultedQueryOptions));return[s,a=>He(this,Sn,Ug).call(this,a??s,n),()=>He(this,Sn,zg).call(this,s,r)]}},Qi=new WeakMap,ar=new WeakMap,Yi=new WeakMap,Ji=new WeakMap,Nr=new WeakMap,bo=new WeakMap,vu=new WeakMap,yu=new WeakMap,xu=new WeakMap,Sn=new WeakSet,zg=function(t,n){return n.map((r,s)=>{const a=t[s];return r.defaultedQueryOptions.notifyOnChangeProps?a:r.observer.trackResult(a,i=>{n.forEach(l=>{l.observer.trackProp(i)})})})},Ug=function(t,n){return n?((!k(this,bo)||k(this,ar)!==k(this,yu)||n!==k(this,vu))&&(de(this,vu,n),de(this,yu,k(this,ar)),de(this,bo,zy(k(this,bo),n(t)))),k(this,bo)):t},Bg=function(t){const n=new Map(k(this,Nr).map(s=>[s.options.queryHash,s])),r=[];return t.forEach(s=>{const a=k(this,Qi).defaultQueryOptions(s),i=n.get(a.queryHash);i?r.push({defaultedQueryOptions:a,observer:i}):r.push({defaultedQueryOptions:a,observer:new Ky(k(this,Qi),a)})}),r},Kg=function(t,n){const r=k(this,Nr).indexOf(t);r!==-1&&(de(this,ar,nM(k(this,ar),r,n)),He(this,Sn,Vg).call(this))},Vg=function(){var t;if(this.hasListeners()){const n=k(this,bo),r=He(this,Sn,zg).call(this,k(this,ar),k(this,xu)),s=He(this,Sn,Ug).call(this,r,(t=k(this,Ji))==null?void 0:t.combine);n!==s&&Zt.batch(()=>{this.listeners.forEach(a=>{a(k(this,ar))})})}},Fj),gs,zj,sM=(zj=class extends Wa{constructor(t={}){super();Ne(this,gs);this.config=t,de(this,gs,new Map)}build(t,n,r){const s=n.queryKey,a=n.queryHash??Fy(s,n);let i=this.get(a);return i||(i=new QI({client:t,queryKey:s,queryHash:a,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(i)),i}add(t){k(this,gs).has(t.queryHash)||(k(this,gs).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=k(this,gs).get(t.queryHash);n&&(t.destroy(),n===t&&k(this,gs).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Zt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return k(this,gs).get(t)}getAll(){return[...k(this,gs).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Ow(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Ow(t,r)):n}notify(t){Zt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Zt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Zt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},gs=new WeakMap,zj),Jt,jo,So,Xi,Zi,No,el,tl,Uj,oM=(Uj=class{constructor(e={}){Ne(this,Jt);Ne(this,jo);Ne(this,So);Ne(this,Xi);Ne(this,Zi);Ne(this,No);Ne(this,el);Ne(this,tl);de(this,Jt,e.queryCache||new sM),de(this,jo,e.mutationCache||new eM),de(this,So,e.defaultOptions||{}),de(this,Xi,new Map),de(this,Zi,new Map),de(this,No,0)}mount(){Xu(this,No)._++,k(this,No)===1&&(de(this,el,By.subscribe(async e=>{e&&(await this.resumePausedMutations(),k(this,Jt).onFocus())})),de(this,tl,Rh.subscribe(async e=>{e&&(await this.resumePausedMutations(),k(this,Jt).onOnline())})))}unmount(){var e,t;Xu(this,No)._--,k(this,No)===0&&((e=k(this,el))==null||e.call(this),de(this,el,void 0),(t=k(this,tl))==null||t.call(this),de(this,tl,void 0))}isFetching(e){return k(this,Jt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return k(this,jo).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=k(this,Jt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=k(this,Jt).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Mo(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return k(this,Jt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=k(this,Jt).get(r.queryHash),a=s==null?void 0:s.state.data,i=FI(t,a);if(i!==void 0)return k(this,Jt).build(this,r).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return Zt.batch(()=>k(this,Jt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=k(this,Jt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=k(this,Jt);Zt.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=k(this,Jt);return Zt.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Zt.batch(()=>k(this,Jt).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Tn).catch(Tn)}invalidateQueries(e,t={}){return Zt.batch(()=>(k(this,Jt).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Zt.batch(()=>k(this,Jt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Tn)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Tn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=k(this,Jt).build(this,t);return n.isStaleByTime(Mo(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Tn).catch(Tn)}fetchInfiniteQuery(e){return e.behavior=Uw(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Tn).catch(Tn)}ensureInfiniteQueryData(e){return e.behavior=Uw(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Rh.isOnline()?k(this,jo).resumePausedMutations():Promise.resolve()}getQueryCache(){return k(this,Jt)}getMutationCache(){return k(this,jo)}getDefaultOptions(){return k(this,So)}setDefaultOptions(e){de(this,So,e)}setQueryDefaults(e,t){k(this,Xi).set($a(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...k(this,Xi).values()],n={};return t.forEach(r=>{qc(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){k(this,Zi).set($a(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...k(this,Zi).values()],n={};return t.forEach(r=>{qc(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...k(this,So).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Fy(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Uy&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...k(this,So).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){k(this,Jt).clear(),k(this,jo).clear()}},Jt=new WeakMap,jo=new WeakMap,So=new WeakMap,Xi=new WeakMap,Zi=new WeakMap,No=new WeakMap,el=new WeakMap,tl=new WeakMap,Uj),N1=d.createContext(void 0),Nl=e=>{const t=d.useContext(N1);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},aM=({client:e,children:t})=>(d.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(N1.Provider,{value:e,children:t})),C1=d.createContext(!1),_1=()=>d.useContext(C1);C1.Provider;function iM(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var lM=d.createContext(iM()),E1=()=>d.useContext(lM),k1=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},T1=e=>{d.useEffect(()=>{e.clearReset()},[e])},R1=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||v1(n,[e.error,r])),P1=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},A1=(e,t)=>e.isLoading&&e.isFetching&&!t,qg=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Ph=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function cM({queries:e,...t},n){const r=Nl(),s=_1(),a=E1(),i=d.useMemo(()=>e.map(g=>{const y=r.defaultQueryOptions(g);return y._optimisticResults=s?"isRestoring":"optimistic",y}),[e,r,s]);i.forEach(g=>{P1(g),k1(g,a)}),T1(a);const[l]=d.useState(()=>new rM(r,i,t)),[c,u,h]=l.getOptimisticResult(i,t.combine),f=!s&&t.subscribed!==!1;d.useSyncExternalStore(d.useCallback(g=>f?l.subscribe(Zt.batchCalls(g)):Tn,[l,f]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),d.useEffect(()=>{l.setQueries(i,t)},[i,t,l]);const p=c.some((g,y)=>qg(i[y],g))?c.flatMap((g,y)=>{const w=i[y];if(w){const v=new Ky(r,w);if(qg(w,g))return Ph(w,v,a);A1(g,s)&&Ph(w,v,a)}return[]}):[];if(p.length>0)throw Promise.all(p);const x=c.find((g,y)=>{const w=i[y];return w&&R1({result:g,errorResetBoundary:a,throwOnError:w.throwOnError,query:r.getQueryCache().get(w.queryHash),suspense:w.suspense})});if(x!=null&&x.error)throw x.error;return u(h())}function uM(e,t,n){var f,m,p,x,g;const r=_1(),s=E1(),a=Nl(),i=a.defaultQueryOptions(e);(m=(f=a.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||m.call(f,i),i._optimisticResults=r?"isRestoring":"optimistic",P1(i),k1(i,s),T1(s);const l=!a.getQueryCache().get(i.queryHash),[c]=d.useState(()=>new t(a,i)),u=c.getOptimisticResult(i),h=!r&&e.subscribed!==!1;if(d.useSyncExternalStore(d.useCallback(y=>{const w=h?c.subscribe(Zt.batchCalls(y)):Tn;return c.updateResult(),w},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),d.useEffect(()=>{c.setOptions(i)},[i,c]),qg(i,u))throw Ph(i,c,s);if(R1({result:u,errorResetBoundary:s,throwOnError:i.throwOnError,query:a.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw u.error;if((x=(p=a.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||x.call(p,i,u),i.experimental_prefetchInRender&&!Da&&A1(u,r)){const y=l?Ph(i,c,s):(g=a.getQueryCache().get(i.queryHash))==null?void 0:g.promise;y==null||y.catch(Tn).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?u:c.trackResult(u)}function tt(e,t){return uM(e,Ky)}function at(e,t){const n=Nl(),[r]=d.useState(()=>new tM(n,e));d.useEffect(()=>{r.setOptions(e)},[r,e]);const s=d.useSyncExternalStore(d.useCallback(i=>r.subscribe(Zt.batchCalls(i)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=d.useCallback((i,l)=>{r.mutate(i,l).catch(Tn)},[r]);if(s.error&&v1(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}class dM{constructor(){this.config={enableComponentTracking:!1,enableAPILogging:!1,enableStateTracking:!1,logLevel:"info"}}trackComponent(t,n,r){this.config.enableComponentTracking&&(console.group(` Component: ${t}`),console.log(`Action: ${n}`),r&&console.log("Data:",r),console.trace("Component stack"),console.groupEnd())}trackAPICall(t,n,r,s){if(!this.config.enableAPILogging||r===404&&t.includes("/api/analysis/date/"))return;const i=s?"":r&&r>=400?"":"";console.group(`${i} API Call: ${n} ${t}`),r&&console.log(`Status: ${r}`),s&&(console.error("Error:",s),console.trace("Error stack")),console.groupEnd()}trackHookState(t,n,r){this.config.enableStateTracking&&(console.group(` Hook: ${t}`),r&&console.log(`Action: ${r}`),console.log("State:",n),console.groupEnd())}reportError(t,n,r){console.group(" Error Report"),console.error("Error:",t),console.error("Error message:",t.message),console.error("Error stack:",t.stack),n&&console.error("Error info:",n),r&&console.error("Context:",r),console.trace("Current stack"),console.groupEnd(),typeof window<"u"&&window.Sentry&&window.Sentry.captureException(t,{extra:{errorInfo:n,context:r}})}debugRuntimeIssue(t,n){console.group(` Runtime Debug: ${t}`),console.error("Issue details:",n),console.log("Window object keys:",Object.keys(window).slice(0,20)),console.log("Document readyState:",document.readyState),console.log("Location:",window.location.href),console.trace("Debug stack"),console.groupEnd()}}const Ss=new dM;Ss.trackComponent.bind(Ss);const Hg=Ss.trackAPICall.bind(Ss);Ss.trackHookState.bind(Ss);const hM=Ss.reportError.bind(Ss);Ss.debugRuntimeIssue.bind(Ss);async function O1(e){if(!e.ok){const t=await e.text()||e.statusText,n=new Error(`${e.status}: ${t}`);throw Hg(e.url,"unknown",e.status,n),n}}async function Rr(e,t,n){const r=performance.now();try{const s=await fetch(t,{method:e,headers:n?{"Content-Type":"application/json"}:{},body:n?JSON.stringify(n):void 0,credentials:"include"}),a=performance.now()-r;return Hg(t,e,s.status),await O1(s),s}catch(s){throw Hg(t,e,void 0,s),hM(s,{url:t,method:e,data:n},"API Request"),s}}const fM=({on401:e})=>async({queryKey:t})=>{const n=await fetch(t[0],{credentials:"include"}),r=t[0];return n.status===404&&r.includes("/api/analysis/date/")?null:(await O1(n),await n.json())},J=new oM({defaultOptions:{queries:{queryFn:fM({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:300*1e3,gcTime:1800*1e3,retry:!1},mutations:{retry:!1}}});function mM(e){J.removeQueries({queryKey:[`/api/analysis/date/${e}`]}),J.removeQueries({queryKey:[`/api/news/fetch/${e}`]});const t=e.substring(0,4);J.removeQueries({queryKey:[`/api/analysis/year/${t}`]})}const pM=1,gM=1e6;let ep=0;function vM(){return ep=(ep+1)%Number.MAX_SAFE_INTEGER,ep.toString()}const tp=new Map,Vw=e=>{if(tp.has(e))return;const t=setTimeout(()=>{tp.delete(e),jc({type:"REMOVE_TOAST",toastId:e})},gM);tp.set(e,t)},yM=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,pM)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Vw(n):e.toasts.forEach(r=>{Vw(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Yd=[];let Jd={toasts:[]};function jc(e){Jd=yM(Jd,e),Yd.forEach(t=>{t(Jd)})}function Wg({...e}){const t=vM(),n=s=>jc({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>jc({type:"DISMISS_TOAST",toastId:t});return jc({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function wr(){const[e,t]=d.useState(Jd);return d.useEffect(()=>(Yd.push(t),()=>{const n=Yd.indexOf(t);n>-1&&Yd.splice(n,1)}),[e]),{...e,toast:Wg,dismiss:n=>jc({type:"DISMISS_TOAST",toastId:n})}}function Z(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function qw(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Cl(...e){return t=>{let n=!1;const r=e.map(s=>{const a=qw(s,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():qw(e[s],null)}}}}function Ge(...e){return d.useCallback(Cl(...e),e)}function xM(e,t){const n=d.createContext(t),r=a=>{const{children:i,...l}=a,c=d.useMemo(()=>l,Object.values(l));return o.jsx(n.Provider,{value:c,children:i})};r.displayName=e+"Provider";function s(a){const i=d.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,s]}function Nn(e,t=[]){let n=[];function r(a,i){const l=d.createContext(i),c=n.length;n=[...n,i];const u=f=>{var w;const{scope:m,children:p,...x}=f,g=((w=m==null?void 0:m[e])==null?void 0:w[c])||l,y=d.useMemo(()=>x,Object.values(x));return o.jsx(g.Provider,{value:y,children:p})};u.displayName=a+"Provider";function h(f,m){var g;const p=((g=m==null?void 0:m[e])==null?void 0:g[c])||l,x=d.useContext(p);if(x)return x;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[u,h]}const s=()=>{const a=n.map(i=>d.createContext(i));return function(l){const c=(l==null?void 0:l[e])||a;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,wM(s,...t)]}function wM(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const i=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function La(e){const t=bM(e),n=d.forwardRef((r,s)=>{const{children:a,...i}=r,l=d.Children.toArray(a),c=l.find(jM);if(c){const u=c.props.children,h=l.map(f=>f===c?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:f);return o.jsx(t,{...i,ref:s,children:d.isValidElement(u)?d.cloneElement(u,void 0,h):null})}return o.jsx(t,{...i,ref:s,children:a})});return n.displayName=`${e}.Slot`,n}function bM(e){const t=d.forwardRef((n,r)=>{const{children:s,...a}=n;if(d.isValidElement(s)){const i=NM(s),l=SM(a,s.props);return s.type!==d.Fragment&&(l.ref=r?Cl(r,i):i),d.cloneElement(s,l)}return d.Children.count(s)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var I1=Symbol("radix.slottable");function M1(e){const t=({children:n})=>o.jsx(o.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=I1,t}function jM(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===I1}function SM(e,t){const n={...t};for(const r in t){const s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}function NM(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function _l(e){const t=e+"CollectionProvider",[n,r]=Nn(t),[s,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=g=>{const{scope:y,children:w}=g,v=Pe.useRef(null),b=Pe.useRef(new Map).current;return o.jsx(s,{scope:y,itemMap:b,collectionRef:v,children:w})};i.displayName=t;const l=e+"CollectionSlot",c=La(l),u=Pe.forwardRef((g,y)=>{const{scope:w,children:v}=g,b=a(l,w),j=Ge(y,b.collectionRef);return o.jsx(c,{ref:j,children:v})});u.displayName=l;const h=e+"CollectionItemSlot",f="data-radix-collection-item",m=La(h),p=Pe.forwardRef((g,y)=>{const{scope:w,children:v,...b}=g,j=Pe.useRef(null),S=Ge(y,j),C=a(h,w);return Pe.useEffect(()=>(C.itemMap.set(j,{ref:j,...b}),()=>void C.itemMap.delete(j))),o.jsx(m,{[f]:"",ref:S,children:v})});p.displayName=h;function x(g){const y=a(e+"CollectionConsumer",g);return Pe.useCallback(()=>{const v=y.collectionRef.current;if(!v)return[];const b=Array.from(v.querySelectorAll(`[${f}]`));return Array.from(y.itemMap.values()).sort((C,N)=>b.indexOf(C.ref.current)-b.indexOf(N.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:i,Slot:u,ItemSlot:p},x,r]}var CM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],we=CM.reduce((e,t)=>{const n=La(`Primitive.${t}`),r=d.forwardRef((s,a)=>{const{asChild:i,...l}=s,c=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Wc(e,t){e&&Ir.flushSync(()=>e.dispatchEvent(t))}function kt(e){const t=d.useRef(e);return d.useEffect(()=>{t.current=e}),d.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function _M(e,t=globalThis==null?void 0:globalThis.document){const n=kt(e);d.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var EM="DismissableLayer",Gg="dismissableLayer.update",kM="dismissableLayer.pointerDownOutside",TM="dismissableLayer.focusOutside",Hw,D1=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Xs=d.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,onDismiss:l,...c}=e,u=d.useContext(D1),[h,f]=d.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=d.useState({}),x=Ge(t,N=>f(N)),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=g.indexOf(y),v=h?g.indexOf(h):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,j=v>=w,S=PM(N=>{const _=N.target,E=[...u.branches].some(M=>M.contains(_));!j||E||(s==null||s(N),i==null||i(N),N.defaultPrevented||l==null||l())},m),C=AM(N=>{const _=N.target;[...u.branches].some(M=>M.contains(_))||(a==null||a(N),i==null||i(N),N.defaultPrevented||l==null||l())},m);return _M(N=>{v===u.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},m),d.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Hw=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),Ww(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Hw)}},[h,m,n,u]),d.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),Ww())},[h,u]),d.useEffect(()=>{const N=()=>p({});return document.addEventListener(Gg,N),()=>document.removeEventListener(Gg,N)},[]),o.jsx(we.div,{...c,ref:x,style:{pointerEvents:b?j?"auto":"none":void 0,...e.style},onFocusCapture:Z(e.onFocusCapture,C.onFocusCapture),onBlurCapture:Z(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:Z(e.onPointerDownCapture,S.onPointerDownCapture)})});Xs.displayName=EM;var RM="DismissableLayerBranch",$1=d.forwardRef((e,t)=>{const n=d.useContext(D1),r=d.useRef(null),s=Ge(t,r);return d.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(we.div,{...e,ref:s})});$1.displayName=RM;function PM(e,t=globalThis==null?void 0:globalThis.document){const n=kt(e),r=d.useRef(!1),s=d.useRef(()=>{});return d.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){L1(kM,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function AM(e,t=globalThis==null?void 0:globalThis.document){const n=kt(e),r=d.useRef(!1);return d.useEffect(()=>{const s=a=>{a.target&&!r.current&&L1(TM,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Ww(){const e=new CustomEvent(Gg);document.dispatchEvent(e)}function L1(e,t,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Wc(s,a):s.dispatchEvent(a)}var OM=Xs,IM=$1,tn=globalThis!=null&&globalThis.document?d.useLayoutEffect:()=>{},MM="Portal",Ga=d.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[s,a]=d.useState(!1);tn(()=>a(!0),[]);const i=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?n1.createPortal(o.jsx(we.div,{...r,ref:t}),i):null});Ga.displayName=MM;function DM(e,t){return d.useReducer((n,r)=>t[n][r]??n,e)}var $t=e=>{const{present:t,children:n}=e,r=$M(t),s=typeof n=="function"?n({present:r.isPresent}):d.Children.only(n),a=Ge(r.ref,LM(s));return typeof n=="function"||r.isPresent?d.cloneElement(s,{ref:a}):null};$t.displayName="Presence";function $M(e){const[t,n]=d.useState(),r=d.useRef(null),s=d.useRef(e),a=d.useRef("none"),i=e?"mounted":"unmounted",[l,c]=DM(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const u=vd(r.current);a.current=l==="mounted"?u:"none"},[l]),tn(()=>{const u=r.current,h=s.current;if(h!==e){const m=a.current,p=vd(u);e?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&m!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),tn(()=>{if(t){let u;const h=t.ownerDocument.defaultView??window,f=p=>{const g=vd(r.current).includes(CSS.escape(p.animationName));if(p.target===t&&g&&(c("ANIMATION_END"),!s.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",u=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},m=p=>{p.target===t&&(a.current=vd(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{h.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:d.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function vd(e){return(e==null?void 0:e.animationName)||"none"}function LM(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var FM=uf[" useInsertionEffect ".trim().toString()]||tn;function rr({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,a,i]=zM({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const h=d.useRef(e!==void 0);d.useEffect(()=>{const f=h.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,r])}const u=d.useCallback(h=>{var f;if(l){const m=UM(h)?h(e):h;m!==e&&((f=i.current)==null||f.call(i,m))}else a(h)},[l,e,a,i]);return[c,u]}function zM({defaultProp:e,onChange:t}){const[n,r]=d.useState(e),s=d.useRef(n),a=d.useRef(t);return FM(()=>{a.current=t},[t]),d.useEffect(()=>{var i;s.current!==n&&((i=a.current)==null||i.call(a,n),s.current=n)},[n,s]),[n,r,a]}function UM(e){return typeof e=="function"}var F1=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),BM="VisuallyHidden",kf=d.forwardRef((e,t)=>o.jsx(we.span,{...e,ref:t,style:{...F1,...e.style}}));kf.displayName=BM;var z1=kf,qy="ToastProvider",[Hy,KM,VM]=_l("Toast"),[U1]=Nn("Toast",[VM]),[qM,Tf]=U1(qy),B1=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:i}=e,[l,c]=d.useState(null),[u,h]=d.useState(0),f=d.useRef(!1),m=d.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${qy}\`. Expected non-empty \`string\`.`),o.jsx(Hy.Provider,{scope:t,children:o.jsx(qM,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:d.useCallback(()=>h(p=>p+1),[]),onToastRemove:d.useCallback(()=>h(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:i})})};B1.displayName=qy;var K1="ToastViewport",HM=["F8"],Qg="toast.viewportPause",Yg="toast.viewportResume",V1=d.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=HM,label:s="Notifications ({hotkey})",...a}=e,i=Tf(K1,n),l=KM(n),c=d.useRef(null),u=d.useRef(null),h=d.useRef(null),f=d.useRef(null),m=Ge(t,f,i.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=i.toastCount>0;d.useEffect(()=>{const y=w=>{var b;r.length!==0&&r.every(j=>w[j]||w.code===j)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),d.useEffect(()=>{const y=c.current,w=f.current;if(x&&y&&w){const v=()=>{if(!i.isClosePausedRef.current){const C=new CustomEvent(Qg);w.dispatchEvent(C),i.isClosePausedRef.current=!0}},b=()=>{if(i.isClosePausedRef.current){const C=new CustomEvent(Yg);w.dispatchEvent(C),i.isClosePausedRef.current=!1}},j=C=>{!y.contains(C.relatedTarget)&&b()},S=()=>{y.contains(document.activeElement)||b()};return y.addEventListener("focusin",v),y.addEventListener("focusout",j),y.addEventListener("pointermove",v),y.addEventListener("pointerleave",S),window.addEventListener("blur",v),window.addEventListener("focus",b),()=>{y.removeEventListener("focusin",v),y.removeEventListener("focusout",j),y.removeEventListener("pointermove",v),y.removeEventListener("pointerleave",S),window.removeEventListener("blur",v),window.removeEventListener("focus",b)}}},[x,i.isClosePausedRef]);const g=d.useCallback(({tabbingDirection:y})=>{const v=l().map(b=>{const j=b.ref.current,S=[j,...oD(j)];return y==="forwards"?S:S.reverse()});return(y==="forwards"?v.reverse():v).flat()},[l]);return d.useEffect(()=>{const y=f.current;if(y){const w=v=>{var S,C,N;const b=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!b){const _=document.activeElement,E=v.shiftKey;if(v.target===y&&E){(S=u.current)==null||S.focus();return}const R=g({tabbingDirection:E?"backwards":"forwards"}),W=R.findIndex(Q=>Q===_);np(R.slice(W+1))?v.preventDefault():E?(C=u.current)==null||C.focus():(N=h.current)==null||N.focus()}};return y.addEventListener("keydown",w),()=>y.removeEventListener("keydown",w)}},[l,g]),o.jsxs(IM,{ref:c,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&o.jsx(Jg,{ref:u,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});np(y)}}),o.jsx(Hy.Slot,{scope:n,children:o.jsx(we.ol,{tabIndex:-1,...a,ref:m})}),x&&o.jsx(Jg,{ref:h,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});np(y)}})]})});V1.displayName=K1;var q1="ToastFocusProxy",Jg=d.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,a=Tf(q1,n);return o.jsx(kf,{tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:i=>{var u;const l=i.relatedTarget;!((u=a.viewport)!=null&&u.contains(l))&&r()}})});Jg.displayName=q1;var Eu="Toast",WM="toast.swipeStart",GM="toast.swipeMove",QM="toast.swipeCancel",YM="toast.swipeEnd",H1=d.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:a,...i}=e,[l,c]=rr({prop:r,defaultProp:s??!0,onChange:a,caller:Eu});return o.jsx($t,{present:n||l,children:o.jsx(ZM,{open:l,...i,ref:t,onClose:()=>c(!1),onPause:kt(e.onPause),onResume:kt(e.onResume),onSwipeStart:Z(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Z(e.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Z(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Z(e.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});H1.displayName=Eu;var[JM,XM]=U1(Eu,{onClose(){}}),ZM=d.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:a,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:p,...x}=e,g=Tf(Eu,n),[y,w]=d.useState(null),v=Ge(t,Q=>w(Q)),b=d.useRef(null),j=d.useRef(null),S=s||g.duration,C=d.useRef(0),N=d.useRef(S),_=d.useRef(0),{onToastAdd:E,onToastRemove:M}=g,T=kt(()=>{var he;(y==null?void 0:y.contains(document.activeElement))&&((he=g.viewport)==null||he.focus()),i()}),R=d.useCallback(Q=>{!Q||Q===1/0||(window.clearTimeout(_.current),C.current=new Date().getTime(),_.current=window.setTimeout(T,Q))},[T]);d.useEffect(()=>{const Q=g.viewport;if(Q){const he=()=>{R(N.current),u==null||u()},Y=()=>{const O=new Date().getTime()-C.current;N.current=N.current-O,window.clearTimeout(_.current),c==null||c()};return Q.addEventListener(Qg,Y),Q.addEventListener(Yg,he),()=>{Q.removeEventListener(Qg,Y),Q.removeEventListener(Yg,he)}}},[g.viewport,S,c,u,R]),d.useEffect(()=>{a&&!g.isClosePausedRef.current&&R(S)},[a,S,g.isClosePausedRef,R]),d.useEffect(()=>(E(),()=>M()),[E,M]);const W=d.useMemo(()=>y?Z1(y):null,[y]);return g.viewport?o.jsxs(o.Fragment,{children:[W&&o.jsx(eD,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:W}),o.jsx(JM,{scope:n,onClose:T,children:Ir.createPortal(o.jsx(Hy.ItemSlot,{scope:n,children:o.jsx(OM,{asChild:!0,onEscapeKeyDown:Z(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||T(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(we.li,{tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection,...x,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Z(e.onKeyDown,Q=>{Q.key==="Escape"&&(l==null||l(Q.nativeEvent),Q.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:Z(e.onPointerDown,Q=>{Q.button===0&&(b.current={x:Q.clientX,y:Q.clientY})}),onPointerMove:Z(e.onPointerMove,Q=>{if(!b.current)return;const he=Q.clientX-b.current.x,Y=Q.clientY-b.current.y,O=!!j.current,A=["left","right"].includes(g.swipeDirection),U=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,D=A?U(0,he):0,B=A?0:U(0,Y),ue=Q.pointerType==="touch"?10:2,_e={x:D,y:B},ye={originalEvent:Q,delta:_e};O?(j.current=_e,yd(GM,f,ye,{discrete:!1})):Gw(_e,g.swipeDirection,ue)?(j.current=_e,yd(WM,h,ye,{discrete:!1}),Q.target.setPointerCapture(Q.pointerId)):(Math.abs(he)>ue||Math.abs(Y)>ue)&&(b.current=null)}),onPointerUp:Z(e.onPointerUp,Q=>{const he=j.current,Y=Q.target;if(Y.hasPointerCapture(Q.pointerId)&&Y.releasePointerCapture(Q.pointerId),j.current=null,b.current=null,he){const O=Q.currentTarget,A={originalEvent:Q,delta:he};Gw(he,g.swipeDirection,g.swipeThreshold)?yd(YM,p,A,{discrete:!0}):yd(QM,m,A,{discrete:!0}),O.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),eD=e=>{const{__scopeToast:t,children:n,...r}=e,s=Tf(Eu,t),[a,i]=d.useState(!1),[l,c]=d.useState(!1);return rD(()=>i(!0)),d.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:o.jsx(Ga,{asChild:!0,children:o.jsx(kf,{...r,children:a&&o.jsxs(o.Fragment,{children:[s.label," ",n]})})})},tD="ToastTitle",W1=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return o.jsx(we.div,{...r,ref:t})});W1.displayName=tD;var nD="ToastDescription",G1=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return o.jsx(we.div,{...r,ref:t})});G1.displayName=nD;var Q1="ToastAction",Y1=d.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?o.jsx(X1,{altText:n,asChild:!0,children:o.jsx(Wy,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Q1}\`. Expected non-empty \`string\`.`),null)});Y1.displayName=Q1;var J1="ToastClose",Wy=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=XM(J1,n);return o.jsx(X1,{asChild:!0,children:o.jsx(we.button,{type:"button",...r,ref:t,onClick:Z(e.onClick,s.onClose)})})});Wy.displayName=J1;var X1=d.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return o.jsx(we.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function Z1(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),sD(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const i=r.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...Z1(r))}}),t}function yd(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Wc(s,a):s.dispatchEvent(a)}var Gw=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),a=r>s;return t==="left"||t==="right"?a&&r>n:!a&&s>n};function rD(e=()=>{}){const t=kt(e);tn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function sD(e){return e.nodeType===e.ELEMENT_NODE}function oD(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function np(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var aD=B1,eC=V1,tC=H1,nC=W1,rC=G1,sC=Y1,oC=Wy;function aC(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=aC(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function iC(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=aC(e))&&(r&&(r+=" "),r+=t);return r}const Qw=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Yw=iC,Wo=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return Yw(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=t,i=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=a==null?void 0:a[u];if(h===null)return null;const m=Qw(h)||Qw(f);return s[u][m]}),l=n&&Object.entries(n).reduce((u,h)=>{let[f,m]=h;return m===void 0||(u[f]=m),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:m,...p}=h;return Object.entries(p).every(x=>{let[g,y]=x;return Array.isArray(y)?y.includes({...a,...l}[g]):{...a,...l}[g]===y})?[...u,f,m]:u},[]);return Yw(e,i,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lC=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=d.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:i,...l},c)=>d.createElement("svg",{ref:c,...lD,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:lC("lucide",s),...l},[...i.map(([u,h])=>d.createElement(u,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=(e,t)=>{const n=d.forwardRef(({className:r,...s},a)=>d.createElement(cD,{ref:a,iconNode:t,className:lC(`lucide-${iD(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=Oe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=Oe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=Oe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=Oe("Bitcoin",[["path",{d:"M11.767 19.089c4.924.868 6.14-6.025 1.216-6.894m-1.216 6.894L5.86 18.047m5.908 1.042-.347 1.97m1.563-8.864c4.924.869 6.14-6.025 1.215-6.893m-1.215 6.893-3.94-.694m5.155-6.2L8.29 4.26m5.908 1.042.348-1.97M7.48 20.364l3.126-17.727",key:"yr8idg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=Oe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=Oe("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=Oe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=Oe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=Oe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=Oe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=Oe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=Oe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=Oe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=Oe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=Oe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=Oe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=Oe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=Oe("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=Oe("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=Oe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=Oe("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=Oe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=Oe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=Oe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=Oe("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rf=Oe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=Oe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=Oe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=Oe("FlagOff",[["path",{d:"M8 2c3 0 5 2 8 2s4-1 4-1v11",key:"9rwyz9"}],["path",{d:"M4 22V4",key:"1plyxx"}],["path",{d:"M4 15s1-1 4-1 5 2 8 2",key:"1myooe"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=Oe("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=Oe("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=Oe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=Oe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=Oe("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=Oe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=Oe("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=Oe("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=Oe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=Oe("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=Oe("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=Oe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=Oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=Oe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=Oe("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=Oe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=Oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=Oe("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=Oe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=Oe("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=Oe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=Oe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=Oe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=Oe("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=Oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=Oe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=Oe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=Oe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=Oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=Oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=Oe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Gy="-",CD=e=>{const t=ED(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{const l=i.split(Gy);return l[0]===""&&l.length!==1&&l.shift(),yC(l,t)||_D(i)},getConflictingClassGroupIds:(i,l)=>{const c=n[i]||[];return l&&r[i]?[...c,...r[i]]:c}}},yC=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?yC(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const a=e.join(Gy);return(i=t.validators.find(({validator:l})=>l(a)))==null?void 0:i.classGroupId},nb=/^\[(.+)\]$/,_D=e=>{if(nb.test(e)){const t=nb.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},ED=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return TD(Object.entries(e.classGroups),n).forEach(([a,i])=>{ov(i,r,a,t)}),r},ov=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const a=s===""?t:rb(t,s);a.classGroupId=n;return}if(typeof s=="function"){if(kD(s)){ov(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,i])=>{ov(i,rb(t,a),n,r)})})},rb=(e,t)=>{let n=e;return t.split(Gy).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},kD=e=>e.isThemeGetter,TD=(e,t)=>t?e.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([i,l])=>[t+i,l])):a);return[n,s]}):e,RD=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(a,i)=>{n.set(a,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(a){let i=n.get(a);if(i!==void 0)return i;if((i=r.get(a))!==void 0)return s(a,i),i},set(a,i){n.has(a)?n.set(a,i):s(a,i)}}},xC="!",PD=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],a=t.length,i=l=>{const c=[];let u=0,h=0,f;for(let y=0;y<l.length;y++){let w=l[y];if(u===0){if(w===s&&(r||l.slice(y,y+a)===t)){c.push(l.slice(h,y)),h=y+a;continue}if(w==="/"){f=y;continue}}w==="["?u++:w==="]"&&u--}const m=c.length===0?l:l.substring(h),p=m.startsWith(xC),x=p?m.substring(1):m,g=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:x,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:i}):i},AD=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},OD=e=>({cache:RD(e.cacheSize),parseClassName:PD(e),...CD(e)}),ID=/\s+/,MD=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,a=[],i=e.trim().split(ID);let l="";for(let c=i.length-1;c>=0;c-=1){const u=i[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:p}=n(u);let x=!!p,g=r(x?m.substring(0,p):m);if(!g){if(!x){l=u+(l.length>0?" "+l:l);continue}if(g=r(m),!g){l=u+(l.length>0?" "+l:l);continue}x=!1}const y=AD(h).join(":"),w=f?y+xC:y,v=w+g;if(a.includes(v))continue;a.push(v);const b=s(g,x);for(let j=0;j<b.length;++j){const S=b[j];a.push(w+S)}l=u+(l.length>0?" "+l:l)}return l};function DD(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=wC(t))&&(r&&(r+=" "),r+=n);return r}const wC=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=wC(e[r]))&&(n&&(n+=" "),n+=t);return n};function $D(e,...t){let n,r,s,a=i;function i(c){const u=t.reduce((h,f)=>f(h),e());return n=OD(u),r=n.cache.get,s=n.cache.set,a=l,l(c)}function l(c){const u=r(c);if(u)return u;const h=MD(c,n);return s(c,h),h}return function(){return a(DD.apply(null,arguments))}}const It=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},bC=/^\[(?:([a-z-]+):)?(.+)\]$/i,LD=/^\d+\/\d+$/,FD=new Set(["px","full","screen"]),zD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,UD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,BD=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,KD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,VD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ts=e=>Oi(e)||FD.has(e)||LD.test(e),no=e=>El(e,"length",XD),Oi=e=>!!e&&!Number.isNaN(Number(e)),rp=e=>El(e,"number",Oi),ec=e=>!!e&&Number.isInteger(Number(e)),qD=e=>e.endsWith("%")&&Oi(e.slice(0,-1)),Ze=e=>bC.test(e),ro=e=>zD.test(e),HD=new Set(["length","size","percentage"]),WD=e=>El(e,HD,jC),GD=e=>El(e,"position",jC),QD=new Set(["image","url"]),YD=e=>El(e,QD,e4),JD=e=>El(e,"",ZD),tc=()=>!0,El=(e,t,n)=>{const r=bC.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},XD=e=>UD.test(e)&&!BD.test(e),jC=()=>!1,ZD=e=>KD.test(e),e4=e=>VD.test(e),t4=()=>{const e=It("colors"),t=It("spacing"),n=It("blur"),r=It("brightness"),s=It("borderColor"),a=It("borderRadius"),i=It("borderSpacing"),l=It("borderWidth"),c=It("contrast"),u=It("grayscale"),h=It("hueRotate"),f=It("invert"),m=It("gap"),p=It("gradientColorStops"),x=It("gradientColorStopPositions"),g=It("inset"),y=It("margin"),w=It("opacity"),v=It("padding"),b=It("saturate"),j=It("scale"),S=It("sepia"),C=It("skew"),N=It("space"),_=It("translate"),E=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto",Ze,t],R=()=>[Ze,t],W=()=>["",Ts,no],Q=()=>["auto",Oi,Ze],he=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],O=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],A=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",Ze],D=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[Oi,Ze];return{cacheSize:500,separator:":",theme:{colors:[tc],spacing:[Ts,no],blur:["none","",ro,Ze],brightness:B(),borderColor:[e],borderRadius:["none","","full",ro,Ze],borderSpacing:R(),borderWidth:W(),contrast:B(),grayscale:U(),hueRotate:B(),invert:U(),gap:R(),gradientColorStops:[e],gradientColorStopPositions:[qD,no],inset:T(),margin:T(),opacity:B(),padding:R(),saturate:B(),scale:B(),sepia:U(),skew:B(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",Ze]}],container:["container"],columns:[{columns:[ro]}],"break-after":[{"break-after":D()}],"break-before":[{"break-before":D()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...he(),Ze]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ec,Ze]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ze]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",ec,Ze]}],"grid-cols":[{"grid-cols":[tc]}],"col-start-end":[{col:["auto",{span:["full",ec,Ze]},Ze]}],"col-start":[{"col-start":Q()}],"col-end":[{"col-end":Q()}],"grid-rows":[{"grid-rows":[tc]}],"row-start-end":[{row:["auto",{span:[ec,Ze]},Ze]}],"row-start":[{"row-start":Q()}],"row-end":[{"row-end":Q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ze]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ze]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...A()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...A(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...A(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ze,t]}],"min-w":[{"min-w":[Ze,t,"min","max","fit"]}],"max-w":[{"max-w":[Ze,t,"none","full","min","max","fit","prose",{screen:[ro]},ro]}],h:[{h:[Ze,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ze,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ze,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ze,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ro,no]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",rp]}],"font-family":[{font:[tc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ze]}],"line-clamp":[{"line-clamp":["none",Oi,rp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ts,Ze]}],"list-image":[{"list-image":["none",Ze]}],"list-style-type":[{list:["none","disc","decimal",Ze]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ts,no]}],"underline-offset":[{"underline-offset":["auto",Ts,Ze]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ze]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ze]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...he(),GD]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",WD]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},YD]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:Y()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[Ts,Ze]}],"outline-w":[{outline:[Ts,no]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Ts,no]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ro,JD]}],"shadow-color":[{shadow:[tc]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...O(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":O()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ro,Ze]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ze]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",Ze]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ze]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[ec,Ze]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ze]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ze]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ze]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ts,no,rp]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},n4=$D(t4);function ee(...e){return n4(iC(e))}const r4=aD,SC=d.forwardRef(({className:e,...t},n)=>o.jsx(eC,{ref:n,className:ee("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));SC.displayName=eC.displayName;const s4=Wo("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),NC=d.forwardRef(({className:e,variant:t,...n},r)=>o.jsx(tC,{ref:r,className:ee(s4({variant:t}),e),...n}));NC.displayName=tC.displayName;const o4=d.forwardRef(({className:e,...t},n)=>o.jsx(sC,{ref:n,className:ee("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));o4.displayName=sC.displayName;const CC=d.forwardRef(({className:e,...t},n)=>o.jsx(oC,{ref:n,className:ee("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:o.jsx(On,{className:"h-4 w-4"})}));CC.displayName=oC.displayName;const _C=d.forwardRef(({className:e,...t},n)=>o.jsx(nC,{ref:n,className:ee("text-sm font-semibold",e),...t}));_C.displayName=nC.displayName;const EC=d.forwardRef(({className:e,...t},n)=>o.jsx(rC,{ref:n,className:ee("text-sm opacity-90",e),...t}));EC.displayName=rC.displayName;function a4(){const{toasts:e}=wr();return o.jsxs(r4,{children:[e.map(function({id:t,title:n,description:r,action:s,...a}){return o.jsxs(NC,{...a,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(_C,{children:n}),r&&o.jsx(EC,{children:r})]}),s,o.jsx(CC,{})]},t)}),o.jsx(SC,{})]})}var i4=uf[" useId ".trim().toString()]||(()=>{}),l4=0;function Un(e){const[t,n]=d.useState(i4());return tn(()=>{n(r=>r??String(l4++))},[e]),t?`radix-${t}`:""}const c4=["top","right","bottom","left"],Uo=Math.min,cr=Math.max,Ah=Math.round,xd=Math.floor,js=e=>({x:e,y:e}),u4={left:"right",right:"left",bottom:"top",top:"bottom"},d4={start:"end",end:"start"};function av(e,t,n){return cr(e,Uo(t,n))}function Qs(e,t){return typeof e=="function"?e(t):e}function Ys(e){return e.split("-")[0]}function kl(e){return e.split("-")[1]}function Qy(e){return e==="x"?"y":"x"}function Yy(e){return e==="y"?"height":"width"}const h4=new Set(["top","bottom"]);function ys(e){return h4.has(Ys(e))?"y":"x"}function Jy(e){return Qy(ys(e))}function f4(e,t,n){n===void 0&&(n=!1);const r=kl(e),s=Jy(e),a=Yy(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=Oh(i)),[i,Oh(i)]}function m4(e){const t=Oh(e);return[iv(e),t,iv(t)]}function iv(e){return e.replace(/start|end/g,t=>d4[t])}const sb=["left","right"],ob=["right","left"],p4=["top","bottom"],g4=["bottom","top"];function v4(e,t,n){switch(e){case"top":case"bottom":return n?t?ob:sb:t?sb:ob;case"left":case"right":return t?p4:g4;default:return[]}}function y4(e,t,n,r){const s=kl(e);let a=v4(Ys(e),n==="start",r);return s&&(a=a.map(i=>i+"-"+s),t&&(a=a.concat(a.map(iv)))),a}function Oh(e){return e.replace(/left|right|bottom|top/g,t=>u4[t])}function x4(e){return{top:0,right:0,bottom:0,left:0,...e}}function kC(e){return typeof e!="number"?x4(e):{top:e,right:e,bottom:e,left:e}}function Ih(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function ab(e,t,n){let{reference:r,floating:s}=e;const a=ys(t),i=Jy(t),l=Yy(i),c=Ys(t),u=a==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[l]/2-s[l]/2;let p;switch(c){case"top":p={x:h,y:r.y-s.height};break;case"bottom":p={x:h,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-s.width,y:f};break;default:p={x:r.x,y:r.y}}switch(kl(t)){case"start":p[i]-=m*(n&&u?-1:1);break;case"end":p[i]+=m*(n&&u?-1:1);break}return p}const w4=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:i}=n,l=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:h,y:f}=ab(u,r,c),m=r,p={},x=0;for(let g=0;g<l.length;g++){const{name:y,fn:w}=l[g],{x:v,y:b,data:j,reset:S}=await w({x:h,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:p,rects:u,platform:i,elements:{reference:e,floating:t}});h=v??h,f=b??f,p={...p,[y]:{...p[y],...j}},S&&x<=50&&(x++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(u=S.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:h,y:f}=ab(u,m,c)),g=-1)}return{x:h,y:f,placement:m,strategy:s,middlewareData:p}};async function Xc(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:a,rects:i,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:p=0}=Qs(t,e),x=kC(p),y=l[m?f==="floating"?"reference":"floating":f],w=Ih(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(y)))==null||n?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),v=f==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,b=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),j=await(a.isElement==null?void 0:a.isElement(b))?await(a.getScale==null?void 0:a.getScale(b))||{x:1,y:1}:{x:1,y:1},S=Ih(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:b,strategy:c}):v);return{top:(w.top-S.top+x.top)/j.y,bottom:(S.bottom-w.bottom+x.bottom)/j.y,left:(w.left-S.left+x.left)/j.x,right:(S.right-w.right+x.right)/j.x}}const b4=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:a,platform:i,elements:l,middlewareData:c}=t,{element:u,padding:h=0}=Qs(e,t)||{};if(u==null)return{};const f=kC(h),m={x:n,y:r},p=Jy(s),x=Yy(p),g=await i.getDimensions(u),y=p==="y",w=y?"top":"left",v=y?"bottom":"right",b=y?"clientHeight":"clientWidth",j=a.reference[x]+a.reference[p]-m[p]-a.floating[x],S=m[p]-a.reference[p],C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let N=C?C[b]:0;(!N||!await(i.isElement==null?void 0:i.isElement(C)))&&(N=l.floating[b]||a.floating[x]);const _=j/2-S/2,E=N/2-g[x]/2-1,M=Uo(f[w],E),T=Uo(f[v],E),R=M,W=N-g[x]-T,Q=N/2-g[x]/2+_,he=av(R,Q,W),Y=!c.arrow&&kl(s)!=null&&Q!==he&&a.reference[x]/2-(Q<R?M:T)-g[x]/2<0,O=Y?Q<R?Q-R:Q-W:0;return{[p]:m[p]+O,data:{[p]:he,centerOffset:Q-he-O,...Y&&{alignmentOffset:O}},reset:Y}}}),j4=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:a,rects:i,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:g=!0,...y}=Qs(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const w=Ys(s),v=ys(l),b=Ys(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=m||(b||!g?[Oh(l)]:m4(l)),C=x!=="none";!m&&C&&S.push(...y4(l,g,x,j));const N=[l,...S],_=await Xc(t,y),E=[];let M=((r=a.flip)==null?void 0:r.overflows)||[];if(h&&E.push(_[w]),f){const Q=f4(s,i,j);E.push(_[Q[0]],_[Q[1]])}if(M=[...M,{placement:s,overflows:E}],!E.every(Q=>Q<=0)){var T,R;const Q=(((T=a.flip)==null?void 0:T.index)||0)+1,he=N[Q];if(he&&(!(f==="alignment"?v!==ys(he):!1)||M.every(A=>ys(A.placement)===v?A.overflows[0]>0:!0)))return{data:{index:Q,overflows:M},reset:{placement:he}};let Y=(R=M.filter(O=>O.overflows[0]<=0).sort((O,A)=>O.overflows[1]-A.overflows[1])[0])==null?void 0:R.placement;if(!Y)switch(p){case"bestFit":{var W;const O=(W=M.filter(A=>{if(C){const U=ys(A.placement);return U===v||U==="y"}return!0}).map(A=>[A.placement,A.overflows.filter(U=>U>0).reduce((U,D)=>U+D,0)]).sort((A,U)=>A[1]-U[1])[0])==null?void 0:W[0];O&&(Y=O);break}case"initialPlacement":Y=l;break}if(s!==Y)return{reset:{placement:Y}}}return{}}}};function ib(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function lb(e){return c4.some(t=>e[t]>=0)}const S4=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=Qs(e,t);switch(r){case"referenceHidden":{const a=await Xc(t,{...s,elementContext:"reference"}),i=ib(a,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:lb(i)}}}case"escaped":{const a=await Xc(t,{...s,altBoundary:!0}),i=ib(a,n.floating);return{data:{escapedOffsets:i,escaped:lb(i)}}}default:return{}}}}},TC=new Set(["left","top"]);async function N4(e,t){const{placement:n,platform:r,elements:s}=e,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=Ys(n),l=kl(n),c=ys(n)==="y",u=TC.has(i)?-1:1,h=a&&c?-1:1,f=Qs(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof x=="number"&&(p=l==="end"?x*-1:x),c?{x:p*h,y:m*u}:{x:m*u,y:p*h}}const C4=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:a,placement:i,middlewareData:l}=t,c=await N4(t,e);return i===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:i}}}}},_4=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:l={fn:y=>{let{x:w,y:v}=y;return{x:w,y:v}}},...c}=Qs(e,t),u={x:n,y:r},h=await Xc(t,c),f=ys(Ys(s)),m=Qy(f);let p=u[m],x=u[f];if(a){const y=m==="y"?"top":"left",w=m==="y"?"bottom":"right",v=p+h[y],b=p-h[w];p=av(v,p,b)}if(i){const y=f==="y"?"top":"left",w=f==="y"?"bottom":"right",v=x+h[y],b=x-h[w];x=av(v,x,b)}const g=l.fn({...t,[m]:p,[f]:x});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[m]:a,[f]:i}}}}}},E4=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:a,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Qs(e,t),h={x:n,y:r},f=ys(s),m=Qy(f);let p=h[m],x=h[f];const g=Qs(l,t),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const b=m==="y"?"height":"width",j=a.reference[m]-a.floating[b]+y.mainAxis,S=a.reference[m]+a.reference[b]-y.mainAxis;p<j?p=j:p>S&&(p=S)}if(u){var w,v;const b=m==="y"?"width":"height",j=TC.has(Ys(s)),S=a.reference[f]-a.floating[b]+(j&&((w=i.offset)==null?void 0:w[f])||0)+(j?0:y.crossAxis),C=a.reference[f]+a.reference[b]+(j?0:((v=i.offset)==null?void 0:v[f])||0)-(j?y.crossAxis:0);x<S?x=S:x>C&&(x=C)}return{[m]:p,[f]:x}}}},k4=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:a,platform:i,elements:l}=t,{apply:c=()=>{},...u}=Qs(e,t),h=await Xc(t,u),f=Ys(s),m=kl(s),p=ys(s)==="y",{width:x,height:g}=a.floating;let y,w;f==="top"||f==="bottom"?(y=f,w=m===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(w=f,y=m==="end"?"top":"bottom");const v=g-h.top-h.bottom,b=x-h.left-h.right,j=Uo(g-h[y],v),S=Uo(x-h[w],b),C=!t.middlewareData.shift;let N=j,_=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(_=b),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(N=v),C&&!m){const M=cr(h.left,0),T=cr(h.right,0),R=cr(h.top,0),W=cr(h.bottom,0);p?_=x-2*(M!==0||T!==0?M+T:cr(h.left,h.right)):N=g-2*(R!==0||W!==0?R+W:cr(h.top,h.bottom))}await c({...t,availableWidth:_,availableHeight:N});const E=await i.getDimensions(l.floating);return x!==E.width||g!==E.height?{reset:{rects:!0}}:{}}}};function Pf(){return typeof window<"u"}function Tl(e){return RC(e)?(e.nodeName||"").toLowerCase():"#document"}function pr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function _s(e){var t;return(t=(RC(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function RC(e){return Pf()?e instanceof Node||e instanceof pr(e).Node:!1}function is(e){return Pf()?e instanceof Element||e instanceof pr(e).Element:!1}function Cs(e){return Pf()?e instanceof HTMLElement||e instanceof pr(e).HTMLElement:!1}function cb(e){return!Pf()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof pr(e).ShadowRoot}const T4=new Set(["inline","contents"]);function Tu(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=ls(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!T4.has(s)}const R4=new Set(["table","td","th"]);function P4(e){return R4.has(Tl(e))}const A4=[":popover-open",":modal"];function Af(e){return A4.some(t=>{try{return e.matches(t)}catch{return!1}})}const O4=["transform","translate","scale","rotate","perspective"],I4=["transform","translate","scale","rotate","perspective","filter"],M4=["paint","layout","strict","content"];function Xy(e){const t=Zy(),n=is(e)?ls(e):e;return O4.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||I4.some(r=>(n.willChange||"").includes(r))||M4.some(r=>(n.contain||"").includes(r))}function D4(e){let t=Bo(e);for(;Cs(t)&&!hl(t);){if(Xy(t))return t;if(Af(t))return null;t=Bo(t)}return null}function Zy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const $4=new Set(["html","body","#document"]);function hl(e){return $4.has(Tl(e))}function ls(e){return pr(e).getComputedStyle(e)}function Of(e){return is(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Bo(e){if(Tl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||cb(e)&&e.host||_s(e);return cb(t)?t.host:t}function PC(e){const t=Bo(e);return hl(t)?e.ownerDocument?e.ownerDocument.body:e.body:Cs(t)&&Tu(t)?t:PC(t)}function Zc(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=PC(e),a=s===((r=e.ownerDocument)==null?void 0:r.body),i=pr(s);if(a){const l=lv(i);return t.concat(i,i.visualViewport||[],Tu(s)?s:[],l&&n?Zc(l):[])}return t.concat(s,Zc(s,[],n))}function lv(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function AC(e){const t=ls(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Cs(e),a=s?e.offsetWidth:n,i=s?e.offsetHeight:r,l=Ah(n)!==a||Ah(r)!==i;return l&&(n=a,r=i),{width:n,height:r,$:l}}function ex(e){return is(e)?e:e.contextElement}function Ii(e){const t=ex(e);if(!Cs(t))return js(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:a}=AC(t);let i=(a?Ah(n.width):n.width)/r,l=(a?Ah(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const L4=js(0);function OC(e){const t=pr(e);return!Zy()||!t.visualViewport?L4:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function F4(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==pr(e)?!1:t}function Fa(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=ex(e);let i=js(1);t&&(r?is(r)&&(i=Ii(r)):i=Ii(e));const l=F4(a,n,r)?OC(a):js(0);let c=(s.left+l.x)/i.x,u=(s.top+l.y)/i.y,h=s.width/i.x,f=s.height/i.y;if(a){const m=pr(a),p=r&&is(r)?pr(r):r;let x=m,g=lv(x);for(;g&&r&&p!==x;){const y=Ii(g),w=g.getBoundingClientRect(),v=ls(g),b=w.left+(g.clientLeft+parseFloat(v.paddingLeft))*y.x,j=w.top+(g.clientTop+parseFloat(v.paddingTop))*y.y;c*=y.x,u*=y.y,h*=y.x,f*=y.y,c+=b,u+=j,x=pr(g),g=lv(x)}}return Ih({width:h,height:f,x:c,y:u})}function If(e,t){const n=Of(e).scrollLeft;return t?t.left+n:Fa(_s(e)).left+n}function IC(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-If(e,n),s=n.top+t.scrollTop;return{x:r,y:s}}function z4(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const a=s==="fixed",i=_s(r),l=t?Af(t.floating):!1;if(r===i||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=js(1);const h=js(0),f=Cs(r);if((f||!f&&!a)&&((Tl(r)!=="body"||Tu(i))&&(c=Of(r)),Cs(r))){const p=Fa(r);u=Ii(r),h.x=p.x+r.clientLeft,h.y=p.y+r.clientTop}const m=i&&!f&&!a?IC(i,c):js(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+m.x,y:n.y*u.y-c.scrollTop*u.y+h.y+m.y}}function U4(e){return Array.from(e.getClientRects())}function B4(e){const t=_s(e),n=Of(e),r=e.ownerDocument.body,s=cr(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=cr(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+If(e);const l=-n.scrollTop;return ls(r).direction==="rtl"&&(i+=cr(t.clientWidth,r.clientWidth)-s),{width:s,height:a,x:i,y:l}}const ub=25;function K4(e,t){const n=pr(e),r=_s(e),s=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,l=0,c=0;if(s){a=s.width,i=s.height;const h=Zy();(!h||h&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}const u=If(r);if(u<=0){const h=r.ownerDocument,f=h.body,m=getComputedStyle(f),p=h.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,x=Math.abs(r.clientWidth-f.clientWidth-p);x<=ub&&(a-=x)}else u<=ub&&(a+=u);return{width:a,height:i,x:l,y:c}}const V4=new Set(["absolute","fixed"]);function q4(e,t){const n=Fa(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,a=Cs(e)?Ii(e):js(1),i=e.clientWidth*a.x,l=e.clientHeight*a.y,c=s*a.x,u=r*a.y;return{width:i,height:l,x:c,y:u}}function db(e,t,n){let r;if(t==="viewport")r=K4(e,n);else if(t==="document")r=B4(_s(e));else if(is(t))r=q4(t,n);else{const s=OC(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Ih(r)}function MC(e,t){const n=Bo(e);return n===t||!is(n)||hl(n)?!1:ls(n).position==="fixed"||MC(n,t)}function H4(e,t){const n=t.get(e);if(n)return n;let r=Zc(e,[],!1).filter(l=>is(l)&&Tl(l)!=="body"),s=null;const a=ls(e).position==="fixed";let i=a?Bo(e):e;for(;is(i)&&!hl(i);){const l=ls(i),c=Xy(i);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&V4.has(s.position)||Tu(i)&&!c&&MC(e,i))?r=r.filter(h=>h!==i):s=l,i=Bo(i)}return t.set(e,r),r}function W4(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const i=[...n==="clippingAncestors"?Af(t)?[]:H4(t,this._c):[].concat(n),r],l=i[0],c=i.reduce((u,h)=>{const f=db(t,h,s);return u.top=cr(f.top,u.top),u.right=Uo(f.right,u.right),u.bottom=Uo(f.bottom,u.bottom),u.left=cr(f.left,u.left),u},db(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function G4(e){const{width:t,height:n}=AC(e);return{width:t,height:n}}function Q4(e,t,n){const r=Cs(t),s=_s(t),a=n==="fixed",i=Fa(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=js(0);function u(){c.x=If(s)}if(r||!r&&!a)if((Tl(t)!=="body"||Tu(s))&&(l=Of(t)),r){const p=Fa(t,!0,a,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&u();a&&!r&&s&&u();const h=s&&!r&&!a?IC(s,l):js(0),f=i.left+l.scrollLeft-c.x-h.x,m=i.top+l.scrollTop-c.y-h.y;return{x:f,y:m,width:i.width,height:i.height}}function sp(e){return ls(e).position==="static"}function hb(e,t){if(!Cs(e)||ls(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return _s(e)===n&&(n=n.ownerDocument.body),n}function DC(e,t){const n=pr(e);if(Af(e))return n;if(!Cs(e)){let s=Bo(e);for(;s&&!hl(s);){if(is(s)&&!sp(s))return s;s=Bo(s)}return n}let r=hb(e,t);for(;r&&P4(r)&&sp(r);)r=hb(r,t);return r&&hl(r)&&sp(r)&&!Xy(r)?n:r||D4(e)||n}const Y4=async function(e){const t=this.getOffsetParent||DC,n=this.getDimensions,r=await n(e.floating);return{reference:Q4(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function J4(e){return ls(e).direction==="rtl"}const X4={convertOffsetParentRelativeRectToViewportRelativeRect:z4,getDocumentElement:_s,getClippingRect:W4,getOffsetParent:DC,getElementRects:Y4,getClientRects:U4,getDimensions:G4,getScale:Ii,isElement:is,isRTL:J4};function $C(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Z4(e,t){let n=null,r;const s=_s(e);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=e.getBoundingClientRect(),{left:h,top:f,width:m,height:p}=u;if(l||t(),!m||!p)return;const x=xd(f),g=xd(s.clientWidth-(h+m)),y=xd(s.clientHeight-(f+p)),w=xd(h),b={rootMargin:-x+"px "+-g+"px "+-y+"px "+-w+"px",threshold:cr(0,Uo(1,c))||1};let j=!0;function S(C){const N=C[0].intersectionRatio;if(N!==c){if(!j)return i();N?i(!1,N):r=setTimeout(()=>{i(!1,1e-7)},1e3)}N===1&&!$C(u,e.getBoundingClientRect())&&i(),j=!1}try{n=new IntersectionObserver(S,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(S,b)}n.observe(e)}return i(!0),a}function e$(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=ex(e),h=s||a?[...u?Zc(u):[],...Zc(t)]:[];h.forEach(w=>{s&&w.addEventListener("scroll",n,{passive:!0}),a&&w.addEventListener("resize",n)});const f=u&&l?Z4(u,n):null;let m=-1,p=null;i&&(p=new ResizeObserver(w=>{let[v]=w;v&&v.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(t)})),n()}),u&&!c&&p.observe(u),p.observe(t));let x,g=c?Fa(e):null;c&&y();function y(){const w=Fa(e);g&&!$C(g,w)&&n(),g=w,x=requestAnimationFrame(y)}return n(),()=>{var w;h.forEach(v=>{s&&v.removeEventListener("scroll",n),a&&v.removeEventListener("resize",n)}),f==null||f(),(w=p)==null||w.disconnect(),p=null,c&&cancelAnimationFrame(x)}}const t$=C4,n$=_4,r$=j4,s$=k4,o$=S4,fb=b4,a$=E4,i$=(e,t,n)=>{const r=new Map,s={platform:X4,...n},a={...s.platform,_c:r};return w4(e,t,{...s,platform:a})};var l$=typeof document<"u",c$=function(){},Zd=l$?d.useLayoutEffect:c$;function Mh(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Mh(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&e.$$typeof)&&!Mh(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function LC(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function mb(e,t){const n=LC(e);return Math.round(t*n)/n}function op(e){const t=d.useRef(e);return Zd(()=>{t.current=e}),t}function u$(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[h,f]=d.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=d.useState(r);Mh(m,r)||p(r);const[x,g]=d.useState(null),[y,w]=d.useState(null),v=d.useCallback(A=>{A!==C.current&&(C.current=A,g(A))},[]),b=d.useCallback(A=>{A!==N.current&&(N.current=A,w(A))},[]),j=a||x,S=i||y,C=d.useRef(null),N=d.useRef(null),_=d.useRef(h),E=c!=null,M=op(c),T=op(s),R=op(u),W=d.useCallback(()=>{if(!C.current||!N.current)return;const A={placement:t,strategy:n,middleware:m};T.current&&(A.platform=T.current),i$(C.current,N.current,A).then(U=>{const D={...U,isPositioned:R.current!==!1};Q.current&&!Mh(_.current,D)&&(_.current=D,Ir.flushSync(()=>{f(D)}))})},[m,t,n,T,R]);Zd(()=>{u===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,f(A=>({...A,isPositioned:!1})))},[u]);const Q=d.useRef(!1);Zd(()=>(Q.current=!0,()=>{Q.current=!1}),[]),Zd(()=>{if(j&&(C.current=j),S&&(N.current=S),j&&S){if(M.current)return M.current(j,S,W);W()}},[j,S,W,M,E]);const he=d.useMemo(()=>({reference:C,floating:N,setReference:v,setFloating:b}),[v,b]),Y=d.useMemo(()=>({reference:j,floating:S}),[j,S]),O=d.useMemo(()=>{const A={position:n,left:0,top:0};if(!Y.floating)return A;const U=mb(Y.floating,h.x),D=mb(Y.floating,h.y);return l?{...A,transform:"translate("+U+"px, "+D+"px)",...LC(Y.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:D}},[n,l,Y.floating,h.x,h.y]);return d.useMemo(()=>({...h,update:W,refs:he,elements:Y,floatingStyles:O}),[h,W,he,Y,O])}const d$=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?fb({element:r.current,padding:s}).fn(n):{}:r?fb({element:r,padding:s}).fn(n):{}}}},h$=(e,t)=>({...t$(e),options:[e,t]}),f$=(e,t)=>({...n$(e),options:[e,t]}),m$=(e,t)=>({...a$(e),options:[e,t]}),p$=(e,t)=>({...r$(e),options:[e,t]}),g$=(e,t)=>({...s$(e),options:[e,t]}),v$=(e,t)=>({...o$(e),options:[e,t]}),y$=(e,t)=>({...d$(e),options:[e,t]});var x$="Arrow",FC=d.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...a}=e;return o.jsx(we.svg,{...a,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});FC.displayName=x$;var w$=FC;function zC(e){const[t,n]=d.useState(void 0);return tn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let i,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=e.offsetWidth,l=e.offsetHeight;n({width:i,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var tx="Popper",[UC,Es]=Nn(tx),[b$,BC]=UC(tx),KC=e=>{const{__scopePopper:t,children:n}=e,[r,s]=d.useState(null);return o.jsx(b$,{scope:t,anchor:r,onAnchorChange:s,children:n})};KC.displayName=tx;var VC="PopperAnchor",qC=d.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,a=BC(VC,n),i=d.useRef(null),l=Ge(t,i),c=d.useRef(null);return d.useEffect(()=>{const u=c.current;c.current=(r==null?void 0:r.current)||i.current,u!==c.current&&a.onAnchorChange(c.current)}),r?null:o.jsx(we.div,{...s,ref:l})});qC.displayName=VC;var nx="PopperContent",[j$,S$]=UC(nx),HC=d.forwardRef((e,t)=>{var pe,ge,Ke,le,Re,Me;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:x,...g}=e,y=BC(nx,n),[w,v]=d.useState(null),b=Ge(t,Ue=>v(Ue)),[j,S]=d.useState(null),C=zC(j),N=(C==null?void 0:C.width)??0,_=(C==null?void 0:C.height)??0,E=r+(a!=="center"?"-"+a:""),M=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},T=Array.isArray(u)?u:[u],R=T.length>0,W={padding:M,boundary:T.filter(C$),altBoundary:R},{refs:Q,floatingStyles:he,placement:Y,isPositioned:O,middlewareData:A}=u$({strategy:"fixed",placement:E,whileElementsMounted:(...Ue)=>e$(...Ue,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[h$({mainAxis:s+_,alignmentAxis:i}),c&&f$({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?m$():void 0,...W}),c&&p$({...W}),g$({...W,apply:({elements:Ue,rects:De,availableWidth:Ye,availableHeight:st})=>{const{width:xt,height:it}=De.reference,Yt=Ue.floating.style;Yt.setProperty("--radix-popper-available-width",`${Ye}px`),Yt.setProperty("--radix-popper-available-height",`${st}px`),Yt.setProperty("--radix-popper-anchor-width",`${xt}px`),Yt.setProperty("--radix-popper-anchor-height",`${it}px`)}}),j&&y$({element:j,padding:l}),_$({arrowWidth:N,arrowHeight:_}),m&&v$({strategy:"referenceHidden",...W})]}),[U,D]=QC(Y),B=kt(x);tn(()=>{O&&(B==null||B())},[O,B]);const ue=(pe=A.arrow)==null?void 0:pe.x,_e=(ge=A.arrow)==null?void 0:ge.y,ye=((Ke=A.arrow)==null?void 0:Ke.centerOffset)!==0,[Be,Ie]=d.useState();return tn(()=>{w&&Ie(window.getComputedStyle(w).zIndex)},[w]),o.jsx("div",{ref:Q.setFloating,"data-radix-popper-content-wrapper":"",style:{...he,transform:O?he.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Be,"--radix-popper-transform-origin":[(le=A.transformOrigin)==null?void 0:le.x,(Re=A.transformOrigin)==null?void 0:Re.y].join(" "),...((Me=A.hide)==null?void 0:Me.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(j$,{scope:n,placedSide:U,onArrowChange:S,arrowX:ue,arrowY:_e,shouldHideArrow:ye,children:o.jsx(we.div,{"data-side":U,"data-align":D,...g,ref:b,style:{...g.style,animation:O?void 0:"none"}})})})});HC.displayName=nx;var WC="PopperArrow",N$={top:"bottom",right:"left",bottom:"top",left:"right"},GC=d.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,a=S$(WC,r),i=N$[a.placedSide];return o.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:o.jsx(w$,{...s,ref:n,style:{...s.style,display:"block"}})})});GC.displayName=WC;function C$(e){return e!==null}var _$=e=>({name:"transformOrigin",options:e,fn(t){var y,w,v;const{placement:n,rects:r,middlewareData:s}=t,i=((y=s.arrow)==null?void 0:y.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[u,h]=QC(n),f={start:"0%",center:"50%",end:"100%"}[h],m=(((w=s.arrow)==null?void 0:w.x)??0)+l/2,p=(((v=s.arrow)==null?void 0:v.y)??0)+c/2;let x="",g="";return u==="bottom"?(x=i?f:`${m}px`,g=`${-c}px`):u==="top"?(x=i?f:`${m}px`,g=`${r.floating.height+c}px`):u==="right"?(x=`${-c}px`,g=i?f:`${p}px`):u==="left"&&(x=`${r.floating.width+c}px`,g=i?f:`${p}px`),{data:{x,y:g}}}});function QC(e){const[t,n="center"]=e.split("-");return[t,n]}var Ru=KC,Rl=qC,Pu=HC,Au=GC,[Mf]=Nn("Tooltip",[Es]),Df=Es(),YC="TooltipProvider",E$=700,cv="tooltip.open",[k$,rx]=Mf(YC),JC=e=>{const{__scopeTooltip:t,delayDuration:n=E$,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=e,i=d.useRef(!0),l=d.useRef(!1),c=d.useRef(0);return d.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),o.jsx(k$,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:d.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:d.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:d.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:a})};JC.displayName=YC;var eu="Tooltip",[T$,Ou]=Mf(eu),XC=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s,onOpenChange:a,disableHoverableContent:i,delayDuration:l}=e,c=rx(eu,e.__scopeTooltip),u=Df(t),[h,f]=d.useState(null),m=Un(),p=d.useRef(0),x=i??c.disableHoverableContent,g=l??c.delayDuration,y=d.useRef(!1),[w,v]=rr({prop:r,defaultProp:s??!1,onChange:N=>{N?(c.onOpen(),document.dispatchEvent(new CustomEvent(cv))):c.onClose(),a==null||a(N)},caller:eu}),b=d.useMemo(()=>w?y.current?"delayed-open":"instant-open":"closed",[w]),j=d.useCallback(()=>{window.clearTimeout(p.current),p.current=0,y.current=!1,v(!0)},[v]),S=d.useCallback(()=>{window.clearTimeout(p.current),p.current=0,v(!1)},[v]),C=d.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{y.current=!0,v(!0),p.current=0},g)},[g,v]);return d.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),o.jsx(Ru,{...u,children:o.jsx(T$,{scope:t,contentId:m,open:w,stateAttribute:b,trigger:h,onTriggerChange:f,onTriggerEnter:d.useCallback(()=>{c.isOpenDelayedRef.current?C():j()},[c.isOpenDelayedRef,C,j]),onTriggerLeave:d.useCallback(()=>{x?S():(window.clearTimeout(p.current),p.current=0)},[S,x]),onOpen:j,onClose:S,disableHoverableContent:x,children:n})})};XC.displayName=eu;var uv="TooltipTrigger",ZC=d.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Ou(uv,n),a=rx(uv,n),i=Df(n),l=d.useRef(null),c=Ge(t,l,s.onTriggerChange),u=d.useRef(!1),h=d.useRef(!1),f=d.useCallback(()=>u.current=!1,[]);return d.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),o.jsx(Rl,{asChild:!0,...i,children:o.jsx(we.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Z(e.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:Z(e.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:Z(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Z(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:Z(e.onBlur,s.onClose),onClick:Z(e.onClick,s.onClose)})})});ZC.displayName=uv;var sx="TooltipPortal",[R$,P$]=Mf(sx,{forceMount:void 0}),e_=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:s}=e,a=Ou(sx,t);return o.jsx(R$,{scope:t,forceMount:n,children:o.jsx($t,{present:n||a.open,children:o.jsx(Ga,{asChild:!0,container:s,children:r})})})};e_.displayName=sx;var fl="TooltipContent",t_=d.forwardRef((e,t)=>{const n=P$(fl,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=e,i=Ou(fl,e.__scopeTooltip);return o.jsx($t,{present:r||i.open,children:i.disableHoverableContent?o.jsx(n_,{side:s,...a,ref:t}):o.jsx(A$,{side:s,...a,ref:t})})}),A$=d.forwardRef((e,t)=>{const n=Ou(fl,e.__scopeTooltip),r=rx(fl,e.__scopeTooltip),s=d.useRef(null),a=Ge(t,s),[i,l]=d.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:f}=r,m=d.useCallback(()=>{l(null),f(!1)},[f]),p=d.useCallback((x,g)=>{const y=x.currentTarget,w={x:x.clientX,y:x.clientY},v=$$(w,y.getBoundingClientRect()),b=L$(w,v),j=F$(g.getBoundingClientRect()),S=U$([...b,...j]);l(S),f(!0)},[f]);return d.useEffect(()=>()=>m(),[m]),d.useEffect(()=>{if(c&&h){const x=y=>p(y,h),g=y=>p(y,c);return c.addEventListener("pointerleave",x),h.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",x),h.removeEventListener("pointerleave",g)}}},[c,h,p,m]),d.useEffect(()=>{if(i){const x=g=>{const y=g.target,w={x:g.clientX,y:g.clientY},v=(c==null?void 0:c.contains(y))||(h==null?void 0:h.contains(y)),b=!z$(w,i);v?m():b&&(m(),u())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,h,i,u,m]),o.jsx(n_,{...e,ref:a})}),[O$,I$]=Mf(eu,{isInside:!1}),M$=M1("TooltipContent"),n_=d.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:i,...l}=e,c=Ou(fl,n),u=Df(n),{onClose:h}=c;return d.useEffect(()=>(document.addEventListener(cv,h),()=>document.removeEventListener(cv,h)),[h]),d.useEffect(()=>{if(c.trigger){const f=m=>{const p=m.target;p!=null&&p.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),o.jsx(Xs,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:o.jsxs(Pu,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(M$,{children:r}),o.jsx(O$,{scope:n,isInside:!0,children:o.jsx(z1,{id:c.contentId,role:"tooltip",children:s||r})})]})})});t_.displayName=fl;var r_="TooltipArrow",D$=d.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Df(n);return I$(r_,n).isInside?null:o.jsx(Au,{...s,...r,ref:t})});D$.displayName=r_;function $$(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function L$(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function F$(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function z$(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const l=t[a],c=t[i],u=l.x,h=l.y,f=c.x,m=c.y;h>r!=m>r&&n<(f-u)*(r-h)/(m-h)+u&&(s=!s)}return s}function U$(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),B$(t)}function B$(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const a=n[n.length-1],i=n[n.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var K$=JC,V$=XC,q$=ZC,H$=e_,s_=t_;const o_=K$,W$=V$,G$=q$,a_=d.forwardRef(({className:e,sideOffset:t=4,...n},r)=>o.jsx(H$,{children:o.jsx(s_,{ref:r,sideOffset:t,className:ee("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n})}));a_.displayName=s_.displayName;const jt=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:ee("rounded-xl border bg-card text-card-foreground shadow",e),...t}));jt.displayName="Card";const Us=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:ee("flex flex-col space-y-1.5 p-6",e),...t}));Us.displayName="CardHeader";const Bs=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:ee("font-semibold leading-none tracking-tight",e),...t}));Bs.displayName="CardTitle";const tu=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:ee("text-sm text-muted-foreground",e),...t}));tu.displayName="CardDescription";const on=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:ee("p-6 pt-0",e),...t}));on.displayName="CardContent";const ox=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:ee("flex items-center p-6 pt-0",e),...t}));ox.displayName="CardFooter";var Q$=Symbol.for("react.lazy"),Dh=uf[" use ".trim().toString()];function Y$(e){return typeof e=="object"&&e!==null&&"then"in e}function i_(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===Q$&&"_payload"in e&&Y$(e._payload)}function l_(e){const t=J$(e),n=d.forwardRef((r,s)=>{let{children:a,...i}=r;i_(a)&&typeof Dh=="function"&&(a=Dh(a._payload));const l=d.Children.toArray(a),c=l.find(Z$);if(c){const u=c.props.children,h=l.map(f=>f===c?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:f);return o.jsx(t,{...i,ref:s,children:d.isValidElement(u)?d.cloneElement(u,void 0,h):null})}return o.jsx(t,{...i,ref:s,children:a})});return n.displayName=`${e}.Slot`,n}var Pl=l_("Slot");function J$(e){const t=d.forwardRef((n,r)=>{let{children:s,...a}=n;if(i_(s)&&typeof Dh=="function"&&(s=Dh(s._payload)),d.isValidElement(s)){const i=t3(s),l=e3(a,s.props);return s.type!==d.Fragment&&(l.ref=r?Cl(r,i):i),d.cloneElement(s,l)}return d.Children.count(s)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var X$=Symbol("radix.slottable");function Z$(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===X$}function e3(e,t){const n={...t};for(const r in t){const s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}function t3(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const ax=Wo("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),V=d.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},a)=>{const i=r?Pl:"button";return o.jsx(i,{className:ee(ax({variant:t,size:n,className:e})),ref:a,...s})});V.displayName="Button";const n3=Wo("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),$h=d.forwardRef(({className:e,variant:t,...n},r)=>o.jsx("div",{ref:r,role:"alert",className:ee(n3({variant:t}),e),...n}));$h.displayName="Alert";const c_=d.forwardRef(({className:e,...t},n)=>o.jsx("h5",{ref:n,className:ee("mb-1 font-medium leading-none tracking-tight",e),...t}));c_.displayName="AlertTitle";const Lh=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:ee("text-sm [&_p]:leading-relaxed",e),...t}));Lh.displayName="AlertDescription";class r3 extends d.Component{constructor(t){super(t),this.handleReload=()=>{window.location.reload()},this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t,errorInfo:null}}componentDidCatch(t,n){console.group(" React Error Boundary Caught Error"),console.error("Error:",t),console.error("Error Info:",n),console.error("Component Stack:",n.componentStack),console.error("Error Stack:",t.stack),console.groupEnd(),this.setState({error:t,errorInfo:n}),typeof window<"u"&&window.reportError&&window.reportError(t)}render(){return this.state.hasError?o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-background p-4",children:o.jsxs(jt,{className:"w-full max-w-2xl border-border bg-card",children:[o.jsxs(Us,{className:"text-center",children:[o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("div",{className:"rounded-full bg-destructive/10 dark:bg-destructive/20 p-3",children:o.jsx(bs,{className:"h-12 w-12 text-destructive"})})}),o.jsx(Bs,{className:"text-3xl font-bold text-foreground",children:"Something went wrong"}),o.jsx(tu,{className:"text-base mt-2 text-muted-foreground",children:"The application encountered an unexpected error"})]}),o.jsxs(on,{className:"space-y-4",children:[this.state.error&&o.jsxs($h,{variant:"destructive",className:"border-destructive/50 bg-destructive/10",children:[o.jsx(bs,{className:"h-4 w-4"}),o.jsx(c_,{className:"text-destructive-foreground",children:"Error Message"}),o.jsx(Lh,{className:"font-mono text-sm mt-2 text-destructive-foreground/90",children:this.state.error.message})]}),this.state.errorInfo&&o.jsxs("details",{className:"group",children:[o.jsx("summary",{className:"cursor-pointer list-none",children:o.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50 dark:bg-muted/30 rounded-lg hover:bg-muted/70 dark:hover:bg-muted/50 transition-colors border border-border",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(uD,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{className:"font-medium text-sm text-foreground",children:"Technical Details"})]}),o.jsx("span",{className:"text-xs text-muted-foreground group-open:hidden",children:"Click to expand"})]})}),o.jsx("div",{className:"mt-2 p-4 bg-muted/30 dark:bg-muted/20 rounded-lg border border-border",children:o.jsx("div",{className:"text-xs font-mono text-muted-foreground whitespace-pre-wrap break-words",children:this.state.errorInfo.componentStack})})]})]}),o.jsxs(ox,{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[o.jsx(V,{onClick:this.handleReset,variant:"outline",className:"w-full sm:w-auto",children:"Try Again"}),o.jsxs(V,{onClick:this.handleReload,className:"w-full sm:w-auto",children:[o.jsx(pn,{className:"w-4 h-4 mr-2"}),"Reload Page"]}),o.jsx(kn,{href:"/",children:o.jsxs(V,{variant:"ghost",className:"w-full sm:w-auto",children:[o.jsx(vC,{className:"w-4 h-4 mr-2"}),"Go Home"]})})]}),o.jsx("div",{className:"px-6 pb-6",children:o.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"If this problem persists, check the browser console for more details."})})]})}):this.props.children}}const u_=d.createContext(void 0);function s3({children:e}){const[t,n]=d.useState(new Map),r=d.useCallback(u=>{n(h=>{const f=new Map(h);return f.set(u.id,{...u,startTime:Date.now()}),f})},[]),s=d.useCallback((u,h,f)=>{n(m=>{const p=new Map(m),x=p.get(u);return x&&p.set(u,{...x,completed:h,currentDate:f}),p})},[]),a=d.useCallback(u=>{n(h=>{const f=new Map(h),m=f.get(u);return m&&(m.abortController.abort(),f.delete(u)),f})},[]),i=d.useCallback(u=>{n(h=>{const f=new Map(h);return f.delete(u),f})},[]),l=d.useCallback(u=>t.get(u),[t]),c=t.size>0;return o.jsx(u_.Provider,{value:{activeAnalyses:t,startAnalysis:r,updateProgress:s,stopAnalysis:a,completeAnalysis:i,getAnalysisById:l,hasActiveAnalyses:c},children:e})}function d_(){const e=d.useContext(u_);if(!e)throw new Error("useGlobalAnalysis must be used within GlobalAnalysisProvider");return e}const An=d.forwardRef(({className:e,type:t,...n},r)=>o.jsx("input",{type:t,className:ee("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));An.displayName="Input";const o3=Wo("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function me({className:e,variant:t,...n}){return o.jsx("div",{className:ee(o3({variant:t}),e),...n})}var ap="focusScope.autoFocusOnMount",ip="focusScope.autoFocusOnUnmount",pb={bubbles:!1,cancelable:!0},a3="FocusScope",Iu=d.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...i}=e,[l,c]=d.useState(null),u=kt(s),h=kt(a),f=d.useRef(null),m=Ge(t,g=>c(g)),p=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(r){let g=function(b){if(p.paused||!l)return;const j=b.target;l.contains(j)?f.current=j:ao(f.current,{select:!0})},y=function(b){if(p.paused||!l)return;const j=b.relatedTarget;j!==null&&(l.contains(j)||ao(f.current,{select:!0}))},w=function(b){if(document.activeElement===document.body)for(const S of b)S.removedNodes.length>0&&ao(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const v=new MutationObserver(w);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),v.disconnect()}}},[r,l,p.paused]),d.useEffect(()=>{if(l){vb.add(p);const g=document.activeElement;if(!l.contains(g)){const w=new CustomEvent(ap,pb);l.addEventListener(ap,u),l.dispatchEvent(w),w.defaultPrevented||(i3(h3(h_(l)),{select:!0}),document.activeElement===g&&ao(l))}return()=>{l.removeEventListener(ap,u),setTimeout(()=>{const w=new CustomEvent(ip,pb);l.addEventListener(ip,h),l.dispatchEvent(w),w.defaultPrevented||ao(g??document.body,{select:!0}),l.removeEventListener(ip,h),vb.remove(p)},0)}}},[l,u,h,p]);const x=d.useCallback(g=>{if(!n&&!r||p.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,w=document.activeElement;if(y&&w){const v=g.currentTarget,[b,j]=l3(v);b&&j?!g.shiftKey&&w===j?(g.preventDefault(),n&&ao(b,{select:!0})):g.shiftKey&&w===b&&(g.preventDefault(),n&&ao(j,{select:!0})):w===v&&g.preventDefault()}},[n,r,p.paused]);return o.jsx(we.div,{tabIndex:-1,...i,ref:m,onKeyDown:x})});Iu.displayName=a3;function i3(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(ao(r,{select:t}),document.activeElement!==n)return}function l3(e){const t=h_(e),n=gb(t,e),r=gb(t.reverse(),e);return[n,r]}function h_(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function gb(e,t){for(const n of e)if(!c3(n,{upTo:t}))return n}function c3(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function u3(e){return e instanceof HTMLInputElement&&"select"in e}function ao(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&u3(e)&&t&&e.select()}}var vb=d3();function d3(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=yb(e,t),e.unshift(t)},remove(t){var n;e=yb(e,t),(n=e[0])==null||n.resume()}}}function yb(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function h3(e){return e.filter(t=>t.tagName!=="A")}var lp=0;function $f(){d.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??xb()),document.body.insertAdjacentElement("beforeend",e[1]??xb()),lp++,()=>{lp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),lp--}},[])}function xb(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var dv=function(e,t){return dv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},dv(e,t)};function f_(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");dv(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Ar=function(){return Ar=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Ar.apply(this,arguments)};function Qo(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function m_(e,t,n,r){var s=arguments.length,a=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(s<3?i(a):s>3?i(t,n,a):i(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a}function p_(e,t){return function(n,r){t(n,r,e)}}function g_(e,t,n,r,s,a){function i(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var l=r.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,h=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),f,m=!1,p=n.length-1;p>=0;p--){var x={};for(var g in r)x[g]=g==="access"?{}:r[g];for(var g in r.access)x.access[g]=r.access[g];x.addInitializer=function(w){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(i(w||null))};var y=(0,n[p])(l==="accessor"?{get:h.get,set:h.set}:h[c],x);if(l==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(f=i(y.get))&&(h.get=f),(f=i(y.set))&&(h.set=f),(f=i(y.init))&&s.unshift(f)}else(f=i(y))&&(l==="field"?s.unshift(f):h[c]=f)}u&&Object.defineProperty(u,r.name,h),m=!0}function v_(e,t,n){for(var r=arguments.length>2,s=0;s<t.length;s++)n=r?t[s].call(e,n):t[s].call(e);return r?n:void 0}function y_(e){return typeof e=="symbol"?e:"".concat(e)}function x_(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function w_(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Ae(e,t,n,r){function s(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(h){try{u(r.next(h))}catch(f){i(f)}}function c(h){try{u(r.throw(h))}catch(f){i(f)}}function u(h){h.done?a(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})}function b_(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(h){return c([u,h])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(n=0)),n;)try{if(r=1,s&&(a=u[0]&2?s.return:u[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,u[1])).done)return a;switch(s=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(h){u=[6,h],s=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Lf=Object.create?(function(e,t,n,r){r===void 0&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]});function j_(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Lf(t,e,n)}function Fh(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ix(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(l){i={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a}function S_(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ix(arguments[t]));return e}function N_(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),s=0,t=0;t<n;t++)for(var a=arguments[t],i=0,l=a.length;i<l;i++,s++)r[s]=a[i];return r}function lx(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function ml(e){return this instanceof ml?(this.v=e,this):new ml(e)}function C_(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(p){return function(x){return Promise.resolve(x).then(p,f)}}function l(p,x){r[p]&&(s[p]=function(g){return new Promise(function(y,w){a.push([p,g,y,w])>1||c(p,g)})},x&&(s[p]=x(s[p])))}function c(p,x){try{u(r[p](x))}catch(g){m(a[0][3],g)}}function u(p){p.value instanceof ml?Promise.resolve(p.value.v).then(h,f):m(a[0][2],p)}function h(p){c("next",p)}function f(p){c("throw",p)}function m(p,x){p(x),a.shift(),a.length&&c(a[0][0],a[0][1])}}function __(e){var t,n;return t={},r("next"),r("throw",function(s){throw s}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(s,a){t[s]=e[s]?function(i){return(n=!n)?{value:ml(e[s](i)),done:!1}:a?a(i):i}:a}}function E_(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Fh=="function"?Fh(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(i){return new Promise(function(l,c){i=e[a](i),s(l,c,i.done,i.value)})}}function s(a,i,l,c){Promise.resolve(c).then(function(u){a({value:u,done:l})},i)}}function k_(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var f3=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},hv=function(e){return hv=Object.getOwnPropertyNames||function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[n.length]=r);return n},hv(e)};function T_(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=hv(e),r=0;r<n.length;r++)n[r]!=="default"&&Lf(t,e,n[r]);return f3(t,e),t}function R_(e){return e&&e.__esModule?e:{default:e}}function P_(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function A_(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n}function O_(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function I_(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var m3=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function M_(e){function t(a){e.error=e.hasError?new m3(a,e.error,"An error was suppressed during disposal."):a,e.hasError=!0}var n,r=0;function s(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(s);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(s,function(i){return t(i),s()})}else r|=1}catch(i){t(i)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}function D_(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,s,a,i){return r?t?".jsx":".js":s&&(!a||!i)?n:s+a+"."+i.toLowerCase()+"js"}):e}const p3={__extends:f_,__assign:Ar,__rest:Qo,__decorate:m_,__param:p_,__esDecorate:g_,__runInitializers:v_,__propKey:y_,__setFunctionName:x_,__metadata:w_,__awaiter:Ae,__generator:b_,__createBinding:Lf,__exportStar:j_,__values:Fh,__read:ix,__spread:S_,__spreadArrays:N_,__spreadArray:lx,__await:ml,__asyncGenerator:C_,__asyncDelegator:__,__asyncValues:E_,__makeTemplateObject:k_,__importStar:T_,__importDefault:R_,__classPrivateFieldGet:P_,__classPrivateFieldSet:A_,__classPrivateFieldIn:O_,__addDisposableResource:I_,__disposeResources:M_,__rewriteRelativeImportExtension:D_},g3=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:I_,get __assign(){return Ar},__asyncDelegator:__,__asyncGenerator:C_,__asyncValues:E_,__await:ml,__awaiter:Ae,__classPrivateFieldGet:P_,__classPrivateFieldIn:O_,__classPrivateFieldSet:A_,__createBinding:Lf,__decorate:m_,__disposeResources:M_,__esDecorate:g_,__exportStar:j_,__extends:f_,__generator:b_,__importDefault:R_,__importStar:T_,__makeTemplateObject:k_,__metadata:w_,__param:p_,__propKey:y_,__read:ix,__rest:Qo,__rewriteRelativeImportExtension:D_,__runInitializers:v_,__setFunctionName:x_,__spread:S_,__spreadArray:lx,__spreadArrays:N_,__values:Fh,default:p3},Symbol.toStringTag,{value:"Module"}));var eh="right-scroll-bar-position",th="width-before-scroll-bar",v3="with-scroll-bars-hidden",y3="--removed-body-scroll-bar-size";function cp(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function x3(e,t){var n=d.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var w3=typeof window<"u"?d.useLayoutEffect:d.useEffect,wb=new WeakMap;function b3(e,t){var n=x3(null,function(r){return e.forEach(function(s){return cp(s,r)})});return w3(function(){var r=wb.get(n);if(r){var s=new Set(r),a=new Set(e),i=n.current;s.forEach(function(l){a.has(l)||cp(l,null)}),a.forEach(function(l){s.has(l)||cp(l,i)})}wb.set(n,e)},[e]),n}function j3(e){return e}function S3(e,t){t===void 0&&(t=j3);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var i=t(a,r);return n.push(i),function(){n=n.filter(function(l){return l!==i})}},assignSyncMedium:function(a){for(r=!0;n.length;){var i=n;n=[],i.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var i=[];if(n.length){var l=n;n=[],l.forEach(a),i=n}var c=function(){var h=i;i=[],h.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){i.push(h),u()},filter:function(h){return i=i.filter(h),n}}}};return s}function N3(e){e===void 0&&(e={});var t=S3(null);return t.options=Ar({async:!0,ssr:!1},e),t}var $_=function(e){var t=e.sideCar,n=Qo(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return d.createElement(r,Ar({},n))};$_.isSideCarExport=!0;function C3(e,t){return e.useMedium(t),$_}var L_=N3(),up=function(){},Ff=d.forwardRef(function(e,t){var n=d.useRef(null),r=d.useState({onScrollCapture:up,onWheelCapture:up,onTouchMoveCapture:up}),s=r[0],a=r[1],i=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,h=e.enabled,f=e.shards,m=e.sideCar,p=e.noRelative,x=e.noIsolation,g=e.inert,y=e.allowPinchZoom,w=e.as,v=w===void 0?"div":w,b=e.gapMode,j=Qo(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=m,C=b3([n,t]),N=Ar(Ar({},j),s);return d.createElement(d.Fragment,null,h&&d.createElement(S,{sideCar:L_,removeScrollBar:u,shards:f,noRelative:p,noIsolation:x,inert:g,setCallbacks:a,allowPinchZoom:!!y,lockRef:n,gapMode:b}),i?d.cloneElement(d.Children.only(l),Ar(Ar({},N),{ref:C})):d.createElement(v,Ar({},N,{className:c,ref:C}),l))});Ff.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ff.classNames={fullWidth:th,zeroRight:eh};var _3=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function E3(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=_3();return t&&e.setAttribute("nonce",t),e}function k3(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function T3(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var R3=function(){var e=0,t=null;return{add:function(n){e==0&&(t=E3())&&(k3(t,n),T3(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},P3=function(){var e=R3();return function(t,n){d.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},F_=function(){var e=P3(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},A3={left:0,top:0,right:0,gap:0},dp=function(e){return parseInt(e||"",10)||0},O3=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[dp(n),dp(r),dp(s)]},I3=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return A3;var t=O3(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},M3=F_(),Mi="data-scroll-locked",D3=function(e,t,n,r){var s=e.left,a=e.top,i=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(v3,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Mi,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(eh,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(th,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(eh," .").concat(eh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(th," .").concat(th,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Mi,`] {
    `).concat(y3,": ").concat(l,`px;
  }
`)},bb=function(){var e=parseInt(document.body.getAttribute(Mi)||"0",10);return isFinite(e)?e:0},$3=function(){d.useEffect(function(){return document.body.setAttribute(Mi,(bb()+1).toString()),function(){var e=bb()-1;e<=0?document.body.removeAttribute(Mi):document.body.setAttribute(Mi,e.toString())}},[])},L3=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;$3();var a=d.useMemo(function(){return I3(s)},[s]);return d.createElement(M3,{styles:D3(a,!t,s,n?"":"!important")})},fv=!1;if(typeof window<"u")try{var wd=Object.defineProperty({},"passive",{get:function(){return fv=!0,!0}});window.addEventListener("test",wd,wd),window.removeEventListener("test",wd,wd)}catch{fv=!1}var ei=fv?{passive:!1}:!1,F3=function(e){return e.tagName==="TEXTAREA"},z_=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!F3(e)&&n[t]==="visible")},z3=function(e){return z_(e,"overflowY")},U3=function(e){return z_(e,"overflowX")},jb=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=U_(e,r);if(s){var a=B_(e,r),i=a[1],l=a[2];if(i>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},B3=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},K3=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},U_=function(e,t){return e==="v"?z3(t):U3(t)},B_=function(e,t){return e==="v"?B3(t):K3(t)},V3=function(e,t){return e==="h"&&t==="rtl"?-1:1},q3=function(e,t,n,r,s){var a=V3(e,window.getComputedStyle(t).direction),i=a*r,l=n.target,c=t.contains(l),u=!1,h=i>0,f=0,m=0;do{if(!l)break;var p=B_(e,l),x=p[0],g=p[1],y=p[2],w=g-y-a*x;(x||w)&&U_(e,l)&&(f+=w,m+=x);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(h&&Math.abs(f)<1||!h&&Math.abs(m)<1)&&(u=!0),u},bd=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Sb=function(e){return[e.deltaX,e.deltaY]},Nb=function(e){return e&&"current"in e?e.current:e},H3=function(e,t){return e[0]===t[0]&&e[1]===t[1]},W3=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},G3=0,ti=[];function Q3(e){var t=d.useRef([]),n=d.useRef([0,0]),r=d.useRef(),s=d.useState(G3++)[0],a=d.useState(F_)[0],i=d.useRef(e);d.useEffect(function(){i.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=lx([e.lockRef.current],(e.shards||[]).map(Nb),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=d.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!i.current.allowPinchZoom;var w=bd(g),v=n.current,b="deltaX"in g?g.deltaX:v[0]-w[0],j="deltaY"in g?g.deltaY:v[1]-w[1],S,C=g.target,N=Math.abs(b)>Math.abs(j)?"h":"v";if("touches"in g&&N==="h"&&C.type==="range")return!1;var _=jb(N,C);if(!_)return!0;if(_?S=N:(S=N==="v"?"h":"v",_=jb(N,C)),!_)return!1;if(!r.current&&"changedTouches"in g&&(b||j)&&(r.current=S),!S)return!0;var E=r.current||S;return q3(E,y,g,E==="h"?b:j)},[]),c=d.useCallback(function(g){var y=g;if(!(!ti.length||ti[ti.length-1]!==a)){var w="deltaY"in y?Sb(y):bd(y),v=t.current.filter(function(S){return S.name===y.type&&(S.target===y.target||y.target===S.shadowParent)&&H3(S.delta,w)})[0];if(v&&v.should){y.cancelable&&y.preventDefault();return}if(!v){var b=(i.current.shards||[]).map(Nb).filter(Boolean).filter(function(S){return S.contains(y.target)}),j=b.length>0?l(y,b[0]):!i.current.noIsolation;j&&y.cancelable&&y.preventDefault()}}},[]),u=d.useCallback(function(g,y,w,v){var b={name:g,delta:y,target:w,should:v,shadowParent:Y3(w)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(j){return j!==b})},1)},[]),h=d.useCallback(function(g){n.current=bd(g),r.current=void 0},[]),f=d.useCallback(function(g){u(g.type,Sb(g),g.target,l(g,e.lockRef.current))},[]),m=d.useCallback(function(g){u(g.type,bd(g),g.target,l(g,e.lockRef.current))},[]);d.useEffect(function(){return ti.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,ei),document.addEventListener("touchmove",c,ei),document.addEventListener("touchstart",h,ei),function(){ti=ti.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,ei),document.removeEventListener("touchmove",c,ei),document.removeEventListener("touchstart",h,ei)}},[]);var p=e.removeScrollBar,x=e.inert;return d.createElement(d.Fragment,null,x?d.createElement(a,{styles:W3(s)}):null,p?d.createElement(L3,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Y3(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const J3=C3(L_,Q3);var Mu=d.forwardRef(function(e,t){return d.createElement(Ff,Ar({},e,{ref:t,sideCar:J3}))});Mu.classNames=Ff.classNames;var X3=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ni=new WeakMap,jd=new WeakMap,Sd={},hp=0,K_=function(e){return e&&(e.host||K_(e.parentNode))},Z3=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=K_(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},e5=function(e,t,n,r){var s=Z3(t,Array.isArray(e)?e:[e]);Sd[n]||(Sd[n]=new WeakMap);var a=Sd[n],i=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))h(m);else try{var p=m.getAttribute(r),x=p!==null&&p!=="false",g=(ni.get(m)||0)+1,y=(a.get(m)||0)+1;ni.set(m,g),a.set(m,y),i.push(m),g===1&&x&&jd.set(m,!0),y===1&&m.setAttribute(n,"true"),x||m.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",m,w)}})};return h(t),l.clear(),hp++,function(){i.forEach(function(f){var m=ni.get(f)-1,p=a.get(f)-1;ni.set(f,m),a.set(f,p),m||(jd.has(f)||f.removeAttribute(r),jd.delete(f)),p||f.removeAttribute(n)}),hp--,hp||(ni=new WeakMap,ni=new WeakMap,jd=new WeakMap,Sd={})}},zf=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=X3(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),e5(r,s,n,"aria-hidden")):function(){return null}},Uf="Dialog",[V_,q_]=Nn(Uf),[t5,ds]=V_(Uf),H_=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:i=!0}=e,l=d.useRef(null),c=d.useRef(null),[u,h]=rr({prop:r,defaultProp:s??!1,onChange:a,caller:Uf});return o.jsx(t5,{scope:t,triggerRef:l,contentRef:c,contentId:Un(),titleId:Un(),descriptionId:Un(),open:u,onOpenChange:h,onOpenToggle:d.useCallback(()=>h(f=>!f),[h]),modal:i,children:n})};H_.displayName=Uf;var W_="DialogTrigger",G_=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ds(W_,n),a=Ge(t,s.triggerRef);return o.jsx(we.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":dx(s.open),...r,ref:a,onClick:Z(e.onClick,s.onOpenToggle)})});G_.displayName=W_;var cx="DialogPortal",[n5,Q_]=V_(cx,{forceMount:void 0}),Y_=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,a=ds(cx,t);return o.jsx(n5,{scope:t,forceMount:n,children:d.Children.map(r,i=>o.jsx($t,{present:n||a.open,children:o.jsx(Ga,{asChild:!0,container:s,children:i})}))})};Y_.displayName=cx;var zh="DialogOverlay",J_=d.forwardRef((e,t)=>{const n=Q_(zh,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=ds(zh,e.__scopeDialog);return a.modal?o.jsx($t,{present:r||a.open,children:o.jsx(s5,{...s,ref:t})}):null});J_.displayName=zh;var r5=La("DialogOverlay.RemoveScroll"),s5=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ds(zh,n);return o.jsx(Mu,{as:r5,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(we.div,{"data-state":dx(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),za="DialogContent",X_=d.forwardRef((e,t)=>{const n=Q_(za,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=ds(za,e.__scopeDialog);return o.jsx($t,{present:r||a.open,children:a.modal?o.jsx(o5,{...s,ref:t}):o.jsx(a5,{...s,ref:t})})});X_.displayName=za;var o5=d.forwardRef((e,t)=>{const n=ds(za,e.__scopeDialog),r=d.useRef(null),s=Ge(t,n.contentRef,r);return d.useEffect(()=>{const a=r.current;if(a)return zf(a)},[]),o.jsx(Z_,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Z(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:Z(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&a.preventDefault()}),onFocusOutside:Z(e.onFocusOutside,a=>a.preventDefault())})}),a5=d.forwardRef((e,t)=>{const n=ds(za,e.__scopeDialog),r=d.useRef(!1),s=d.useRef(!1);return o.jsx(Z_,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),Z_=d.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...i}=e,l=ds(za,n),c=d.useRef(null),u=Ge(t,c);return $f(),o.jsxs(o.Fragment,{children:[o.jsx(Iu,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(Xs,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":dx(l.open),...i,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(l5,{titleId:l.titleId}),o.jsx(u5,{contentRef:c,descriptionId:l.descriptionId})]})]})}),ux="DialogTitle",eE=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ds(ux,n);return o.jsx(we.h2,{id:s.titleId,...r,ref:t})});eE.displayName=ux;var tE="DialogDescription",nE=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ds(tE,n);return o.jsx(we.p,{id:s.descriptionId,...r,ref:t})});nE.displayName=tE;var rE="DialogClose",sE=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=ds(rE,n);return o.jsx(we.button,{type:"button",...r,ref:t,onClick:Z(e.onClick,()=>s.onOpenChange(!1))})});sE.displayName=rE;function dx(e){return e?"open":"closed"}var oE="DialogTitleWarning",[i5,aE]=xM(oE,{contentName:za,titleName:ux,docsSlug:"dialog"}),l5=({titleId:e})=>{const t=aE(oE),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return d.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},c5="DialogDescriptionWarning",u5=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${aE(c5).contentName}}.`;return d.useEffect(()=>{var a;const s=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},hx=H_,iE=G_,fx=Y_,Du=J_,$u=X_,Lu=eE,Fu=nE,Bf=sE;const en=hx,mx=iE,d5=fx,lE=d.forwardRef(({className:e,...t},n)=>o.jsx(Du,{ref:n,className:ee("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));lE.displayName=Du.displayName;const qt=d.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(d5,{children:[o.jsx(lE,{}),o.jsxs($u,{ref:r,className:ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,o.jsxs(Bf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(On,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));qt.displayName=$u.displayName;const Ht=({className:e,...t})=>o.jsx("div",{className:ee("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Ht.displayName="DialogHeader";const Zr=({className:e,...t})=>o.jsx("div",{className:ee("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Zr.displayName="DialogFooter";const Wt=d.forwardRef(({className:e,...t},n)=>o.jsx(Lu,{ref:n,className:ee("text-lg font-semibold leading-none tracking-tight",e),...t}));Wt.displayName=Lu.displayName;const Pn=d.forwardRef(({className:e,...t},n)=>o.jsx(Fu,{ref:n,className:ee("text-sm text-muted-foreground",e),...t}));Pn.displayName=Fu.displayName;var h5=d.createContext(void 0);function Al(e){const t=d.useContext(h5);return e||t||"ltr"}var fp="rovingFocusGroup.onEntryFocus",f5={bubbles:!1,cancelable:!0},zu="RovingFocusGroup",[mv,cE,m5]=_l(zu),[p5,Kf]=Nn(zu,[m5]),[g5,v5]=p5(zu),uE=d.forwardRef((e,t)=>o.jsx(mv.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(mv.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(y5,{...e,ref:t})})}));uE.displayName=zu;var y5=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=e,m=d.useRef(null),p=Ge(t,m),x=Al(a),[g,y]=rr({prop:i,defaultProp:l??null,onChange:c,caller:zu}),[w,v]=d.useState(!1),b=kt(u),j=cE(n),S=d.useRef(!1),[C,N]=d.useState(0);return d.useEffect(()=>{const _=m.current;if(_)return _.addEventListener(fp,b),()=>_.removeEventListener(fp,b)},[b]),o.jsx(g5,{scope:n,orientation:r,dir:x,loop:s,currentTabStopId:g,onItemFocus:d.useCallback(_=>y(_),[y]),onItemShiftTab:d.useCallback(()=>v(!0),[]),onFocusableItemAdd:d.useCallback(()=>N(_=>_+1),[]),onFocusableItemRemove:d.useCallback(()=>N(_=>_-1),[]),children:o.jsx(we.div,{tabIndex:w||C===0?-1:0,"data-orientation":r,...f,ref:p,style:{outline:"none",...e.style},onMouseDown:Z(e.onMouseDown,()=>{S.current=!0}),onFocus:Z(e.onFocus,_=>{const E=!S.current;if(_.target===_.currentTarget&&E&&!w){const M=new CustomEvent(fp,f5);if(_.currentTarget.dispatchEvent(M),!M.defaultPrevented){const T=j().filter(Y=>Y.focusable),R=T.find(Y=>Y.active),W=T.find(Y=>Y.id===g),he=[R,W,...T].filter(Boolean).map(Y=>Y.ref.current);fE(he,h)}}S.current=!1}),onBlur:Z(e.onBlur,()=>v(!1))})})}),dE="RovingFocusGroupItem",hE=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:i,...l}=e,c=Un(),u=a||c,h=v5(dE,n),f=h.currentTabStopId===u,m=cE(n),{onFocusableItemAdd:p,onFocusableItemRemove:x,currentTabStopId:g}=h;return d.useEffect(()=>{if(r)return p(),()=>x()},[r,p,x]),o.jsx(mv.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:o.jsx(we.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...l,ref:t,onMouseDown:Z(e.onMouseDown,y=>{r?h.onItemFocus(u):y.preventDefault()}),onFocus:Z(e.onFocus,()=>h.onItemFocus(u)),onKeyDown:Z(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){h.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const w=b5(y,h.orientation,h.dir);if(w!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let b=m().filter(j=>j.focusable).map(j=>j.ref.current);if(w==="last")b.reverse();else if(w==="prev"||w==="next"){w==="prev"&&b.reverse();const j=b.indexOf(y.currentTarget);b=h.loop?j5(b,j+1):b.slice(j+1)}setTimeout(()=>fE(b))}}),children:typeof i=="function"?i({isCurrentTabStop:f,hasTabStop:g!=null}):i})})});hE.displayName=dE;var x5={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function w5(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function b5(e,t,n){const r=w5(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return x5[r]}function fE(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function j5(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var mE=uE,pE=hE,pv=["Enter"," "],S5=["ArrowDown","PageUp","Home"],gE=["ArrowUp","PageDown","End"],N5=[...S5,...gE],C5={ltr:[...pv,"ArrowRight"],rtl:[...pv,"ArrowLeft"]},_5={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Uu="Menu",[nu,E5,k5]=_l(Uu),[Qa,vE]=Nn(Uu,[k5,Es,Kf]),Vf=Es(),yE=Kf(),[T5,Ya]=Qa(Uu),[R5,Bu]=Qa(Uu),xE=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:a,modal:i=!0}=e,l=Vf(t),[c,u]=d.useState(null),h=d.useRef(!1),f=kt(a),m=Al(s);return d.useEffect(()=>{const p=()=>{h.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>h.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),o.jsx(Ru,{...l,children:o.jsx(T5,{scope:t,open:n,onOpenChange:f,content:c,onContentChange:u,children:o.jsx(R5,{scope:t,onClose:d.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:h,dir:m,modal:i,children:r})})})};xE.displayName=Uu;var P5="MenuAnchor",px=d.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=Vf(n);return o.jsx(Rl,{...s,...r,ref:t})});px.displayName=P5;var gx="MenuPortal",[A5,wE]=Qa(gx,{forceMount:void 0}),bE=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,a=Ya(gx,t);return o.jsx(A5,{scope:t,forceMount:n,children:o.jsx($t,{present:n||a.open,children:o.jsx(Ga,{asChild:!0,container:s,children:r})})})};bE.displayName=gx;var Dr="MenuContent",[O5,vx]=Qa(Dr),jE=d.forwardRef((e,t)=>{const n=wE(Dr,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,a=Ya(Dr,e.__scopeMenu),i=Bu(Dr,e.__scopeMenu);return o.jsx(nu.Provider,{scope:e.__scopeMenu,children:o.jsx($t,{present:r||a.open,children:o.jsx(nu.Slot,{scope:e.__scopeMenu,children:i.modal?o.jsx(I5,{...s,ref:t}):o.jsx(M5,{...s,ref:t})})})})}),I5=d.forwardRef((e,t)=>{const n=Ya(Dr,e.__scopeMenu),r=d.useRef(null),s=Ge(t,r);return d.useEffect(()=>{const a=r.current;if(a)return zf(a)},[]),o.jsx(yx,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Z(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),M5=d.forwardRef((e,t)=>{const n=Ya(Dr,e.__scopeMenu);return o.jsx(yx,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),D5=La("MenuContent.ScrollLock"),yx=d.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:p,disableOutsideScroll:x,...g}=e,y=Ya(Dr,n),w=Bu(Dr,n),v=Vf(n),b=yE(n),j=E5(n),[S,C]=d.useState(null),N=d.useRef(null),_=Ge(t,N,y.onContentChange),E=d.useRef(0),M=d.useRef(""),T=d.useRef(0),R=d.useRef(null),W=d.useRef("right"),Q=d.useRef(0),he=x?Mu:d.Fragment,Y=x?{as:D5,allowPinchZoom:!0}:void 0,O=U=>{var pe,ge;const D=M.current+U,B=j().filter(Ke=>!Ke.disabled),ue=document.activeElement,_e=(pe=B.find(Ke=>Ke.ref.current===ue))==null?void 0:pe.textValue,ye=B.map(Ke=>Ke.textValue),Be=G5(ye,D,_e),Ie=(ge=B.find(Ke=>Ke.textValue===Be))==null?void 0:ge.ref.current;(function Ke(le){M.current=le,window.clearTimeout(E.current),le!==""&&(E.current=window.setTimeout(()=>Ke(""),1e3))})(D),Ie&&setTimeout(()=>Ie.focus())};d.useEffect(()=>()=>window.clearTimeout(E.current),[]),$f();const A=d.useCallback(U=>{var B,ue;return W.current===((B=R.current)==null?void 0:B.side)&&Y5(U,(ue=R.current)==null?void 0:ue.area)},[]);return o.jsx(O5,{scope:n,searchRef:M,onItemEnter:d.useCallback(U=>{A(U)&&U.preventDefault()},[A]),onItemLeave:d.useCallback(U=>{var D;A(U)||((D=N.current)==null||D.focus(),C(null))},[A]),onTriggerLeave:d.useCallback(U=>{A(U)&&U.preventDefault()},[A]),pointerGraceTimerRef:T,onPointerGraceIntentChange:d.useCallback(U=>{R.current=U},[]),children:o.jsx(he,{...Y,children:o.jsx(Iu,{asChild:!0,trapped:s,onMountAutoFocus:Z(a,U=>{var D;U.preventDefault(),(D=N.current)==null||D.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:o.jsx(Xs,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:p,children:o.jsx(mE,{asChild:!0,...b,dir:w.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:C,onEntryFocus:Z(c,U=>{w.isUsingKeyboardRef.current||U.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(Pu,{role:"menu","aria-orientation":"vertical","data-state":LE(y.open),"data-radix-menu-content":"",dir:w.dir,...v,...g,ref:_,style:{outline:"none",...g.style},onKeyDown:Z(g.onKeyDown,U=>{const B=U.target.closest("[data-radix-menu-content]")===U.currentTarget,ue=U.ctrlKey||U.altKey||U.metaKey,_e=U.key.length===1;B&&(U.key==="Tab"&&U.preventDefault(),!ue&&_e&&O(U.key));const ye=N.current;if(U.target!==ye||!N5.includes(U.key))return;U.preventDefault();const Ie=j().filter(pe=>!pe.disabled).map(pe=>pe.ref.current);gE.includes(U.key)&&Ie.reverse(),H5(Ie)}),onBlur:Z(e.onBlur,U=>{U.currentTarget.contains(U.target)||(window.clearTimeout(E.current),M.current="")}),onPointerMove:Z(e.onPointerMove,ru(U=>{const D=U.target,B=Q.current!==U.clientX;if(U.currentTarget.contains(D)&&B){const ue=U.clientX>Q.current?"right":"left";W.current=ue,Q.current=U.clientX}}))})})})})})})});jE.displayName=Dr;var $5="MenuGroup",xx=d.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(we.div,{role:"group",...r,ref:t})});xx.displayName=$5;var L5="MenuLabel",SE=d.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(we.div,{...r,ref:t})});SE.displayName=L5;var Uh="MenuItem",Cb="menu.itemSelect",qf=d.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,a=d.useRef(null),i=Bu(Uh,e.__scopeMenu),l=vx(Uh,e.__scopeMenu),c=Ge(t,a),u=d.useRef(!1),h=()=>{const f=a.current;if(!n&&f){const m=new CustomEvent(Cb,{bubbles:!0,cancelable:!0});f.addEventListener(Cb,p=>r==null?void 0:r(p),{once:!0}),Wc(f,m),m.defaultPrevented?u.current=!1:i.onClose()}};return o.jsx(NE,{...s,ref:c,disabled:n,onClick:Z(e.onClick,h),onPointerDown:f=>{var m;(m=e.onPointerDown)==null||m.call(e,f),u.current=!0},onPointerUp:Z(e.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:Z(e.onKeyDown,f=>{const m=l.searchRef.current!=="";n||m&&f.key===" "||pv.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});qf.displayName=Uh;var NE=d.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...a}=e,i=vx(Uh,n),l=yE(n),c=d.useRef(null),u=Ge(t,c),[h,f]=d.useState(!1),[m,p]=d.useState("");return d.useEffect(()=>{const x=c.current;x&&p((x.textContent??"").trim())},[a.children]),o.jsx(nu.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:o.jsx(pE,{asChild:!0,...l,focusable:!r,children:o.jsx(we.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:u,onPointerMove:Z(e.onPointerMove,ru(x=>{r?i.onItemLeave(x):(i.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Z(e.onPointerLeave,ru(x=>i.onItemLeave(x))),onFocus:Z(e.onFocus,()=>f(!0)),onBlur:Z(e.onBlur,()=>f(!1))})})})}),F5="MenuCheckboxItem",CE=d.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return o.jsx(RE,{scope:e.__scopeMenu,checked:n,children:o.jsx(qf,{role:"menuitemcheckbox","aria-checked":Bh(n)?"mixed":n,...s,ref:t,"data-state":bx(n),onSelect:Z(s.onSelect,()=>r==null?void 0:r(Bh(n)?!0:!n),{checkForDefaultPrevented:!1})})})});CE.displayName=F5;var _E="MenuRadioGroup",[z5,U5]=Qa(_E,{value:void 0,onValueChange:()=>{}}),EE=d.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,a=kt(r);return o.jsx(z5,{scope:e.__scopeMenu,value:n,onValueChange:a,children:o.jsx(xx,{...s,ref:t})})});EE.displayName=_E;var kE="MenuRadioItem",TE=d.forwardRef((e,t)=>{const{value:n,...r}=e,s=U5(kE,e.__scopeMenu),a=n===s.value;return o.jsx(RE,{scope:e.__scopeMenu,checked:a,children:o.jsx(qf,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":bx(a),onSelect:Z(r.onSelect,()=>{var i;return(i=s.onValueChange)==null?void 0:i.call(s,n)},{checkForDefaultPrevented:!1})})})});TE.displayName=kE;var wx="MenuItemIndicator",[RE,B5]=Qa(wx,{checked:!1}),PE=d.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,a=B5(wx,n);return o.jsx($t,{present:r||Bh(a.checked)||a.checked===!0,children:o.jsx(we.span,{...s,ref:t,"data-state":bx(a.checked)})})});PE.displayName=wx;var K5="MenuSeparator",AE=d.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(we.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});AE.displayName=K5;var V5="MenuArrow",OE=d.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=Vf(n);return o.jsx(Au,{...s,...r,ref:t})});OE.displayName=V5;var q5="MenuSub",[SK,IE]=Qa(q5),cc="MenuSubTrigger",ME=d.forwardRef((e,t)=>{const n=Ya(cc,e.__scopeMenu),r=Bu(cc,e.__scopeMenu),s=IE(cc,e.__scopeMenu),a=vx(cc,e.__scopeMenu),i=d.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:e.__scopeMenu},h=d.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return d.useEffect(()=>h,[h]),d.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),o.jsx(px,{asChild:!0,...u,children:o.jsx(NE,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":LE(n.open),...e,ref:Cl(t,s.onTriggerChange),onClick:f=>{var m;(m=e.onClick)==null||m.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Z(e.onPointerMove,ru(f=>{a.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:Z(e.onPointerLeave,ru(f=>{var p,x;h();const m=(p=n.content)==null?void 0:p.getBoundingClientRect();if(m){const g=(x=n.content)==null?void 0:x.dataset.side,y=g==="right",w=y?-5:5,v=m[y?"left":"right"],b=m[y?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+w,y:f.clientY},{x:v,y:m.top},{x:b,y:m.top},{x:b,y:m.bottom},{x:v,y:m.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Z(e.onKeyDown,f=>{var p;const m=a.searchRef.current!=="";e.disabled||m&&f.key===" "||C5[r.dir].includes(f.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),f.preventDefault())})})})});ME.displayName=cc;var DE="MenuSubContent",$E=d.forwardRef((e,t)=>{const n=wE(Dr,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,a=Ya(Dr,e.__scopeMenu),i=Bu(Dr,e.__scopeMenu),l=IE(DE,e.__scopeMenu),c=d.useRef(null),u=Ge(t,c);return o.jsx(nu.Provider,{scope:e.__scopeMenu,children:o.jsx($t,{present:r||a.open,children:o.jsx(nu.Slot,{scope:e.__scopeMenu,children:o.jsx(yx,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var f;i.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:Z(e.onFocusOutside,h=>{h.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Z(e.onEscapeKeyDown,h=>{i.onClose(),h.preventDefault()}),onKeyDown:Z(e.onKeyDown,h=>{var p;const f=h.currentTarget.contains(h.target),m=_5[i.dir].includes(h.key);f&&m&&(a.onOpenChange(!1),(p=l.trigger)==null||p.focus(),h.preventDefault())})})})})})});$E.displayName=DE;function LE(e){return e?"open":"closed"}function Bh(e){return e==="indeterminate"}function bx(e){return Bh(e)?"indeterminate":e?"checked":"unchecked"}function H5(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function W5(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function G5(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=W5(e,Math.max(a,0));s.length===1&&(i=i.filter(u=>u!==n));const c=i.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function Q5(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const l=t[a],c=t[i],u=l.x,h=l.y,f=c.x,m=c.y;h>r!=m>r&&n<(f-u)*(r-h)/(m-h)+u&&(s=!s)}return s}function Y5(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Q5(n,t)}function ru(e){return t=>t.pointerType==="mouse"?e(t):void 0}var J5=xE,X5=px,Z5=bE,eL=jE,tL=xx,nL=SE,rL=qf,sL=CE,oL=EE,aL=TE,iL=PE,lL=AE,cL=OE,uL=ME,dL=$E,Hf="DropdownMenu",[hL]=Nn(Hf,[vE]),Vn=vE(),[fL,FE]=hL(Hf),zE=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:a,onOpenChange:i,modal:l=!0}=e,c=Vn(t),u=d.useRef(null),[h,f]=rr({prop:s,defaultProp:a??!1,onChange:i,caller:Hf});return o.jsx(fL,{scope:t,triggerId:Un(),triggerRef:u,contentId:Un(),open:h,onOpenChange:f,onOpenToggle:d.useCallback(()=>f(m=>!m),[f]),modal:l,children:o.jsx(J5,{...c,open:h,onOpenChange:f,dir:r,modal:l,children:n})})};zE.displayName=Hf;var UE="DropdownMenuTrigger",BE=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,a=FE(UE,n),i=Vn(n);return o.jsx(X5,{asChild:!0,...i,children:o.jsx(we.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Cl(t,a.triggerRef),onPointerDown:Z(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:Z(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});BE.displayName=UE;var mL="DropdownMenuPortal",KE=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Vn(t);return o.jsx(Z5,{...r,...n})};KE.displayName=mL;var VE="DropdownMenuContent",qE=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=FE(VE,n),a=Vn(n),i=d.useRef(!1);return o.jsx(eL,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...r,ref:t,onCloseAutoFocus:Z(e.onCloseAutoFocus,l=>{var c;i.current||(c=s.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:Z(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,h=c.button===2||u;(!s.modal||h)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});qE.displayName=VE;var pL="DropdownMenuGroup",gL=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Vn(n);return o.jsx(tL,{...s,...r,ref:t})});gL.displayName=pL;var vL="DropdownMenuLabel",HE=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Vn(n);return o.jsx(nL,{...s,...r,ref:t})});HE.displayName=vL;var yL="DropdownMenuItem",WE=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Vn(n);return o.jsx(rL,{...s,...r,ref:t})});WE.displayName=yL;var xL="DropdownMenuCheckboxItem",GE=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Vn(n);return o.jsx(sL,{...s,...r,ref:t})});GE.displayName=xL;var wL="DropdownMenuRadioGroup",bL=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Vn(n);return o.jsx(oL,{...s,...r,ref:t})});bL.displayName=wL;var jL="DropdownMenuRadioItem",QE=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Vn(n);return o.jsx(aL,{...s,...r,ref:t})});QE.displayName=jL;var SL="DropdownMenuItemIndicator",YE=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Vn(n);return o.jsx(iL,{...s,...r,ref:t})});YE.displayName=SL;var NL="DropdownMenuSeparator",JE=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Vn(n);return o.jsx(lL,{...s,...r,ref:t})});JE.displayName=NL;var CL="DropdownMenuArrow",_L=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Vn(n);return o.jsx(cL,{...s,...r,ref:t})});_L.displayName=CL;var EL="DropdownMenuSubTrigger",XE=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Vn(n);return o.jsx(uL,{...s,...r,ref:t})});XE.displayName=EL;var kL="DropdownMenuSubContent",ZE=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Vn(n);return o.jsx(dL,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ZE.displayName=kL;var TL=zE,RL=BE,PL=KE,ek=qE,tk=HE,nk=WE,rk=GE,sk=QE,ok=YE,ak=JE,ik=XE,lk=ZE;function Ku(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var AL=["color"],OL=d.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Ku(e,AL);return d.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),d.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),IL=["color"],ML=d.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Ku(e,IL);return d.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),d.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),DL=["color"],$L=d.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Ku(e,DL);return d.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),d.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),LL=["color"],FL=d.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Ku(e,LL);return d.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),d.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))}),zL=["color"],UL=d.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Ku(e,zL);return d.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),d.createElement("path",{d:"M8 2H13.5C13.7761 2 14 2.22386 14 2.5V12.5C14 12.7761 13.7761 13 13.5 13H8V2ZM7 2H1.5C1.22386 2 1 2.22386 1 2.5V12.5C1 12.7761 1.22386 13 1.5 13H7V2ZM0 2.5C0 1.67157 0.671573 1 1.5 1H13.5C14.3284 1 15 1.67157 15 2.5V12.5C15 13.3284 14.3284 14 13.5 14H1.5C0.671573 14 0 13.3284 0 12.5V2.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});const Ol=TL,Il=RL,BL=d.forwardRef(({className:e,inset:t,children:n,...r},s)=>o.jsxs(ik,{ref:s,className:ee("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[n,o.jsx(ML,{className:"ml-auto"})]}));BL.displayName=ik.displayName;const KL=d.forwardRef(({className:e,...t},n)=>o.jsx(lk,{ref:n,className:ee("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));KL.displayName=lk.displayName;const Ja=d.forwardRef(({className:e,sideOffset:t=4,...n},r)=>o.jsx(PL,{children:o.jsx(ek,{ref:r,sideOffset:t,className:ee("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})}));Ja.displayName=ek.displayName;const nr=d.forwardRef(({className:e,inset:t,...n},r)=>o.jsx(nk,{ref:r,className:ee("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",t&&"pl-8",e),...n}));nr.displayName=nk.displayName;const VL=d.forwardRef(({className:e,children:t,checked:n,...r},s)=>o.jsxs(rk,{ref:s,className:ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(ok,{children:o.jsx(OL,{className:"h-4 w-4"})})}),t]}));VL.displayName=rk.displayName;const qL=d.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(sk,{ref:r,className:ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(ok,{children:o.jsx(FL,{className:"h-2 w-2 fill-current"})})}),t]}));qL.displayName=sk.displayName;const HL=d.forwardRef(({className:e,inset:t,...n},r)=>o.jsx(tk,{ref:r,className:ee("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));HL.displayName=tk.displayName;const jx=d.forwardRef(({className:e,...t},n)=>o.jsx(ak,{ref:n,className:ee("-mx-1 my-1 h-px bg-muted",e),...t}));jx.displayName=ak.displayName;const ka=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{className:"relative w-full overflow-auto",children:o.jsx("table",{ref:n,className:ee("w-full caption-bottom text-sm",e),...t})}));ka.displayName="Table";const Ta=d.forwardRef(({className:e,...t},n)=>o.jsx("thead",{ref:n,className:ee("[&_tr]:border-b",e),...t}));Ta.displayName="TableHeader";const Ra=d.forwardRef(({className:e,...t},n)=>o.jsx("tbody",{ref:n,className:ee("[&_tr:last-child]:border-0",e),...t}));Ra.displayName="TableBody";const WL=d.forwardRef(({className:e,...t},n)=>o.jsx("tfoot",{ref:n,className:ee("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));WL.displayName="TableFooter";const ur=d.forwardRef(({className:e,...t},n)=>o.jsx("tr",{ref:n,className:ee("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));ur.displayName="TableRow";const vt=d.forwardRef(({className:e,...t},n)=>o.jsx("th",{ref:n,className:ee("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));vt.displayName="TableHead";const yt=d.forwardRef(({className:e,...t},n)=>o.jsx("td",{ref:n,className:ee("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));yt.displayName="TableCell";const GL=d.forwardRef(({className:e,...t},n)=>o.jsx("caption",{ref:n,className:ee("mt-4 text-sm text-muted-foreground",e),...t}));GL.displayName="TableCaption";function Sx(e){const t=d.useRef({value:e,previous:e});return d.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Wf="Checkbox",[QL]=Nn(Wf),[YL,Nx]=QL(Wf);function JL(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:a,form:i,name:l,onCheckedChange:c,required:u,value:h="on",internal_do_not_use_render:f}=e,[m,p]=rr({prop:n,defaultProp:s??!1,onChange:c,caller:Wf}),[x,g]=d.useState(null),[y,w]=d.useState(null),v=d.useRef(!1),b=x?!!i||!!x.closest("form"):!0,j={checked:m,disabled:a,setChecked:p,control:x,setControl:g,name:l,form:i,value:h,hasConsumerStoppedPropagationRef:v,required:u,defaultChecked:$o(s)?!1:s,isFormControl:b,bubbleInput:y,setBubbleInput:w};return o.jsx(YL,{scope:t,...j,children:XL(f)?f(j):r})}var ck="CheckboxTrigger",uk=d.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:a,value:i,disabled:l,checked:c,required:u,setControl:h,setChecked:f,hasConsumerStoppedPropagationRef:m,isFormControl:p,bubbleInput:x}=Nx(ck,e),g=Ge(s,h),y=d.useRef(c);return d.useEffect(()=>{const w=a==null?void 0:a.form;if(w){const v=()=>f(y.current);return w.addEventListener("reset",v),()=>w.removeEventListener("reset",v)}},[a,f]),o.jsx(we.button,{type:"button",role:"checkbox","aria-checked":$o(c)?"mixed":c,"aria-required":u,"data-state":pk(c),"data-disabled":l?"":void 0,disabled:l,value:i,...r,ref:g,onKeyDown:Z(t,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:Z(n,w=>{f(v=>$o(v)?!0:!v),x&&p&&(m.current=w.isPropagationStopped(),m.current||w.stopPropagation())})})});uk.displayName=ck;var Cx=d.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:i,disabled:l,value:c,onCheckedChange:u,form:h,...f}=e;return o.jsx(JL,{__scopeCheckbox:n,checked:s,defaultChecked:a,disabled:l,required:i,onCheckedChange:u,name:r,form:h,value:c,internal_do_not_use_render:({isFormControl:m})=>o.jsxs(o.Fragment,{children:[o.jsx(uk,{...f,ref:t,__scopeCheckbox:n}),m&&o.jsx(mk,{__scopeCheckbox:n})]})})});Cx.displayName=Wf;var dk="CheckboxIndicator",hk=d.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,a=Nx(dk,n);return o.jsx($t,{present:r||$o(a.checked)||a.checked===!0,children:o.jsx(we.span,{"data-state":pk(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});hk.displayName=dk;var fk="CheckboxBubbleInput",mk=d.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:i,required:l,disabled:c,name:u,value:h,form:f,bubbleInput:m,setBubbleInput:p}=Nx(fk,e),x=Ge(n,p),g=Sx(a),y=zC(r);d.useEffect(()=>{const v=m;if(!v)return;const b=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(b,"checked").set,C=!s.current;if(g!==a&&S){const N=new Event("click",{bubbles:C});v.indeterminate=$o(a),S.call(v,$o(a)?!1:a),v.dispatchEvent(N)}},[m,g,a,s]);const w=d.useRef($o(a)?!1:a);return o.jsx(we.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??w.current,required:l,disabled:c,name:u,value:h,form:f,...t,tabIndex:-1,ref:x,style:{...t.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});mk.displayName=fk;function XL(e){return typeof e=="function"}function $o(e){return e==="indeterminate"}function pk(e){return $o(e)?"indeterminate":e?"checked":"unchecked"}const es=d.forwardRef(({className:e,...t},n)=>o.jsx(Cx,{ref:n,className:ee("peer h-4 w-4 shrink-0 rounded-sm border border-input ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:o.jsx(hk,{className:ee("flex items-center justify-center text-current"),children:o.jsx(Ai,{className:"h-4 w-4"})})}));es.displayName=Cx.displayName;function gv(e,[t,n]){return Math.min(n,Math.max(t,e))}var ZL=[" ","Enter","ArrowUp","ArrowDown"],eF=[" ","Enter"],Ua="Select",[Gf,Qf,tF]=_l(Ua),[Ml]=Nn(Ua,[tF,Es]),Yf=Es(),[nF,Yo]=Ml(Ua),[rF,sF]=Ml(Ua),gk=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:a,value:i,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:m,required:p,form:x}=e,g=Yf(t),[y,w]=d.useState(null),[v,b]=d.useState(null),[j,S]=d.useState(!1),C=Al(u),[N,_]=rr({prop:r,defaultProp:s??!1,onChange:a,caller:Ua}),[E,M]=rr({prop:i,defaultProp:l,onChange:c,caller:Ua}),T=d.useRef(null),R=y?x||!!y.closest("form"):!0,[W,Q]=d.useState(new Set),he=Array.from(W).map(Y=>Y.props.value).join(";");return o.jsx(Ru,{...g,children:o.jsxs(nF,{required:p,scope:t,trigger:y,onTriggerChange:w,valueNode:v,onValueNodeChange:b,valueNodeHasChildren:j,onValueNodeHasChildrenChange:S,contentId:Un(),value:E,onValueChange:M,open:N,onOpenChange:_,dir:C,triggerPointerDownPosRef:T,disabled:m,children:[o.jsx(Gf.Provider,{scope:t,children:o.jsx(rF,{scope:e.__scopeSelect,onNativeOptionAdd:d.useCallback(Y=>{Q(O=>new Set(O).add(Y))},[]),onNativeOptionRemove:d.useCallback(Y=>{Q(O=>{const A=new Set(O);return A.delete(Y),A})},[]),children:n})}),R?o.jsxs(zk,{"aria-hidden":!0,required:p,tabIndex:-1,name:h,autoComplete:f,value:E,onChange:Y=>M(Y.target.value),disabled:m,form:x,children:[E===void 0?o.jsx("option",{value:""}):null,Array.from(W)]},he):null]})})};gk.displayName=Ua;var vk="SelectTrigger",yk=d.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,a=Yf(n),i=Yo(vk,n),l=i.disabled||r,c=Ge(t,i.onTriggerChange),u=Qf(n),h=d.useRef("touch"),[f,m,p]=Bk(g=>{const y=u().filter(b=>!b.disabled),w=y.find(b=>b.value===i.value),v=Kk(y,g,w);v!==void 0&&i.onValueChange(v.value)}),x=g=>{l||(i.onOpenChange(!0),p()),g&&(i.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return o.jsx(Rl,{asChild:!0,...a,children:o.jsx(we.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Uk(i.value)?"":void 0,...s,ref:c,onClick:Z(s.onClick,g=>{g.currentTarget.focus(),h.current!=="mouse"&&x(g)}),onPointerDown:Z(s.onPointerDown,g=>{h.current=g.pointerType;const y=g.target;y.hasPointerCapture(g.pointerId)&&y.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(x(g),g.preventDefault())}),onKeyDown:Z(s.onKeyDown,g=>{const y=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&m(g.key),!(y&&g.key===" ")&&ZL.includes(g.key)&&(x(),g.preventDefault())})})})});yk.displayName=vk;var xk="SelectValue",wk=d.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:i="",...l}=e,c=Yo(xk,n),{onValueNodeHasChildrenChange:u}=c,h=a!==void 0,f=Ge(t,c.onValueNodeChange);return tn(()=>{u(h)},[u,h]),o.jsx(we.span,{...l,ref:f,style:{pointerEvents:"none"},children:Uk(c.value)?o.jsx(o.Fragment,{children:i}):a})});wk.displayName=xk;var oF="SelectIcon",bk=d.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return o.jsx(we.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});bk.displayName=oF;var aF="SelectPortal",jk=e=>o.jsx(Ga,{asChild:!0,...e});jk.displayName=aF;var Ba="SelectContent",Sk=d.forwardRef((e,t)=>{const n=Yo(Ba,e.__scopeSelect),[r,s]=d.useState();if(tn(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?Ir.createPortal(o.jsx(Nk,{scope:e.__scopeSelect,children:o.jsx(Gf.Slot,{scope:e.__scopeSelect,children:o.jsx("div",{children:e.children})})}),a):null}return o.jsx(Ck,{...e,ref:t})});Sk.displayName=Ba;var Hr=10,[Nk,Jo]=Ml(Ba),iF="SelectContentImpl",lF=La("SelectContent.RemoveScroll"),Ck=d.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:i,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:x,hideWhenDetached:g,avoidCollisions:y,...w}=e,v=Yo(Ba,n),[b,j]=d.useState(null),[S,C]=d.useState(null),N=Ge(t,pe=>j(pe)),[_,E]=d.useState(null),[M,T]=d.useState(null),R=Qf(n),[W,Q]=d.useState(!1),he=d.useRef(!1);d.useEffect(()=>{if(b)return zf(b)},[b]),$f();const Y=d.useCallback(pe=>{const[ge,...Ke]=R().map(Me=>Me.ref.current),[le]=Ke.slice(-1),Re=document.activeElement;for(const Me of pe)if(Me===Re||(Me==null||Me.scrollIntoView({block:"nearest"}),Me===ge&&S&&(S.scrollTop=0),Me===le&&S&&(S.scrollTop=S.scrollHeight),Me==null||Me.focus(),document.activeElement!==Re))return},[R,S]),O=d.useCallback(()=>Y([_,b]),[Y,_,b]);d.useEffect(()=>{W&&O()},[W,O]);const{onOpenChange:A,triggerPointerDownPosRef:U}=v;d.useEffect(()=>{if(b){let pe={x:0,y:0};const ge=le=>{var Re,Me;pe={x:Math.abs(Math.round(le.pageX)-(((Re=U.current)==null?void 0:Re.x)??0)),y:Math.abs(Math.round(le.pageY)-(((Me=U.current)==null?void 0:Me.y)??0))}},Ke=le=>{pe.x<=10&&pe.y<=10?le.preventDefault():b.contains(le.target)||A(!1),document.removeEventListener("pointermove",ge),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",ge),document.addEventListener("pointerup",Ke,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ge),document.removeEventListener("pointerup",Ke,{capture:!0})}}},[b,A,U]),d.useEffect(()=>{const pe=()=>A(!1);return window.addEventListener("blur",pe),window.addEventListener("resize",pe),()=>{window.removeEventListener("blur",pe),window.removeEventListener("resize",pe)}},[A]);const[D,B]=Bk(pe=>{const ge=R().filter(Re=>!Re.disabled),Ke=ge.find(Re=>Re.ref.current===document.activeElement),le=Kk(ge,pe,Ke);le&&setTimeout(()=>le.ref.current.focus())}),ue=d.useCallback((pe,ge,Ke)=>{const le=!he.current&&!Ke;(v.value!==void 0&&v.value===ge||le)&&(E(pe),le&&(he.current=!0))},[v.value]),_e=d.useCallback(()=>b==null?void 0:b.focus(),[b]),ye=d.useCallback((pe,ge,Ke)=>{const le=!he.current&&!Ke;(v.value!==void 0&&v.value===ge||le)&&T(pe)},[v.value]),Be=r==="popper"?vv:_k,Ie=Be===vv?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:x,hideWhenDetached:g,avoidCollisions:y}:{};return o.jsx(Nk,{scope:n,content:b,viewport:S,onViewportChange:C,itemRefCallback:ue,selectedItem:_,onItemLeave:_e,itemTextRefCallback:ye,focusSelectedItem:O,selectedItemText:M,position:r,isPositioned:W,searchRef:D,children:o.jsx(Mu,{as:lF,allowPinchZoom:!0,children:o.jsx(Iu,{asChild:!0,trapped:v.open,onMountAutoFocus:pe=>{pe.preventDefault()},onUnmountAutoFocus:Z(s,pe=>{var ge;(ge=v.trigger)==null||ge.focus({preventScroll:!0}),pe.preventDefault()}),children:o.jsx(Xs,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:pe=>pe.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:o.jsx(Be,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:pe=>pe.preventDefault(),...w,...Ie,onPlaced:()=>Q(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:Z(w.onKeyDown,pe=>{const ge=pe.ctrlKey||pe.altKey||pe.metaKey;if(pe.key==="Tab"&&pe.preventDefault(),!ge&&pe.key.length===1&&B(pe.key),["ArrowUp","ArrowDown","Home","End"].includes(pe.key)){let le=R().filter(Re=>!Re.disabled).map(Re=>Re.ref.current);if(["ArrowUp","End"].includes(pe.key)&&(le=le.slice().reverse()),["ArrowUp","ArrowDown"].includes(pe.key)){const Re=pe.target,Me=le.indexOf(Re);le=le.slice(Me+1)}setTimeout(()=>Y(le)),pe.preventDefault()}})})})})})})});Ck.displayName=iF;var cF="SelectItemAlignedPosition",_k=d.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,a=Yo(Ba,n),i=Jo(Ba,n),[l,c]=d.useState(null),[u,h]=d.useState(null),f=Ge(t,N=>h(N)),m=Qf(n),p=d.useRef(!1),x=d.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:w,focusSelectedItem:v}=i,b=d.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&g&&y&&w){const N=a.trigger.getBoundingClientRect(),_=u.getBoundingClientRect(),E=a.valueNode.getBoundingClientRect(),M=w.getBoundingClientRect();if(a.dir!=="rtl"){const Re=M.left-_.left,Me=E.left-Re,Ue=N.left-Me,De=N.width+Ue,Ye=Math.max(De,_.width),st=window.innerWidth-Hr,xt=gv(Me,[Hr,Math.max(Hr,st-Ye)]);l.style.minWidth=De+"px",l.style.left=xt+"px"}else{const Re=_.right-M.right,Me=window.innerWidth-E.right-Re,Ue=window.innerWidth-N.right-Me,De=N.width+Ue,Ye=Math.max(De,_.width),st=window.innerWidth-Hr,xt=gv(Me,[Hr,Math.max(Hr,st-Ye)]);l.style.minWidth=De+"px",l.style.right=xt+"px"}const T=m(),R=window.innerHeight-Hr*2,W=g.scrollHeight,Q=window.getComputedStyle(u),he=parseInt(Q.borderTopWidth,10),Y=parseInt(Q.paddingTop,10),O=parseInt(Q.borderBottomWidth,10),A=parseInt(Q.paddingBottom,10),U=he+Y+W+A+O,D=Math.min(y.offsetHeight*5,U),B=window.getComputedStyle(g),ue=parseInt(B.paddingTop,10),_e=parseInt(B.paddingBottom,10),ye=N.top+N.height/2-Hr,Be=R-ye,Ie=y.offsetHeight/2,pe=y.offsetTop+Ie,ge=he+Y+pe,Ke=U-ge;if(ge<=ye){const Re=T.length>0&&y===T[T.length-1].ref.current;l.style.bottom="0px";const Me=u.clientHeight-g.offsetTop-g.offsetHeight,Ue=Math.max(Be,Ie+(Re?_e:0)+Me+O),De=ge+Ue;l.style.height=De+"px"}else{const Re=T.length>0&&y===T[0].ref.current;l.style.top="0px";const Ue=Math.max(ye,he+g.offsetTop+(Re?ue:0)+Ie)+Ke;l.style.height=Ue+"px",g.scrollTop=ge-ye+g.offsetTop}l.style.margin=`${Hr}px 0`,l.style.minHeight=D+"px",l.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[m,a.trigger,a.valueNode,l,u,g,y,w,a.dir,r]);tn(()=>b(),[b]);const[j,S]=d.useState();tn(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const C=d.useCallback(N=>{N&&x.current===!0&&(b(),v==null||v(),x.current=!1)},[b,v]);return o.jsx(dF,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:C,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:o.jsx(we.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});_k.displayName=cF;var uF="SelectPopperPosition",vv=d.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Hr,...a}=e,i=Yf(n);return o.jsx(Pu,{...i,...a,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});vv.displayName=uF;var[dF,_x]=Ml(Ba,{}),yv="SelectViewport",Ek=d.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,a=Jo(yv,n),i=_x(yv,n),l=Ge(t,a.onViewportChange),c=d.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(Gf.Slot,{scope:n,children:o.jsx(we.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Z(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=i;if(m!=null&&m.current&&f){const p=Math.abs(c.current-h.scrollTop);if(p>0){const x=window.innerHeight-Hr*2,g=parseFloat(f.style.minHeight),y=parseFloat(f.style.height),w=Math.max(g,y);if(w<x){const v=w+p,b=Math.min(x,v),j=v-b;f.style.height=b+"px",f.style.bottom==="0px"&&(h.scrollTop=j>0?j:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});Ek.displayName=yv;var kk="SelectGroup",[hF,fF]=Ml(kk),mF=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Un();return o.jsx(hF,{scope:n,id:s,children:o.jsx(we.div,{role:"group","aria-labelledby":s,...r,ref:t})})});mF.displayName=kk;var Tk="SelectLabel",Rk=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=fF(Tk,n);return o.jsx(we.div,{id:s.id,...r,ref:t})});Rk.displayName=Tk;var Kh="SelectItem",[pF,Pk]=Ml(Kh),Ak=d.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...i}=e,l=Yo(Kh,n),c=Jo(Kh,n),u=l.value===r,[h,f]=d.useState(a??""),[m,p]=d.useState(!1),x=Ge(t,v=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,v,r,s)}),g=Un(),y=d.useRef("touch"),w=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(pF,{scope:n,value:r,disabled:s,textId:g,isSelected:u,onItemTextChange:d.useCallback(v=>{f(b=>b||((v==null?void 0:v.textContent)??"").trim())},[]),children:o.jsx(Gf.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:o.jsx(we.div,{role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:x,onFocus:Z(i.onFocus,()=>p(!0)),onBlur:Z(i.onBlur,()=>p(!1)),onClick:Z(i.onClick,()=>{y.current!=="mouse"&&w()}),onPointerUp:Z(i.onPointerUp,()=>{y.current==="mouse"&&w()}),onPointerDown:Z(i.onPointerDown,v=>{y.current=v.pointerType}),onPointerMove:Z(i.onPointerMove,v=>{var b;y.current=v.pointerType,s?(b=c.onItemLeave)==null||b.call(c):y.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Z(i.onPointerLeave,v=>{var b;v.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:Z(i.onKeyDown,v=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&v.key===" "||(eF.includes(v.key)&&w(),v.key===" "&&v.preventDefault())})})})})});Ak.displayName=Kh;var uc="SelectItemText",Ok=d.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...a}=e,i=Yo(uc,n),l=Jo(uc,n),c=Pk(uc,n),u=sF(uc,n),[h,f]=d.useState(null),m=Ge(t,w=>f(w),c.onItemTextChange,w=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,w,c.value,c.disabled)}),p=h==null?void 0:h.textContent,x=d.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:y}=u;return tn(()=>(g(x),()=>y(x)),[g,y,x]),o.jsxs(o.Fragment,{children:[o.jsx(we.span,{id:c.textId,...a,ref:m}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Ir.createPortal(a.children,i.valueNode):null]})});Ok.displayName=uc;var Ik="SelectItemIndicator",Mk=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return Pk(Ik,n).isSelected?o.jsx(we.span,{"aria-hidden":!0,...r,ref:t}):null});Mk.displayName=Ik;var xv="SelectScrollUpButton",Dk=d.forwardRef((e,t)=>{const n=Jo(xv,e.__scopeSelect),r=_x(xv,e.__scopeSelect),[s,a]=d.useState(!1),i=Ge(t,r.onScrollButtonChange);return tn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(Lk,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Dk.displayName=xv;var wv="SelectScrollDownButton",$k=d.forwardRef((e,t)=>{const n=Jo(wv,e.__scopeSelect),r=_x(wv,e.__scopeSelect),[s,a]=d.useState(!1),i=Ge(t,r.onScrollButtonChange);return tn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;a(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(Lk,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});$k.displayName=wv;var Lk=d.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,a=Jo("SelectScrollButton",n),i=d.useRef(null),l=Qf(n),c=d.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return d.useEffect(()=>()=>c(),[c]),tn(()=>{var h;const u=l().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),o.jsx(we.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:Z(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:Z(s.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:Z(s.onPointerLeave,()=>{c()})})}),gF="SelectSeparator",Fk=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return o.jsx(we.div,{"aria-hidden":!0,...r,ref:t})});Fk.displayName=gF;var bv="SelectArrow",vF=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Yf(n),a=Yo(bv,n),i=Jo(bv,n);return a.open&&i.position==="popper"?o.jsx(Au,{...s,...r,ref:t}):null});vF.displayName=bv;var yF="SelectBubbleInput",zk=d.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=d.useRef(null),a=Ge(r,s),i=Sx(t);return d.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&h){const f=new Event("change",{bubbles:!0});h.call(l,t),l.dispatchEvent(f)}},[i,t]),o.jsx(we.select,{...n,style:{...F1,...n.style},ref:a,defaultValue:t})});zk.displayName=yF;function Uk(e){return e===""||e===void 0}function Bk(e){const t=kt(e),n=d.useRef(""),r=d.useRef(0),s=d.useCallback(i=>{const l=n.current+i;t(l),(function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))})(l)},[t]),a=d.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return d.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function Kk(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=xF(e,Math.max(a,0));s.length===1&&(i=i.filter(u=>u!==n));const c=i.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function xF(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var wF=gk,Vk=yk,bF=wk,jF=bk,SF=jk,qk=Sk,NF=Ek,Hk=Rk,Wk=Ak,CF=Ok,_F=Mk,Gk=Dk,Qk=$k,Yk=Fk;const pl=wF,gl=bF,Ka=d.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(Vk,{ref:r,className:ee("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,o.jsx(jF,{asChild:!0,children:o.jsx(Go,{className:"h-4 w-4 opacity-50"})})]}));Ka.displayName=Vk.displayName;const Jk=d.forwardRef(({className:e,...t},n)=>o.jsx(Gk,{ref:n,className:ee("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(dD,{className:"h-4 w-4"})}));Jk.displayName=Gk.displayName;const Xk=d.forwardRef(({className:e,...t},n)=>o.jsx(Qk,{ref:n,className:ee("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(Go,{className:"h-4 w-4"})}));Xk.displayName=Qk.displayName;const Va=d.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>o.jsx(SF,{children:o.jsxs(qk,{ref:s,className:ee("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[o.jsx(Jk,{}),o.jsx(NF,{className:ee("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),o.jsx(Xk,{})]})}));Va.displayName=qk.displayName;const EF=d.forwardRef(({className:e,...t},n)=>o.jsx(Hk,{ref:n,className:ee("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));EF.displayName=Hk.displayName;const nn=d.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(Wk,{ref:r,className:ee("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(_F,{children:o.jsx(Ai,{className:"h-4 w-4"})})}),o.jsx(CF,{children:t})]}));nn.displayName=Wk.displayName;const kF=d.forwardRef(({className:e,...t},n)=>o.jsx(Yk,{ref:n,className:ee("-mx-1 my-1 h-px bg-muted",e),...t}));kF.displayName=Yk.displayName;const Jf=[{key:"bitcoin",name:"Bitcoin",emoji:"",children:[{key:"1.1",name:"Bitcoin (BTC) - The Currency"},{key:"1.2",name:"Bitcoin Technology",children:[{key:"1.2.1",name:"Core Implementations"},{key:"1.2.2",name:"Major Upgrades"},{key:"1.2.3",name:"Bitcoin Improvement Proposals (BIPs)"},{key:"1.2.4",name:"Transaction Features"},{key:"1.2.5",name:"Layer 2 & Scaling"},{key:"1.2.6",name:"Mining & Consensus"}]},{key:"1.3",name:"Bitcoin Forks"},{key:"1.4",name:"Bitcoin Companies & Services"}]},{key:"money-economics",name:"Money & Economics",emoji:"",children:[{key:"2.1",name:"Other Cryptocurrencies"},{key:"2.2",name:"Stablecoins"},{key:"2.3",name:"DeFi Tokens"},{key:"2.4",name:"Metaverse & Gaming"},{key:"2.5",name:"Fiat Currencies"},{key:"2.6",name:"Commodities"},{key:"2.7",name:"Central Banks"},{key:"2.8",name:"Prices & Values"}]},{key:"technology",name:"Technology Concepts",emoji:"",children:[{key:"3.1",name:"Blockchain & Core Concepts"},{key:"3.2",name:"DeFi & Web3 Concepts"},{key:"3.3",name:"Security & Privacy"},{key:"3.4",name:"Wallets & Storage"},{key:"3.5",name:"Technical Standards"}]},{key:"organizations",name:"Organizations & Companies",emoji:"",children:[{key:"4.1",name:"Exchanges",children:[{key:"4.1.1",name:"Major Centralized Exchanges"},{key:"4.1.2",name:"Decentralized Exchanges (DEX)"},{key:"4.1.3",name:"Defunct Exchanges"}]},{key:"4.2",name:"Financial Institutions",children:[{key:"4.2.1",name:"Investment Banks"},{key:"4.2.2",name:"Commercial Banks"},{key:"4.2.3",name:"Asset Managers"},{key:"4.2.4",name:"Stock Exchanges"}]},{key:"4.3",name:"Mining Operations",children:[{key:"4.3.1",name:"Public Mining Companies"},{key:"4.3.2",name:"Mining Hardware Manufacturers"},{key:"4.3.3",name:"Mining Pools"}]},{key:"4.4",name:"Payment & Infrastructure",children:[{key:"4.4.1",name:"Payment Processors"},{key:"4.4.2",name:"Custody & Wallets"},{key:"4.4.3",name:"Blockchain Infrastructure"},{key:"4.4.4",name:"Stablecoin Issuers"}]},{key:"4.5",name:"DeFi Platforms"},{key:"4.6",name:"NFT Marketplaces"},{key:"4.7",name:"Technology Companies",children:[{key:"4.7.1",name:"Big Tech"},{key:"4.7.2",name:"Social Media & Communication"},{key:"4.7.3",name:"Fintech & Payments"},{key:"4.7.4",name:"E-commerce & Retail"},{key:"4.7.5",name:"Corporate Bitcoin Holders"}]},{key:"4.8",name:"Media & Analytics"},{key:"4.9",name:"Development & Research"},{key:"4.10",name:"Other Organizations"}]},{key:"people",name:"People",emoji:"",children:[{key:"5.1",name:"Crypto & Tech Figures"},{key:"5.2",name:"Government Officials"},{key:"5.3",name:"Investors & Analysts"},{key:"5.4",name:"Controversial & Famous Figures"}]},{key:"regulation-law",name:"Regulation & Government",emoji:"",children:[{key:"6.1",name:"Regulatory Bodies"},{key:"6.2",name:"Laws & Frameworks"},{key:"6.3",name:"Government Initiatives"}]},{key:"markets-geography",name:"Geography & Markets",emoji:"",children:[{key:"7.1",name:"Countries & Regions"},{key:"7.2",name:"Cities & Special Locations"}]},{key:"education-community",name:"Education & Community",emoji:"",children:[{key:"8.1",name:"Development Organizations"},{key:"8.2",name:"Community Forums & Platforms"},{key:"8.3",name:"Research & Academia"}]},{key:"crime-security",name:"Crime & Security",emoji:"",children:[{key:"9.1",name:"Dark Web & Criminal Marketplaces"},{key:"9.2",name:"Major Crimes & Scams",children:[{key:"9.2.1",name:"Ponzi Schemes"},{key:"9.2.2",name:"Major Hacks"},{key:"9.2.3",name:"Fraud Cases"}]},{key:"9.3",name:"Law Enforcement Actions"},{key:"9.4",name:"Security Concepts"}]},{key:"topics",name:"Topics & Themes",emoji:"",children:[{key:"10.1",name:"Market Topics",children:[{key:"10.1.1",name:"Price & Valuation"},{key:"10.1.2",name:"Market Cycles"},{key:"10.1.3",name:"Trading Activity"}]},{key:"10.2",name:"Regulatory Topics"},{key:"10.3",name:"Adoption & Integration",children:[{key:"10.3.1",name:"Institutional Adoption"},{key:"10.3.2",name:"Retail Adoption"},{key:"10.3.3",name:"Government Adoption"}]},{key:"10.4",name:"Technology Topics"},{key:"10.5",name:"Mining Topics"},{key:"10.6",name:"Macroeconomic Topics"}]},{key:"miscellaneous",name:"Miscellaneous",emoji:"",children:[{key:"11.1",name:"Uncategorized"}]}],TF={1:"bitcoin",2:"money-economics",3:"technology",4:"organizations",5:"people",6:"regulation-law",7:"markets-geography",8:"education-community",9:"crime-security",10:"topics",11:"miscellaneous"},Ex={},Zk={};function eT(e){for(const t of e)Ex[t.key]=t.name,t.key.includes(".")||(Zk[t.key]={name:t.name,emoji:t.emoji}),t.children&&eT(t.children)}eT(Jf);function nh(e){if(e)return Ex[e]||e}function RF(e,t){if(e&&e.length>0){const r=e[0].split(".")[0];return TF[r]||t}return t}function kx(e){return Zk[e]||{name:Ex[e]||e}}function Tx(e,t){if(!(t!=null&&t.entitiesByCategory))return"miscellaneous";for(const[n,r]of Object.entries(t.entitiesByCategory)){const s=a=>{for(const i of a)if(i.name===e||i.children&&Array.isArray(i.children)&&s(i.children))return!0;return!1};if(s(r))return n}return"miscellaneous"}function tT(e){switch(e.toLowerCase()){case"countries":case"country":return pD;case"companies":case"company":return uC;case"people":case"person":return rv;case"digital-assets":case"crypto":case"cryptocurrency":return Qc;case"bitcoin-orgs":case"regulatory":case"organization":return Xw;case"protocols":case"protocol":return gD;case"topics":case"topic":return lr;case"currencies":case"currency":return Qc;case"crime":return Xw;case"events":return Do;case"miscellaneous":case"other":return ss;default:return ss}}function vl(e){switch(e.toLowerCase()){case"countries":case"country":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"companies":case"company":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"people":case"person":return"bg-green-500/20 text-green-400 border-green-500/30";case"digital-assets":case"crypto":case"cryptocurrency":return"bg-orange-500/20 text-orange-400 border-orange-500/30";case"bitcoin-orgs":case"regulatory":case"organization":return"bg-indigo-500/20 text-indigo-400 border-indigo-500/30";case"protocols":case"protocol":return"bg-cyan-500/20 text-cyan-400 border-cyan-500/30";case"topics":case"topic":return"bg-pink-500/20 text-pink-400 border-pink-500/30";case"currencies":case"currency":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"crime":return"bg-red-500/20 text-red-400 border-red-500/30";case"events":return"bg-teal-500/20 text-teal-400 border-teal-500/30";case"miscellaneous":case"other":return"bg-gray-500/20 text-gray-400 border-gray-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}}function nT(e,t=new Map){if(!e||e.length===0)return{categories:[],totalTags:0};const n=new Map,r=c=>{if(!n.has(c)){const u=kx(c);n.set(c,{category:c,name:u.name,emoji:u.emoji,tags:[],subcategories:[],totalTags:0})}return n.get(c)},s=(c,u)=>{if(u.length===0)return c;const h=u[0],f=u.slice(1);let m=c.subcategories.find(p=>p.key===h);if(!m){const p=t.get(h)||nh(h)||h;m={key:h,name:p,tags:[],subcategories:[],totalTags:0},c.subcategories.push(m)}return s(m,f)};for(const c of e){if(!c.category)continue;const u={id:c.id,name:c.name,category:c.category,normalizedName:c.normalizedName||c.normalized_name,usageCount:c.usageCount??c.usage_count??0,subcategoryPath:c.subcategoryPath||c.subcategory_path||[]},h=r(u.category);u.subcategoryPath&&u.subcategoryPath.length>0?s(h,u.subcategoryPath).tags.push(u):h.tags.push(u)}const a=c=>{let u=c.tags.length;c.subcategories&&(c.subcategories.forEach(h=>{a(h),u+=h.totalTags}),c.subcategories.sort((h,f)=>h.key.localeCompare(f.key,void 0,{numeric:!0}))),c.tags.sort((h,f)=>h.name.localeCompare(f.name)),c.totalTags=u},i=Array.from(n.values());i.forEach(a);const l=new Map;return Jf.forEach((c,u)=>{l.set(c.key,u)}),i.sort((c,u)=>{const h=l.get(c.category)??999,f=l.get(u.category)??999;return h-f}),{categories:i,totalTags:e.length}}function Vh({analyses:e,isLoading:t=!1,selectedDates:n=new Set,onDateSelect:r,onDateDeselect:s,onRowClick:a,onTagClick:i,emptyMessage:l="No analyses found",showCheckbox:c=!0,pageSize:u=50,currentPage:h=1,totalCount:f=0,catalogData:m,onPageChange:p,onPageSizeChange:x,onSelectAll:g,selectAllMatching:y=!1,pageSizeOptions:w=[50,200,500],showPagination:v=!0,showSelectAll:b=!0,bulkActions:j,showBulkActions:S=!0}){var M;const C=T=>{n.has(T)?s==null||s(T):r==null||r(T)},N=e.length>0&&e.every(T=>n.has(T.date)),_=Math.ceil(f/u),E=()=>{g?g():N||y?e.forEach(T=>{n.has(T.date)&&(s==null||s(T.date))}):e.forEach(T=>{n.has(T.date)||r==null||r(T.date)})};return t?o.jsx("div",{className:"rounded-md border",children:o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsxs("div",{className:"text-center",children:[o.jsx(nt,{className:"w-8 h-8 animate-spin text-muted-foreground mx-auto mb-3"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading results..."})]})})}):e.length===0?o.jsx("div",{className:"rounded-md border",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx(ss,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3"}),o.jsx("p",{className:"text-muted-foreground",children:l})]})}):o.jsxs("div",{className:"space-y-4",children:[f>0&&(b||x)&&o.jsxs("div",{className:"flex items-center justify-between mb-2 pb-2",children:[b&&c&&o.jsx("div",{className:"flex items-center space-x-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(es,{checked:N||y,onCheckedChange:E,"data-testid":"checkbox-select-all"}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"Select All"})]})}),x&&o.jsx("div",{className:"flex items-center space-x-3",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Per page:"}),o.jsxs(pl,{value:u.toString(),onValueChange:T=>{x(Number(T))},children:[o.jsx(Ka,{className:"w-20 h-8",children:o.jsx(gl,{})}),o.jsx(Va,{children:w.map(T=>o.jsx(nn,{value:T.toString(),children:T},T))})]})]})})]}),S&&(n.size>0||y)&&j&&o.jsx("div",{className:"mb-4 p-4 bg-muted/50 border border-border rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Ai,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm font-medium text-foreground",children:y?`${f.toLocaleString()} selected`:`${n.size} selected`}),j.showSelectAllLink&&!y&&N&&f>e.length&&o.jsxs(V,{variant:"link",size:"sm",onClick:j.onSelectAllMatching,className:"text-muted-foreground hover:text-foreground h-auto p-0",children:["Select all ",f.toLocaleString()]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[(M=j.actions)==null?void 0:M.map((T,R)=>o.jsxs(V,{variant:T.variant||"outline",size:T.size||"sm",disabled:T.disabled,onClick:async()=>{const W=y?e.map(Q=>Q.date):Array.from(n);await T.onClick(W)},children:[T.icon,T.label]},R)),j.customActions,j.onClearSelection&&o.jsx(V,{variant:"ghost",size:"sm",onClick:j.onClearSelection,className:"text-muted-foreground hover:text-foreground",children:o.jsx(On,{className:"w-4 h-4"})})]})]})}),o.jsx("div",{className:"rounded-md border",children:o.jsxs(ka,{children:[o.jsx(Ta,{children:o.jsxs(ur,{children:[c&&o.jsx(vt,{className:"w-12",children:o.jsx("span",{className:"sr-only",children:"Select"})}),o.jsx(vt,{className:"w-36",children:"Date"}),o.jsx(vt,{children:"Summary"}),o.jsx(vt,{className:"w-32",children:"Tags"})]})}),o.jsx(Ra,{children:e.map(T=>{const R=n.has(T.date);return o.jsxs(ur,{"data-state":R?"selected":void 0,className:`cursor-pointer transition-colors ${R?"bg-blue-500/10 hover:bg-blue-500/15":"hover:bg-sidebar-accent"}`,onClick:()=>a==null?void 0:a(T.date),children:[c&&o.jsx(yt,{onClick:W=>W.stopPropagation(),children:o.jsx(es,{checked:R,onCheckedChange:()=>C(T.date)})}),o.jsx(yt,{className:"font-medium text-sm whitespace-nowrap",children:(()=>{const W=new Date(T.date),Q=W.getDate(),he=W.toLocaleDateString("en-US",{month:"short"}),Y=W.getFullYear();return`${Q} ${he} ${Y}`})()}),o.jsx(yt,{children:o.jsx("p",{className:"text-sm text-foreground/90",children:T.summary})}),o.jsx(yt,{children:T.tags_version2&&T.tags_version2.length>0?o.jsxs("div",{className:"flex flex-wrap gap-1",children:[T.tags_version2.slice(0,3).map((W,Q)=>{const he=Tx(W,m),Y=tT(he);return o.jsxs(me,{variant:"outline",className:`${vl(he)} text-xs px-1.5 py-0.5 flex items-center space-x-1 ${i?"cursor-pointer hover:opacity-80 transition-opacity":""}`,title:W,onClick:i?O=>{O.stopPropagation(),i(W)}:void 0,children:[o.jsx(Y,{className:"w-2.5 h-2.5"}),o.jsx("span",{className:"truncate max-w-[60px]",children:W})]},`${W}-${Q}`)}),T.tags_version2.length>3&&o.jsxs(me,{variant:"secondary",className:"text-xs",children:["+",T.tags_version2.length-3]})]}):o.jsx("span",{className:"text-xs text-muted-foreground",children:""})})]},T.date)})})]})}),v&&f>0&&_>0&&o.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(h-1)*u+1,"-",Math.min(h*u,f).toLocaleString()," of ",f.toLocaleString()]}),p&&o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(V,{variant:"outline",size:"sm",onClick:()=>p(Math.max(1,h-1)),disabled:h===1,"data-testid":"button-prev-page",children:"Previous"}),o.jsx(V,{variant:"outline",size:"sm",onClick:()=>p(Math.min(_,h+1)),disabled:h===_,"data-testid":"button-next-page",children:"Next"})]})]})]})}var rT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},_b=Pe.createContext&&Pe.createContext(rT),PF=["attr","size","title"];function AF(e,t){if(e==null)return{};var n=OF(e,t),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function OF(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function qh(){return qh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qh.apply(this,arguments)}function Eb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Hh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Eb(Object(n),!0).forEach(function(r){IF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function IF(e,t,n){return t=MF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MF(e){var t=DF(e,"string");return typeof t=="symbol"?t:t+""}function DF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sT(e){return e&&e.map((t,n)=>Pe.createElement(t.tag,Hh({key:n},t.attr),sT(t.child)))}function oT(e){return t=>Pe.createElement($F,qh({attr:Hh({},e.attr)},t),sT(e.child))}function $F(e){var t=n=>{var{attr:r,size:s,title:a}=e,i=AF(e,PF),l=s||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),Pe.createElement("svg",qh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,i,{className:c,style:Hh(Hh({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&Pe.createElement("title",null,a),e.children)};return _b!==void 0?Pe.createElement(_b.Consumer,null,n=>t(n)):t(rT)}function ea(e){return oT({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"},child:[]}]})(e)}function Rx(e){return oT({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729zm-9.022 12.6081a4.4755 4.4755 0 0 1-2.8764-1.0408l.1419-.0804 4.7783-2.7582a.7948.7948 0 0 0 .3927-.6813v-6.7369l2.02 1.1686a.071.071 0 0 1 .038.052v5.5826a4.504 4.504 0 0 1-4.4945 4.4944zm-9.6607-4.1254a4.4708 4.4708 0 0 1-.5346-3.0137l.142.0852 4.783 2.7582a.7712.7712 0 0 0 .7806 0l5.8428-3.3685v2.3324a.0804.0804 0 0 1-.0332.0615L9.74 19.9502a4.4992 4.4992 0 0 1-6.1408-1.6464zM2.3408 7.8956a4.485 4.485 0 0 1 2.3655-1.9728V11.6a.7664.7664 0 0 0 .3879.6765l5.8144 3.3543-2.0201 1.1685a.0757.0757 0 0 1-.071 0l-4.8303-2.7865A4.504 4.504 0 0 1 2.3408 7.872zm16.5963 3.8558L13.1038 8.364 15.1192 7.2a.0757.0757 0 0 1 .071 0l4.8303 2.7913a4.4944 4.4944 0 0 1-.6765 8.1042v-5.6772a.79.79 0 0 0-.407-.667zm2.0107-3.0231l-.142-.0852-4.7735-2.7818a.7759.7759 0 0 0-.7854 0L9.409 9.2297V6.8974a.0662.0662 0 0 1 .0284-.0615l4.8303-2.7866a4.4992 4.4992 0 0 1 6.6802 4.66zM8.3065 12.863l-2.02-1.1638a.0804.0804 0 0 1-.038-.0567V6.0742a4.4992 4.4992 0 0 1 7.3757-3.4537l-.142.0805L8.704 5.459a.7948.7948 0 0 0-.3927.6813zm1.0976-2.3654l2.602-1.4998 2.6069 1.4998v2.9994l-2.5974 1.4997-2.6067-1.4997Z"},child:[]}]})(e)}const LF=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Px extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class FF extends Px{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class kb extends Px{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Tb extends Px{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var jv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(jv||(jv={}));class zF{constructor(t,{headers:n={},customFetch:r,region:s=jv.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=LF(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Ae(this,arguments,void 0,function*(n,r={}){var s;let a,i;try{const{headers:l,method:c,body:u,signal:h,timeout:f}=r;let m={},{region:p}=r;p||(p=this.region);const x=new URL(`${this.url}/${n}`);p&&p!=="any"&&(m["x-region"]=p,x.searchParams.set("forceFunctionRegion",p));let g;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(m["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(m["Content-Type"]="application/json",g=JSON.stringify(u)):g=u;let y=h;f&&(i=new AbortController,a=setTimeout(()=>i.abort(),f),h?(y=i.signal,h.addEventListener("abort",()=>i.abort())):y=i.signal);const w=yield this.fetch(x.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:g,signal:y}).catch(S=>{throw new FF(S)}),v=w.headers.get("x-relay-error");if(v&&v==="true")throw new kb(w);if(!w.ok)throw new Tb(w);let b=((s=w.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),j;return b==="application/json"?j=yield w.json():b==="application/octet-stream"||b==="application/pdf"?j=yield w.blob():b==="text/event-stream"?j=w:b==="multipart/form-data"?j=yield w.formData():j=yield w.text(),{data:j,error:null,response:w}}catch(l){return{data:null,error:l,response:l instanceof Tb||l instanceof kb?l.context:void 0}}finally{a&&clearTimeout(a)}})}}var Fn={};const Dl=MP(g3);var Nd={},Cd={},_d={},Ed={},kd={},Td={},Rb;function aT(){if(Rb)return Td;Rb=1,Object.defineProperty(Td,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Td.default=e,Td}var Pb;function iT(){if(Pb)return kd;Pb=1,Object.defineProperty(kd,"__esModule",{value:!0});const t=Dl.__importDefault(aT());class n{constructor(s){var a,i;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(a=s.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=s.signal,this.isMaybeSingle=(i=s.isMaybeSingle)!==null&&i!==void 0?i:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,a){return this.headers=new Headers(this.headers),this.headers.set(s,a),this}then(s,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let l=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,h,f,m;let p=null,x=null,g=null,y=c.status,w=c.statusText;if(c.ok){if(this.method!=="HEAD"){const S=await c.text();S===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?x=S:x=JSON.parse(S))}const b=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),j=(f=c.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");b&&j&&j.length>1&&(g=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(p={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,g=null,y=406,w="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const b=await c.text();try{p=JSON.parse(b),Array.isArray(p)&&c.status===404&&(x=[],p=null,y=200,w="OK")}catch{c.status===404&&b===""?(y=204,w="No Content"):p={message:b}}if(p&&this.isMaybeSingle&&(!((m=p==null?void 0:p.details)===null||m===void 0)&&m.includes("0 rows"))&&(p=null,y=200,w="OK"),p&&this.shouldThrowOnError)throw new t.default(p)}return{error:p,data:x,count:g,status:y,statusText:w}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,h,f,m,p,x;let g="";const y=c==null?void 0:c.cause;if(y){const w=(u=y==null?void 0:y.message)!==null&&u!==void 0?u:"",v=(h=y==null?void 0:y.code)!==null&&h!==void 0?h:"";g=`${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"FetchError"}: ${c==null?void 0:c.message}`,g+=`

Caused by: ${(m=y==null?void 0:y.name)!==null&&m!==void 0?m:"Error"}: ${w}`,v&&(g+=` (${v})`),y!=null&&y.stack&&(g+=`
${y.stack}`)}else g=(p=c==null?void 0:c.stack)!==null&&p!==void 0?p:"";return{error:{message:`${(x=c==null?void 0:c.name)!==null&&x!==void 0?x:"FetchError"}: ${c==null?void 0:c.message}`,details:g,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(s,a)}returns(){return this}overrideTypes(){return this}}return kd.default=n,kd}var Ab;function lT(){if(Ab)return Ed;Ab=1,Object.defineProperty(Ed,"__esModule",{value:!0});const t=Dl.__importDefault(iT());class n extends t.default{select(s){let a=!1;const i=(s??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:a=!0,nullsFirst:i,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${s}.${a?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:a,referencedTable:i=a}={}){const l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,a,{foreignTable:i,referencedTable:l=i}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(u,`${a-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:a=!1,settings:i=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var h;const f=[s?"analyze":null,a?"verbose":null,i?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Ed.default=n,Ed}var Ob;function Ax(){if(Ob)return _d;Ob=1,Object.defineProperty(_d,"__esModule",{value:!0});const t=Dl.__importDefault(lT()),n=new RegExp("[,()]");class r extends t.default{eq(a,i){return this.url.searchParams.append(a,`eq.${i}`),this}neq(a,i){return this.url.searchParams.append(a,`neq.${i}`),this}gt(a,i){return this.url.searchParams.append(a,`gt.${i}`),this}gte(a,i){return this.url.searchParams.append(a,`gte.${i}`),this}lt(a,i){return this.url.searchParams.append(a,`lt.${i}`),this}lte(a,i){return this.url.searchParams.append(a,`lte.${i}`),this}like(a,i){return this.url.searchParams.append(a,`like.${i}`),this}likeAllOf(a,i){return this.url.searchParams.append(a,`like(all).{${i.join(",")}}`),this}likeAnyOf(a,i){return this.url.searchParams.append(a,`like(any).{${i.join(",")}}`),this}ilike(a,i){return this.url.searchParams.append(a,`ilike.${i}`),this}ilikeAllOf(a,i){return this.url.searchParams.append(a,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(a,i){return this.url.searchParams.append(a,`ilike(any).{${i.join(",")}}`),this}is(a,i){return this.url.searchParams.append(a,`is.${i}`),this}in(a,i){const l=Array.from(new Set(i)).map(c=>typeof c=="string"&&n.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(a,`in.(${l})`),this}contains(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cs.{${i.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(i)}`),this}containedBy(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cd.{${i.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(i)}`),this}rangeGt(a,i){return this.url.searchParams.append(a,`sr.${i}`),this}rangeGte(a,i){return this.url.searchParams.append(a,`nxl.${i}`),this}rangeLt(a,i){return this.url.searchParams.append(a,`sl.${i}`),this}rangeLte(a,i){return this.url.searchParams.append(a,`nxr.${i}`),this}rangeAdjacent(a,i){return this.url.searchParams.append(a,`adj.${i}`),this}overlaps(a,i){return typeof i=="string"?this.url.searchParams.append(a,`ov.${i}`):this.url.searchParams.append(a,`ov.{${i.join(",")}}`),this}textSearch(a,i,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(a,`${u}fts${h}.${i}`),this}match(a){return Object.entries(a).forEach(([i,l])=>{this.url.searchParams.append(i,`eq.${l}`)}),this}not(a,i,l){return this.url.searchParams.append(a,`not.${i}.${l}`),this}or(a,{foreignTable:i,referencedTable:l=i}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${a})`),this}filter(a,i,l){return this.url.searchParams.append(a,`${i}.${l}`),this}}return _d.default=r,_d}var Ib;function cT(){if(Ib)return Cd;Ib=1,Object.defineProperty(Cd,"__esModule",{value:!0});const t=Dl.__importDefault(Ax());class n{constructor(s,{headers:a={},schema:i,fetch:l}){this.url=s,this.headers=new Headers(a),this.schema=i,this.fetch=l}select(s,a){const{head:i=!1,count:l}=a??{},c=i?"HEAD":"GET";let u=!1;const h=(s??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",h),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:a,defaultToNull:i=!0}={}){var l;const c="POST";if(a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const u=s.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(u.length>0){const h=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:a,ignoreDuplicates:i=!1,count:l,defaultToNull:c=!0}={}){var u;const h="POST";if(this.headers.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const f=s.reduce((m,p)=>m.concat(Object.keys(p)),[]);if(f.length>0){const m=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(s,{count:a}={}){var i;const l="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:s}={}){var a;const i="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Cd.default=n,Cd}var Mb;function UF(){if(Mb)return Nd;Mb=1,Object.defineProperty(Nd,"__esModule",{value:!0});const e=Dl,t=e.__importDefault(cT()),n=e.__importDefault(Ax());class r{constructor(a,{headers:i={},schema:l,fetch:c}={}){this.url=a,this.headers=new Headers(i),this.schemaName=l,this.fetch=c}from(a){const i=new URL(`${this.url}/${a}`);return new t.default(i,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new r(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,i={},{head:l=!1,get:c=!1,count:u}={}){var h;let f;const m=new URL(`${this.url}/rpc/${a}`);let p;l||c?(f=l?"HEAD":"GET",Object.entries(i).filter(([g,y])=>y!==void 0).map(([g,y])=>[g,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([g,y])=>{m.searchParams.append(g,y)})):(f="POST",p=i);const x=new Headers(this.headers);return u&&x.set("Prefer",`count=${u}`),new n.default({method:f,url:m,headers:x,schema:this.schemaName,body:p,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return Nd.default=r,Nd}Object.defineProperty(Fn,"__esModule",{value:!0});var uT=Fn.PostgrestError=wT=Fn.PostgrestBuilder=yT=Fn.PostgrestTransformBuilder=gT=Fn.PostgrestFilterBuilder=mT=Fn.PostgrestQueryBuilder=hT=Fn.PostgrestClient=void 0;const $l=Dl,dT=$l.__importDefault(UF());var hT=Fn.PostgrestClient=dT.default;const fT=$l.__importDefault(cT());var mT=Fn.PostgrestQueryBuilder=fT.default;const pT=$l.__importDefault(Ax());var gT=Fn.PostgrestFilterBuilder=pT.default;const vT=$l.__importDefault(lT());var yT=Fn.PostgrestTransformBuilder=vT.default;const xT=$l.__importDefault(iT());var wT=Fn.PostgrestBuilder=xT.default;const bT=$l.__importDefault(aT());uT=Fn.PostgrestError=bT.default;var jT=Fn.default={PostgrestClient:dT.default,PostgrestQueryBuilder:fT.default,PostgrestFilterBuilder:pT.default,PostgrestTransformBuilder:vT.default,PostgrestBuilder:xT.default,PostgrestError:bT.default};const BF=Bj({__proto__:null,get PostgrestBuilder(){return wT},get PostgrestClient(){return hT},get PostgrestError(){return uT},get PostgrestFilterBuilder(){return gT},get PostgrestQueryBuilder(){return mT},get PostgrestTransformBuilder(){return yT},default:jT},[Fn]),{PostgrestClient:KF,PostgrestQueryBuilder:NK,PostgrestFilterBuilder:CK,PostgrestTransformBuilder:_K,PostgrestBuilder:EK,PostgrestError:kK}=jT||BF;class VF{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const qF="2.83.0",HF=`realtime-js/${qF}`,ST="1.0.0",WF="2.0.0",Db=ST,Sv=1e4,GF=1e3,QF=100;var aa;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(aa||(aa={}));var ln;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ln||(ln={}));var _r;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(_r||(_r={}));var Nv;(function(e){e.websocket="websocket"})(Nv||(Nv={}));var ia;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ia||(ia={}));class YF{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(t,n){if(this._isArrayBuffer(t.payload))return n(this._binaryEncodePush(t));if(t.event===this.BROADCAST&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodePush(t){var n,r;const{event:s,topic:a,payload:i}=t,l=(n=t.ref)!==null&&n!==void 0?n:"",c=(r=t.join_ref)!==null&&r!==void 0?r:"",u=this.META_LENGTH+c.length+l.length+a.length+s.length,h=new ArrayBuffer(this.HEADER_LENGTH+u);let f=new DataView(h),m=0;f.setUint8(m++,this.KINDS.push),f.setUint8(m++,c.length),f.setUint8(m++,l.length),f.setUint8(m++,a.length),f.setUint8(m++,s.length),Array.from(c,x=>f.setUint8(m++,x.charCodeAt(0))),Array.from(l,x=>f.setUint8(m++,x.charCodeAt(0))),Array.from(a,x=>f.setUint8(m++,x.charCodeAt(0))),Array.from(s,x=>f.setUint8(m++,x.charCodeAt(0)));var p=new Uint8Array(h.byteLength+i.byteLength);return p.set(new Uint8Array(h),0),p.set(new Uint8Array(i),h.byteLength),p.buffer}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r,s,a;const i=t.topic,l=(n=t.ref)!==null&&n!==void 0?n:"",c=(r=t.join_ref)!==null&&r!==void 0?r:"",u=t.payload.event,h=(a=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&a!==void 0?a:new ArrayBuffer(0),f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+i.length+u.length,m=new ArrayBuffer(this.HEADER_LENGTH+f);let p=new DataView(m),x=0;p.setUint8(x++,this.KINDS.userBroadcastPush),p.setUint8(x++,c.length),p.setUint8(x++,l.length),p.setUint8(x++,i.length),p.setUint8(x++,u.length),p.setUint8(x++,this.BINARY_ENCODING),Array.from(c,y=>p.setUint8(x++,y.charCodeAt(0))),Array.from(l,y=>p.setUint8(x++,y.charCodeAt(0))),Array.from(i,y=>p.setUint8(x++,y.charCodeAt(0))),Array.from(u,y=>p.setUint8(x++,y.charCodeAt(0)));var g=new Uint8Array(m.byteLength+h.byteLength);return g.set(new Uint8Array(m),0),g.set(new Uint8Array(h),m.byteLength),g.buffer}_encodeJsonUserBroadcastPush(t){var n,r,s,a;const i=t.topic,l=(n=t.ref)!==null&&n!==void 0?n:"",c=(r=t.join_ref)!==null&&r!==void 0?r:"",u=t.payload.event,h=(a=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&a!==void 0?a:{},m=new TextEncoder().encode(JSON.stringify(h)).buffer,p=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+i.length+u.length,x=new ArrayBuffer(this.HEADER_LENGTH+p);let g=new DataView(x),y=0;g.setUint8(y++,this.KINDS.userBroadcastPush),g.setUint8(y++,c.length),g.setUint8(y++,l.length),g.setUint8(y++,i.length),g.setUint8(y++,u.length),g.setUint8(y++,this.JSON_ENCODING),Array.from(c,v=>g.setUint8(y++,v.charCodeAt(0))),Array.from(l,v=>g.setUint8(y++,v.charCodeAt(0))),Array.from(i,v=>g.setUint8(y++,v.charCodeAt(0))),Array.from(u,v=>g.setUint8(y++,v.charCodeAt(0)));var w=new Uint8Array(x.byteLength+m.byteLength);return w.set(new Uint8Array(x),0),w.set(new Uint8Array(m),x.byteLength),w.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[s,a,i,l,c]=r;return n({join_ref:s,ref:a,topic:i,event:l,payload:c})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.push:return this._decodePush(t,n,s);case this.KINDS.reply:return this._decodeReply(t,n,s);case this.KINDS.broadcast:return this._decodeBroadcast(t,n,s);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,s)}}_decodePush(t,n,r){const s=n.getUint8(1),a=n.getUint8(2),i=n.getUint8(3);let l=this.HEADER_LENGTH+this.META_LENGTH-1;const c=r.decode(t.slice(l,l+s));l=l+s;const u=r.decode(t.slice(l,l+a));l=l+a;const h=r.decode(t.slice(l,l+i));l=l+i;const f=JSON.parse(r.decode(t.slice(l,t.byteLength)));return{join_ref:c,ref:null,topic:u,event:h,payload:f}}_decodeReply(t,n,r){const s=n.getUint8(1),a=n.getUint8(2),i=n.getUint8(3),l=n.getUint8(4);let c=this.HEADER_LENGTH+this.META_LENGTH;const u=r.decode(t.slice(c,c+s));c=c+s;const h=r.decode(t.slice(c,c+a));c=c+a;const f=r.decode(t.slice(c,c+i));c=c+i;const m=r.decode(t.slice(c,c+l));c=c+l;const p=JSON.parse(r.decode(t.slice(c,t.byteLength))),x={status:m,response:p};return{join_ref:u,ref:h,topic:f,event:_r.reply,payload:x}}_decodeBroadcast(t,n,r){const s=n.getUint8(1),a=n.getUint8(2);let i=this.HEADER_LENGTH+2;const l=r.decode(t.slice(i,i+s));i=i+s;const c=r.decode(t.slice(i,i+a));i=i+a;const u=JSON.parse(r.decode(t.slice(i,t.byteLength)));return{join_ref:null,ref:null,topic:l,event:c,payload:u}}_decodeUserBroadcast(t,n,r){const s=n.getUint8(1),a=n.getUint8(2),i=n.getUint8(3),l=n.getUint8(4);let c=this.HEADER_LENGTH+4;const u=r.decode(t.slice(c,c+s));c=c+s;const h=r.decode(t.slice(c,c+a));c=c+a;const f=r.decode(t.slice(c,c+i));c=c+i;const m=t.slice(c,t.byteLength),p=l===this.JSON_ENCODING?JSON.parse(r.decode(m)):m,x={type:this.BROADCAST,event:h,payload:p};return i>0&&(x.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST,payload:x}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}}class NT{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var At;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(At||(At={}));const $b=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((a,i)=>(a[i]=JF(i,e,t,s),a),{}):{}},JF=(e,t,n,r)=>{const s=t.find(l=>l.name===e),a=s==null?void 0:s.type,i=n[e];return a&&!r.includes(a)?CT(a,i):Cv(i)},CT=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return t6(t,n)}switch(e){case At.bool:return XF(t);case At.float4:case At.float8:case At.int2:case At.int4:case At.int8:case At.numeric:case At.oid:return ZF(t);case At.json:case At.jsonb:return e6(t);case At.timestamp:return n6(t);case At.abstime:case At.date:case At.daterange:case At.int4range:case At.int8range:case At.money:case At.reltime:case At.text:case At.time:case At.timestamptz:case At.timetz:case At.tsrange:case At.tstzrange:return Cv(t);default:return Cv(t)}},Cv=e=>e,XF=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ZF=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},e6=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},t6=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let a;const i=e.slice(1,n);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(l=>CT(t,l))}return e},n6=e=>typeof e=="string"?e.replace(" ","T"):e,_T=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class mp{constructor(t,n,r={},s=Sv){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Lb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Lb||(Lb={}));class Sc{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Sc.syncState(this.state,s,a,i),this.pendingDiffs.forEach(c=>{this.state=Sc.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Sc.syncDiff(this.state,s,a,i),l())}),this.onJoin((s,a,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:i})}),this.onLeave((s,a,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const a=this.cloneDeep(t),i=this.transformState(n),l={},c={};return this.map(a,(u,h)=>{i[u]||(c[u]=h)}),this.map(i,(u,h)=>{const f=a[u];if(f){const m=h.map(y=>y.presence_ref),p=f.map(y=>y.presence_ref),x=h.filter(y=>p.indexOf(y.presence_ref)<0),g=f.filter(y=>m.indexOf(y.presence_ref)<0);x.length>0&&(l[u]=x),g.length>0&&(c[u]=g)}else l[u]=h}),this.syncDiff(a,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:a,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const h=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),h.length>0){const f=t[l].map(p=>p.presence_ref),m=h.filter(p=>f.indexOf(p.presence_ref)<0);t[l].unshift(...m)}r(l,h,c)}),this.map(i,(l,c)=>{let u=t[l];if(!u)return;const h=c.map(f=>f.presence_ref);u=u.filter(f=>h.indexOf(f.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Fb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Fb||(Fb={}));var Nc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Nc||(Nc={}));var As;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(As||(As={}));class Ox{constructor(t,n={config:{}},r){var s,a;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=ln.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new mp(this,_r.join,this.params,this.timeout),this.rejoinTimer=new NT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ln.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ln.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ln.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ln.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ln.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_r.reply,{},(i,l)=>{this._trigger(this._replyEventName(l),i)}),this.presence=new Sc(this),this.broadcastEndpointURL=_T(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ln.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],h=!!this.bindings[Nc.PRESENCE]&&this.bindings[Nc.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,f={},m={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(As.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(As.CLOSED)),this.updateJoinPayload(Object.assign({config:m},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var x;if(this.socket.setAuth(),p===void 0){t==null||t(As.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,y=(x=g==null?void 0:g.length)!==null&&x!==void 0?x:0,w=[];for(let v=0;v<y;v++){const b=g[v],{filter:{event:j,schema:S,table:C,filter:N}}=b,_=p&&p[v];if(_&&_.event===j&&_.schema===S&&_.table===C&&_.filter===N)w.push(Object.assign(Object.assign({},b),{id:_.id}));else{this.unsubscribe(),this.state=ln.errored,t==null||t(As.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,t&&t(As.SUBSCRIBED);return}}).receive("error",p=>{this.state=ln.errored,t==null||t(As.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(As.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===ln.joined&&t===Nc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var s;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const i={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,i,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:i}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ln.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(_r.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new mp(this,_r.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ln.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),i=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),i}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new mp(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>QF){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,a;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:h}=_r;if(r&&[l,c,u,h].indexOf(i)>=0&&r!==this._joinRef())return;let m=this._onMessage(i,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var x,g,y;return((x=p.filter)===null||x===void 0?void 0:x.event)==="*"||((y=(g=p.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===i}).map(p=>p.callback(m,r)):(a=this.bindings[i])===null||a===void 0||a.filter(p=>{var x,g,y,w,v,b;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const j=p.id,S=(x=p.filter)===null||x===void 0?void 0:x.event;return j&&((g=n.ids)===null||g===void 0?void 0:g.includes(j))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const j=(v=(w=p==null?void 0:p.filter)===null||w===void 0?void 0:w.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return j==="*"||j===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:g,table:y,commit_timestamp:w,type:v,errors:b}=x;m=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:w,eventType:v,new:{},old:{},errors:b}),this._getPayloadRecords(x))}p.callback(m,r)})}_isClosed(){return this.state===ln.closed}_isJoined(){return this.state===ln.joined}_isJoining(){return this.state===ln.joining}_isLeaving(){return this.state===ln.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&Ox.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(_r.close,{},t)}_onError(t){this._on(_r.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ln.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=$b(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=$b(t.columns,t.old_record)),n}}const pp=()=>{},Rd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},r6=[1e3,2e3,5e3,1e4],s6=1e4,o6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class a6{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Sv,this.transport=null,this.heartbeatIntervalMs=Rd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=pp,this.ref=0,this.reconnectTimer=null,this.vsn=Db,this.logger=pp,this.conn=null,this.sendBuffer=[],this.serializer=new YF,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Nv.websocket}`,this.httpEndpoint=_T(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=VF.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case aa.connecting:return ia.Connecting;case aa.open:return ia.Open;case aa.closing:return ia.Closing;default:return ia.Closed}}isConnected(){return this.connectionState()===ia.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===r);if(s)return s;{const a=new Ox(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:r,payload:s,ref:a}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(GF,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Rd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:a,ref:i}=n,l=i?`(${i})`:"",c=a.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,a,i)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===aa.open||this.conn.readyState===aa.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(_r.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([o6],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:HF};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(_r.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new NT(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Rd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,a,i,l,c,u,h,f,m,p;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Sv,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Rd.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(i=t==null?void 0:t.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:pp,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Db,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:(x=>r6[x-1]||s6),this.vsn){case ST:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:((x,g)=>g(JSON.stringify(x))),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:((x,g)=>g(JSON.parse(x)));break;case WF:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Ix extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Kt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class i6 extends Ix{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class _v extends Ix{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const Mx=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),l6=()=>Response,Ev=e=>{if(Array.isArray(e))return e.map(n=>Ev(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=Ev(r)}),t},c6=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},gp=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},u6=(e,t,n)=>Ae(void 0,void 0,void 0,function*(){const r=yield l6();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const a=e.status||500,i=(s==null?void 0:s.statusCode)||a+"";t(new i6(gp(s),a,i))}).catch(s=>{t(new _v(gp(s),s))}):t(new _v(gp(e),e))}),d6=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(c6(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function Vu(e,t,n,r,s,a){return Ae(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(n,d6(t,r,s,a)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>u6(c,l,r))})})}function su(e,t,n,r){return Ae(this,void 0,void 0,function*(){return Vu(e,"GET",t,n,r)})}function Gr(e,t,n,r,s){return Ae(this,void 0,void 0,function*(){return Vu(e,"POST",t,r,s,n)})}function kv(e,t,n,r,s){return Ae(this,void 0,void 0,function*(){return Vu(e,"PUT",t,r,s,n)})}function h6(e,t,n,r){return Ae(this,void 0,void 0,function*(){return Vu(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Dx(e,t,n,r,s){return Ae(this,void 0,void 0,function*(){return Vu(e,"DELETE",t,r,s,n)})}class f6{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return Ae(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kt(t))return{data:null,error:t};throw t}})}}var ET;class m6{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[ET]="BlobDownloadBuilder",this.promise=null}asStream(){return new f6(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ae(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kt(t))return{data:null,error:t};throw t}})}}ET=Symbol.toStringTag;const p6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class g6{constructor(t,n={},r,s){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=Mx(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,s){return Ae(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},zb),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",i.cacheControl),c&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(c))):(a=r,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!i.duplex&&(i.duplex="half")),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),h=this._getFinalPath(u),f=yield(t=="PUT"?kv:Gr)(this.fetch,`${this.url}/object/${h}`,a,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Kt(a))return{data:null,error:a};throw a}})}upload(t,n,r){return Ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Ae(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),i=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:zb.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const f=yield kv(this.fetch,l.toString(),c,{headers:h});return{data:{path:a,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Kt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Ae(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const a=yield Gr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),i=new URL(this.url+a.url),l=i.searchParams.get("token");if(!l)throw new Ix("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kt(r))return{data:null,error:r};throw r}})}update(t,n,r){return Ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Ae(this,void 0,void 0,function*(){try{return{data:yield Gr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Kt(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Ae(this,void 0,void 0,function*(){try{return{data:{path:(yield Gr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Kt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Ae(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),a=yield Gr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Kt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Ae(this,void 0,void 0,function*(){try{const s=yield Gr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Kt(s))return{data:null,error:s};throw s}})}download(t,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=a?`?${a}`:"",l=this._getFinalPath(t),c=()=>su(this.fetch,`${this.url}/${s}/${l}${i}`,{headers:this.headers,noResolveJson:!0});return new m6(c,this.shouldThrowOnError)}info(t){return Ae(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield su(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Ev(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kt(r))return{data:null,error:r};throw r}})}exists(t){return Ae(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield h6(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kt(r)&&r instanceof _v){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&s.push(a);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield Dx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}})}list(t,n,r){return Ae(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},p6),n),{prefix:t||""});return{data:yield Gr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Kt(s))return{data:null,error:s};throw s}})}listV2(t,n){return Ae(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Gr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const kT="2.83.0",TT={"X-Client-Info":`storage-js/${kT}`};class v6{constructor(t,n={},r,s){this.shouldThrowOnError=!1;const a=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},TT),n),this.fetch=Mx(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Ae(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield su(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}})}getBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield su(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}})}createBucket(t){return Ae(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Gr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Kt(s))return{data:null,error:s};throw s}})}updateBucket(t,n){return Ae(this,void 0,void 0,function*(){try{return{data:yield kv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield Gr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield Dx(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class y6{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},TT),n),this.fetch=Mx(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield Gr(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}})}listBuckets(t){return Ae(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),s=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield su(this.fetch,s,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield Dx(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}})}}const $x={"X-Client-Info":`storage-js/${kT}`,"Content-Type":"application/json"};class RT extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function dr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class vp extends RT{constructor(t,n,r){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class x6 extends RT{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var Ub;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Ub||(Ub={}));const Lx=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),w6=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Bb=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),b6=(e,t,n)=>Ae(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const s=e.status||500,a=e;if(typeof a.json=="function")a.json().then(i=>{const l=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||s+"";t(new vp(Bb(i),s,l))}).catch(()=>{const i=s+"",l=a.statusText||`HTTP ${s} error`;t(new vp(l,s,i))});else{const i=s+"",l=a.statusText||`HTTP ${s} error`;t(new vp(l,s,i))}}else t(new x6(Bb(e),e))}),j6=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return r?(w6(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),n)):s};function S6(e,t,n,r,s,a){return Ae(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(n,j6(t,r,s,a)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>i(c)).catch(c=>b6(c,l,r))})})}function hr(e,t,n,r,s){return Ae(this,void 0,void 0,function*(){return S6(e,"POST",t,r,s,n)})}class N6{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$x),n),this.fetch=Lx(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Ae(this,void 0,void 0,function*(){try{return{data:(yield hr(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}getIndex(t,n){return Ae(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}listIndexes(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return Ae(this,void 0,void 0,function*(){try{return{data:(yield hr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}}class C6{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$x),n),this.fetch=Lx(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Ae(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield hr(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}getVectors(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}listVectors(t){return Ae(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield hr(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}queryVectors(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}deleteVectors(t){return Ae(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield hr(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}}class _6{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$x),n),this.fetch=Lx(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:(yield hr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}getBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}listBuckets(){return Ae(this,arguments,void 0,function*(t={}){try{return{data:yield hr(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ae(this,void 0,void 0,function*(){try{return{data:(yield hr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}}class E6 extends _6{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new k6(this.url,this.headers,t,this.fetch)}}class k6 extends N6{constructor(t,n,r,s){super(t,n,s),this.vectorBucketName=r}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ae(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ae(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ae(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ae(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new T6(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class T6 extends C6{constructor(t,n,r,s,a){super(t,n,a),this.vectorBucketName=r,this.indexName=s}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ae(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ae(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ae(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ae(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ae(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class R6 extends v6{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new g6(this.url,this.headers,t,this.fetch)}get vectors(){return new E6(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new y6(this.url+"/iceberg",this.headers,this.fetch)}}const P6="2.83.0";let dc="";typeof Deno<"u"?dc="deno":typeof document<"u"?dc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?dc="react-native":dc="node";const A6={"X-Client-Info":`supabase-js-${dc}/${P6}`},O6={headers:A6},I6={schema:"public"},M6={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},D6={},$6=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),L6=()=>Headers,F6=(e,t,n)=>{const r=$6(n),s=L6();return async(a,i)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(a,Object.assign(Object.assign({},i),{headers:u}))}};function z6(e){return e.endsWith("/")?e:e+"/"}function U6(e,t){var n,r;const{db:s,auth:a,realtime:i,global:l}=e,{db:c,auth:u,realtime:h,global:f}=t,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},h),i),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function B6(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(z6(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const PT="2.83.0",ui=30*1e3,Tv=3,yp=Tv*ui,K6="http://localhost:9999",V6="supabase.auth.token",q6={"X-Client-Info":`gotrue-js/${PT}`},Rv="X-Supabase-Api-Version",AT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},H6=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,W6=600*1e3;class ou extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function $e(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class G6 extends ou{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Q6(e){return $e(e)&&e.name==="AuthApiError"}class la extends ou{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Xo extends ou{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class or extends Xo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Y6(e){return $e(e)&&e.name==="AuthSessionMissingError"}class ri extends Xo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Pd extends Xo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ad extends Xo{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function J6(e){return $e(e)&&e.name==="AuthImplicitGrantRedirectError"}class Kb extends Xo{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Pv extends Xo{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function xp(e){return $e(e)&&e.name==="AuthRetryableFetchError"}class Vb extends Xo{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Av extends Xo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qb=` 	
\r=`.split(""),X6=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<qb.length;t+=1)e[qb[t].charCodeAt(0)]=-2;for(let t=0;t<Wh.length;t+=1)e[Wh[t].charCodeAt(0)]=t;return e})();function Hb(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Wh[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Wh[r]),t.queuedBits-=6}}function OT(e,t,n){const r=X6[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Wb(e){const t=[],n=i=>{t.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=i=>{tz(i,r,n)};for(let i=0;i<e.length;i+=1)OT(e.charCodeAt(i),s,a);return t.join("")}function Z6(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function ez(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Z6(r,t)}}function tz(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Di(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)OT(e.charCodeAt(s),n,r);return new Uint8Array(t)}function nz(e){const t=[];return ez(e,n=>t.push(n)),new Uint8Array(t)}function ga(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Hb(s,n,r)),Hb(null,n,r),t.join("")}function rz(e){return Math.round(Date.now()/1e3)+e}function sz(){return Symbol("auth-callback")}const yn=()=>typeof window<"u"&&typeof document<"u",ta={tested:!1,writable:!1},IT=()=>{if(!yn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ta.tested)return ta.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ta.tested=!0,ta.writable=!0}catch{ta.tested=!0,ta.writable=!1}return ta.writable};function oz(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const MT=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),az=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",di=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},na=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},so=async(e,t)=>{await e.removeItem(t)};class Xf{constructor(){this.promise=new Xf.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Xf.promiseConstructor=Promise;function wp(e){const t=e.split(".");if(t.length!==3)throw new Av("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!H6.test(t[r]))throw new Av("JWT not in base64url format");return{header:JSON.parse(Wb(t[0])),payload:JSON.parse(Wb(t[1])),signature:Di(t[2]),raw:{header:t[0],payload:t[1]}}}async function iz(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function lz(e,t){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await e(a);if(!t(a,null,i)){r(i);return}}catch(i){if(!t(a,i)){s(i);return}}})()})}function cz(e){return("0"+e.toString(16)).substr(-2)}function uz(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,cz).join("")}async function dz(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function hz(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await dz(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function si(e,t,n=!1){const r=uz();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await di(e,`${t}-code-verifier`,s);const a=await hz(r);return[a,r===a?"plain":"s256"]}const fz=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mz(e){const t=e.headers.get(Rv);if(!t||!t.match(fz))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function pz(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function gz(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vz=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function oi(e){if(!vz.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function bp(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function yz(e,t){return new Proxy(e,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,s)}})}function Gb(e){return JSON.parse(JSON.stringify(e))}const oa=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),xz=[502,503,504];async function Qb(e){var t;if(!az(e))throw new Pv(oa(e),0);if(xz.includes(e.status))throw new Pv(oa(e),e.status);let n;try{n=await e.json()}catch(a){throw new la(oa(a),a)}let r;const s=mz(e);if(s&&s.getTime()>=AT["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Vb(oa(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new or}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new Vb(oa(n),e.status,n.weak_password.reasons);throw new G6(oa(n),e.status||500,r)}const wz=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function We(e,t,n,r){var s;const a=Object.assign({},r==null?void 0:r.headers);a[Rv]||(a[Rv]=AT["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const i=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await bz(e,t,n+l,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function bz(e,t,n,r,s,a){const i=wz(t,r,s,a);let l;try{l=await e(n,Object.assign({},i))}catch(c){throw console.error(c),new Pv(oa(c),0)}if(l.ok||await Qb(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Qb(c)}}function qr(e){var t;let n=null;Nz(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=rz(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Yb(e){const t=qr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function fo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function jz(e){return{data:e,error:null}}function Sz(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=e,i=Qo(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function Jb(e){return e}function Nz(e){return e.access_token&&e.refresh_token&&e.expires_in}const jp=["global","local","others"];class Cz{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=MT(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=jp[0]){if(jp.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${jp.join(", ")}`);try{return await We(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await We(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:fo})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Qo(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await We(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Sz,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if($e(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await We(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:fo})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,a,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await We(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Jb});if(h.error)throw h.error;const f=await h.json(),m=(i=h.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(x.split(";")[1].split("=")[1]);u[`${y}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if($e(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){oi(t);try{return await We(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:fo})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){oi(t);try{return await We(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:fo})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){oi(t);try{return await We(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:fo})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){oi(t.userId);try{const{data:n,error:r}=await We(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if($e(n))return{data:null,error:n};throw n}}async _deleteFactor(t){oi(t.userId),oi(t.id);try{return{data:await We(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,a,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await We(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Jb});if(h.error)throw h.error;const f=await h.json(),m=(i=h.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(x.split(";")[1].split("=")[1]);u[`${y}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if($e(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await We(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await We(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await We(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($e(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await We(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await We(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($e(n))return{data:null,error:n};throw n}}}function Xb(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const ai={debug:!!(globalThis&&IT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class DT extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class _z extends DT{}async function Ez(e,t,n){ai.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),ai.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){ai.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{ai.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw ai.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new _z(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ai.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function kz(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function $T(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Tz(e){return parseInt(e,16)}function Rz(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function Pz(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:a=new Date,nonce:i,notBefore:l,requestId:c,resources:u,scheme:h,uri:f,version:m}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=$T(e.address),x=h?`${h}://${r}`:r,g=e.statement?`${e.statement}
`:"",y=`${x} wants you to sign in with your Ethereum account:
${p}

${g}`;let w=`URI: ${f}
Version: ${m}
Chain ID: ${n}${i?`
Nonce: ${i}`:""}
Issued At: ${a.toISOString()}`;if(s&&(w+=`
Expiration Time: ${s.toISOString()}`),l&&(w+=`
Not Before: ${l.toISOString()}`),c&&(w+=`
Request ID: ${c}`),u){let v=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);v+=`
- ${b}`}w+=v}return`${y}
${w}`}class sn extends Error{constructor({message:t,code:n,cause:r,name:s}){var a;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=s??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class Gh extends sn{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function Az({error:e,options:t}){var n,r,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new sn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new sn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new sn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new sn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new sn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new sn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new sn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new sn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(LT(i)){if(a.rp.id!==i)return new sn({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new sn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new sn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new sn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new sn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Oz({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new sn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new sn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(LT(r)){if(n.rpId!==r)return new sn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new sn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new sn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new sn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Iz{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Mz=new Iz;function Dz(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=Qo(e,["challenge","user","excludeCredentials"]),a=Di(t).buffer,i=Object.assign(Object.assign({},n),{id:Di(n.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:a,user:i});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Di(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function $z(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=Qo(e,["challenge","allowCredentials"]),s=Di(t).buffer,a=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let i=0;i<n.length;i++){const l=n[i];a.allowCredentials[i]=Object.assign(Object.assign({},l),{id:Di(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function Lz(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:ga(new Uint8Array(e.response.attestationObject)),clientDataJSON:ga(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Fz(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ga(new Uint8Array(s.authenticatorData)),clientDataJSON:ga(new Uint8Array(s.clientDataJSON)),signature:ga(new Uint8Array(s.signature)),userHandle:s.userHandle?ga(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function LT(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Zb(){var e,t;return!!(yn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function zz(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Gh("Browser returned unexpected credential type",t)}:{data:null,error:new Gh("Empty credential response",t)}}catch(t){return{data:null,error:Az({error:t,options:e})}}}async function Uz(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Gh("Browser returned unexpected credential type",t)}:{data:null,error:new Gh("Empty credential response",t)}}catch(t){return{data:null,error:Oz({error:t,options:e})}}}const Bz={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Kz={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Qh(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const a in s){const i=s[a];if(i!==void 0)if(Array.isArray(i))r[a]=i;else if(n(i))r[a]=i;else if(t(i)){const l=r[a];t(l)?r[a]=Qh(l,i):r[a]=Qh(i)}else r[a]=i}return r}function Vz(e,t){return Qh(Bz,e,t||{})}function qz(e,t){return Qh(Kz,e,t||{})}class Hz{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},a){try{const{data:i,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!i)return{data:null,error:l};const c=s??Mz.createNewAbortSignal();if(i.webauthn.type==="create"){const{user:u}=i.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(i.webauthn.type){case"create":{const u=Vz(i.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:h,error:f}=await zz({publicKey:u,signal:c});return h?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}case"request":{const u=qz(i.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:h,error:f}=await Uz(Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:u,signal:c}));return h?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}}}catch(i){return $e(i)?{data:null,error:i}:{data:null,error:new la("Unexpected error in challenge",i)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new ou("rpId is required for WebAuthn authentication")};try{if(!Zb())return{data:null,error:new la("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:a});if(!i)return{data:null,error:l};const{webauthn:c}=i;return this._verify({factorId:t,challengeId:i.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(i){return $e(i)?{data:null,error:i}:{data:null,error:new la("Unexpected error in authenticate",i)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new ou("rpId is required for WebAuthn registration")};try{if(!Zb())return{data:null,error:new la("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this._enroll({friendlyName:t});if(!i)return await this.client.mfa.listFactors().then(h=>{var f;return(f=h.data)===null||f===void 0?void 0:f.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:a});return c?this._verify({factorId:i.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(i){return $e(i)?{data:null,error:i}:{data:null,error:new la("Unexpected error in register",i)}}}}kz();const Wz={url:K6,storageKey:V6,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:q6,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function ej(e,t,n){return await n()}const ii={};class au{get jwks(){var t,n;return(n=(t=ii[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){ii[this.storageKey]=Object.assign(Object.assign({},ii[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=ii[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ii[this.storageKey]=Object.assign(Object.assign({},ii[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},Wz),t);if(this.storageKey=a.storageKey,this.instanceID=(n=au.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,au.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&yn()){const i=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(i),this.logDebugMessages&&console.trace(i)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Cz({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=MT(a.fetch),this.lock=a.lock||ej,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:yn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Ez:this.lock=ej,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Hz(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:IT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Xb(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Xb(this.memoryStorage)),yn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${PT}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(yn()&&(n=oz(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),yn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),J6(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return $e(n)?this._returnResult({error:n}):this._returnResult({error:new la("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const a=await We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:qr}),{data:i,error:l}=a;if(l||!i)return this._returnResult({data:{user:null,session:null},error:l});const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if($e(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var n,r,s;try{let a;if("email"in t){const{email:h,password:f,options:m}=t;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await si(this.storage,this.storageKey)),a=await We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:h,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:x},xform:qr})}else if("phone"in t){const{phone:h,password:f,options:m}=t;a=await We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:qr})}else throw new Pd("You must provide either an email or phone number and a password");const{data:i,error:l}=a;if(l||!i)return this._returnResult({data:{user:null,session:null},error:l});const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if($e(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:i,options:l}=t;n=await We(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Yb})}else if("phone"in t){const{phone:a,password:i,options:l}=t;n=await We(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Yb})}else throw new Pd("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const a=new ri;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if($e(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,a,i,l,c,u,h,f,m;let p,x;if("message"in t)p=t.message,x=t.signature;else{const{chain:g,wallet:y,statement:w,options:v}=t;let b;if(yn())if(typeof y=="object")b=y;else{const E=window;if("ethereum"in E&&typeof E.ethereum=="object"&&"request"in E.ethereum&&typeof E.ethereum.request=="function")b=E.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=y}const j=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href),S=await b.request({method:"eth_requestAccounts"}).then(E=>E).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=$T(S[0]);let N=(r=v==null?void 0:v.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!N){const E=await b.request({method:"eth_chainId"});N=Tz(E)}const _={domain:j.host,address:C,statement:w,uri:j.href,version:"1",chainId:N,nonce:(s=v==null?void 0:v.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(i=(a=v==null?void 0:v.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(l=v==null?void 0:v.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=v==null?void 0:v.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=v==null?void 0:v.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=v==null?void 0:v.signInWithEthereum)===null||h===void 0?void 0:h.resources};p=Pz(_),x=await b.request({method:"personal_sign",params:[Rz(p),C]})}try{const{data:g,error:y}=await We(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:x},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:qr});if(y)throw y;if(!g||!g.session||!g.user){const w=new ri;return this._returnResult({data:{user:null,session:null},error:w})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:y})}catch(g){if($e(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var n,r,s,a,i,l,c,u,h,f,m,p;let x,g;if("message"in t)x=t.message,g=t.signature;else{const{chain:y,wallet:w,statement:v,options:b}=t;let j;if(yn())if(typeof w=="object")j=w;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))j=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=w}const S=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const C=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),v?{statement:v}:null));let N;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")N=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)N=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)x=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),g=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${S.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(h=b==null?void 0:b.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const C=await j.signMessage(new TextEncoder().encode(x),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=C}}try{const{data:y,error:w}=await We(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:ga(g)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:qr});if(w)throw w;if(!y||!y.session||!y.user){const v=new ri;return this._returnResult({data:{user:null,session:null},error:v})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:w})}catch(y){if($e(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async _exchangeCodeForSession(t){const n=await na(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:a,error:i}=await We(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:qr});if(await so(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!a||!a.session||!a.user){const l=new ri;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:i})}catch(a){if($e(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:a,nonce:i}=t,l=await We(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:qr}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const h=new ri;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(n){if($e(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,s,a,i;try{if("email"in t){const{email:l,options:c}=t;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await si(this.storage,this.storageKey));const{error:f}=await We(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:h}=await We(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new Pd("You must provide either an email or phone number.")}catch(l){if($e(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var n,r;try{let s,a;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:l}=await We(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:qr});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if($e(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var n,r,s,a,i;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await si(this.storage,this.storageKey));const u=await We(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:jz});return!((a=u.data)===null||a===void 0)&&a.url&&yn()&&!(!((i=t.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if($e(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new or;const{error:s}=await We(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if($e(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:a}=t,{error:i}=await We(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:i})}else if("phone"in t){const{phone:r,type:s,options:a}=t,{data:i,error:l}=await We(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l})}throw new Pd("You must provide either an email or phone number and a type")}catch(n){if($e(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await na(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<yp:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const i=await na(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=bp()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const i={value:this.suppressGetSessionWarning};t.user=yz(t.user,i),i.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await We(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:fo}):await this._useSession(async n=>{var r,s,a;const{data:i,error:l}=n;if(l)throw l;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new or}:await We(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:fo})})}catch(n){if($e(n))return Y6(n)&&(await this._removeSession(),await so(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new or;const i=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await si(this.storage,this.storageKey));const{data:u,error:h}=await We(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:fo});if(h)throw h;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),this._returnResult({data:{user:i.user},error:null})})}catch(r){if($e(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new or;const n=Date.now()/1e3;let r=n,s=!0,a=null;const{payload:i}=wp(t.access_token);if(i.exp&&(r=i.exp,s=r<=n),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if($e(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:i,error:l}=n;if(l)throw l;t=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new or;const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if($e(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!yn())throw new Ad("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ad(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Kb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ad("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Kb("No code detected.");const{data:v,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:i,expires_in:l,expires_at:c,token_type:u}=t;if(!a||!l||!i||!u)throw new Ad("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(l);let m=h+f;c&&(m=parseInt(c));const p=m-h;p*1e3<=ui&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const x=m-f;h-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,h):h-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,h);const{data:g,error:y}=await this._getUser(a);if(y)throw y;const w={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:m,refresh_token:i,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:w,redirectType:t.type},error:null})}catch(r){if($e(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await na(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({error:a});const i=(r=s.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(Q6(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await so(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=sz(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await si(this.storage,this.storageKey,!0));try{return await We(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if($e(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var i,l,c,u,h;const{data:f,error:m}=a;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await We(this.fetch,"GET",p,{headers:this.headers,jwt:(h=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return yn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if($e(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:a}}=n;if(s)throw s;const{options:i,provider:l,token:c,access_token:u,nonce:h}=t,f=await We(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:qr}),{data:m,error:p}=f;return p?this._returnResult({data:{user:null,session:null},error:p}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new ri}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:p}))}catch(s){if($e(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:a,error:i}=n;if(i)throw i;return await We(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await lz(async s=>(s>0&&await iz(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await We(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:qr})),(s,a)=>{const i=200*Math.pow(2,s);return a&&xp(a)&&Date.now()+i-r<ui})}catch(r){if(this._debug(n,"error",r),$e(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),yn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await na(this.storage,this.storageKey);if(s&&this.userStorage){let i=await na(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await di(this.userStorage,this.storageKey+"-user",i)),s.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:bp()}else if(s&&!s.user&&!s.user){const i=await na(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await so(this.storage,this.storageKey+"-user"),await di(this.storage,this.storageKey,s)):s.user=bp()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<yp;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${yp}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),xp(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(s.access_token);!l&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(r,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new or;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Xf;const{data:a,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!a.session)throw new or;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),$e(a)){const i={data:null,error:a};return xp(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await di(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const a=Gb(s);await di(this.storage,this.storageKey,a)}else{const s=Gb(n);await di(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await so(this.storage,this.storageKey),await so(this.storage,this.storageKey+"-code-verifier"),await so(this.storage,this.storageKey+"-user"),this.userStorage&&await so(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&yn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ui);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/ui);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ui}ms, refresh threshold is ${Tv} ticks`),s<=Tv&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof DT)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!yn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,i]=await si(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?this._returnResult({data:null,error:a}):await We(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:a,error:i}=n;if(i)return this._returnResult({data:null,error:i});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await We(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const i=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Lz(t.webauthn.credential_response):Fz(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await We(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:i,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const i=await We(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(i.error)return i;const{data:l}=i;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Dz(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:$z(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=wp(r.access_token);let i=null;a.aal&&(i=a.aal);let l=i;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=a.amr||[];return{data:{currentLevel:i,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await We(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new or})})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new or});const i=await We(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&yn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(r){if($e(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new or});const i=await We(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&yn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(r){if($e(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await We(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new or})})}catch(t){if($e(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await We(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new or})})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+W6>s)return r;const{data:a,error:i}=await We(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,r=a.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:p,error:x}=await this.getSession();if(x||!p.session)return this._returnResult({data:null,error:x});r=p.session.access_token}const{header:s,payload:a,signature:i,raw:{header:l,payload:c}}=wp(r);n!=null&&n.allowExpired||pz(a.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:a,header:s,signature:i},error:null}}const h=gz(s.alg),f=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,i,nz(`${l}.${c}`)))throw new Av("Invalid JWT signature");return{data:{claims:a,header:s,signature:i},error:null}}catch(r){if($e(r))return this._returnResult({data:null,error:r});throw r}}}au.nextInstanceID={};const Gz=au;class Qz extends Gz{constructor(t){super(t)}}class Yz{constructor(t,n,r){var s,a,i;this.supabaseUrl=t,this.supabaseKey=n;const l=B6(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:I6,realtime:D6,auth:Object.assign(Object.assign({},M6),{storageKey:c}),global:O6},h=U6(r??{},u);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=h.auth)!==null&&i!==void 0?i:{},this.headers,h.global.fetch),this.fetch=F6(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new KF(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new R6(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new zF(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:a,storageKey:i,flowType:l,lock:c,debug:u,throwOnError:h},f,m){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Qz({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),f),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:a,flowType:l,lock:c,debug:u,throwOnError:h,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new a6(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const FT=(e,t,n)=>new Yz(e,t,n);function Jz(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Jz()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Xz={},$i=Xz,tj=$i.VITE_SUPABASE_URL??$i.SUPABASE_URL??$i.PUBLIC_SUPABASE_URL,nj=$i.VITE_SUPABASE_ANON_KEY??$i.SUPABASE_ANON_KEY??$i.PUBLIC_SUPABASE_ANON_KEY,Le=tj&&nj?FT(tj,nj,{auth:{persistSession:!1}}):null;var Zz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Zf=Zz.reduce((e,t)=>{const n=l_(`Primitive.${t}`),r=d.forwardRef((s,a)=>{const{asChild:i,...l}=s,c=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),e8="Label",zT=d.forwardRef((e,t)=>o.jsx(Zf.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));zT.displayName=e8;var UT=zT;const t8=Wo("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ts=d.forwardRef(({className:e,...t},n)=>o.jsx(UT,{ref:n,className:ee(t8(),e),...t}));ts.displayName=UT.displayName;const Sp=Jf.map(e=>({key:e.key,name:e.name,emoji:e.emoji||""}));function n8(e){const t=Jf.find(s=>s.key===e);if(!t)return[];const n=[];function r(s,a=[]){if(s&&s.children)for(const i of s.children){const l=[...a,i.key];n.push({key:i.key,name:i.name,path:l}),i.children&&r(i,l)}}return r(t),n}function BT({open:e,onOpenChange:t,tag:n,onConfirm:r,isLoading:s=!1}){const[a,i]=d.useState(""),[l,c]=d.useState(""),[u,h]=d.useState([]),[f,m]=d.useState([]),{data:p}=tt({queryKey:["tag-details",n==null?void 0:n.name,n==null?void 0:n.category],queryFn:async()=>{if(!n)return null;const v=await fetch(`/api/tags-manager/details?tagName=${encodeURIComponent(n.name)}&category=${encodeURIComponent(n.category)}`);return v.ok?await v.json():null},enabled:!!n&&e,staleTime:0});if(d.useEffect(()=>{if(n){i(n.name),c(n.category);const v=(p==null?void 0:p.subcategoryPath)||n.subcategoryPath||[];h(Array.isArray(v)?v:[])}},[n,p]),d.useEffect(()=>{if(l){const v=n8(l);m(v),n!=null&&n.subcategoryPath&&n.subcategoryPath.length>0&&l!==n.category?h([]):l===(n==null?void 0:n.category)&&(n!=null&&n.subcategoryPath)&&h(n.subcategoryPath)}else m([]),h([])},[l,n]),!n)return null;const x=()=>{const v={};a.trim()&&a!==n.name&&(v.newName=a.trim()),l&&l!==n.category&&(v.newCategory=l),u.length>0?v.newSubcategoryPath=u:l&&l!==n.category&&(v.newSubcategoryPath=[]),Object.keys(v).length>0&&r(v)},g=a.trim()&&a!==n.name||l&&l!==n.category||u.length>0&&JSON.stringify(u)!==JSON.stringify(n.subcategoryPath||[]),y=Sp.find(v=>v.key===n.category),w=Sp.find(v=>v.key===l);return o.jsx(en,{open:e,onOpenChange:t,children:o.jsxs(qt,{className:"sm:max-w-[550px] max-h-[90vh] overflow-y-auto",children:[o.jsxs(Ht,{children:[o.jsxs(Wt,{className:"flex items-center gap-2",children:[o.jsx(xD,{className:"w-5 h-5 text-blue-500"}),"Edit Tag"]}),o.jsx(Pn,{children:"Update the name, category, or subcategory path for this tag."})]}),o.jsxs("div",{className:"py-4 space-y-4",children:[o.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Current Tag:"}),o.jsx("span",{className:"font-semibold text-slate-900",children:n.name})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsxs(me,{variant:"outline",className:"text-xs",children:[y==null?void 0:y.emoji," ",(y==null?void 0:y.name)||n.category]}),n.subcategoryPath&&n.subcategoryPath.length>0&&o.jsx(me,{variant:"secondary",className:"text-xs",children:n.subcategoryPath.map(v=>nh(v)).filter(Boolean).join(" > ")||n.subcategoryPath.join(" > ")}),o.jsxs(me,{variant:"secondary",className:"text-xs",children:[n.count," occurrences"]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ts,{htmlFor:"tag-name",children:"Tag Name"}),o.jsx(An,{id:"tag-name",value:a,onChange:v=>i(v.target.value),placeholder:"Enter tag name",disabled:s,autoFocus:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ts,{htmlFor:"category",children:"Category"}),o.jsxs(pl,{value:l,onValueChange:c,disabled:s,children:[o.jsx(Ka,{id:"category",children:o.jsx(gl,{placeholder:"Select category",children:w&&o.jsxs("span",{children:[w.emoji," ",w.name]})})}),o.jsx(Va,{children:Sp.map(v=>o.jsxs(nn,{value:v.key,children:[v.emoji," ",v.name]},v.key))})]})]}),l&&f.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(ts,{htmlFor:"subcategory",children:"Subcategory Path (Optional)"}),o.jsxs(pl,{value:u.join(" > ")||"none",onValueChange:v=>{if(v==="none")h([]);else{const b=f.find(j=>j.path.join(" > ")===v||j.key===v);b&&h(b.path)}},disabled:s,children:[o.jsx(Ka,{id:"subcategory",children:o.jsx(gl,{placeholder:"Select subcategory (optional)",children:u.length>0?u.map(v=>nh(v)).filter(Boolean).join(" > ")||u.join(" > "):"None (root of category)"})}),o.jsxs(Va,{children:[o.jsx(nn,{value:"none",children:"None (root of category)"}),f.map(v=>o.jsx(nn,{value:v.path.join(" > "),children:v.path.map(b=>nh(b)).filter(Boolean).join(" > ")||v.path.join(" > ")},v.path.join(" > ")))]})]}),o.jsx("p",{className:"text-xs text-slate-500",children:'Leave as "None" to place the tag at the root of the selected category.'})]}),o.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:o.jsxs("p",{className:"text-sm text-blue-900",children:["This will update ",n.count," analyses with the new tag information."]})})]}),o.jsxs(Zr,{children:[o.jsx(V,{variant:"outline",onClick:()=>t(!1),disabled:s,children:"Cancel"}),o.jsx(V,{onClick:x,disabled:s||!g,children:s?o.jsxs(o.Fragment,{children:[o.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):"Update Tag"})]})]})})}function KT({open:e,onOpenChange:t,tag:n,onConfirm:r,isLoading:s=!1}){return n?o.jsx(en,{open:e,onOpenChange:t,children:o.jsxs(qt,{className:"sm:max-w-[450px]",children:[o.jsxs(Ht,{children:[o.jsxs(Wt,{className:"flex items-center gap-2",children:[o.jsx(bs,{className:"w-5 h-5 text-red-500"}),"Delete Tag"]}),o.jsx(Pn,{children:"This action will permanently remove this tag from all analyses. This cannot be undone."})]}),o.jsxs("div",{className:"py-4 space-y-4",children:[o.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(ku,{className:"w-4 h-4 text-slate-500"}),o.jsx("span",{className:"font-semibold text-slate-900",children:n.name})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(me,{variant:"outline",className:"text-xs",children:n.category}),o.jsxs(me,{variant:"secondary",className:"text-xs",children:[n.count," occurrences"]})]})]}),o.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:o.jsxs("p",{className:"text-sm text-red-900",children:[o.jsx("strong",{children:"Warning:"})," This will remove the tag from ",n.count," analyses. This action cannot be undone."]})})]}),o.jsxs(Zr,{children:[o.jsx(V,{variant:"outline",onClick:()=>t(!1),disabled:s,children:"Cancel"}),o.jsx(V,{onClick:r,disabled:s,variant:"destructive",children:s?"Deleting...":"Delete Tag"})]})]})}):null}const Np=768;function r8(){const[e,t]=d.useState(void 0);return d.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Np-1}px)`),r=()=>{t(window.innerWidth<Np)};return n.addEventListener("change",r),t(window.innerWidth<Np),()=>n.removeEventListener("change",r)},[]),!!e}var s8="Separator",rj="horizontal",o8=["horizontal","vertical"],VT=d.forwardRef((e,t)=>{const{decorative:n,orientation:r=rj,...s}=e,a=a8(r)?r:rj,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return o.jsx(Zf.div,{"data-orientation":a,...l,...s,ref:t})});VT.displayName=s8;function a8(e){return o8.includes(e)}var qT=VT;const HT=d.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},s)=>o.jsx(qT,{ref:s,decorative:n,orientation:t,className:ee("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));HT.displayName=qT.displayName;const i8=hx,l8=fx,WT=d.forwardRef(({className:e,...t},n)=>o.jsx(Du,{className:ee("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));WT.displayName=Du.displayName;const c8=Wo("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),GT=d.forwardRef(({side:e="right",className:t,children:n,...r},s)=>o.jsxs(l8,{children:[o.jsx(WT,{}),o.jsxs($u,{ref:s,className:ee(c8({side:e}),t),...r,children:[o.jsxs(Bf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[o.jsx($L,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]}),n]})]}));GT.displayName=$u.displayName;const QT=({className:e,...t})=>o.jsx("div",{className:ee("flex flex-col space-y-2 text-center sm:text-left",e),...t});QT.displayName="SheetHeader";const YT=d.forwardRef(({className:e,...t},n)=>o.jsx(Lu,{ref:n,className:ee("text-lg font-semibold text-foreground",e),...t}));YT.displayName=Lu.displayName;const JT=d.forwardRef(({className:e,...t},n)=>o.jsx(Fu,{ref:n,className:ee("text-sm text-muted-foreground",e),...t}));JT.displayName=Fu.displayName;function iu({className:e,...t}){return o.jsx("div",{className:ee("animate-pulse rounded-md bg-primary/10",e),...t})}const u8="sidebar_state",d8=3600*24*7,h8="16rem",f8="18rem",m8="3rem",p8="b",XT=d.createContext(null);function em(){const e=d.useContext(XT);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const tm=d.forwardRef(({defaultOpen:e=!0,open:t,onOpenChange:n,className:r,style:s,children:a,...i},l)=>{const c=r8(),[u,h]=d.useState(!1),[f,m]=d.useState(e),p=t??f,x=d.useCallback(v=>{const b=typeof v=="function"?v(p):v;n?n(b):m(b),document.cookie=`${u8}=${b}; path=/; max-age=${d8}`},[n,p]),g=d.useCallback(()=>c?h(v=>!v):x(v=>!v),[c,x,h]);d.useEffect(()=>{const v=b=>{b.key===p8&&(b.metaKey||b.ctrlKey)&&(b.preventDefault(),g())};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[g]);const y=p?"expanded":"collapsed",w=d.useMemo(()=>({state:y,open:p,setOpen:x,isMobile:c,openMobile:u,setOpenMobile:h,toggleSidebar:g}),[y,p,x,c,u,h,g]);return o.jsx(XT.Provider,{value:w,children:o.jsx(o_,{delayDuration:0,children:o.jsx("div",{style:{"--sidebar-width":h8,"--sidebar-width-icon":m8,...s},className:ee("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:l,...i,children:a})})})});tm.displayName="SidebarProvider";const Fx=d.forwardRef(({side:e="left",variant:t="sidebar",collapsible:n="offcanvas",className:r,children:s,...a},i)=>{const{isMobile:l,state:c,openMobile:u,setOpenMobile:h}=em();return n==="none"?o.jsx("div",{className:ee("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:i,...a,children:s}):l?o.jsx(i8,{open:u,onOpenChange:h,...a,children:o.jsxs(GT,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":f8},side:e,children:[o.jsxs(QT,{className:"sr-only",children:[o.jsx(YT,{children:"Sidebar"}),o.jsx(JT,{children:"Displays the mobile sidebar."})]}),o.jsx("div",{className:"flex h-full w-full flex-col",children:s})]})}):o.jsxs("div",{ref:i,className:"group peer hidden text-sidebar-foreground md:block","data-state":c,"data-collapsible":c==="collapsed"?n:"","data-variant":t,"data-side":e,children:[o.jsx("div",{className:ee("relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),o.jsx("div",{className:ee("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",e==="left"?"left-4 sm:left-6 lg:left-8 group-data-[collapsible=offcanvas]:-left-[calc(var(--sidebar-width)+1rem)] sm:group-data-[collapsible=offcanvas]:-left-[calc(var(--sidebar-width)+1.5rem)] lg:group-data-[collapsible=offcanvas]:-left-[calc(var(--sidebar-width)+2rem)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]",r),...a,children:o.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:s})})]})});Fx.displayName="Sidebar";const g8=d.forwardRef(({className:e,onClick:t,...n},r)=>{const{toggleSidebar:s}=em();return o.jsxs(V,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:ee("h-7 w-7",e),onClick:a=>{t==null||t(a),s()},...n,children:[o.jsx(UL,{}),o.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});g8.displayName="SidebarTrigger";const ZT=d.forwardRef(({className:e,...t},n)=>{const{toggleSidebar:r}=em();return o.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:ee("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})});ZT.displayName="SidebarRail";const v8=d.forwardRef(({className:e,...t},n)=>o.jsx("main",{ref:n,className:ee("relative flex w-full flex-1 flex-col bg-background","md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t}));v8.displayName="SidebarInset";const e2=d.forwardRef(({className:e,...t},n)=>o.jsx(An,{ref:n,"data-sidebar":"input",className:ee("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t}));e2.displayName="SidebarInput";const zx=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,"data-sidebar":"header",className:ee("flex flex-col gap-2 p-2",e),...t}));zx.displayName="SidebarHeader";const y8=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,"data-sidebar":"footer",className:ee("flex flex-col gap-2 p-2",e),...t}));y8.displayName="SidebarFooter";const x8=d.forwardRef(({className:e,...t},n)=>o.jsx(HT,{ref:n,"data-sidebar":"separator",className:ee("mx-2 w-auto bg-sidebar-border",e),...t}));x8.displayName="SidebarSeparator";const Ux=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,"data-sidebar":"content",className:ee("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));Ux.displayName="SidebarContent";const ca=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,"data-sidebar":"group",className:ee("relative flex w-full min-w-0 flex-col p-2",e),...t}));ca.displayName="SidebarGroup";const Ni=d.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const s=t?Pl:"div";return o.jsx(s,{ref:r,"data-sidebar":"group-label",className:ee("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...n})});Ni.displayName="SidebarGroupLabel";const w8=d.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const s=t?Pl:"button";return o.jsx(s,{ref:r,"data-sidebar":"group-action",className:ee("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...n})});w8.displayName="SidebarGroupAction";const ua=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,"data-sidebar":"group-content",className:ee("w-full text-sm",e),...t}));ua.displayName="SidebarGroupContent";const Ci=d.forwardRef(({className:e,...t},n)=>o.jsx("ul",{ref:n,"data-sidebar":"menu",className:ee("flex w-full min-w-0 flex-col gap-1",e),...t}));Ci.displayName="SidebarMenu";const da=d.forwardRef(({className:e,...t},n)=>o.jsx("li",{ref:n,"data-sidebar":"menu-item",className:ee("group/menu-item relative",e),...t}));da.displayName="SidebarMenuItem";const b8=Wo("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),mo=d.forwardRef(({asChild:e=!1,isActive:t=!1,variant:n="default",size:r="default",tooltip:s,className:a,...i},l)=>{const c=e?Pl:"button",{isMobile:u,state:h}=em(),f=o.jsx(c,{ref:l,"data-sidebar":"menu-button","data-size":r,"data-active":t,className:ee(b8({variant:n,size:r}),a),...i});return s?(typeof s=="string"&&(s={children:s}),o.jsxs(W$,{children:[o.jsx(G$,{asChild:!0,children:f}),o.jsx(a_,{side:"right",align:"center",hidden:h!=="collapsed"||u,...s})]})):f});mo.displayName="SidebarMenuButton";const j8=d.forwardRef(({className:e,asChild:t=!1,showOnHover:n=!1,...r},s)=>{const a=t?Pl:"button";return o.jsx(a,{ref:s,"data-sidebar":"menu-action",className:ee("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...r})});j8.displayName="SidebarMenuAction";const hc=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:ee("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t}));hc.displayName="SidebarMenuBadge";const S8=d.forwardRef(({className:e,showIcon:t=!1,...n},r)=>{const s=d.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return o.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:ee("flex h-8 items-center gap-2 rounded-md px-2",e),...n,children:[t&&o.jsx(iu,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),o.jsx(iu,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":s}})]})});S8.displayName="SidebarMenuSkeleton";const Bx=d.forwardRef(({className:e,...t},n)=>o.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:ee("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-input px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t}));Bx.displayName="SidebarMenuSub";const Kx=d.forwardRef(({...e},t)=>o.jsx("li",{ref:t,...e}));Kx.displayName="SidebarMenuSubItem";const N8=d.forwardRef(({asChild:e=!1,size:t="md",isActive:n,className:r,...s},a)=>{const i=e?Pl:"a";return o.jsx(i,{ref:a,"data-sidebar":"menu-sub-button","data-size":t,"data-active":n,className:ee("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...s})});N8.displayName="SidebarMenuSubButton";var nm="Collapsible",[C8]=Nn(nm),[_8,Vx]=C8(nm),t2=d.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:a,onOpenChange:i,...l}=e,[c,u]=rr({prop:r,defaultProp:s??!1,onChange:i,caller:nm});return o.jsx(_8,{scope:n,disabled:a,contentId:Un(),open:c,onOpenToggle:d.useCallback(()=>u(h=>!h),[u]),children:o.jsx(we.div,{"data-state":Hx(c),"data-disabled":a?"":void 0,...l,ref:t})})});t2.displayName=nm;var n2="CollapsibleTrigger",r2=d.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,s=Vx(n2,n);return o.jsx(we.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":Hx(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:t,onClick:Z(e.onClick,s.onOpenToggle)})});r2.displayName=n2;var qx="CollapsibleContent",s2=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Vx(qx,e.__scopeCollapsible);return o.jsx($t,{present:n||s.open,children:({present:a})=>o.jsx(E8,{...r,ref:t,present:a})})});s2.displayName=qx;var E8=d.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:s,...a}=e,i=Vx(qx,n),[l,c]=d.useState(r),u=d.useRef(null),h=Ge(t,u),f=d.useRef(0),m=f.current,p=d.useRef(0),x=p.current,g=i.open||l,y=d.useRef(g),w=d.useRef(void 0);return d.useEffect(()=>{const v=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(v)},[]),tn(()=>{const v=u.current;if(v){w.current=w.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const b=v.getBoundingClientRect();f.current=b.height,p.current=b.width,y.current||(v.style.transitionDuration=w.current.transitionDuration,v.style.animationName=w.current.animationName),c(r)}},[i.open,r]),o.jsx(we.div,{"data-state":Hx(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!g,...a,ref:h,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":x?`${x}px`:void 0,...e.style},children:g&&s})});function Hx(e){return e?"open":"closed"}var k8=t2;const rm=k8,sm=r2,om=s2;function o2({catalogData:e,selectedEntities:t,showUntagged:n,searchQuery:r,onEntitySelect:s,onUntaggedToggle:a,onSearchChange:i,onCategoryToggle:l,mode:c="sidebar",showCategories:u=!0,showOverview:h=!0,qualityCheckItems:f,selectedQualityCheck:m,onQualityCheckSelect:p,veriBadgeItems:x,selectedVeriBadge:g,onVeriBadgeSelect:y}){const w=d.useMemo(()=>e?{categories:Object.entries(e.entitiesByCategory).map(([S,C])=>({key:S,label:kx(S).name,total:C.reduce((N,_)=>N+(_.count||0),0),nodes:C})),untaggedCount:e.untaggedCount}:null,[e]);if(!w)return null;const v=(j,S)=>{var M;const C=j.category||S,N=`${C}::${j.name}`,_=Array.isArray(j.children)&&j.children.length>0;return j.isTag||!_?o.jsx(da,{children:o.jsxs(mo,{onClick:()=>s(N),isActive:t.has(N),className:"data-[active=true]:bg-white data-[active=true]:text-black",tooltip:`${j.count||0} analyses`,children:[o.jsx("span",{className:"truncate",children:j.name}),o.jsx(hc,{children:j.count||0})]})},N):o.jsx(da,{children:o.jsxs(rm,{className:"group/collapsible [&[data-state=open]>button>svg:first-child]:rotate-90",defaultOpen:!1,children:[o.jsx(sm,{asChild:!0,children:o.jsxs(mo,{className:"justify-start gap-2",children:[o.jsx(ul,{className:"h-3 w-3 transition-transform"}),o.jsx("span",{className:"truncate",children:j.name})]})}),o.jsx(om,{children:o.jsx(Bx,{children:(M=j.children)==null?void 0:M.map((T,R)=>o.jsx(Kx,{children:v(T,C)},`${N}-${R}`))})})]})},`${N}-parent`)},b=c==="inline";return o.jsxs(Fx,{collapsible:b?"none":void 0,className:b?"rounded-xl bg-sidebar/40":void 0,children:[o.jsx(zx,{className:"pt-0",children:o.jsx(ca,{className:"py-0 px-2",children:o.jsxs(ua,{className:"relative",children:[o.jsx(ts,{htmlFor:"sidebar-search",className:"sr-only",children:"Search"}),o.jsx(Yc,{className:"pointer-events-none absolute left-2 top-1/2 size-4 -translate-y-1/2 select-none opacity-50"}),o.jsx(e2,{id:"sidebar-search",placeholder:"Search",value:r,onChange:j=>i(j.target.value),className:"pl-8 pr-8"}),r&&o.jsxs("button",{type:"button",onClick:()=>i(""),className:"absolute right-2 top-1/2 -translate-y-1/2 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[o.jsx(On,{className:"size-4"}),o.jsx("span",{className:"sr-only",children:"Clear search"})]})]})})}),o.jsxs(Ux,{children:[h&&o.jsxs(ca,{children:[o.jsx(Ni,{children:"Overview"}),o.jsx(ua,{children:o.jsx(Ci,{children:o.jsx(da,{children:o.jsxs(mo,{onClick:()=>{a(),l==null||l("untagged")},isActive:n,tooltip:`${w.untaggedCount} untagged analyses`,children:["Untagged",o.jsx(hc,{children:w.untaggedCount})]})})})})]}),f&&f.length>0&&o.jsxs(ca,{children:[o.jsx(Ni,{children:"Quality Check"}),o.jsx(ua,{children:o.jsx(Ci,{children:f.map(j=>o.jsx(da,{children:o.jsxs(mo,{onClick:()=>p==null?void 0:p(j.id),isActive:m===j.id,className:"data-[active=true]:bg-white data-[active=true]:text-black",tooltip:j.isLoading?"Loading...":`${j.count} entries`,children:[o.jsxs("span",{className:"flex items-center gap-2 truncate",children:[j.isLoading?o.jsx(nt,{className:"h-3.5 w-3.5 text-muted-foreground shrink-0 animate-spin"}):j.hasIssues?o.jsx(bs,{className:"h-3.5 w-3.5 text-orange-500 shrink-0"}):o.jsx(Xn,{className:"h-3.5 w-3.5 text-green-500 shrink-0"}),o.jsx("span",{className:"truncate",children:j.label})]}),!j.isLoading&&j.hasIssues&&o.jsx(hc,{className:"bg-orange-100 text-orange-700",children:j.count})]})},j.id))})})]}),x&&x.length>0&&o.jsxs(ca,{children:[o.jsx(Ni,{children:"VeriBadge"}),o.jsx(ua,{children:o.jsx(Ci,{children:x.map(j=>o.jsx(da,{children:o.jsxs(mo,{onClick:()=>y==null?void 0:y(j.id),isActive:g===j.id,className:"data-[active=true]:bg-white data-[active=true]:text-black",tooltip:j.isLoading?"Loading...":`${j.count} entries`,children:[o.jsx("span",{className:"flex items-center gap-2 truncate",children:j.isLoading?o.jsx(nt,{className:"h-3.5 w-3.5 text-muted-foreground shrink-0 animate-spin"}):o.jsx("span",{className:"truncate",children:j.label})}),!j.isLoading&&o.jsx(hc,{className:"bg-muted text-muted-foreground",children:j.count})]})},j.id))})})]}),u&&w.categories.map(j=>j.total===0?null:o.jsxs(ca,{children:[o.jsx(Ni,{children:j.label}),o.jsx(ua,{children:o.jsx(Ci,{children:j.nodes.map(S=>v(S,j.key))})})]},j.key))]}),!b&&o.jsx(ZT,{})]})}const T8=[50,200,500];function sj(){const{toast:e}=wr(),[,t]=_u(),[n,r]=d.useState("keywords"),[s,a]=d.useState(50),[i,l]=d.useState(new Set),[c,u]=d.useState(!1),[h,f]=d.useState(new Set),[m,p]=d.useState(1),[x,g]=d.useState(!1),[y,w]=d.useState(""),[v,b]=d.useState(""),[j,S]=d.useState(!1),[C,N]=d.useState(""),[_,E]=d.useState(!1),[M,T]=d.useState(!1),[R,W]=d.useState(null);d.useEffect(()=>{const F=setTimeout(()=>{b(y),p(1)},300);return()=>clearTimeout(F)},[y]);const[Q,he]=d.useState(!1),[Y,O]=d.useState(!1),[A,U]=d.useState(!1),[D,B]=d.useState(""),[ue,_e]=d.useState("crypto"),[ye,Be]=d.useState(!1),[Ie,pe]=d.useState(!1),{data:ge,refetch:Ke}=tt({queryKey:["supabase-all-tags"],queryFn:async()=>{if(!Le)return[];const{data:F,error:te}=await Le.from("tags").select("*");if(te)throw te;return F||[]},staleTime:0,refetchOnMount:!0}),{data:le}=tt({queryKey:["supabase-labels"],queryFn:async()=>{if(!Le)return[];const{data:F,error:te}=await Le.from("subcategory_labels").select("*");return te?[]:F||[]},staleTime:1/0}),{data:Re}=tt({queryKey:["supabase-counts"],queryFn:async()=>{if(!Le)return{taggedCount:0,untaggedCount:0,totalAnalyses:0};const{count:F}=await Le.from("historical_news_analyses").select("*",{count:"exact",head:!0});return{taggedCount:0,untaggedCount:0,totalAnalyses:F||0}}}),Me=d.useMemo(()=>{if(!ge)return null;const F=new Map;return le==null||le.forEach(te=>F.set(te.path,te.label)),nT(ge,F)},[ge,le]),Ue=d.useMemo(()=>({tags:(ge==null?void 0:ge.map(F=>({name:F.name,count:F.usage_count})))||[],taggedCount:(Re==null?void 0:Re.taggedCount)||0,untaggedCount:(Re==null?void 0:Re.untaggedCount)||0,totalAnalyses:(Re==null?void 0:Re.totalAnalyses)||0}),[ge,Re]),De=d.useMemo(()=>{if(!(Me!=null&&Me.categories))return null;const F={};return Me.categories.forEach(te=>{const ke=te.category,Te=ae=>{const fe=[];let be=ae.totalTags||0;return ae.subcategories&&Object.keys(ae.subcategories).length>0&&Object.values(ae.subcategories).forEach(ve=>{const ft=Te(ve);ft&&fe.push(ft)}),ae.tags&&Array.isArray(ae.tags)&&ae.tags.forEach(ve=>{fe.push({name:ve.name,category:ke,count:ve.usageCount||0,isTag:!0})}),fe.sort((ve,ft)=>ve.isTag&&!ft.isTag?1:!ve.isTag&&ft.isTag?-1:ve.name.localeCompare(ft.name)),fe.length===0?null:{category:ke,name:ae.name,count:be,isParent:!0,children:fe}},$=[];te.tags&&Array.isArray(te.tags)&&te.tags.forEach(ae=>{$.push({name:ae.name,category:ke,count:ae.usageCount||0,isTag:!0})}),te.subcategories&&Object.values(te.subcategories).forEach(ae=>{const fe=Te(ae);fe&&$.push(fe)}),$.sort((ae,fe)=>ae.isTag&&!fe.isTag?1:!ae.isTag&&fe.isTag?-1:ae.name.localeCompare(fe.name)),$.length>0&&(F[ke]=$)}),{entitiesByCategory:F,taggedCount:(Ue==null?void 0:Ue.taggedCount)||0,untaggedCount:(Ue==null?void 0:Ue.untaggedCount)||0,totalAnalyses:(Ue==null?void 0:Ue.totalAnalyses)||0}},[Ue,Me]),{data:Ye,isLoading:st,refetch:xt}=tt({queryKey:["supabase-tags-analyses",Array.from(i).sort().join(","),c,v,m,s],refetchOnMount:!0,refetchOnWindowFocus:!1,queryFn:async()=>{var ot,bt;if(!Le)throw new Error("Supabase not configured");let F=Le.from("historical_news_analyses").select("date, summary, tags_version2, tier_used, is_manual_override",{count:"exact"});c||i.size>0,v&&(F=F.ilike("summary",`%${v}%`)),F=F.order("date",{ascending:!1});let te=[],ke=null;const Te=c||i.size>0;if(Te){let et=[],mt=0;const xe=1e3;for(;;){const{data:Ve,error:Tt}=await F.range(mt,mt+xe-1);if(Tt)throw Tt;if(!Ve||Ve.length===0||(et=et.concat(Ve),Ve.length<xe))break;mt+=xe}te=et,ke=et.length}else{const et=(m-1)*s,mt=et+s-1;F=F.range(et,mt);const{data:xe,error:Ve,count:Tt}=await F;if(Ve)throw Ve;te=xe||[],ke=Tt}console.log(" Analyses Query Result:",JSON.stringify({analysesCount:te==null?void 0:te.length,totalCount:ke,showUntagged:c,selectedEntitiesCount:i.size,needsClientSideFiltering:Te,firstAnalysisDate:(ot=te==null?void 0:te[0])==null?void 0:ot.date,firstAnalysisTags:(bt=te==null?void 0:te[0])==null?void 0:bt.tags_version2},null,2));let $=te||[];c&&($=$.filter(et=>!et.tags_version2||et.tags_version2.length===0)),i.size>0&&!c&&($=$.filter(et=>!et.tags_version2||!Array.isArray(et.tags_version2)?!1:Array.from(i).some(mt=>{const[xe,Ve]=mt.split("::");return et.tags_version2.includes(Ve)})));const ae=(m-1)*s,fe=ae+s,be=$.slice(ae,fe),ve=Te?$.length:ke||$.length,ft=Math.ceil(ve/s);return console.log(" Received:",be.length,"analyses, filtered total:",ve),{analyses:be,pagination:{currentPage:m,pageSize:s,totalCount:ve,totalPages:ft}}}}),it=De?Object.entries(De.entitiesByCategory).map(([F,te])=>({category:F,entities:te.sort((ke,Te)=>Te.count-ke.count),totalCount:te.reduce((ke,Te)=>ke+Te.count,0)})).sort((F,te)=>te.totalCount-F.totalCount):[];De&&it.length>0&&console.log(" Available categories:",it.map(F=>F.category));const wt=["bitcoin","money-economics","technology","organizations","people","regulation-law","markets-geography","education-community","crime-security","topics","miscellaneous"];let Lt=n==="keywords"?(it||[]).filter(({category:F})=>wt.includes(F)):(it||[]).filter(({category:F})=>F.toLowerCase()==="topics");Array.isArray(Lt)||(Lt=[]),Lt.length===0&&it&&it.length>0&&(console.warn(" Filtering removed all categories, showing all categories instead"),Lt=it),De&&(console.log(" Filtered categories:",Lt.map(F=>F.category),"viewMode:",n),console.log(" All categories:",it.map(F=>({cat:F.category,count:F.entities.length}))));const qe=(Ye==null?void 0:Ye.analyses)||[];Ye!=null&&Ye.pagination.totalPages;const Ft=(Ye==null?void 0:Ye.pagination.totalCount)||0,z=F=>Tx(F,De),G=()=>{if(x){g(!1),f(new Set);return}const F=qe.length>0&&qe.every(te=>h.has(te.date));f(F?te=>{const ke=new Set(te);return qe.forEach(Te=>ke.delete(Te.date)),ke}:te=>{const ke=new Set(te);return qe.forEach(Te=>ke.add(Te.date)),ke})},X=async()=>{if(!Le)throw new Error("Supabase not configured");let F=Le.from("historical_news_analyses").select("date, tags_version2, summary");v&&(F=F.ilike("summary",`%${v}%`));const{data:te,error:ke}=await F;if(ke)throw ke;let Te=te||[];return c&&(Te=Te.filter($=>!$.tags_version2||$.tags_version2.length===0)),i.size>0&&!c&&(Te=Te.filter($=>!$.tags_version2||!Array.isArray($.tags_version2)?!1:Array.from(i).some(ae=>{const[fe,be]=ae.split("::");return $.tags_version2.includes(be)}))),Te.map($=>$.date)},oe=at({mutationFn:async({dates:F,tag:te})=>Rr("POST","/api/tags/bulk-add",{dates:F,tag:te}),onSuccess:(F,te)=>{J.invalidateQueries({queryKey:["supabase-tags-catalog"]}),J.invalidateQueries({queryKey:["supabase-tags-analyses"]}),e({title:"Tags Added",description:`Successfully added tag to ${te.dates.length} analyses`}),he(!1),B(""),f(new Set),g(!1)},onError:F=>{e({title:"Error",description:F.message,variant:"destructive"})}}),L=at({mutationFn:async({dates:F,tag:te})=>Rr("POST","/api/tags/bulk-remove",{dates:F,tag:te}),onSuccess:(F,te)=>{J.invalidateQueries({queryKey:["supabase-tags-catalog"]}),J.invalidateQueries({queryKey:["supabase-tags-analyses"]}),J.invalidateQueries({queryKey:["supabase-tags-selected-summaries"]}),e({title:"Tag Removed",description:`Successfully removed tag from ${te.dates.length} analyses`})},onError:F=>{e({title:"Error",description:F.message,variant:"destructive"})}}),H=at({mutationFn:async({tagName:F,oldCategory:te,newName:ke,newCategory:Te,newSubcategoryPath:$})=>{const ae=await fetch("/api/tags-manager/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tagName:F,oldCategory:te,newName:ke,newCategory:Te,newSubcategoryPath:$})});if(!ae.ok){let fe="Failed to update tag";try{fe=(await ae.json()).error||fe}catch{fe=`Error ${ae.status}: ${ae.statusText||"Unknown error"}`}throw new Error(fe)}return await ae.json()},onSuccess:async F=>{e({title:"Tag Updated",description:`Tag has been updated in ${F.updated} analyses`}),await J.invalidateQueries({queryKey:["supabase-tags-catalog"]}),await J.invalidateQueries({queryKey:["tags-catalog-v2"]}),await J.invalidateQueries({queryKey:["tags-filter-tree"]}),await J.invalidateQueries({queryKey:["supabase-tags-analyses"]}),E(!1),W(null)},onError:F=>{e({title:"Update Failed",description:F.message,variant:"destructive"})}}),se=at({mutationFn:async({tagName:F,category:te})=>{const ke=await fetch("/api/tags-manager/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tagName:F,category:te})});if(!ke.ok){let Te="Failed to delete tag";try{Te=(await ke.json()).error||Te}catch{Te=`Error ${ke.status}: ${ke.statusText||"Unknown error"}`}throw new Error(Te)}return await ke.json()},onSuccess:async F=>{e({title:"Tag Deleted",description:`Tag has been deleted from ${F.updated} analyses`}),await J.invalidateQueries({queryKey:["supabase-tags-catalog"]}),await J.invalidateQueries({queryKey:["tags-catalog-v2"]}),await J.invalidateQueries({queryKey:["tags-filter-tree"]}),await J.invalidateQueries({queryKey:["tags-hierarchy"]}),await J.invalidateQueries({queryKey:["supabase-tags-analyses"]}),await J.refetchQueries({queryKey:["tags-filter-tree"]}),T(!1),W(null)},onError:F=>{e({title:"Delete Failed",description:F.message,variant:"destructive"})}});at({mutationFn:async()=>{const F=await fetch("/api/tags/flush-cache",{method:"POST"});if(!F.ok)throw new Error("Failed to flush cache");return await F.json()},onSuccess:async()=>{e({title:"Cache Flushed",description:"Tag cache has been cleared successfully"}),await J.invalidateQueries({queryKey:["tags-catalog-v2"]}),await J.invalidateQueries({queryKey:["tags-filter-tree"]}),await J.invalidateQueries({queryKey:["tags-hierarchy"]}),await J.refetchQueries({queryKey:["tags-catalog-v2"]}),await J.refetchQueries({queryKey:["tags-filter-tree"]})},onError:F=>{e({title:"Cache Flush Failed",description:F.message,variant:"destructive"})}});const re=async()=>{if(!D.trim()){e({title:"Error",description:"Please enter a tag name",variant:"destructive"});return}try{let F;x?F=await X():F=Array.from(h),oe.mutate({dates:F,tag:{name:D.trim(),category:ue}})}catch{e({title:"Error",description:"Failed to prepare bulk operation",variant:"destructive"})}},{data:Se=[],isLoading:Qe}=tt({queryKey:["supabase-tags-selected-summaries",Array.from(h).sort(),x,v,c],queryFn:async()=>{if(!Le)throw new Error("Supabase not configured");let F;if(x)try{F=await X()}catch{return[]}else{if(h.size===0)return[];F=Array.from(h)}const{data:te,error:ke}=await Le.from("historical_news_analyses").select("tags_version2").in("date",F);if(ke)throw ke;const Te=new Map;return te==null||te.forEach($=>{$.tags_version2&&Array.isArray($.tags_version2)&&$.tags_version2.forEach(ae=>{const fe=z(ae),be=`${fe}::${ae}`;Te.has(be)||Te.set(be,{name:ae,category:fe})})}),Array.from(Te.values())},enabled:(Y||A)&&(h.size>0||x)}),Ee=async F=>{try{let te;x?te=await X():te=Array.from(h),L.mutate({dates:te,tag:F})}catch{e({title:"Error",description:"Failed to prepare bulk operation",variant:"destructive"})}},Nt=async()=>{try{let F;if(x){e({title:"Too many items",description:"Cannot copy more than 50 items at once. Please refine your selection.",variant:"destructive"});return}if(h.size>0){if(h.size>50){e({title:"Too many items",description:"Cannot copy more than 50 items at once.",variant:"destructive"});return}F=Array.from(h)}else F=qe.map(Te=>Te.date);let te=qe.filter(Te=>F.includes(Te.date));if(te.length<F.length){if(!Le)throw new Error("Supabase not configured");const{data:Te,error:$}=await Le.from("historical_news_analyses").select("date, summary, tags").in("date",F);if($)throw $;te=Te||[]}if(te.length===0){e({title:"Nothing to Copy",description:"No analyses selected",variant:"destructive"});return}const ke=te.map(Te=>`${new Date(Te.date).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"2-digit"})} - ${Te.summary}`).join(`
`);N(ke),S(!0)}catch(F){console.error("Copy to clipboard error:",F),e({title:"Copy Failed",description:F instanceof Error?F.message:"Failed to prepare text for copying",variant:"destructive"})}};return qe.length>0&&qe.every(F=>h.has(F.date)),o.jsx(tm,{className:"w-full",children:o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row",children:[o.jsx("div",{className:"lg:w-72 shrink-0",children:o.jsx(o2,{catalogData:De,selectedEntities:i,showUntagged:c,searchQuery:y,mode:"inline",showOverview:!1,onEntitySelect:F=>{const te=new Set(i);te.has(F)?te.delete(F):te.add(F),l(te),u(!1),p(1)},onUntaggedToggle:()=>{u(!c),l(new Set),p(1)},onSearchChange:F=>{w(F),p(1)}})}),o.jsxs("div",{className:"flex-1 space-y-4",children:[o.jsx("div",{className:"space-y-6",children:o.jsxs(jt,{className:"pt-0 px-6 pb-6 border-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("h2",{className:"text-lg font-semibold text-foreground",children:c?"Untagged Analyses":"Bitcoinpedia"}),o.jsxs(me,{variant:"secondary",className:"font-normal",children:[Ft.toLocaleString()," result",Ft!==1?"s":""]})]}),Ft>0&&o.jsxs(V,{variant:"outline",size:"sm",onClick:Nt,disabled:x||h.size>50,className:"flex items-center space-x-2","data-testid":"button-copy-txt",children:[o.jsx(fC,{className:"w-4 h-4"}),o.jsx("span",{children:"Copy TXT"})]})]}),o.jsx(Vh,{analyses:qe,isLoading:st,selectedDates:h,onDateSelect:F=>{f(te=>new Set(te).add(F))},onDateDeselect:F=>{f(te=>{const ke=new Set(te);return ke.delete(F),ke})},onRowClick:F=>t(`/day/${F}`),onTagClick:F=>w(F),emptyMessage:c?"No untagged analyses found":i.size>0?"No analyses match the selected entities":v?"No analyses match your search":"No tagged analyses found",showCheckbox:!0,pageSize:s,currentPage:m,totalCount:Ft,catalogData:De,onPageChange:F=>p(F),onPageSizeChange:F=>{a(F),p(1)},onSelectAll:G,selectAllMatching:x,pageSizeOptions:T8,showPagination:!0,showSelectAll:!0,showBulkActions:!0,bulkActions:{showSelectAllLink:!0,onSelectAllMatching:()=>g(!0),onClearSelection:()=>{f(new Set),g(!1)},customActions:o.jsxs(o.Fragment,{children:[o.jsxs(Ol,{children:[o.jsx(Il,{asChild:!0,children:o.jsxs(V,{variant:"outline",size:"sm",disabled:ye,title:"Re-analyze (R)",children:[o.jsx(pn,{className:`w-4 h-4 mr-2 ${ye?"animate-spin":""}`}),"Re-analyze",o.jsx(Go,{className:"w-4 h-4 ml-2"})]})}),o.jsxs(Ja,{align:"end",children:[o.jsxs(nr,{onClick:async()=>{Be(!0);const F=x?qe.map(te=>te.date):Array.from(h);for(const te of F)try{await fetch(`/api/analysis/date/${te}`,{method:"POST"})}catch(ke){console.error(`Failed to analyze ${te}:`,ke)}Be(!1),J.invalidateQueries({queryKey:["analyses"]}),e({title:"Re-analysis complete",description:`Analyzed ${F.length} date(s)`})},disabled:ye,children:[o.jsx(pn,{className:"w-4 h-4 mr-2"}),"Analyse Days"]}),o.jsxs(nr,{onClick:async()=>{Be(!0);const F=x?qe.map(te=>te.date):Array.from(h);for(const te of F)try{await fetch(`/api/analysis/date/${te}/redo-summary`,{method:"POST"})}catch(ke){console.error(`Failed to redo summary for ${te}:`,ke)}Be(!1),J.invalidateQueries({queryKey:["analyses"]}),e({title:"Summaries updated",description:`Redid summaries for ${F.length} date(s)`})},disabled:ye,children:[o.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Redo Summaries"]})]})]}),o.jsxs(V,{variant:"outline",size:"sm",disabled:Ie,onClick:async()=>{pe(!0);try{await fetch("/api/tags/categorize/start",{method:"POST"}),e({title:"Auto Tagging started",description:"AI is categorizing tags in the background"})}catch{e({title:"Error",description:"Failed to start auto tagging",variant:"destructive"})}pe(!1)},children:[Ie?o.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(Rx,{className:"w-4 h-4 mr-2"}),"Auto Tagging"]}),o.jsxs(V,{variant:"outline",size:"sm",onClick:()=>U(!0),children:[o.jsx(Jc,{className:"w-4 h-4 mr-2"}),"Manage Tags"]})]})}})]})}),o.jsx(en,{open:j,onOpenChange:S,children:o.jsxs(qt,{className:"max-w-2xl",children:[o.jsxs(Ht,{children:[o.jsx(Wt,{children:"Copy Analyses to Clipboard"}),o.jsx(Pn,{children:"The text below has been selected for you. Press Ctrl+C or Cmd+C to copy."})]}),o.jsx("div",{className:"mt-4",children:o.jsx("textarea",{readOnly:!0,value:C,className:"w-full h-64 p-2 border rounded bg-slate-50 text-sm text-slate-800",onFocus:F=>F.target.select(),autoFocus:!0,"data-testid":"textarea-copy"})}),o.jsx("div",{className:"flex justify-end pt-4",children:o.jsx(V,{onClick:()=>S(!1),variant:"outline","data-testid":"button-close-copy-dialog",children:"Close"})})]})}),o.jsx(en,{open:Q,onOpenChange:he,children:o.jsxs(qt,{children:[o.jsx(Ht,{children:o.jsxs(Wt,{children:["Add Tag to ",x?Ft:h.size," Analyses"]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-slate-700 mb-1 block",children:"Tag Name"}),o.jsx(An,{placeholder:"Enter tag name",value:D,onChange:F=>B(F.target.value),"data-testid":"input-bulk-tag-name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-slate-700 mb-1 block",children:"Category"}),o.jsxs("select",{value:ue,onChange:F=>_e(F.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-md","data-testid":"select-bulk-category",children:[o.jsx("option",{value:"crypto",children:"Cryptocurrency"}),o.jsx("option",{value:"company",children:"Company"}),o.jsx("option",{value:"person",children:"Person"}),o.jsx("option",{value:"country",children:"Country"}),o.jsx("option",{value:"organization",children:"Organization"}),o.jsx("option",{value:"protocol",children:"Protocol"}),o.jsx("option",{value:"topic",children:"Topic"})]})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(V,{variant:"outline",onClick:()=>he(!1),"data-testid":"button-cancel-bulk-add",children:"Cancel"}),o.jsx(V,{onClick:re,disabled:oe.isPending,"data-testid":"button-confirm-bulk-add",children:oe.isPending?"Adding...":"Add Tag"})]})]})]})}),o.jsx(en,{open:Y,onOpenChange:O,children:o.jsxs(qt,{className:"max-w-2xl",children:[o.jsx(Ht,{children:o.jsxs(Wt,{children:["Remove Tags from ",x?Ft:h.size," Analyses"]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-slate-600",children:"Click on any tag below to remove it from all selected analyses:"}),Qe?o.jsx("div",{className:"text-center py-8 text-slate-500",children:"Loading tags..."}):Se.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(ss,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),o.jsx("p",{className:"text-slate-500",children:"No tags found in selected analyses"})]}):o.jsx("div",{className:"max-h-96 overflow-y-auto",children:o.jsx("div",{className:"flex flex-wrap gap-2",children:Se.map(F=>o.jsxs(me,{variant:"outline",className:`${vl(F.category)} cursor-pointer hover:opacity-70 transition-opacity px-3 py-2`,onClick:()=>Ee(F),"data-testid":`badge-remove-${F.category}-${F.name}`,children:[o.jsx("span",{className:"font-medium",children:F.name}),o.jsxs("span",{className:"ml-2 text-xs opacity-60",children:["(",F.category,")"]}),o.jsx(On,{className:"w-3 h-3 ml-2"})]},`${F.category}::${F.name}`))})}),o.jsx("div",{className:"flex justify-end space-x-2 pt-2 border-t",children:o.jsx(V,{variant:"outline",onClick:()=>O(!1),"data-testid":"button-cancel-bulk-remove",children:"Close"})})]})]})}),o.jsx(en,{open:A,onOpenChange:U,children:o.jsxs(qt,{className:"max-w-2xl",children:[o.jsxs(Ht,{children:[o.jsxs(Wt,{className:"flex items-center gap-2",children:[o.jsx(Jc,{className:"w-5 h-5"}),"Manage Tags for ",x?Ft.toLocaleString():h.size," Analyses"]}),o.jsx(Pn,{children:"View, add, or remove tags from all selected analyses"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg border",children:[o.jsxs("h4",{className:"text-sm font-medium mb-3 flex items-center gap-2",children:[o.jsx(zo,{className:"w-4 h-4"}),"Add New Tag"]}),o.jsxs("div",{className:"flex items-end gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"Tag Name"}),o.jsx(An,{placeholder:"Enter tag name",value:D,onChange:F=>B(F.target.value),className:"h-9"})]}),o.jsxs("div",{className:"w-40",children:[o.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"Category"}),o.jsxs(pl,{value:ue,onValueChange:_e,children:[o.jsx(Ka,{className:"h-9",children:o.jsx(gl,{})}),o.jsxs(Va,{children:[o.jsx(nn,{value:"crypto",children:"Cryptocurrency"}),o.jsx(nn,{value:"company",children:"Company"}),o.jsx(nn,{value:"person",children:"Person"}),o.jsx(nn,{value:"country",children:"Country"}),o.jsx(nn,{value:"organization",children:"Organization"}),o.jsx(nn,{value:"protocol",children:"Protocol"}),o.jsx(nn,{value:"topic",children:"Topic"})]})]})]}),o.jsx(V,{size:"sm",onClick:()=>{D.trim()&&(re(),U(!1))},disabled:!D.trim()||oe.isPending,className:"h-9",children:oe.isPending?o.jsx(nt,{className:"w-4 h-4 animate-spin"}):o.jsx(zo,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-medium mb-3 flex items-center gap-2",children:[o.jsx(ss,{className:"w-4 h-4"}),"Existing Tags",o.jsx(me,{variant:"secondary",className:"font-normal ml-1",children:Se.length})]}),Qe?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(nt,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading tags..."]}):Se.length===0?o.jsxs("div",{className:"text-center py-8 border border-dashed rounded-lg",children:[o.jsx(ss,{className:"w-10 h-10 text-muted-foreground/30 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"No tags found in selected analyses"})]}):o.jsx("div",{className:"max-h-64 overflow-y-auto border rounded-lg p-3",children:o.jsx("div",{className:"flex flex-wrap gap-2",children:Se.map(F=>o.jsxs(me,{variant:"outline",className:`${vl(F.category)} group cursor-pointer hover:opacity-80 transition-all px-3 py-1.5`,onClick:()=>Ee(F),children:[o.jsx("span",{className:"font-medium",children:F.name}),o.jsxs("span",{className:"ml-1.5 text-xs opacity-60",children:["(",F.category,")"]}),o.jsx(On,{className:"w-3 h-3 ml-2 opacity-0 group-hover:opacity-100 transition-opacity"})]},`manage-${F.category}::${F.name}`))})}),o.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Click on a tag to remove it from all selected analyses"})]}),o.jsx("div",{className:"flex justify-end pt-2 border-t",children:o.jsx(V,{variant:"outline",onClick:()=>U(!1),children:"Done"})})]})]})}),o.jsx(BT,{open:_,onOpenChange:E,tag:R,onConfirm:F=>{R&&H.mutate({tagName:R.name,oldCategory:R.category,newName:F.newName,newCategory:F.newCategory,newSubcategoryPath:F.newSubcategoryPath})},isLoading:H.isPending}),o.jsx(KT,{open:M,onOpenChange:T,tag:R,onConfirm:async()=>{if(R)try{const F=await fetch(`/api/tags-manager/find-categories?tagName=${encodeURIComponent(R.name)}`);if(F.ok){const te=await F.json();if(te.categories&&te.categories.length>0){const ke=te.categories.map(ae=>fetch("/api/tags-manager/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tagName:R.name,category:ae.category})})),Te=await Promise.all(ke);if(Te.every(ae=>ae.ok)){const fe=(await Promise.all(Te.map(be=>be.json().then(ve=>ve.updated||0)))).reduce((be,ve)=>be+ve,0);e({title:"Tag Deleted",description:`Tag has been deleted from ${fe} analyses across ${te.categories.length} category(ies)`}),await J.invalidateQueries({queryKey:["supabase-tags-catalog"]}),await J.invalidateQueries({queryKey:["tags-catalog-v2"]}),await J.invalidateQueries({queryKey:["supabase-tags-analyses"]}),T(!1),W(null)}else throw new Error("Some deletions failed")}else console.warn(`No categories found for "${R.name}", using provided category: ${R.category}`),se.mutate({tagName:R.name,category:R.category})}else console.warn(`Failed to find categories for "${R.name}", using provided category: ${R.category}`),se.mutate({tagName:R.name,category:R.category})}catch(F){console.error(`Error finding categories for "${R.name}":`,F),se.mutate({tagName:R.name,category:R.category})}},isLoading:se.isPending})]})]})})})}var a2="AlertDialog",[R8]=Nn(a2,[q_]),Zs=q_(),i2=e=>{const{__scopeAlertDialog:t,...n}=e,r=Zs(t);return o.jsx(hx,{...r,...n,modal:!0})};i2.displayName=a2;var P8="AlertDialogTrigger",A8=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Zs(n);return o.jsx(iE,{...s,...r,ref:t})});A8.displayName=P8;var O8="AlertDialogPortal",l2=e=>{const{__scopeAlertDialog:t,...n}=e,r=Zs(t);return o.jsx(fx,{...r,...n})};l2.displayName=O8;var I8="AlertDialogOverlay",c2=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Zs(n);return o.jsx(Du,{...s,...r,ref:t})});c2.displayName=I8;var Li="AlertDialogContent",[M8,D8]=R8(Li),$8=M1("AlertDialogContent"),u2=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...s}=e,a=Zs(n),i=d.useRef(null),l=Ge(t,i),c=d.useRef(null);return o.jsx(i5,{contentName:Li,titleName:d2,docsSlug:"alert-dialog",children:o.jsx(M8,{scope:n,cancelRef:c,children:o.jsxs($u,{role:"alertdialog",...a,...s,ref:l,onOpenAutoFocus:Z(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[o.jsx($8,{children:r}),o.jsx(F8,{contentRef:i})]})})})});u2.displayName=Li;var d2="AlertDialogTitle",h2=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Zs(n);return o.jsx(Lu,{...s,...r,ref:t})});h2.displayName=d2;var f2="AlertDialogDescription",m2=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Zs(n);return o.jsx(Fu,{...s,...r,ref:t})});m2.displayName=f2;var L8="AlertDialogAction",p2=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Zs(n);return o.jsx(Bf,{...s,...r,ref:t})});p2.displayName=L8;var g2="AlertDialogCancel",v2=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:s}=D8(g2,n),a=Zs(n),i=Ge(t,s);return o.jsx(Bf,{...a,...r,ref:i})});v2.displayName=g2;var F8=({contentRef:e})=>{const t=`\`${Li}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Li}\` by passing a \`${f2}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Li}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return d.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},z8=i2,U8=l2,y2=c2,x2=u2,w2=p2,b2=v2,j2=h2,S2=m2;const Wx=z8,B8=U8,N2=d.forwardRef(({className:e,...t},n)=>o.jsx(y2,{className:ee("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));N2.displayName=y2.displayName;const am=d.forwardRef(({className:e,...t},n)=>o.jsxs(B8,{children:[o.jsx(N2,{}),o.jsx(x2,{ref:n,className:ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));am.displayName=x2.displayName;const im=({className:e,...t})=>o.jsx("div",{className:ee("flex flex-col space-y-2 text-center sm:text-left",e),...t});im.displayName="AlertDialogHeader";const lm=({className:e,...t})=>o.jsx("div",{className:ee("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});lm.displayName="AlertDialogFooter";const cm=d.forwardRef(({className:e,...t},n)=>o.jsx(j2,{ref:n,className:ee("text-lg font-semibold",e),...t}));cm.displayName=j2.displayName;const um=d.forwardRef(({className:e,...t},n)=>o.jsx(S2,{ref:n,className:ee("text-sm text-muted-foreground",e),...t}));um.displayName=S2.displayName;const dm=d.forwardRef(({className:e,...t},n)=>o.jsx(w2,{ref:n,className:ee(ax(),e),...t}));dm.displayName=w2.displayName;const hm=d.forwardRef(({className:e,...t},n)=>o.jsx(b2,{ref:n,className:ee(ax({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));hm.displayName=b2.displayName;const lu=d.forwardRef(({className:e,...t},n)=>o.jsx("textarea",{className:ee("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));lu.displayName="Textarea";function K8({date:e,isFlagged:t,flagReason:n,type:r,entryId:s,className:a}){const[i,l]=d.useState(!1),[c,u]=d.useState(n||""),[h,f]=d.useState(!1),{toast:m}=wr(),p=Pe.useRef(!1),x=async(w,v)=>{if(h||p.current){console.log("Flag operation already in progress, skipping");return}p.current=!0,f(!0),console.log(`Flag operation starting for ${e}: ${w?"flagging":"unflagging"}`);try{const b=r==="analysis"?`/api/analysis/flag/${e}`:`/api/manual-entries/flag/${s}`;if(!(await fetch(b,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isFlagged:w,flagReason:w?v:null})})).ok)throw new Error("Failed to update flag");await J.invalidateQueries({queryKey:["/api/analysis"]}),await J.invalidateQueries({queryKey:["/api/manual-entries"]}),await J.invalidateQueries({queryKey:[`/api/analysis/date/${e}`]});const S=new Date(e).getFullYear();await J.invalidateQueries({queryKey:[`/api/analysis/year/${S}`]}),await J.invalidateQueries({queryKey:[`/api/analysis/filter?startDate=${S}-01-01&endDate=${S}-12-31`]});const N=(new Date(e).getMonth()+1).toString().padStart(2,"0");await J.invalidateQueries({queryKey:[`/api/analysis/month/${S}/${N}`]}),m({description:w?"Day flagged for attention":"Flag removed"}),l(!1)}catch{m({variant:"destructive",description:"Failed to update flag"})}finally{f(!1),p.current=!1}},g=()=>{x(!0,c)},y=()=>{x(!1)};return o.jsxs(en,{open:i,onOpenChange:l,children:[o.jsx(mx,{asChild:!0,children:o.jsx(V,{variant:"ghost",size:"sm",className:`p-1 h-6 w-6 hover:bg-slate-100 transition-colors ${a||""}`,disabled:h,onClick:w=>w.stopPropagation(),title:t?`Flagged: ${n}`:"Flag for attention",children:t?o.jsx(mD,{className:"h-4 w-4 text-red-500 fill-red-500"}):o.jsx(fD,{className:"h-4 w-4 text-gray-400 hover:text-red-500"})})}),o.jsxs(qt,{className:"sm:max-w-[425px]","aria-describedby":"flag-description",children:[o.jsx(Ht,{children:o.jsx(Wt,{children:t?"Update Flag":"Flag for Attention"})}),o.jsx("div",{id:"flag-description",className:"sr-only",children:"Dialog to flag or unflag a day for attention with optional notes"}),o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"grid gap-2",children:[o.jsxs(ts,{htmlFor:"reason",children:["What needs attention about ",e,"?"]}),o.jsx(lu,{id:"reason",placeholder:"e.g., Low quality analysis, missing key events, factual errors...",value:c,onChange:w=>u(w.target.value),onKeyDown:w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),w.stopPropagation())},disabled:h,rows:3})]}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[t&&o.jsx(V,{variant:"outline",onClick:y,disabled:h,children:"Remove Flag"}),o.jsx(V,{onClick:g,disabled:h||!c.trim()&&!t,children:t?"Update Flag":"Flag Day"})]})]})]})]})}const Cp="bitcoin-news-ai-provider";function C2(){const[e,t]=d.useState(()=>{if(typeof window<"u"){const r=localStorage.getItem(Cp);if(r&&["openai"].includes(r))return r}return"openai"}),n=r=>{t(r),typeof window<"u"&&localStorage.setItem(Cp,r)};return d.useEffect(()=>{if(typeof window<"u"){const r=localStorage.getItem(Cp);r&&["openai"].includes(r)&&r!==e&&t(r)}},[e]),{aiProvider:e,setAiProvider:n}}function V8(){const{year:e,month:t}=_f(),{toast:n}=wr(),[r,s]=d.useState(new Set),{aiProvider:a}=C2(),{startAnalysis:i,updateProgress:l,completeAnalysis:c,getAnalysisById:u}=d_();if(!e||!t)return o.jsxs("div",{className:"p-6 text-center",children:[o.jsx("h1",{className:"text-xl font-semibold text-red-600",children:"Invalid Route"}),o.jsx("p",{className:"text-slate-600",children:"Year and month parameters are required."}),o.jsx(kn,{href:"/",children:o.jsx(V,{className:"mt-4",children:"Return Home"})})]});const h=parseInt(e),f=parseInt(t);if(isNaN(h)||isNaN(f)||f<1||f>12)return o.jsxs("div",{className:"p-6 text-center",children:[o.jsx("h1",{className:"text-xl font-semibold text-red-600",children:"Invalid Date"}),o.jsx("p",{className:"text-slate-600",children:"Please provide valid year and month values."}),o.jsx(kn,{href:"/",children:o.jsx(V,{className:"mt-4",children:"Return Home"})})]});const m=`month-${e}-${t}`,p=u(m),[x,g]=d.useState(new Set),[y,w]=d.useState(0),[v,b]=d.useState(new Map),[j,S]=d.useState(!1),[C,N]=d.useState(new Set),[_,E]=d.useState(null),[M,T]=d.useState(!1),[R,W]=d.useState(null),[Q,he]=d.useState(new Set),[Y,O]=d.useState(!1),{data:A,isLoading:U}=tt({queryKey:[`supabase-month-view-${e}-${t}`],queryFn:async()=>{if(!Le)throw new Error("Supabase not configured");const z=new Date(h,f,0).getDate(),G=`${e}-${t.toString().padStart(2,"0")}-01`,X=`${e}-${t.toString().padStart(2,"0")}-${z.toString().padStart(2,"0")}`,{data:oe,error:L}=await Le.from("historical_news_analyses").select("date, summary, is_manual_override, confidence_score, is_flagged, flag_reason, tiered_articles, analyzed_articles").gte("date",G).lte("date",X).order("date",{ascending:!0});if(L)throw L;const H=(oe==null?void 0:oe.length)||0,se=z>0?Math.round(H/z*100):0,re=[{month:f,analyzedDays:H,totalDays:z,percentage:se}];return{progress:{totalDays:z,analyzedDays:H,percentage:se},analyses:(oe==null?void 0:oe.map(Se=>({date:Se.date,summary:Se.summary,hasManualEntry:Se.is_manual_override,confidenceScore:parseFloat(Se.confidence_score||"0"),isFlagged:Se.is_flagged,flagReason:Se.flag_reason,tieredArticles:Se.tiered_articles,analyzedArticles:Se.analyzed_articles,isManualOverride:Se.is_manual_override})))||[],monthlyBreakdown:re}}});at({mutationFn:async z=>{const G=await fetch("/api/analysis/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:z,aiProvider:a,newsProvider:localStorage.getItem("newsProvider")||"exa"})});if(!G.ok)throw new Error(`Failed to analyze: ${G.statusText}`);return G.json()},onSuccess:z=>{const G=z.analysisDate||"Unknown date",X=new Date(G).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});n({title:"Analysis completed",description:`Bitcoin news analysis for ${X} has been generated successfully.`}),J.invalidateQueries({queryKey:[`supabase-month-view-${e}-${t}`]}),J.invalidateQueries({queryKey:[`supabase-year-${e}`]}),J.invalidateQueries({queryKey:["supabase-stats"]})},onError:z=>{n({title:"Analysis failed",description:z.message||"Failed to analyze Bitcoin news for this date.",variant:"destructive"})}});const D=(z,G)=>{const X=new Set(r);G?X.add(z):X.delete(z),s(X)},B=()=>{r.size===Ue(parseInt(e),parseInt(t)).length?s(new Set):s(new Set(Ue(parseInt(e),parseInt(t))))},ue=at({mutationFn:async z=>{const G=z.map(X=>fetch(`/api/analysis/date/${X}`,{method:"DELETE"}));await Promise.all(G)},onSuccess:()=>{n({title:"Success",description:"Selected analyses deleted successfully."}),s(new Set),J.invalidateQueries({queryKey:[`supabase-month-view-${e}-${t}`]}),J.invalidateQueries({queryKey:[`supabase-year-${e}`]}),J.invalidateQueries({queryKey:["supabase-stats"]})},onError:()=>{n({title:"Error",description:"Failed to delete some analyses.",variant:"destructive"})}}),_e=at({mutationFn:async z=>{const G=z.map(X=>fetch("/api/analysis/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:X,forceReanalysis:!0})}));await Promise.all(G)},onSuccess:()=>{n({title:"Success",description:"Selected analyses recreated successfully."}),s(new Set),J.invalidateQueries({queryKey:[`supabase-month-view-${e}-${t}`]}),J.invalidateQueries({queryKey:[`supabase-year-${e}`]}),J.invalidateQueries({queryKey:["supabase-stats"]})},onError:()=>{n({title:"Error",description:"Failed to recreate some analyses.",variant:"destructive"})}}),ye=()=>{const z=parseInt(t),G=parseInt(e);return z===1?{year:G-1,month:12}:{year:G,month:z-1}},Be=()=>{const z=parseInt(t),G=parseInt(e);return z===12?{year:G+1,month:1}:{year:G,month:z+1}},Ie=async(z,G,X)=>{var oe,L,H,se,re,Se;try{const Qe=await fetch("/api/analysis/batch-analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dates:z,concurrency:2,aiProvider:a,newsProvider:localStorage.getItem("newsProvider")||"exa"}),signal:G.signal});if(!Qe.ok)throw new Error(`Batch analysis failed: ${Qe.statusText}`);const Ee=(oe=Qe.body)==null?void 0:oe.getReader();if(!Ee)throw new Error("Response body is not readable");const Nt=new TextDecoder;let F=0;const te=new Set;let ke="";for(;;){if(G.signal.aborted){Ee.cancel();break}const{done:Te,value:$}=await Ee.read();if(Te)break;const ae=Nt.decode($,{stream:!0});ke+=ae;const fe=ke.split(`
`);ke=fe.pop()||"";for(const be of fe)try{if(!be||be.trim().length===0)continue;console.log(" Parsing JSON line:",be.substring(0,100)+(be.length>100?"...":""));const ve=JSON.parse(be);if(!ve||typeof ve!="object")continue;if(ve.completed===!0)return console.log(" Batch analysis complete:",ve.summary),g(new Set),((L=ve.results)==null?void 0:L.length)||F;typeof ve.completed=="number"&&ve.completed>=0&&(F=ve.completed,console.log(` Progress update: ${F} completed`),ve.analyzingDates&&Array.isArray(ve.analyzingDates)?(console.log(` Currently analyzing: ${ve.analyzingDates.join(", ")}`),g(new Set(ve.analyzingDates))):(H=ve.lastResult)!=null&&H.date&&(te.delete(ve.lastResult.date),console.log(` Completed: ${ve.lastResult.date}`),g(new Set(te))),console.log(` Calling onProgress(${F}, ${(se=ve.lastResult)==null?void 0:se.date})`),X(F,(re=ve.lastResult)==null?void 0:re.date),F>0&&F%3===0&&(J.invalidateQueries({queryKey:[`supabase-month-view-${e}-${t}`]}),J.invalidateQueries({queryKey:[`supabase-year-${e}`]}),J.invalidateQueries({queryKey:["supabase-stats"]})))}catch(ve){console.error(" JSON parse error:",ve),console.error(" Failed line:",be)}}if(ke.trim())try{const Te=JSON.parse(ke.trim());Te&&typeof Te=="object"&&typeof Te.completed=="number"&&X(Te.completed,(Se=Te.lastResult)==null?void 0:Se.date)}catch(Te){console.warn("Failed to parse final buffer:",Te)}return F}catch(Qe){if(Qe.name==="AbortError")throw Qe;return console.warn("Streaming batch failed, falling back to traditional method:",Qe),pe(z,G,X)}},pe=async(z,G,X)=>{let H=0;for(let se=0;se<z.length&&!G.signal.aborted;se+=2){const re=z.slice(se,se+2);g(Qe=>new Set([...Qe,...re]));const Se=re.map(async Qe=>{try{if(!(await fetch("/api/analysis/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:Qe,aiProvider:a,newsProvider:localStorage.getItem("newsProvider")||"exa"}),signal:G.signal})).ok)throw new Error(`Failed to analyze ${Qe}`);return{date:Qe,success:!0}}catch(Ee){if(Ee.name==="AbortError")throw Ee;return console.error(`Failed to analyze ${Qe}:`,Ee),{date:Qe,success:!1,error:Ee}}finally{g(Ee=>{const Nt=new Set(Ee);return Nt.delete(Qe),Nt})}});try{const Qe=await Promise.allSettled(Se);H+=Qe.length,X(H),se+2<z.length&&await new Promise(Ee=>setTimeout(Ee,100))}catch(Qe){if(Qe.name==="AbortError")break}}return H},ge=async()=>{const z=r.size>0?Array.from(r):Ue(parseInt(e),parseInt(t)).filter(oe=>!Ye(oe));if(z.length===0){const oe=r.size>0?"No selected dates need analysis.":"All days in this month are already analyzed.";n({title:"No work needed",description:oe});return}const G=new AbortController,X=r.size>0?"selected dates":`${Lt[parseInt(t)-1]} ${e}`;i({id:m,type:"month",label:`Analyze ${X}`,completed:0,total:z.length,year:parseInt(e),month:parseInt(t),abortController:G}),g(new Set);try{const oe=await Ie(z,G,(L,H)=>{l(m,L,H),w(se=>se+1)});if(!G.signal.aborted){const L=r.size>0?"selected dates":"days";n({title:" Fast batch analysis complete",description:`Successfully analyzed ${oe} ${L} using streaming concurrency (3x faster).`}),r.size>0&&s(new Set)}}catch(oe){oe.name!=="AbortError"&&n({title:"Error",description:"Bulk analysis failed.",variant:"destructive"})}finally{c(m),g(new Set),J.invalidateQueries({queryKey:[`supabase-month-view-${e}-${t}`]}),J.invalidateQueries({queryKey:[`supabase-year-${e}`]}),J.invalidateQueries({queryKey:["supabase-stats"]})}},Ke=()=>{g(new Set)},le=async()=>{try{(await(await Rr("POST",`/api/conflicts/analyze-month/${e}/${t}`)).json()).success&&n({title:"Cleanup started",description:`Analyzing ${e}-${t} for duplicate events...`})}catch{n({variant:"destructive",title:"Error",description:"Failed to start cleanup analysis"})}},Re=async(z,G)=>{if(console.log(` [Individual Day] Clicked ${z}, isAnalyzed: ${G}`),G)console.log(` [Individual Day] Navigating to analyzed day: ${z}`),window.location.href=`/day/${z}?from=month`;else{console.log(` [Individual Day] Starting analysis for ${z}`),g(X=>{const oe=new Set([...X,z]);return console.log(" [Individual Day] Updated analyzing dates:",Array.from(oe)),oe});try{if((await fetch(`/api/analysis/date/${z}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({forceReanalysis:!1,aiProvider:"openai",newsProvider:localStorage.getItem("newsProvider")||"exa"})})).ok)await J.invalidateQueries({queryKey:[`/api/analysis/year/${e}`]}),await J.refetchQueries({queryKey:[`/api/analysis/year/${e}`]}),n({title:"Success",description:`Analysis completed for ${De(z)}`});else throw new Error("Analysis failed")}catch(X){console.error("Individual day analysis error:",X),n({title:"Error",description:`Failed to analyze ${De(z)}`,variant:"destructive"})}finally{console.log(` [Individual Day] Completed analysis for ${z}`),g(X=>{const oe=new Set(X);return oe.delete(z),console.log(` [Individual Day] Removed ${z} from analyzing dates:`,Array.from(oe)),oe})}}},Me=z=>z<=2010?{icon:SD,text:"Early Era",color:"text-green-500"}:z<=2013?{icon:nv,text:"First Bubble",color:"text-blue-500"}:z<=2015?{icon:bs,text:"Mt. Gox Crisis",color:"text-red-500"}:z<=2017?{icon:Qc,text:"Altcoin Era",color:"text-yellow-500"}:z<=2020?{icon:jD,text:"Crypto Winter",color:"text-cyan-500"}:z<=2022?{icon:uC,text:"Institutional",color:"text-indigo-500"}:z<=2023?{icon:bD,text:"DeFi/NFT",color:"text-purple-500"}:{icon:Pr,text:"ETF Era",color:"text-amber-500"},Ue=(z,G)=>{const X=[],oe=new Date(z,G,0).getDate();for(let L=1;L<=oe;L++){const H=`${z}-${String(G).padStart(2,"0")}-${String(L).padStart(2,"0")}`;X.push(H)}return X},De=z=>new Date(z).getDate().toString(),Ye=z=>!(A!=null&&A.analyses)||!Array.isArray(A.analyses)?null:A.analyses.find(G=>(G==null?void 0:G.date)===z)||null,st=async()=>{if(!(A!=null&&A.analyses)||A.analyses.length===0){n({title:"No data to check",description:"No analyses available for quality checking.",variant:"destructive"});return}const z=`${e}-${String(f).padStart(2,"0")}`,G=A.analyses.filter(X=>X.date.startsWith(z));if(G.length===0){n({title:"No data for this month",description:`No analyses available for ${e}-${String(f).padStart(2,"0")}.`,variant:"destructive"});return}S(!0),b(new Map),N(new Set),E(null);try{console.log(` Quality check: Filtering to ${G.length} analyses for ${z}`);const X=await fetch("/api/analysis/check-quality",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({analyses:G.map(re=>({analysisDate:re.date,summary:re.summary,tieredArticles:re.tieredArticles,analyzedArticles:re.analyzedArticles}))})});if(!X.ok)throw new Error(`Quality check failed: ${X.statusText}`);const oe=await X.json(),L=new Map;for(const[re,Se]of Object.entries(oe.qualityIssues))L.set(re,Se);b(L),N(new Set(oe.affectedDates)),E(oe);const H=oe.totalIssues,se=oe.affectedDates.length;n({title:"Quality check complete",description:`Found ${H} issues across ${se} dates.`,variant:H>0?"destructive":"default"})}catch(X){console.error("Quality check error:",X),n({title:"Quality check failed",description:X.message||"Failed to check summary quality.",variant:"destructive"})}finally{S(!1)}},xt=z=>v.get(z)||[],it=async()=>{if(!(A!=null&&A.analyses)||A.analyses.length===0){n({title:"No data to verify",description:"No analyses available for Google verification.",variant:"destructive"});return}const z=parseInt(e);if(z>=2009&&z<=2012){O(!0);return}await Yt()},Yt=async()=>{if(!(A!=null&&A.analyses)||A.analyses.length===0){n({title:"No data to verify",description:"No analyses available for Google verification.",variant:"destructive"});return}T(!0);const z=r.size>0,G=`${e}-${t==null?void 0:t.padStart(2,"0")}`;try{let X=A.analyses;z?(X=A.analyses.filter(H=>r.has(H.date)),console.log(` Google Check: Using selected dates (${X.length} selected)`)):(X=A.analyses.filter(H=>H.date.startsWith(G)),console.log(` Google Check: Filtering to ${X.length} analyses for ${G}`));const oe=await fetch("/api/analysis/google-check-month",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({analyses:X.map(H=>({analysisDate:H.date,summary:H.summary}))})});if(!oe.ok)throw new Error("Failed to verify summaries with Google");const L=await oe.json();console.log(` Google Check completed: ${L.validDays} valid, ${L.incorrectDays} incorrect, ${L.cannotVerifyDays} cannot verify`),W(L),he(new Set(L.affectedDates)),n({title:"Google verification completed",description:`${L.validDays} valid, ${L.incorrectDays} incorrect, ${L.cannotVerifyDays} cannot verify`})}catch(X){console.error("Google verification error:",X),n({title:"Google verification failed",description:X.message||"Failed to verify summaries with Google.",variant:"destructive"})}finally{T(!1)}},wt=z=>{var G,X;return(X=(G=R==null?void 0:R.results)==null?void 0:G[z])==null?void 0:X.assessment};if(U)return o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-8 bg-slate-200 rounded w-64 mb-4"}),o.jsx("div",{className:"h-4 bg-slate-200 rounded w-96"})]})});if(!A)return o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-slate-500",children:"No data available for this year."})});const Lt=["January","February","March","April","May","June","July","August","September","October","November","December"],qe=A.monthlyBreakdown[parseInt(t)-1],Ft=Lt[parseInt(t)-1];return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(kn,{href:"/",children:o.jsxs(V,{variant:"outline",size:"sm",children:[o.jsx(ci,{className:"w-4 h-4 mr-2"}),"Back to Timeline"]})}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(kn,{href:`/month/${ye().year}/${ye().month}`,children:o.jsx(V,{variant:"outline",size:"sm",children:o.jsx(Zg,{className:"w-4 h-4"})})}),o.jsx(kn,{href:`/month/${Be().year}/${Be().month}`,children:o.jsx(V,{variant:"outline",size:"sm",children:o.jsx(ul,{className:"w-4 h-4"})})})]}),o.jsx("div",{children:o.jsxs("h1",{className:"text-2xl font-bold text-slate-900",children:[Ft," ",e]})})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[p?o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(nt,{className:"w-4 h-4 animate-spin text-blue-600"}),o.jsxs("div",{className:"text-sm",children:[o.jsxs("span",{className:"font-medium text-slate-900",children:[(p==null?void 0:p.completed)||0,"/",(p==null?void 0:p.total)||0]}),x.size>0&&o.jsxs("span",{className:"text-slate-600 ml-2",children:["Analyzing ",x.size," date",x.size!==1?"s":""]})]})]}),o.jsxs(V,{variant:"outline",size:"sm",onClick:Ke,children:[o.jsx(ND,{className:"w-4 h-4 mr-2"}),"Stop"]})]}):o.jsxs(o.Fragment,{children:[o.jsxs(V,{variant:"default",size:"sm",onClick:ge,disabled:!A||(qe==null?void 0:qe.totalDays)===(qe==null?void 0:qe.analyzedDays),"data-testid":"button-analyze-month",children:[o.jsx(wD,{className:"w-4 h-4 mr-2"}),r.size>0?"Analyze Selected":"Analyze Month"]}),o.jsxs(V,{variant:"outline",size:"sm",onClick:le,disabled:!A||(qe==null?void 0:qe.analyzedDays)===0,"data-testid":"button-time-to-clean",children:[o.jsx(lr,{className:"w-4 h-4 mr-2"}),"Time to Clean"]})]}),A&&A.analyses&&A.analyses.length>0&&o.jsx(V,{variant:"outline",size:"sm",onClick:st,disabled:j,children:j?o.jsxs(o.Fragment,{children:[o.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}),"Checking Quality..."]}):o.jsxs(o.Fragment,{children:[o.jsx(bs,{className:"w-4 h-4 mr-2"}),"Check Quality"]})}),A&&A.analyses&&A.analyses.length>0&&o.jsx(V,{variant:"outline",size:"sm",onClick:it,disabled:M,children:M?o.jsxs(o.Fragment,{children:[o.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}),"Google Checking..."]}):o.jsxs(o.Fragment,{children:[o.jsx(ea,{className:"w-4 h-4 mr-2"}),"Google Check"]})}),r.size>0&&o.jsxs(o.Fragment,{children:[o.jsxs(V,{variant:"destructive",size:"sm",onClick:()=>ue.mutate(Array.from(r)),disabled:ue.isPending,children:[o.jsx(ku,{className:"w-4 h-4 mr-2"}),"Delete Selected (",r.size,")"]}),o.jsxs(V,{variant:"outline",size:"sm",onClick:()=>_e.mutate(Array.from(r)),disabled:_e.isPending,children:[o.jsx(pn,{className:"w-4 h-4 mr-2"}),"Recreate Selected (",r.size,")"]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsx(jt,{children:o.jsx(on,{className:"p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Total Days"}),o.jsx("p",{className:"text-2xl font-bold text-slate-900",children:(qe==null?void 0:qe.totalDays)||0})]}),o.jsx(Do,{className:"w-8 h-8 text-blue-600"})]})})}),o.jsx(jt,{children:o.jsx(on,{className:"p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Analyzed"}),o.jsx("p",{className:"text-2xl font-bold text-slate-900",children:(qe==null?void 0:qe.analyzedDays)||0})]}),o.jsx(Xn,{className:"w-8 h-8 text-emerald-600"})]})})}),o.jsx(jt,{children:o.jsx(on,{className:"p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Progress"}),o.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[(qe==null?void 0:qe.percentage)||0,"%"]})]}),o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx("span",{className:"text-blue-600 text-sm font-bold",children:"%"})})]})})})]}),(()=>{const z=Me(parseInt(e)),G=z.icon;return o.jsx(jt,{className:"bg-gradient-to-r from-slate-50 to-slate-100 border-slate-200",children:o.jsx(on,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(G,{className:`w-6 h-6 ${z.color}`}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-slate-900",children:z.text}),o.jsxs("p",{className:"text-sm text-slate-600",children:["Bitcoin Historical Period for ",e]})]})]})})})})(),o.jsxs(jt,{children:[o.jsx(Us,{children:o.jsx(Bs,{children:"Monthly Analysis"})}),o.jsx(on,{children:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center p-3 border-b border-slate-200 bg-slate-50 rounded-t-lg",children:[o.jsx(es,{checked:r.size===Ue(parseInt(e),parseInt(t)).length,onCheckedChange:B,className:"mr-3"}),o.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Select All (",r.size," selected)"]})]}),Ue(parseInt(e),parseInt(t)).map(z=>{var se;const G=Ye(z),X=!!G,oe=x.has(z),L=C.has(z),H=wt(z);return o.jsxs("div",{className:`flex items-center p-3 border rounded-lg transition-colors ${oe?"border-amber-300 bg-amber-50":L?"border-red-300 bg-red-50":"border-slate-200 hover:bg-slate-50"}`,children:[o.jsx(es,{checked:r.has(z),onCheckedChange:re=>D(z,re),className:"mr-3",onClick:re=>re.stopPropagation(),disabled:oe}),o.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[o.jsxs("div",{className:`flex items-center space-x-4 flex-1 cursor-pointer ${oe?"pointer-events-none":""}`,onClick:()=>Re(z,X),children:[o.jsx("div",{className:"w-16 text-sm font-medium text-slate-900",children:De(z)}),o.jsx("div",{className:"flex-1",children:oe?o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(nt,{className:"w-4 h-4 animate-spin text-amber-600"}),o.jsx("p",{className:"text-sm text-amber-700 font-medium",children:"Analyzing Bitcoin news..."}),o.jsxs("div",{className:"flex space-x-1",children:[o.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-pulse"}),o.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),o.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})]}):X?o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm text-slate-900 font-medium leading-relaxed break-words",children:(G==null?void 0:G.summary)||"No summary available"}),o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-2 flex-wrap",children:[(G==null?void 0:G.isManualOverride)&&o.jsxs(me,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800",children:[o.jsx(rv,{className:"w-3 h-3 mr-1"}),"Manual Import"]}),o.jsxs(me,{variant:"secondary",className:"text-xs",children:[Math.round(parseFloat(((se=G==null?void 0:G.confidenceScore)==null?void 0:se.toString())||"0")),"% confidence"]}),(G==null?void 0:G.summary)&&o.jsxs(o.Fragment,{children:[G.summary.length<100&&o.jsxs(me,{variant:"destructive",className:"text-xs",children:["Too Short (",G.summary.length,")"]}),G.summary.length>110&&o.jsxs(me,{variant:"destructive",className:"text-xs",children:["Too Long (",G.summary.length,")"]}),/\.{2,}/.test(G.summary)&&o.jsx(me,{variant:"secondary",className:"text-xs bg-orange-100 text-orange-800",children:"Dots"})]}),(G==null?void 0:G.hasManualEntry)&&o.jsxs(me,{variant:"outline",className:"text-xs",children:[o.jsx(rv,{className:"w-3 h-3 mr-1"}),"Manual"]}),H==="Valid"&&o.jsxs(me,{variant:"default",className:"text-xs bg-green-100 text-green-800",children:[o.jsx(ea,{className:"w-3 h-3 mr-1"}),"Google "]}),H==="Incorrect"&&o.jsxs(me,{variant:"destructive",className:"text-xs",children:[o.jsx(ea,{className:"w-3 h-3 mr-1"}),"Google "]}),H==="Cannot Verify"&&o.jsxs(me,{variant:"secondary",className:"text-xs bg-yellow-100 text-yellow-800",children:[o.jsx(ea,{className:"w-3 h-3 mr-1"}),"Google ?"]})]})})]}):o.jsx("p",{className:"text-sm text-slate-500 italic",children:"No analysis available"})})]}),X&&o.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[o.jsx(K8,{date:z,isFlagged:(G==null?void 0:G.isFlagged)||!1,flagReason:G==null?void 0:G.flagReason,type:"analysis"}),o.jsx(kn,{href:`/day/${z}?from=month`,children:o.jsx(V,{variant:"ghost",size:"sm",className:"p-1 h-6 w-6 hover:bg-orange-100 hover:text-orange-600",title:"View day details",children:o.jsx(Rf,{className:"w-3 h-3"})})})]})]})]},z)})]})})]}),_&&_.totalIssues>0&&o.jsxs(jt,{className:"border-red-200 bg-red-50",children:[o.jsx(Us,{children:o.jsxs(Bs,{className:"text-red-800 flex items-center",children:[o.jsx(bs,{className:"w-5 h-5 mr-2"}),"Quality Issues Found (",_.totalIssues,")"]})}),o.jsx(on,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-7 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:_.summary.tooShort}),o.jsx("div",{className:"text-sm text-red-600",children:"Too Short"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:_.summary.tooLong}),o.jsx("div",{className:"text-sm text-red-600",children:"Too Long"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:_.summary.excessiveDots}),o.jsx("div",{className:"text-sm text-red-600",children:"Excessive Dots"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:_.summary.genericFallback}),o.jsx("div",{className:"text-sm text-red-600",children:"Generic Fallback"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-orange-600",children:_.summary.duplicateSummaries||0}),o.jsx("div",{className:"text-sm text-orange-600",children:"Duplicates"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:_.summary.similarSummaries||0}),o.jsx("div",{className:"text-sm text-yellow-600",children:"Similar"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:_.summary.invalidLinks||0}),o.jsx("div",{className:"text-sm text-red-600",children:"Invalid Links"})]})]}),o.jsxs("div",{className:"space-y-4",children:[_.summary.tooShort>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-red-800",children:[" Too Short (",_.summary.tooShort," dates):"]}),o.jsx("div",{className:"space-y-2",children:Array.from(C).map(z=>{var L;const G=xt(z),X=Ye(z),oe=G.filter(H=>H.type==="TOO_SHORT");return oe.length===0?null:o.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("span",{className:"font-medium text-slate-900",children:["Feb ",De(z)]}),o.jsx("span",{className:"text-xs text-red-600",children:(L=oe[0])==null?void 0:L.message})]}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:['"',(X==null?void 0:X.summary)||"No summary",'"']})]},`short-${z}`)}).filter(Boolean)})]}),_.summary.tooLong>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-red-800",children:[" Too Long (",_.summary.tooLong," dates):"]}),o.jsx("div",{className:"space-y-2",children:Array.from(C).map(z=>{var L;const G=xt(z),X=Ye(z),oe=G.filter(H=>H.type==="TOO_LONG");return oe.length===0?null:o.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("span",{className:"font-medium text-slate-900",children:["Feb ",De(z)]}),o.jsx("span",{className:"text-xs text-red-600",children:(L=oe[0])==null?void 0:L.message})]}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:['"',(X==null?void 0:X.summary)||"No summary",'"']})]},`long-${z}`)}).filter(Boolean)})]}),_.summary.excessiveDots>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-orange-800",children:[" Excessive Dots (",_.summary.excessiveDots," dates):"]}),o.jsx("div",{className:"space-y-2",children:Array.from(C).map(z=>{var L;const G=xt(z),X=Ye(z),oe=G.filter(H=>H.type==="EXCESSIVE_DOTS");return oe.length===0?null:o.jsxs("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("span",{className:"font-medium text-slate-900",children:["Feb ",De(z)]}),o.jsx("span",{className:"text-xs text-orange-600",children:(L=oe[0])==null?void 0:L.message})]}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:['"',(X==null?void 0:X.summary)||"No summary",'"']})]},`dots-${z}`)}).filter(Boolean)})]}),_.summary.genericFallback>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-orange-800",children:[" Generic Fallback (",_.summary.genericFallback," dates):"]}),o.jsx("div",{className:"space-y-2",children:Array.from(C).map(z=>{var L;const G=xt(z),X=Ye(z),oe=G.filter(H=>H.type==="GENERIC_FALLBACK");return oe.length===0?null:o.jsxs("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("span",{className:"font-medium text-slate-900",children:["Feb ",De(z)]}),o.jsx("span",{className:"text-xs text-orange-600",children:(L=oe[0])==null?void 0:L.message})]}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:['"',(X==null?void 0:X.summary)||"No summary",'"']})]},`generic-${z}`)}).filter(Boolean)})]}),_.summary.repeatedWords>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-yellow-800",children:[" Repeated Words (",_.summary.repeatedWords," dates):"]}),o.jsx("div",{className:"space-y-2",children:Array.from(C).map(z=>{var L;const G=xt(z),X=Ye(z),oe=G.filter(H=>H.type==="REPEATED_WORDS");return oe.length===0?null:o.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("span",{className:"font-medium text-slate-900",children:["Feb ",De(z)]}),o.jsx("span",{className:"text-xs text-yellow-600",children:(L=oe[0])==null?void 0:L.message})]}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:['"',(X==null?void 0:X.summary)||"No summary",'"']})]},`repeated-${z}`)}).filter(Boolean)})]}),_.summary.placeholderText>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-red-800",children:[" Placeholder Text (",_.summary.placeholderText," dates):"]}),o.jsx("div",{className:"space-y-2",children:Array.from(C).map(z=>{var L;const G=xt(z),X=Ye(z),oe=G.filter(H=>H.type==="PLACEHOLDER_TEXT");return oe.length===0?null:o.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("span",{className:"font-medium text-slate-900",children:["Feb ",De(z)]}),o.jsx("span",{className:"text-xs text-red-600",children:(L=oe[0])==null?void 0:L.message})]}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:['"',(X==null?void 0:X.summary)||"No summary",'"']})]},`placeholder-${z}`)}).filter(Boolean)})]}),_.summary.duplicateSummaries>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-orange-800",children:[" Duplicate Summaries (",_.summary.duplicateSummaries," dates):"]}),o.jsx("div",{className:"space-y-2",children:Array.from(C).map(z=>{var L;const G=xt(z),X=Ye(z),oe=G.filter(H=>H.type==="DUPLICATE_SUMMARY");return oe.length===0?null:o.jsxs("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("span",{className:"font-medium text-slate-900",children:["Feb ",De(z)]}),o.jsx("span",{className:"text-xs text-orange-600",children:(L=oe[0])==null?void 0:L.message})]}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:['"',(X==null?void 0:X.summary)||"No summary",'"']})]},`duplicate-${z}`)}).filter(Boolean)})]}),_.summary.similarSummaries>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-yellow-800",children:[" Similar Summaries (",_.summary.similarSummaries," dates):"]}),o.jsx("div",{className:"space-y-2",children:Array.from(C).map(z=>{var L;const G=xt(z),X=Ye(z),oe=G.filter(H=>H.type==="SIMILAR_SUMMARY");return oe.length===0?null:o.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("span",{className:"font-medium text-slate-900",children:["Feb ",De(z)]}),o.jsx("span",{className:"text-xs text-yellow-600",children:(L=oe[0])==null?void 0:L.message})]}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:['"',(X==null?void 0:X.summary)||"No summary",'"']})]},`similar-${z}`)}).filter(Boolean)})]}),_.summary.invalidLinks>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-red-800",children:[" Invalid Links (",_.summary.invalidLinks," dates):"]}),o.jsx("div",{className:"space-y-2",children:Array.from(C).map(z=>{var L,H,se;const G=xt(z),X=Ye(z),oe=G.filter(re=>re.type==="INVALID_LINKS");return oe.length===0?null:o.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("span",{className:"font-medium text-slate-900",children:["Feb ",De(z)]}),o.jsx("span",{className:"text-xs text-red-600",children:(L=oe[0])==null?void 0:L.message})]}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:['"',(X==null?void 0:X.summary)||"No summary",'"']}),((se=(H=oe[0])==null?void 0:H.details)==null?void 0:se.invalidUrls)&&o.jsxs("div",{className:"mt-2 space-y-1",children:[o.jsx("div",{className:"text-xs font-medium text-red-700",children:"Invalid URLs:"}),oe[0].details.invalidUrls.map((re,Se)=>o.jsx("div",{className:"text-xs text-red-600 break-all bg-red-100 p-2 rounded",children:re},Se))]})]},`invalid-links-${z}`)}).filter(Boolean)})]})]})]})})]}),_&&_.totalIssues===0&&o.jsx(jt,{className:"border-green-200 bg-green-50",children:o.jsx(on,{className:"p-4",children:o.jsxs("div",{className:"flex items-center text-green-800",children:[o.jsx(Xn,{className:"w-5 h-5 mr-2"}),o.jsx("span",{className:"font-medium",children:"All summaries passed quality checks!"})]})})}),R&&o.jsxs(jt,{className:"border-blue-200 bg-blue-50",children:[o.jsx(Us,{children:o.jsxs(Bs,{className:"text-blue-800 flex items-center",children:[o.jsx(ea,{className:"w-5 h-5 mr-2"}),"Google Verification Results"]})}),o.jsx(on,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:R.validDays}),o.jsx("div",{className:"text-sm text-green-600",children:"Valid"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:R.incorrectDays}),o.jsx("div",{className:"text-sm text-red-600",children:"Incorrect"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:R.cannotVerifyDays}),o.jsx("div",{className:"text-sm text-yellow-600",children:"Cannot Verify"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:R.totalDays}),o.jsx("div",{className:"text-sm text-blue-600",children:"Total"})]})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Accuracy Score"}),o.jsxs("span",{className:"text-lg font-bold text-blue-800",children:[Math.round(R.validDays/R.totalDays*100),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 h-2 rounded-full",style:{width:`${R.validDays/R.totalDays*100}%`}})})]}),R.incorrectDays>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-red-800",children:[" Incorrect Summaries (",R.incorrectDays," dates):"]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(Q).filter(z=>wt(z)==="Incorrect").map(z=>o.jsx(kn,{href:`/day/${z}`,children:o.jsx(me,{variant:"destructive",className:"cursor-pointer hover:bg-red-600",children:z})},z))})]}),R.cannotVerifyDays>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-yellow-800",children:[" Cannot Verify (",R.cannotVerifyDays," dates):"]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(Q).filter(z=>wt(z)==="Cannot Verify").map(z=>o.jsx(kn,{href:`/day/${z}`,children:o.jsx(me,{variant:"secondary",className:"cursor-pointer hover:bg-gray-300",children:z})},z))})]}),R.validDays>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-green-800",children:[" Valid Summaries (",R.validDays," dates):"]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(R.results).filter(z=>wt(z)==="Valid").map(z=>o.jsx(kn,{href:`/day/${z}`,children:o.jsx(me,{variant:"secondary",className:"bg-green-100 text-green-800 cursor-pointer hover:bg-green-200",children:z})},z))})]})]})})]}),o.jsx(Wx,{open:Y,onOpenChange:O,children:o.jsxs(am,{children:[o.jsxs(im,{children:[o.jsxs(cm,{className:"flex items-center",children:[o.jsx(ea,{className:"w-5 h-5 mr-2 text-blue-600"}),"Google Check Warning"]}),o.jsxs(um,{className:"space-y-3",children:[o.jsxs("div",{children:["You're about to verify Bitcoin news summaries from ",o.jsx("strong",{children:e}),", which is in Bitcoin's early era (2009-2012)."]}),o.jsxs("div",{className:"text-amber-600 font-medium",children:[" ",o.jsx("strong",{children:"Please note:"})," Google's search results for Bitcoin-related news from ",e," may be limited or incomplete, as Bitcoin was relatively unknown during this period."]}),o.jsx("div",{children:"The verification results for this early period may not be as reliable as for more recent years. Do you want to continue anyway?"})]})]}),o.jsxs(lm,{children:[o.jsx(hm,{children:"Cancel"}),o.jsxs(dm,{onClick:()=>{O(!1),Yt()},className:"bg-blue-600 hover:bg-blue-700",children:[o.jsx(ea,{className:"w-4 h-4 mr-2"}),"Continue Google Check"]})]})]})})]})}const q8=Array.from({length:16},(e,t)=>2009+t),H8=["January","February","March","April","May","June","July","August","September","October","November","December"],W8={January:1,February:2,March:3,April:4,May:5,June:6,July:7,August:8,September:9,October:10,November:11,December:12};function G8(){const{toast:e}=wr(),[,t]=_u(),[n,r]=d.useState(null),[s,a]=d.useState(null),[i,l]=d.useState(null),[c,u]=d.useState(1),[h,f]=d.useState(50),[m,p]=d.useState(new Set),[x,g]=d.useState(!1),[y,w]=d.useState(!1),[v,b]=d.useState(!1),j=d.useMemo(()=>{if(!n||!s)return null;const T=W8[s],R=`${n}-${String(T).padStart(2,"0")}-01`,W=new Date(n,T,0).getDate(),Q=`${n}-${String(T).padStart(2,"0")}-${String(W).padStart(2,"0")}`;return{startDate:R,endDate:Q}},[n,s]),{data:S,isLoading:C}=tt({queryKey:["monthly-analyses",n,s,c,h],queryFn:async()=>{if(!Le||!j)return{analyses:[],pagination:{totalCount:0,totalPages:0}};const{startDate:T,endDate:R}=j,{count:W}=await Le.from("historical_news_analyses").select("*",{count:"exact",head:!0}).gte("date",T).lte("date",R),Q=W||0,he=Math.ceil(Q/h),{data:Y,error:O}=await Le.from("historical_news_analyses").select("date, summary, tags_version2, tier_used, is_manual_override").gte("date",T).lte("date",R).order("date",{ascending:!1}).range((c-1)*h,c*h-1);if(O)throw O;return{analyses:(Y||[]).map(A=>({date:A.date,summary:A.summary,tags_version2:A.tags_version2||null,tier:A.tier_used||void 0,url:void 0,source_url:void 0,isManualOverride:A.is_manual_override||!1})),pagination:{totalCount:Q,totalPages:he}}},enabled:!!j}),N=(S==null?void 0:S.analyses)||[],_=(S==null?void 0:S.pagination.totalCount)||0;S!=null&&S.pagination.totalPages,N.length>0&&N.every(T=>m.has(T.date));const E=(T,R)=>{r(T),a(R),l(T),u(1),p(new Set)},M=T=>{p(R=>{const W=new Set(R);return W.has(T)?W.delete(T):W.add(T),W})};return o.jsx(tm,{className:"w-full",children:o.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row",children:[o.jsx("div",{className:"lg:w-72 shrink-0",children:o.jsxs(Fx,{collapsible:"none",className:"rounded-xl bg-sidebar/40",children:[o.jsx(zx,{className:"pt-0"}),o.jsx(Ux,{children:o.jsxs(ca,{children:[o.jsx(Ni,{children:"Years"}),o.jsx(ua,{children:o.jsx(Ci,{children:q8.map(T=>o.jsx(da,{children:o.jsxs(rm,{className:"group/collapsible [&[data-state=open]>button>svg:first-child]:rotate-90",open:i===T,onOpenChange:R=>l(R?T:null),children:[o.jsx(sm,{asChild:!0,children:o.jsxs(mo,{className:"justify-start gap-2",children:[o.jsx(ul,{className:"h-3 w-3 transition-transform"}),o.jsx("span",{children:T})]})}),o.jsx(om,{children:o.jsx(Bx,{children:H8.map(R=>{const W=n===T&&s===R;return o.jsx(Kx,{children:o.jsx(mo,{isActive:W,className:"w-full justify-start text-xs h-7 data-[active=true]:bg-white data-[active=true]:text-black",onClick:()=>E(T,R),children:R})},R)})})})]})},T))})})]})})]})}),o.jsx("div",{className:"flex-1 space-y-4",children:o.jsxs(jt,{className:"pt-0 px-6 pb-6 border-0",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("h2",{className:"text-lg font-semibold text-foreground",children:n&&s?`${s} ${n}`:"Select a month"}),_>0&&o.jsxs(me,{variant:"secondary",className:"font-normal",children:[_.toLocaleString()," result",_!==1?"s":""]})]})}),!n||!s?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-muted-foreground",children:"Select a year and month from the sidebar to view analyses"})}):o.jsx(o.Fragment,{children:o.jsx(Vh,{analyses:N,isLoading:C,selectedDates:m,onDateSelect:M,onDateDeselect:M,onRowClick:T=>{t(`/day/${T}?from=monthly`)},emptyMessage:`No analyses found for ${s} ${n}`,showCheckbox:!0,pageSize:h,currentPage:c,totalCount:_,onPageChange:T=>u(T),onPageSizeChange:T=>{f(T),u(1)},pageSizeOptions:[50,200,500],showPagination:!0,showSelectAll:!1,showBulkActions:!0,bulkActions:{showSelectAllLink:!1,onClearSelection:()=>{p(new Set)},customActions:o.jsxs(o.Fragment,{children:[o.jsxs(Ol,{children:[o.jsx(Il,{asChild:!0,children:o.jsxs(V,{variant:"outline",size:"sm",disabled:x,title:"Re-analyze",children:[o.jsx(pn,{className:`w-4 h-4 mr-2 ${x?"animate-spin":""}`}),"Re-analyze",o.jsx(Go,{className:"w-4 h-4 ml-2"})]})}),o.jsxs(Ja,{align:"end",children:[o.jsxs(nr,{onClick:async()=>{g(!0);const T=Array.from(m);for(const R of T)try{await fetch(`/api/analysis/date/${R}`,{method:"POST"})}catch(W){console.error(`Failed to analyze ${R}:`,W)}g(!1),J.invalidateQueries({queryKey:["monthly-analyses"]}),e({title:"Re-analysis complete",description:`Analyzed ${T.length} date(s)`})},disabled:x,children:[o.jsx(pn,{className:"w-4 h-4 mr-2"}),"Analyse Days"]}),o.jsxs(nr,{onClick:async()=>{g(!0);const T=Array.from(m);for(const R of T)try{await fetch(`/api/analysis/date/${R}/redo-summary`,{method:"POST"})}catch(W){console.error(`Failed to redo summary for ${R}:`,W)}g(!1),J.invalidateQueries({queryKey:["monthly-analyses"]}),e({title:"Summaries updated",description:`Redid summaries for ${T.length} date(s)`})},disabled:x,children:[o.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Redo Summaries"]})]})]}),o.jsxs(V,{variant:"outline",size:"sm",disabled:y,onClick:async()=>{w(!0);try{await fetch("/api/tags/categorize/start",{method:"POST"}),e({title:"Auto Tagging started",description:"AI is categorizing tags in the background"})}catch{e({title:"Error",description:"Failed to start auto tagging",variant:"destructive"})}w(!1)},children:[y?o.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(Rx,{className:"w-4 h-4 mr-2"}),"Auto Tagging"]}),o.jsxs(V,{variant:"outline",size:"sm",onClick:()=>b(!0),children:[o.jsx(Jc,{className:"w-4 h-4 mr-2"}),"Manage Tags"]})]})}})})]})})]})})}var fm="Tabs",[Q8]=Nn(fm,[Kf]),_2=Kf(),[Y8,Gx]=Q8(fm),E2=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:i="horizontal",dir:l,activationMode:c="automatic",...u}=e,h=Al(l),[f,m]=rr({prop:r,onChange:s,defaultProp:a??"",caller:fm});return o.jsx(Y8,{scope:n,baseId:Un(),value:f,onValueChange:m,orientation:i,dir:h,activationMode:c,children:o.jsx(we.div,{dir:h,"data-orientation":i,...u,ref:t})})});E2.displayName=fm;var k2="TabsList",T2=d.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,a=Gx(k2,n),i=_2(n);return o.jsx(mE,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:r,children:o.jsx(we.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:t})})});T2.displayName=k2;var R2="TabsTrigger",P2=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=e,i=Gx(R2,n),l=_2(n),c=I2(i.baseId,r),u=M2(i.baseId,r),h=r===i.value;return o.jsx(pE,{asChild:!0,...l,focusable:!s,active:h,children:o.jsx(we.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...a,ref:t,onMouseDown:Z(e.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?i.onValueChange(r):f.preventDefault()}),onKeyDown:Z(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&i.onValueChange(r)}),onFocus:Z(e.onFocus,()=>{const f=i.activationMode!=="manual";!h&&!s&&f&&i.onValueChange(r)})})})});P2.displayName=R2;var A2="TabsContent",O2=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...i}=e,l=Gx(A2,n),c=I2(l.baseId,r),u=M2(l.baseId,r),h=r===l.value,f=d.useRef(h);return d.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),o.jsx($t,{present:s||h,children:({present:m})=>o.jsx(we.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:m&&a})})});O2.displayName=A2;function I2(e,t){return`${e}-trigger-${t}`}function M2(e,t){return`${e}-content-${t}`}var J8=E2,D2=T2,$2=P2,L2=O2;const mm=J8,qu=d.forwardRef(({className:e,...t},n)=>o.jsx(D2,{ref:n,className:ee("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));qu.displayName=D2.displayName;const gr=d.forwardRef(({className:e,...t},n)=>o.jsx($2,{ref:n,className:ee("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));gr.displayName=$2.displayName;const os=d.forwardRef(({className:e,...t},n)=>o.jsx(L2,{ref:n,className:ee("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));os.displayName=L2.displayName;var _p,pm="HoverCard",[F2]=Nn(pm,[Es]),gm=Es(),[X8,Qx]=F2(pm),z2=e=>{const{__scopeHoverCard:t,children:n,open:r,defaultOpen:s,onOpenChange:a,openDelay:i=700,closeDelay:l=300}=e,c=gm(t),u=d.useRef(0),h=d.useRef(0),f=d.useRef(!1),m=d.useRef(!1),[p,x]=rr({prop:r,defaultProp:s??!1,onChange:a,caller:pm}),g=d.useCallback(()=>{clearTimeout(h.current),u.current=window.setTimeout(()=>x(!0),i)},[i,x]),y=d.useCallback(()=>{clearTimeout(u.current),!f.current&&!m.current&&(h.current=window.setTimeout(()=>x(!1),l))},[l,x]),w=d.useCallback(()=>x(!1),[x]);return d.useEffect(()=>()=>{clearTimeout(u.current),clearTimeout(h.current)},[]),o.jsx(X8,{scope:t,open:p,onOpenChange:x,onOpen:g,onClose:y,onDismiss:w,hasSelectionRef:f,isPointerDownOnContentRef:m,children:o.jsx(Ru,{...c,children:n})})};z2.displayName=pm;var U2="HoverCardTrigger",B2=d.forwardRef((e,t)=>{const{__scopeHoverCard:n,...r}=e,s=Qx(U2,n),a=gm(n);return o.jsx(Rl,{asChild:!0,...a,children:o.jsx(we.a,{"data-state":s.open?"open":"closed",...r,ref:t,onPointerEnter:Z(e.onPointerEnter,Jh(s.onOpen)),onPointerLeave:Z(e.onPointerLeave,Jh(s.onClose)),onFocus:Z(e.onFocus,s.onOpen),onBlur:Z(e.onBlur,s.onClose),onTouchStart:Z(e.onTouchStart,i=>i.preventDefault())})})});B2.displayName=U2;var Z8="HoverCardPortal",[TK,eU]=F2(Z8,{forceMount:void 0}),Yh="HoverCardContent",K2=d.forwardRef((e,t)=>{const n=eU(Yh,e.__scopeHoverCard),{forceMount:r=n.forceMount,...s}=e,a=Qx(Yh,e.__scopeHoverCard);return o.jsx($t,{present:r||a.open,children:o.jsx(tU,{"data-state":a.open?"open":"closed",...s,onPointerEnter:Z(e.onPointerEnter,Jh(a.onOpen)),onPointerLeave:Z(e.onPointerLeave,Jh(a.onClose)),ref:t})})});K2.displayName=Yh;var tU=d.forwardRef((e,t)=>{const{__scopeHoverCard:n,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,...l}=e,c=Qx(Yh,n),u=gm(n),h=d.useRef(null),f=Ge(t,h),[m,p]=d.useState(!1);return d.useEffect(()=>{if(m){const x=document.body;return _p=x.style.userSelect||x.style.webkitUserSelect,x.style.userSelect="none",x.style.webkitUserSelect="none",()=>{x.style.userSelect=_p,x.style.webkitUserSelect=_p}}},[m]),d.useEffect(()=>{if(h.current){const x=()=>{p(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var y;((y=document.getSelection())==null?void 0:y.toString())!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",x),()=>{document.removeEventListener("pointerup",x),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),d.useEffect(()=>{h.current&&sU(h.current).forEach(g=>g.setAttribute("tabindex","-1"))}),o.jsx(Xs,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:i,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:Z(a,x=>{x.preventDefault()}),onDismiss:c.onDismiss,children:o.jsx(Pu,{...u,...l,onPointerDown:Z(l.onPointerDown,x=>{x.currentTarget.contains(x.target)&&p(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:f,style:{...l.style,userSelect:m?"text":void 0,WebkitUserSelect:m?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),nU="HoverCardArrow",rU=d.forwardRef((e,t)=>{const{__scopeHoverCard:n,...r}=e,s=gm(n);return o.jsx(Au,{...s,...r,ref:t})});rU.displayName=nU;function Jh(e){return t=>t.pointerType==="touch"?void 0:e()}function sU(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)t.push(n.currentNode);return t}var oU=z2,aU=B2,V2=K2;const iU=oU,lU=aU,q2=d.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},s)=>o.jsx(V2,{ref:s,align:t,sideOffset:n,className:ee("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]",e),...r}));q2.displayName=V2.displayName;function H2({badge:e,className:t}){if(!e)return null;const r={Manual:{icon:Ns,className:"bg-blue-100 text-blue-800 border-blue-300",label:"Manual"},Orphan:{icon:Gs,className:"bg-orange-100 text-orange-800 border-orange-300",label:"Orphan"},Verified:{icon:Xn,className:"bg-green-100 text-green-800 border-green-300",label:"Verified"},"Not Available":{icon:hC,className:"bg-gray-100 text-gray-800 border-gray-300",label:"Not Available"}}[e];if(!r)return null;const s=r.icon;return o.jsxs(me,{variant:"outline",className:`${r.className} text-xs px-1.5 py-0.5 inline-flex items-center space-x-1 w-fit ${t||""}`,title:`Verification Status: ${r.label}`,children:[o.jsx(s,{className:"w-2.5 h-2.5"}),o.jsx("span",{children:r.label})]})}function cU({open:e,onOpenChange:t,date:n,selectionMode:r,tieredArticles:s,geminiSelectedIds:a=[],perplexitySelectedIds:i=[],intersectionIds:l=[],openaiSuggestedId:c,onConfirm:u}){var S,C;const[h,f]=d.useState(r==="multiple"&&c||null),[m,p]=d.useState(!1),{toast:x}=wr(),y=(N=>!N||s.bitcoin.some(_=>_.id===N)?"bitcoin":s.crypto.some(_=>_.id===N)?"crypto":s.macro.some(_=>_.id===N)?"macro":"bitcoin")(c||h);d.useEffect(()=>{var N,_,E;e&&console.log(" [ArticleSelectionDialog] Dialog opened with:",{selectionMode:r,tieredArticles:{bitcoin:((N=s.bitcoin)==null?void 0:N.length)||0,crypto:((_=s.crypto)==null?void 0:_.length)||0,macro:((E=s.macro)==null?void 0:E.length)||0},geminiSelectedIds:a.length,perplexitySelectedIds:i.length,intersectionIds:l.length,intersectionIdsSample:l.slice(0,3),openaiSuggestedId:c,selectedArticleId:h})},[e,r,s,a,i,l,c,h]);const w=async()=>{if(!h){x({variant:"destructive",description:"Please select an article first"});return}p(!0);try{await u(h),t(!1),x({description:"Article selected successfully. Generating summary..."})}catch(N){x({variant:"destructive",description:`Failed to confirm selection: ${N.message}`})}finally{p(!1)}},v=N=>{const _=a.includes(N),E=i.includes(N),M=l.includes(N);return{isGemini:_,isPerplexity:E,isIntersection:M,isOpenAISuggested:N===c,isSelected:N===h}},b=(N,_)=>{const E=v(N.id),M={bitcoin:"border-orange-500/30 bg-orange-950/20",crypto:"border-blue-500/30 bg-blue-950/20",macro:"border-purple-500/30 bg-purple-950/20"},T=E.isOpenAISuggested?"border-2 border-yellow-500 ring-2 ring-yellow-500/50":E.isSelected?"border-2 border-green-500 ring-2 ring-green-500/50":E.isIntersection?"border-2 border-green-400/50":"border border-border";return o.jsx(jt,{className:`group cursor-pointer transition-all duration-200 hover:scale-[1.02] hover:shadow-lg ${E.isSelected?"ring-2 ring-green-500/50 shadow-lg shadow-green-500/20":"hover:ring-1 hover:ring-border"} ${T} ${M[_]} bg-muted/50 backdrop-blur-sm`,onClick:()=>{(r==="orphan"||E.isIntersection)&&f(N.id)},children:o.jsx(on,{className:"p-5",children:o.jsx("div",{className:"flex items-start justify-between gap-4",children:o.jsxs("div",{className:"flex-1 space-y-3",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[E.isSelected&&o.jsx("div",{className:"flex-shrink-0 mt-1",children:o.jsx("div",{className:"p-1.5 rounded-full bg-green-500/20 border border-green-500/50",children:o.jsx(Xn,{className:"w-4 h-4 text-green-400"})})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:`font-semibold leading-tight mb-2 ${E.isSelected?"text-green-300":"text-foreground"}`,children:N.title}),N.summary&&o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed line-clamp-3 mb-3",children:N.summary})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[E.isGemini&&o.jsxs(me,{variant:"outline",className:"bg-blue-500/10 text-blue-300 border-blue-500/30 text-xs font-medium px-2 py-1",children:[o.jsx(cC,{className:"w-3 h-3 mr-1"}),"Gemini"]}),E.isPerplexity&&o.jsxs(me,{variant:"outline",className:"bg-purple-500/10 text-purple-300 border-purple-500/30 text-xs font-medium px-2 py-1",children:[o.jsx(sv,{className:"w-3 h-3 mr-1"}),"Perplexity"]}),E.isIntersection&&o.jsxs(me,{variant:"outline",className:"bg-green-500/10 text-green-300 border-green-500/30 text-xs font-medium px-2 py-1",children:[o.jsx(Xn,{className:"w-3 h-3 mr-1"}),"Both Agreed"]}),E.isOpenAISuggested&&o.jsxs(me,{variant:"outline",className:"bg-yellow-500/10 text-yellow-300 border-yellow-500/30 text-xs font-medium px-2 py-1",children:[o.jsx(Pr,{className:"w-3 h-3 mr-1 fill-yellow-300/20"}),"OpenAI Suggested"]})]}),N.url&&o.jsxs("a",{href:N.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-xs text-blue-400 hover:text-blue-300 transition-colors font-medium mt-2",onClick:R=>R.stopPropagation(),children:[o.jsx(Rf,{className:"w-3 h-3 mr-1.5"}),"View Full Article",o.jsx(Gc,{className:"w-3 h-3 ml-1"})]})]})})})},N.id)},j=(N,_)=>{if(!_||_.length===0)return o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:o.jsx("p",{children:"No articles found in this tier"})});let E=_;return r==="multiple"&&(E=_.filter(M=>l.includes(M.id)||l.some(R=>M.url&&(R===M.url||M.url.includes(R)||R.includes(M.url)))),console.log(`   [${N}] Filtered ${E.length} articles from ${_.length} total (intersection: ${l.length})`)),E.length===0?o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:o.jsx("p",{children:"No matching articles in this tier"})}):o.jsx("div",{className:"space-y-4",children:E.map(M=>b(M,N))})};return o.jsx(en,{open:e,onOpenChange:t,children:o.jsxs(qt,{className:"max-w-5xl max-h-[90vh] flex flex-col bg-background border-border text-foreground shadow-2xl",children:[o.jsx(Ht,{className:"space-y-4 pb-4 border-b border-border",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-violet-500/20 to-purple-500/20 border border-violet-500/30",children:o.jsx(Ns,{className:"w-5 h-5 text-violet-300"})}),o.jsxs(Wt,{className:"text-2xl font-bold text-foreground",children:["Select Article for ",new Date(n).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),o.jsx(Pn,{className:"text-muted-foreground text-base leading-relaxed",children:r==="multiple"?o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(lr,{className:"w-4 h-4 mt-1 text-yellow-400 flex-shrink-0"}),o.jsxs("span",{children:["Multiple articles were approved by both ",o.jsx("span",{className:"font-semibold text-blue-300",children:"Gemini"})," and ",o.jsx("span",{className:"font-semibold text-purple-300",children:"Perplexity"}),".",o.jsx("span",{className:"font-semibold text-yellow-300",children:" OpenAI"})," has suggested one, but you can choose a different one."]})]}):o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Gs,{className:"w-4 h-4 mt-1 text-orange-400 flex-shrink-0"}),o.jsx("span",{children:"No articles were approved by both AIs. Please manually select an article to summarize."})]})})]}),o.jsx("div",{className:"flex-shrink-0",children:o.jsx(H2,{badge:r==="orphan"?"Orphan":"Verified"})})]})}),o.jsxs(mm,{defaultValue:y,className:"w-full mt-6",children:[o.jsxs(qu,{className:"grid w-full grid-cols-3 bg-muted/50 border border-border rounded-lg p-1",children:[o.jsx(gr,{value:"bitcoin",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-orange-500/20 data-[state=active]:to-orange-600/20 data-[state=active]:text-orange-300 data-[state=active]:border-orange-500/30 data-[state=active]:shadow-lg transition-all rounded-md border border-transparent",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(sv,{className:"w-4 h-4"}),o.jsx("span",{className:"font-semibold",children:"Bitcoin"}),o.jsx(me,{variant:"secondary",className:"ml-1 bg-orange-500/20 text-orange-300 border-orange-500/30 text-xs",children:s.bitcoin.length}),y==="bitcoin"&&o.jsx(Pr,{className:"w-4 h-4 text-orange-400 fill-orange-400/30"})]})}),o.jsx(gr,{value:"crypto",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-500/20 data-[state=active]:to-blue-600/20 data-[state=active]:text-blue-300 data-[state=active]:border-blue-500/30 data-[state=active]:shadow-lg transition-all rounded-md border border-transparent",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(lr,{className:"w-4 h-4"}),o.jsx("span",{className:"font-semibold",children:"Crypto"}),o.jsx(me,{variant:"secondary",className:"ml-1 bg-blue-500/20 text-blue-300 border-blue-500/30 text-xs",children:s.crypto.length}),y==="crypto"&&o.jsx(Pr,{className:"w-4 h-4 text-blue-400 fill-blue-400/30"})]})}),o.jsx(gr,{value:"macro",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-500/20 data-[state=active]:to-purple-600/20 data-[state=active]:text-purple-300 data-[state=active]:border-purple-500/30 data-[state=active]:shadow-lg transition-all rounded-md border border-transparent",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ns,{className:"w-4 h-4"}),o.jsx("span",{className:"font-semibold",children:"Macro"}),o.jsx(me,{variant:"secondary",className:"ml-1 bg-purple-500/20 text-purple-300 border-purple-500/30 text-xs",children:s.macro.length}),y==="macro"&&o.jsx(Pr,{className:"w-4 h-4 text-purple-400 fill-purple-400/30"})]})})]}),o.jsxs("div",{className:"mt-4 flex-1 overflow-y-auto pr-2 min-h-0",children:[o.jsx(os,{value:"bitcoin",className:"mt-0",children:j("bitcoin",s.bitcoin)}),o.jsx(os,{value:"crypto",className:"mt-0",children:j("crypto",s.crypto)}),o.jsx(os,{value:"macro",className:"mt-0",children:j("macro",s.macro)})]})]}),o.jsx(Zr,{className:"border-t border-border pt-6 mt-6",children:o.jsxs("div",{className:"flex items-center justify-between w-full gap-4",children:[o.jsx("div",{className:"flex items-center gap-3 text-sm",children:h?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"p-1.5 rounded-full bg-green-500/20 border border-green-500/30",children:o.jsx(Xn,{className:"w-4 h-4 text-green-400"})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-muted-foreground text-xs",children:"Selected Article:"}),o.jsxs("span",{className:"text-foreground font-medium",children:[(S=s.bitcoin.concat(s.crypto,s.macro).find(N=>N.id===h))==null?void 0:S.title.substring(0,60),(C=s.bitcoin.concat(s.crypto,s.macro).find(N=>N.id===h))!=null&&C.title.length&&s.bitcoin.concat(s.crypto,s.macro).find(N=>N.id===h).title.length>60?"...":""]})]})]}):o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[o.jsx(Gs,{className:"w-4 h-4"}),o.jsx("span",{children:"Please select an article to continue"})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(V,{variant:"outline",onClick:()=>t(!1),disabled:m,className:"border-border text-muted-foreground hover:bg-muted/50 hover:border-muted-foreground/50 transition-all",children:"Cancel"}),o.jsx(V,{onClick:w,disabled:!h||m,className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white shadow-lg shadow-green-500/20 hover:shadow-green-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:m?o.jsxs(o.Fragment,{children:[o.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating Summary..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Xn,{className:"w-4 h-4 mr-2"}),"Confirm Selection"]})})]})]})})]})})}function uU(){const e=Nl(),t=at({mutationFn:async()=>{const n=await fetch("/api/health/refresh",{method:"POST",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()},onSuccess:n=>{e.setQueryData(["health-status"],n)}});return{triggerHealthCheck:t.mutateAsync,isLoading:t.isPending,error:t.error}}function dU(){var Ee,Nt,F,te,ke,Te,$,ae,fe,be,ve,ft,ot,bt,et,mt,xe,Ve,Tt,Mn,br,Hn,sr,Ur,Br,Ul,eo,Bl,Kl,Ju,Vl,ql,P,q,K,ne,Fe,je,Je,_t,dt,zt,Cn,Ut,Pt,vn,lt,pt,jr;const{date:e}=_f(),{toast:t}=wr(),[n,r]=Pe.useState(!1),[s,a]=Pe.useState(""),[i,l]=Pe.useState(!1),[c,u]=Pe.useState(!1),[h,f]=Pe.useState(null),[m,p]=Pe.useState(!1),[x,g]=Pe.useState(!1),[y,w]=Pe.useState(""),[v,b]=Pe.useState(0),j=10,[S,C]=Pe.useState(1),[N,_]=Pe.useState(!1),[E,M]=Pe.useState(null),[T,R]=Pe.useState(""),{triggerHealthCheck:W}=uU(),{aiProvider:Q}=C2(),Y=new URLSearchParams(window.location.search).get("from")||"month",{data:O,isLoading:A}=tt({queryKey:[`supabase-date-${e}`],queryFn:async()=>{if(!Le||!e)throw new Error("Supabase not configured or date missing");const{data:I,error:ce}=await Le.from("historical_news_analyses").select("*").eq("date",e).single();if(ce&&ce.code!=="PGRST116")throw ce;if(!I)return{analysis:{id:"",date:e,summary:"",topArticleId:"",reasoning:"",confidenceScore:"0",aiProvider:"unknown",isManualOverride:!1,isFlagged:!1,tagsVersion2:[],articleTags:{totalArticles:0,topSources:[],duplicatesFound:0,sourcesUsed:[],totalFetched:0}},manualEntries:[],tieredArticles:{bitcoin:[],crypto:[],macro:[]},winningTier:null,meta:{hasLegacyData:!1,hasTieredData:!1,dataVersion:"v2-tiered"}};const{data:Xe}=await Le.from("manual_news_entries").select("*").eq("date",e),ze=I.tiered_articles||{bitcoin:[],crypto:[],macro:[]},gt=!!(ze.bitcoin&&ze.bitcoin.length>0||ze.crypto&&ze.crypto.length>0||ze.macro&&ze.macro.length>0);return{analysis:{id:I.id,date:I.date,summary:I.summary,topArticleId:I.top_article_id||"",reasoning:I.reasoning||"",confidenceScore:I.confidence_score||"0",aiProvider:I.ai_provider||"unknown",isManualOverride:I.is_manual_override||!1,isFlagged:!1,veriBadge:I.veri_badge,tagsVersion2:I.tags_version2||[],articleTags:{totalArticles:I.total_articles_fetched||0,topSources:[],duplicatesFound:0,sourcesUsed:[],totalFetched:I.total_articles_fetched||0}},manualEntries:(Xe==null?void 0:Xe.map(Et=>({id:Et.id,title:Et.title||"",summary:Et.summary||"",description:Et.description||""})))||[],tieredArticles:ze,analyzedArticles:I.analyzed_articles||[],winningTier:I.tier_used||I.winning_tier||null,meta:{hasLegacyData:!gt&&I.analyzed_articles&&I.analyzed_articles.length>0,hasTieredData:gt,dataVersion:gt?"v2-tiered":"v1-legacy"}}}}),{data:U}=tt({queryKey:["all-tags"],queryFn:async()=>{if(!Le)return[];const{data:I,error:ce}=await Le.from("tags").select("name, category, subcategory_path").order("name");if(ce)throw ce;return I||[]},staleTime:300*1e3}),D=Pe.useMemo(()=>{if(!U||!y.trim())return U||[];const I=y.toLowerCase();return U.filter(ce=>ce.name.toLowerCase().includes(I))},[U,y]),B=at({mutationFn:async()=>{e&&mM(e);try{await W()}catch(Xe){console.warn("Health check failed before analysis:",Xe)}const I=await fetch(`/api/analysis/date/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({forceReanalysis:!0,aiProvider:Q,newsProvider:localStorage.getItem("newsProvider")||"exa"})});if(!I.ok){const Xe=await I.text();throw console.error("Analysis failed:",Xe),new Error(`Failed to analyze: ${I.statusText}`)}const ce=await I.json();return console.log("Analysis response:",{hasRequiresSelection:!!ce.requiresSelection,requiresSelection:ce.requiresSelection,selectionMode:ce.selectionMode,hasTieredArticles:!!ce.tieredArticles}),ce},onSuccess:I=>{var Xe,ze,gt,Et,Kr,v0;if(console.log(" [DayAnalysis] Analysis response received:",{hasRequiresSelection:!!(I!=null&&I.requiresSelection),requiresSelection:I==null?void 0:I.requiresSelection,selectionMode:I==null?void 0:I.selectionMode,hasTieredArticles:!!(I!=null&&I.tieredArticles),tieredArticlesKeys:I!=null&&I.tieredArticles?Object.keys(I.tieredArticles):[],fullData:I}),I!=null&&I.requiresSelection){console.log(" [DayAnalysis] User selection required - opening dialog"),console.log("   Selection data:",{mode:I.selectionMode,geminiCount:((Xe=I.geminiSelectedIds)==null?void 0:Xe.length)||0,perplexityCount:((ze=I.perplexitySelectedIds)==null?void 0:ze.length)||0,intersectionCount:((gt=I.intersectionIds)==null?void 0:gt.length)||0,openaiSuggested:I.openaiSuggestedId,tieredArticles:I.tieredArticles?{bitcoin:((Et=I.tieredArticles.bitcoin)==null?void 0:Et.length)||0,crypto:((Kr=I.tieredArticles.crypto)==null?void 0:Kr.length)||0,macro:((v0=I.tieredArticles.macro)==null?void 0:v0.length)||0}:null}),console.log("   Full selection data:",JSON.stringify(I,null,2)),M(I),_(!0),console.log("   State updated: selectionDialogOpen = true, selectionData set"),ye(!1);return}console.log(" [DayAnalysis] No selection required - continuing with normal flow"),J.refetchQueries({queryKey:[`supabase-date-${e}`]});const ce=e==null?void 0:e.substring(0,4);ce&&J.invalidateQueries({queryKey:[`supabase-year-${ce}`]}),J.invalidateQueries({queryKey:["/api/analysis/stats"]}),u(!0),l(!1),ye(!1),Be.current=null,I!=null&&I.aisDidntAgree?t({title:" AIs Didn't Agree",description:"Gemini and Perplexity couldn't agree on any articles for this date. News articles were still saved and are available for manual review.",variant:"default",duration:8e3}):t({title:"Analysis Complete",description:`Bitcoin news analysis for ${new Date(e).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})} has been updated successfully.`})},onError:I=>{ye(!1),Be.current=null,t({title:"Analysis Failed",description:I.message||"Failed to analyze the news for this date.",variant:"destructive"})}}),ue=at({mutationFn:async()=>{const I=await fetch(`/api/analysis/date/${e}/redo-summary`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!I.ok)throw new Error(`Failed to regenerate summary: ${I.statusText}`);return I.json()},onSuccess:()=>{J.refetchQueries({queryKey:[`supabase-date-${e}`]});const I=e==null?void 0:e.substring(0,4);I&&J.invalidateQueries({queryKey:[`supabase-year-${I}`]}),J.invalidateQueries({queryKey:["/api/analysis/stats"]}),l(!1),t({title:"Summary Regenerated",description:"Summary has been regenerated successfully from the existing article."})},onError:I=>{t({title:"Regeneration Failed",description:I.message||"Failed to regenerate summary.",variant:"destructive"})}});at({mutationFn:async()=>{var ce;if(!((ce=O==null?void 0:O.analysis)!=null&&ce.summary))throw new Error("No summary available to verify");Ke({status:null,isLoading:!0});const I=await fetch("/api/analysis/google-verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:e,summary:O.analysis.summary})});if(!I.ok)throw new Error(`Verification failed: ${I.statusText}`);return I.json()},onSuccess:I=>{Ke({status:I.assessment,isLoading:!1}),t({title:"Google Verification Complete",description:`Summary was assessed as: ${I.assessment}`,variant:I.assessment==="Valid"?"default":"destructive"})},onError:I=>{Ke({status:null,isLoading:!1}),t({title:"Verification Failed",description:I.message||"Failed to verify summary with Google.",variant:"destructive"})}});const[_e,ye]=Pe.useState(!1),Be=Pe.useRef(null),[Ie,pe]=Pe.useState(null),[ge,Ke]=Pe.useState({status:null,isLoading:!1}),le=()=>{if(_e||B.isPending){console.log("Analysis already in progress, ignoring click");return}const I=`ANALYSE_DAY_${Date.now()}`;console.log(` [${I}] Analyse Day triggered for date: ${e}`),console.log(` [${I}] Trigger context: analyse day button click`),console.log(` [${I}] Current URL: ${window.location.href}`),console.log(` [${I}] Timestamp: ${new Date().toISOString()}`),ye(!0),B.mutate()},Re=()=>{if(ue.isPending){console.log("Summary regeneration already in progress, ignoring click");return}ue.mutate()},Me=()=>{if(_e||B.isPending){console.log("Analysis already in progress, ignoring click");return}const I=`INITIAL_ANALYSIS_${Date.now()}`;console.log(` [${I}] Initial analysis triggered for date: ${e}`),console.log(` [${I}] Trigger context: initial analyse button click`),console.log(` [${I}] Current URL: ${window.location.href}`),console.log(` [${I}] Timestamp: ${new Date().toISOString()}`),ye(!0),B.mutate()},Ue=async I=>{const ce=await I.text();try{return JSON.parse(ce)}catch{throw new Error(ce||"Response was not valid JSON")}},De=at({mutationFn:async()=>{const I=await fetch(`/api/analysis/date/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({summary:s||(O==null?void 0:O.analysis.summary),reasoning:O==null?void 0:O.analysis.reasoning,is_manual_override:!0})});if(!I.ok){const ce=await I.text();throw new Error(ce||`Failed to save: ${I.statusText}`)}return Ue(I)},onSuccess:()=>{J.invalidateQueries({queryKey:[`supabase-date-${e}`]});const I=e==null?void 0:e.substring(0,4);I&&J.invalidateQueries({queryKey:[`supabase-year-${I}`]}),J.invalidateQueries({queryKey:["/api/analysis/stats"]}),r(!1),l(!1),u(!1),a(""),t({title:"Changes Saved",description:"Your modifications have been saved successfully."})},onError:I=>{t({title:"Save Failed",description:I.message||"Failed to save changes.",variant:"destructive"})}}),Ye=at({mutationFn:async I=>{var ze;if(!((ze=O==null?void 0:O.analysis)!=null&&ze.tagsVersion2))throw new Error("No tags to remove");const ce=O.analysis.tagsVersion2.filter(gt=>gt!==I),Xe=await fetch(`/api/analysis/date/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({summary:O.analysis.summary,tags_version2:ce})});if(!Xe.ok){const gt=await Xe.text();throw new Error(gt||`Failed to remove tag: ${Xe.statusText}`)}return Ue(Xe)},onSuccess:()=>{J.invalidateQueries({queryKey:[`supabase-date-${e}`]});const I=e==null?void 0:e.substring(0,4);I&&J.invalidateQueries({queryKey:[`supabase-year-${I}`]}),J.invalidateQueries({queryKey:["/api/analysis/stats"]}),t({title:"Tag Removed",description:"Tag has been removed from this analysis."})},onError:I=>{t({title:"Remove Failed",description:I.message||"Failed to remove tag.",variant:"destructive"})}}),st=at({mutationFn:async I=>{var gt;const ce=((gt=O==null?void 0:O.analysis)==null?void 0:gt.tagsVersion2)||[];if(ce.includes(I))throw new Error("Tag already exists");const Xe=[...ce,I],ze=await fetch(`/api/analysis/date/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({summary:O==null?void 0:O.analysis.summary,tags_version2:Xe})});if(!ze.ok){const Et=await ze.text();throw new Error(Et||`Failed to add tag: ${ze.statusText}`)}return Ue(ze)},onSuccess:()=>{J.invalidateQueries({queryKey:[`supabase-date-${e}`]}),t({title:"Tag Added",description:"New tag has been added."})},onError:I=>{I.message!=="Tag already exists"&&t({title:"Add Failed",description:I.message||"Failed to add tag.",variant:"destructive"})}}),xt=()=>{if(!m)return;const I=window.getSelection(),ce=I==null?void 0:I.toString().trim();ce&&ce.length>0&&ce.length<100&&(st.mutate(ce),I==null||I.removeAllRanges())},it=at({mutationFn:async I=>(pe(I),(await Rr("PUT",`/api/analysis/date/${e}/select-article`,{articleId:I})).json()),onSuccess:I=>{J.invalidateQueries({queryKey:[`/api/analysis/date/${e}`]});const ce=e==null?void 0:e.substring(0,4);ce&&J.invalidateQueries({queryKey:[`/api/analysis/year/${ce}`]}),J.invalidateQueries({queryKey:["/api/analysis/stats"]}),J.refetchQueries({queryKey:[`supabase-date-${e}`]}),a(""),l(!1),r(!1),pe(null),t({title:"Article Selected",description:"New summary generated successfully from the selected article."})},onError:I=>{pe(null),t({title:"Selection Failed",description:I.message||"Failed to select article and generate new summary.",variant:"destructive"})}}),Yt=I=>{Ie||it.isPending||it.mutate(I)};Pe.useEffect(()=>{var I;(I=O==null?void 0:O.analysis)!=null&&I.summary&&!s&&!n&&a(O.analysis.summary)},[(Ee=O==null?void 0:O.analysis)==null?void 0:Ee.summary,s,n]);const wt=()=>{n?(r(!1),a((O==null?void 0:O.analysis.summary)||""),l(!1)):(r(!0),a((O==null?void 0:O.analysis.summary)||""))},Lt=I=>{a(I),l(I!==(O==null?void 0:O.analysis.summary))},qe=async()=>{if(!e)return;const I=new Date(e);I.setDate(I.getDate()-1);const ce=I.toISOString().split("T")[0];await J.prefetchQuery({queryKey:[`supabase-date-${ce}`],staleTime:300*1e3}),window.location.href=`/day/${ce}?from=${Y}`},Ft=async()=>{if(!e)return;const I=new Date(e);I.setDate(I.getDate()+1);const ce=I.toISOString().split("T")[0];await J.prefetchQuery({queryKey:[`supabase-date-${ce}`],staleTime:300*1e3}),window.location.href=`/day/${ce}?from=${Y}`};Pe.useEffect(()=>{const I=ce=>{if(ce.ctrlKey||ce.metaKey)return;const Xe=document.activeElement;if(!(Xe&&(Xe.tagName==="INPUT"||Xe.tagName==="TEXTAREA"||Xe.getAttribute("contenteditable")==="true"||Xe.closest('[role="dialog"]')!==null)))switch(ce.key.toLowerCase()){case"s":ce.preventDefault(),De.mutate();break;case"r":if(ce.preventDefault(),!B.isPending&&!_e){const gt=`KEYBOARD_R_${Date.now()}`;console.log(` [${gt}] Keyboard 'R' analysis triggered for date: ${e}`),console.log(` [${gt}] Trigger context: keyboard shortcut`),console.log(` [${gt}] Current URL: ${window.location.href}`),console.log(` [${gt}] Timestamp: ${new Date().toISOString()}`),ye(!0),B.mutate()}break;case"arrowleft":ce.preventDefault(),qe();break;case"arrowright":ce.preventDefault(),Ft();break}};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[]);const z=(O==null?void 0:O.analyzedArticles)||[],G=O==null?void 0:O.tieredArticles,X=((Nt=O==null?void 0:O.meta)==null?void 0:Nt.hasTieredData)||!1,L=Pe.useMemo(()=>{var ce,Xe,ze,gt;const I=(ce=O==null?void 0:O.analysis)==null?void 0:ce.topArticleId;return!I||!G?(O==null?void 0:O.winningTier)||null:(Xe=G.bitcoin)!=null&&Xe.some(Et=>Et.id===I)?"bitcoin":(ze=G.crypto)!=null&&ze.some(Et=>Et.id===I)?"crypto":(gt=G.macro)!=null&&gt.some(Et=>Et.id===I)?"macro":(O==null?void 0:O.winningTier)||null},[(F=O==null?void 0:O.analysis)==null?void 0:F.topArticleId,G,O==null?void 0:O.winningTier]);Pe.useEffect(()=>{X&&L?T!==L&&R(L):!X&&T!=="legacy"&&R("legacy")},[X,L,(te=O==null?void 0:O.analysis)==null?void 0:te.id]);const se=(!(O!=null&&O.analysis.topArticleId)||!G?null:[...G.bitcoin||[],...G.crypto||[],...G.macro||[]].find(ce=>ce.id===(O==null?void 0:O.analysis.topArticleId)))||z.find(I=>I.id===(O==null?void 0:O.analysis.topArticleId))||z[0];z.filter(I=>I.id!==((se==null?void 0:se.id)||(O==null?void 0:O.analysis.topArticleId)));const re=I=>{switch(I){case"bitcoin":return{icon:Xg,label:"Bitcoin",color:"bg-orange-500/20 text-orange-300 border-orange-500/30",accentColor:"text-orange-400",rowColor:"hover:bg-orange-50/50",selectedColor:"bg-orange-100 border-orange-300"};case"crypto":return{icon:Qc,label:"Crypto/Web3",color:"bg-blue-500/20 text-blue-300 border-blue-500/30",accentColor:"text-blue-400",rowColor:"hover:bg-blue-50/50",selectedColor:"bg-blue-100 border-blue-300"};case"macro":return{icon:eb,label:"Macro/Financial",color:"bg-green-500/20 text-green-300 border-green-500/30",accentColor:"text-green-400",rowColor:"hover:bg-green-50/50",selectedColor:"bg-green-100 border-green-300"};default:return{icon:Ns,label:"Articles",color:"bg-muted/50 text-muted-foreground border-border",accentColor:"text-muted-foreground",rowColor:"hover:bg-accent/50",selectedColor:"bg-accent border-border"}}},Se=(I,ce)=>{if(!I||I.length===0){const ze=re(ce).icon;return o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(ze,{className:"w-12 h-12 mx-auto mb-3 text-muted-foreground"}),o.jsxs("p",{children:["No ",re(ce).label.toLowerCase()," articles found for this date"]})]})}const Xe=re(ce);return o.jsx("div",{className:"rounded-lg border border-border overflow-hidden",children:o.jsxs(ka,{children:[o.jsx(Ta,{className:"bg-muted/50",children:o.jsxs(ur,{className:"border-b border-border hover:bg-accent/50",children:[o.jsx(vt,{className:"w-12 text-muted-foreground"}),o.jsx(vt,{className:"font-semibold text-foreground",children:"Title"}),o.jsx(vt,{className:"font-semibold text-foreground",children:"Source"}),o.jsx(vt,{className:"font-semibold text-foreground",children:"Relevance"}),o.jsx(vt,{className:"font-semibold w-24 text-right text-foreground",children:"Link"})]})}),o.jsx(Ra,{children:I.map(ze=>{const gt=(O==null?void 0:O.analysis.topArticleId)===ze.id;return o.jsxs(ur,{className:`group border-b border-border/50 hover:bg-accent/50 ${gt?ce==="bitcoin"?"bg-orange-950/30 hover:bg-orange-950/40":ce==="crypto"?"bg-blue-950/30 hover:bg-blue-950/40":"bg-green-950/30 hover:bg-green-950/40":""} transition-colors`,children:[o.jsx(yt,{className:"w-12 text-foreground",children:Ie===ze.id?o.jsx("div",{className:"flex items-center",children:o.jsx(pn,{className:`w-4 h-4 animate-spin ${Xe.accentColor}`})}):gt?o.jsxs(me,{className:`${Xe.color} border`,variant:"outline",children:[o.jsx(Pr,{className:"w-3 h-3 mr-1 fill-current"}),"Selected"]}):o.jsxs(me,{className:`${Xe.color} border cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity hover:scale-105 ${it.isPending?"pointer-events-none opacity-50":""}`,variant:"outline",onClick:()=>!it.isPending&&Yt(ze.id),title:"Select this article",children:[o.jsx(Pr,{className:"w-3 h-3 mr-1"}),"Select"]})}),o.jsx(yt,{className:"text-foreground p-4",children:o.jsxs(iU,{children:[o.jsx(lU,{asChild:!0,children:o.jsxs("div",{className:"space-y-1 w-full h-full cursor-pointer -m-4 p-4",children:[o.jsx("a",{href:ze.url,target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-foreground hover:text-foreground transition-colors line-clamp-2 block",onClick:Et=>Et.stopPropagation(),children:ze.title}),ze.summary&&o.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mt-1",children:ze.summary})]})}),o.jsx(q2,{className:"w-80 bg-accent border-border",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"font-semibold text-accent-foreground leading-relaxed",children:ze.title}),ze.summary&&o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:ze.summary})]})})]})}),o.jsx(yt,{className:"text-muted-foreground",children:o.jsx("span",{className:"text-xs",children:new URL(ze.url).hostname})}),o.jsx(yt,{className:"text-foreground",children:ze.score?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex-1 bg-muted rounded-full h-2 max-w-[60px]",children:o.jsx("div",{className:`h-2 rounded-full ${ce==="bitcoin"?"bg-orange-500":ce==="crypto"?"bg-blue-500":"bg-green-500"}`,style:{width:`${ze.score*100}%`}})}),o.jsxs("span",{className:`text-xs font-medium ${Xe.accentColor}`,children:[(ze.score*100).toFixed(0),"%"]})]}):o.jsx("span",{className:"text-xs text-muted-foreground",children:"N/A"})}),o.jsx(yt,{className:"text-right text-foreground",children:o.jsx(V,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-accent",asChild:!0,children:o.jsx("a",{href:ze.url,target:"_blank",rel:"noopener noreferrer",title:"Open article",children:o.jsx(Rf,{className:"w-4 h-4 text-muted-foreground hover:text-foreground"})})})})]},ze.id)})})]})})};if(!e)return o.jsxs("div",{className:"space-y-6",children:[o.jsx(iu,{className:"h-16 w-full"}),o.jsx(iu,{className:"h-64 w-full"})]});const Qe=!A&&O&&(!O.analysis.id||O.analysis.id==="");return A?o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs(V,{variant:"outline",size:"sm",onClick:()=>window.history.back(),children:[o.jsx(ci,{className:"w-4 h-4 mr-2"}),"Back"]}),o.jsx("div",{children:o.jsx("h1",{className:"text-xl font-bold text-foreground",children:new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})})]})}),o.jsx(jt,{className:"relative bg-black/90 border-border",children:o.jsx(on,{className:"p-6",children:o.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:o.jsxs("div",{className:"text-center",children:[o.jsx(nt,{className:"w-8 h-8 animate-spin text-white mx-auto mb-3"}),o.jsx("p",{className:"text-white/80 font-medium",children:"Loading analysis..."})]})})})})]}):Qe?o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs(V,{variant:"outline",size:"sm",onClick:()=>window.history.back(),children:[o.jsx(ci,{className:"w-4 h-4 mr-2"}),"Back"]}),o.jsx("div",{children:o.jsx("h1",{className:"text-xl font-bold text-foreground",children:new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})})]})}),o.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:o.jsx(V,{size:"lg",onClick:Me,disabled:B.isPending||_e,className:"px-8 py-6 text-lg",children:B.isPending||_e?o.jsxs(o.Fragment,{children:[o.jsx(pn,{className:"w-5 h-5 mr-2 animate-spin"}),"Analysing..."]}):o.jsxs(o.Fragment,{children:[o.jsx(cC,{className:"w-5 h-5 mr-2"}),"Analyse Day"]})})})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs(V,{variant:"outline",size:"sm",onClick:()=>window.history.back(),children:[o.jsx(ci,{className:"w-4 h-4 mr-2"}),"Back"]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("h1",{className:"text-xl font-bold text-foreground",children:new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),i||c?o.jsx(me,{variant:"outline",className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",children:"Unsaved changes"}):o.jsx(me,{variant:"outline",className:"bg-green-500/20 text-green-400 border-green-500/30",children:"All Saved"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(V,{variant:"outline",size:"sm",onClick:qe,title:"Previous Day ()",children:o.jsx(ci,{className:"w-4 h-4"})}),o.jsx(V,{variant:"outline",size:"sm",onClick:Ft,title:"Next Day ()",children:o.jsx(Gc,{className:"w-4 h-4"})}),o.jsx("div",{className:"w-px h-6 bg-border"}),o.jsxs(Ol,{children:[o.jsx(Il,{asChild:!0,children:o.jsxs(V,{variant:"outline",size:"sm",disabled:B.isPending||ue.isPending||_e,title:"Re-analyze (R)",children:[o.jsx(pn,{className:`w-4 h-4 mr-2 ${B.isPending||ue.isPending?"animate-spin":""}`}),"Re-analyze",o.jsx(Go,{className:"w-4 h-4 ml-2"})]})}),o.jsxs(Ja,{align:"end",children:[o.jsxs(nr,{onClick:le,disabled:B.isPending||_e,children:[o.jsx(pn,{className:"w-4 h-4 mr-2"}),"Analyse Day"]}),o.jsxs(nr,{onClick:Re,disabled:ue.isPending||!((ke=O==null?void 0:O.analysis)!=null&&ke.topArticleId)||((Te=O==null?void 0:O.analysis)==null?void 0:Te.topArticleId)==="none",children:[o.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Redo Summary"]})]})]})]})]}),A||!(O!=null&&O.analysis)?o.jsx(jt,{className:"relative bg-black/90 border-border",children:o.jsx(on,{className:"p-6",children:o.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:o.jsxs("div",{className:"text-center",children:[o.jsx(nt,{className:"w-8 h-8 animate-spin text-white mx-auto mb-3"}),o.jsx("p",{className:"text-white/80 font-medium",children:"Loading analysis..."})]})})})}):o.jsx(jt,{className:"relative bg-background border-border",children:o.jsxs(on,{className:"p-6",children:[(B.isPending||ue.isPending)&&o.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm rounded-lg flex items-center justify-center z-10",children:o.jsxs("div",{className:"text-center",children:[o.jsx(pn,{className:"w-8 h-8 animate-spin text-white mx-auto mb-3"}),o.jsx("p",{className:"text-foreground font-medium",children:B.isPending?"Regenerating AI Analysis...":"Regenerating Summary..."}),o.jsx("p",{className:"text-muted-foreground text-sm",children:"This may take a few moments"})]})}),o.jsxs("div",{className:"grid grid-cols-2 gap-6 items-start",children:[o.jsxs("div",{className:"relative pr-6 border-r border-border",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:O.analysis.isManualOverride?"Manual Entry":"Summary"}),O.analysis.summary&&o.jsxs(me,{variant:"secondary",className:`font-normal ${(n?s==null?void 0:s.length:($=O.analysis.summary)==null?void 0:$.length)<100||(n?s==null?void 0:s.length:(ae=O.analysis.summary)==null?void 0:ae.length)>110?"!bg-red-500/20 !text-red-400 border-red-500/30":""}`,children:[((n?s==null?void 0:s.length:(fe=O.analysis.summary)==null?void 0:fe.length)||0).toLocaleString()," characters"]}),!O.analysis.isManualOverride&&o.jsxs("div",{className:"flex items-center space-x-1",children:[i&&o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>De.mutate(),disabled:De.isPending,className:"h-8 w-8 p-0 text-muted-foreground hover:bg-accent hover:text-accent-foreground",title:"Save Changes (S)",children:De.isPending?o.jsx(nt,{className:"w-4 h-4 animate-spin"}):o.jsx(tv,{className:"w-4 h-4"})}),o.jsx(V,{variant:"ghost",size:"sm",onClick:wt,className:"h-8 w-8 p-0 text-muted-foreground hover:bg-accent hover:text-accent-foreground",title:n?"Cancel editing":"Edit summary",children:n?o.jsx(On,{className:"w-4 h-4"}):o.jsx(dl,{className:"w-4 h-4"})})]})]}),it.isPending?o.jsxs("div",{className:"flex items-center space-x-3 py-4",children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-foreground font-medium",children:"Generating new summary..."}),o.jsx("p",{className:"text-muted-foreground text-sm",children:"AI is analyzing the selected article"})]})]}):n&&!O.analysis.isManualOverride?o.jsx(lu,{value:s,onChange:I=>Lt(I.target.value),className:"text-base leading-relaxed min-h-[100px] text-foreground bg-background border-input focus-visible:ring-ring",placeholder:"Edit the AI summary..."}):o.jsxs("div",{onMouseUp:xt,className:m?"select-text":"",style:m?{cursor:"text"}:void 0,children:[o.jsx("p",{className:`text-foreground text-base leading-relaxed ${m?"selection:bg-orange-500/40 selection:text-orange-100":""}`,children:O.analysis.summary}),m&&o.jsx("p",{className:"text-xs text-orange-400/70 mt-2 italic",children:"Highlight any text above to create a tag"})]})]}),o.jsxs("div",{className:"flex flex-col pl-6",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[o.jsx("h5",{className:"text-sm font-semibold text-foreground",children:"Tags"}),o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>p(!m),className:`h-6 w-6 p-0 ${m?"text-orange-400 bg-orange-500/20":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"}`,title:m?"Exit tagging mode":"Highlight text to create tags",children:m?o.jsx(On,{className:"w-3.5 h-3.5"}):o.jsx(dl,{className:"w-3.5 h-3.5"})}),o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>g(!0),className:"h-6 w-6 p-0 text-muted-foreground hover:bg-accent hover:text-accent-foreground",title:"Add tag from list",children:o.jsx(zo,{className:"w-3.5 h-3.5"})}),m&&o.jsx("span",{className:"text-xs text-orange-400",children:"Select text in summary to add tags"})]}),O.analysis.tagsVersion2&&O.analysis.tagsVersion2.length>0?o.jsx("div",{className:"flex flex-wrap gap-2",children:O.analysis.tagsVersion2.map((I,ce)=>{const Xe=I.toLowerCase();let ze="miscellaneous";(Xe.includes("bitcoin")||I==="BTC")&&(ze="crypto");const gt=tT(ze),Et=h===I,Kr=Ye.isPending;return o.jsx(me,{variant:"outline",className:`text-xs px-1.5 py-0.5 flex items-center space-x-1 cursor-pointer transition-all ${Et?"bg-red-500/20 text-red-400 border-red-500/30":vl(ze)}`,onMouseEnter:()=>f(I),onMouseLeave:()=>f(null),onClick:()=>!Kr&&Ye.mutate(I),title:Et?"Click to remove tag":void 0,children:Et?o.jsxs(o.Fragment,{children:[o.jsx(On,{className:"w-2.5 h-2.5"}),o.jsx("span",{children:"Delete?"})]}):o.jsxs(o.Fragment,{children:[o.jsx(gt,{className:"w-2.5 h-2.5"}),o.jsx("span",{children:I})]})},`${I}-${ce}`)})}):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No tags applied"})]}),o.jsxs("div",{className:"mt-6",children:[o.jsx("h5",{className:"text-sm font-semibold text-foreground mb-2",children:"More"}),o.jsx(H2,{badge:O.analysis.veriBadge})]})]})]})]})}),((ft=(ve=(be=O==null?void 0:O.analysis)==null?void 0:be.articleTags)==null?void 0:ve.analysisMetadata)==null?void 0:ft.hierarchicalSearch)&&o.jsx(jt,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border-emerald-200",children:o.jsxs(on,{className:"p-6",children:[o.jsx("div",{className:"flex items-start justify-between mb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Yc,{className:"w-5 h-5 text-emerald-600"}),o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Search Strategy"}),o.jsx(me,{variant:"secondary",className:"bg-emerald-100 text-emerald-800",children:(mt=(et=(bt=(ot=O.analysis)==null?void 0:ot.articleTags)==null?void 0:bt.analysisMetadata)==null?void 0:et.hierarchicalSearch)==null?void 0:mt.tierUsed})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[o.jsxs("div",{className:"text-center p-3 bg-white rounded-lg border",children:[o.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:(br=(Mn=(Tt=(Ve=(xe=O.analysis)==null?void 0:xe.articleTags)==null?void 0:Ve.analysisMetadata)==null?void 0:Tt.hierarchicalSearch)==null?void 0:Mn.diagnostics)==null?void 0:br.tier1Results}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Bitcoin Events"})]}),o.jsxs("div",{className:"text-center p-3 bg-white rounded-lg border",children:[o.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:(Ul=(Br=(Ur=(sr=(Hn=O.analysis)==null?void 0:Hn.articleTags)==null?void 0:sr.analysisMetadata)==null?void 0:Ur.hierarchicalSearch)==null?void 0:Br.diagnostics)==null?void 0:Ul.tier2Results}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Crypto & Web3"})]}),o.jsxs("div",{className:"text-center p-3 bg-white rounded-lg border",children:[o.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:(Vl=(Ju=(Kl=(Bl=(eo=O.analysis)==null?void 0:eo.articleTags)==null?void 0:Bl.analysisMetadata)==null?void 0:Kl.hierarchicalSearch)==null?void 0:Ju.diagnostics)==null?void 0:Vl.tier3Results}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Macroeconomics"})]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("span",{className:"text-muted-foreground",children:["Search Path: ",o.jsx("span",{className:"font-medium text-foreground",children:(ne=(K=(q=(P=(ql=O.analysis)==null?void 0:ql.articleTags)==null?void 0:P.analysisMetadata)==null?void 0:q.hierarchicalSearch)==null?void 0:K.searchPath)==null?void 0:ne.join("  ")})]}),((dt=(_t=(Je=(je=(Fe=O.analysis)==null?void 0:Fe.articleTags)==null?void 0:je.analysisMetadata)==null?void 0:Je.hierarchicalSearch)==null?void 0:_t.diagnostics)==null?void 0:dt.fallbackTriggered)&&o.jsx(me,{variant:"outline",className:"text-orange-700 border-orange-300",children:"Fallback Used"})]}),o.jsxs("span",{className:"text-muted-foreground",children:[(Pt=(Ut=(Cn=(zt=O.analysis)==null?void 0:zt.articleTags)==null?void 0:Cn.analysisMetadata)==null?void 0:Ut.hierarchicalSearch)==null?void 0:Pt.totalSearched," total searched"]})]})]})}),((vn=O==null?void 0:O.analysis)==null?void 0:vn.topArticleId)&&!O.analysis.topArticleId.includes("no-news-")&&O.analysis.topArticleId!=="none"&&z.length>0&&!z.find(I=>I.id===O.analysis.topArticleId)&&o.jsx(jt,{className:"border-amber-200 bg-amber-50",children:o.jsx(on,{className:"p-4",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center",children:o.jsx(nv,{className:"w-4 h-4 text-amber-600"})})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-sm font-medium text-amber-800 mb-1",children:"Analysis Based on Older Articles"}),o.jsx("p",{className:"text-sm text-amber-700 mb-3",children:"This analysis was created using different articles than what's currently available. News sources change over time, so the summary and featured article may not match the current articles below."}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(V,{size:"sm",variant:"outline",onClick:le,disabled:B.isPending||_e,className:"text-amber-700 border-amber-300 hover:bg-amber-100",children:B.isPending?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"animate-spin w-3 h-3 border border-amber-600 border-t-transparent rounded-full mr-2"}),"Analysing..."]}):o.jsxs(o.Fragment,{children:[o.jsx(nv,{className:"w-3 h-3 mr-1"}),"Update Analysis"]})}),o.jsx("span",{className:"text-xs text-amber-600",children:"This will analyze the current articles and update the summary."})]})]})]})})}),(X||z.length>0)&&o.jsxs(jt,{className:"bg-background border-border",children:[o.jsx(Us,{className:"bg-background rounded-t-xl pb-2",children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("div",{className:"flex items-center space-x-3",children:o.jsx(Bs,{className:"text-foreground",children:"All Sourced Articles"})})})}),o.jsx(on,{className:"space-y-6 bg-background pt-2",children:X&&G?o.jsxs(mm,{value:T,onValueChange:R,className:"w-full",children:[o.jsxs(qu,{className:"inline-flex h-11 items-center justify-start gap-1 rounded-lg bg-muted/50 p-1 border border-border",children:[o.jsxs(gr,{value:"bitcoin",className:`inline-flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all
                      data-[state=inactive]:text-muted-foreground data-[state=inactive]:hover:text-orange-300 data-[state=inactive]:hover:bg-orange-500/10
                      data-[state=active]:bg-orange-500/20 data-[state=active]:text-orange-300 data-[state=active]:shadow-sm`,children:[o.jsx(Xg,{className:"w-4 h-4"}),o.jsx("span",{children:"Bitcoin"}),o.jsx("span",{className:"ml-1 px-1.5 py-0.5 rounded-full bg-orange-500/30 text-orange-200 text-xs font-semibold",children:((lt=G.bitcoin)==null?void 0:lt.length)||0}),L==="bitcoin"&&o.jsx(Pr,{className:"w-3 h-3 text-orange-400 fill-orange-400"})]}),o.jsxs(gr,{value:"crypto",className:`inline-flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all
                      data-[state=inactive]:text-muted-foreground data-[state=inactive]:hover:text-blue-300 data-[state=inactive]:hover:bg-blue-500/10
                      data-[state=active]:bg-blue-500/20 data-[state=active]:text-blue-300 data-[state=active]:shadow-sm`,children:[o.jsx(Qc,{className:"w-4 h-4"}),o.jsx("span",{children:"Crypto"}),o.jsx("span",{className:"ml-1 px-1.5 py-0.5 rounded-full bg-blue-500/30 text-blue-200 text-xs font-semibold",children:((pt=G.crypto)==null?void 0:pt.length)||0}),L==="crypto"&&o.jsx(Pr,{className:"w-3 h-3 text-blue-400 fill-blue-400"})]}),o.jsxs(gr,{value:"macro",className:`inline-flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all
                      data-[state=inactive]:text-muted-foreground data-[state=inactive]:hover:text-green-300 data-[state=inactive]:hover:bg-green-500/10
                      data-[state=active]:bg-green-500/20 data-[state=active]:text-green-300 data-[state=active]:shadow-sm`,children:[o.jsx(eb,{className:"w-4 h-4"}),o.jsx("span",{children:"Macro"}),o.jsx("span",{className:"ml-1 px-1.5 py-0.5 rounded-full bg-green-500/30 text-green-200 text-xs font-semibold",children:((jr=G.macro)==null?void 0:jr.length)||0}),L==="macro"&&o.jsx(Pr,{className:"w-3 h-3 text-green-400 fill-green-400"})]})]}),o.jsx(os,{value:"bitcoin",className:"mt-6",children:Se(G.bitcoin||[],"bitcoin")}),o.jsx(os,{value:"crypto",className:"mt-6",children:Se(G.crypto||[],"crypto")}),o.jsx(os,{value:"macro",className:"mt-6",children:Se(G.macro||[],"macro")})]}):o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(dC,{className:"w-12 h-12 mx-auto mb-3 text-muted-foreground"}),o.jsx("p",{children:"No tiered article data available for this date."}),o.jsx("p",{className:"text-sm mt-2",children:"Please re-analyze this date to generate tiered article data."})]})})]}),E&&o.jsx(cU,{open:N,onOpenChange:I=>{_(I),I||M(null)},date:e,selectionMode:E.selectionMode,tieredArticles:E.tieredArticles||{bitcoin:[],crypto:[],macro:[]},geminiSelectedIds:E.geminiSelectedIds,perplexitySelectedIds:E.perplexitySelectedIds,intersectionIds:E.intersectionIds,openaiSuggestedId:E.openaiSuggestedId,onConfirm:async I=>{try{const ce=await fetch(`/api/analysis/date/${e}/confirm-selection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({articleId:I,selectionMode:E.selectionMode})});if(!ce.ok){const gt=await ce.json();throw new Error(gt.error||"Failed to confirm selection")}const Xe=await ce.json();J.refetchQueries({queryKey:[`supabase-date-${e}`]});const ze=e==null?void 0:e.substring(0,4);ze&&J.invalidateQueries({queryKey:[`supabase-year-${ze}`]}),J.invalidateQueries({queryKey:["/api/analysis/stats"]}),u(!0),l(!1),ye(!1),Be.current=null,t({title:"Analysis Complete",description:`Summary generated successfully. VeriBadge: ${Xe.veriBadge}`})}catch(ce){throw ce}}},`dialog-${N}-${E.selectionMode}`),o.jsx(en,{open:x,onOpenChange:I=>{g(I),I||(w(""),b(0))},children:o.jsxs(qt,{className:"sm:max-w-md",children:[o.jsxs(Ht,{children:[o.jsx(Wt,{children:"Add Tag"}),o.jsx(Pn,{children:"Search for an existing tag or create a new one"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Yc,{className:"w-4 h-4 text-muted-foreground"}),o.jsx(An,{placeholder:"Search or enter new tag...",value:y,onChange:I=>{w(I.target.value),b(0)},onKeyDown:I=>{I.key==="Enter"&&y.trim()&&(st.mutate(y.trim()),w(""),g(!1))},autoFocus:!0})]}),y.trim()&&!(D!=null&&D.some(I=>I.name.toLowerCase()===y.toLowerCase()))&&o.jsxs(V,{variant:"outline",className:"w-full justify-start text-orange-400 border-orange-500/30 hover:bg-orange-500/10",onClick:()=>{st.mutate(y.trim()),w(""),g(!1)},children:[o.jsx(zo,{className:"w-4 h-4 mr-2"}),'Create "',y.trim(),'"']}),o.jsxs("div",{className:"space-y-1",children:[D==null?void 0:D.slice(v*j,(v+1)*j).map(I=>{var Et,Kr;const ce=(Kr=(Et=O==null?void 0:O.analysis)==null?void 0:Et.tagsVersion2)==null?void 0:Kr.includes(I.name),Xe=I.subcategory_path||I.subcategoryPath||null,ze=RF(Array.isArray(Xe)?Xe:null,I.category),gt=ze?kx(ze):{name:I.category};return o.jsxs(V,{variant:"ghost",className:`w-full justify-start ${ce?"opacity-50":""}`,disabled:ce,onClick:()=>{ce||(st.mutate(I.name),w(""),g(!1))},children:[o.jsx(ss,{className:"w-4 h-4 mr-2 text-muted-foreground"}),o.jsx("span",{children:I.name}),o.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:gt.name}),ce&&o.jsx(Xn,{className:"w-3 h-3 ml-2 text-green-500"})]},`${I.name}-${I.category}`)}),(D==null?void 0:D.length)===0&&y&&o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No existing tags found. Press Enter to create a new tag."})]}),D&&D.length>j&&o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[o.jsxs("span",{className:"text-xs text-muted-foreground",children:[v*j+1,"-",Math.min((v+1)*j,D.length)," of ",D.length]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(V,{variant:"outline",size:"sm",className:"h-7 px-2",disabled:v===0,onClick:()=>b(I=>I-1),children:o.jsx(ci,{className:"w-3 h-3"})}),o.jsx(V,{variant:"outline",size:"sm",className:"h-7 px-2",disabled:(v+1)*j>=D.length,onClick:()=>b(I=>I+1),children:o.jsx(Gc,{className:"w-3 h-3"})})]})]})]})]})})]})}function hU(){const e=Nl(),[t,n]=d.useState(new Set),[r,s]=d.useState(new Set),[a,i]=d.useState(new Set),[l,c]=d.useState(.85),[u,h]=d.useState(""),[f,m]=d.useState(!1),{data:p,isLoading:x,refetch:g}=tt({queryKey:["tags-cleanup-unmatched"],queryFn:async()=>{const D=await fetch("/api/tags-manager/unmatched");if(!D.ok)throw new Error("Failed to fetch unmatched tags");return D.json()}}),{data:y,isLoading:w,refetch:v}=tt({queryKey:["tags-cleanup-merges",l],queryFn:async()=>{const D=await fetch("/api/tags-manager/auto-merge-suggestions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({threshold:l})});if(!D.ok)throw new Error("Failed to fetch merge suggestions");return D.json()},enabled:!1}),{data:b,isLoading:j,refetch:S}=tt({queryKey:["tags-cleanup-categorizations"],queryFn:async()=>{const D=await fetch("/api/tags-manager/bulk-categorize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!D.ok)throw new Error("Failed to fetch categorizations");return D.json()},enabled:!1}),C=at({mutationFn:async D=>{const B=await fetch("/api/tags-manager/bulk-apply",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(!B.ok){const ue=await B.json();throw new Error(ue.error||"Failed to apply changes")}return B.json()},onSuccess:D=>{Wg({title:"Changes Applied",description:`Successfully updated ${D.updated} analyses`}),n(new Set),s(new Set),i(new Set),m(!1),e.invalidateQueries({queryKey:["tags-cleanup"]}),e.invalidateQueries({queryKey:["tags-manager-stats"]}),e.invalidateQueries({queryKey:["supabase-tags-catalog"]}),g(),v(),S()},onError:D=>{Wg({title:"Error",description:D.message,variant:"destructive"})}}),N=()=>{v()},_=()=>{S()},E=()=>{const D=(y==null?void 0:y.suggestions.filter((_e,ye)=>t.has(ye)))||[],B=(b==null?void 0:b.categorized.filter((_e,ye)=>r.has(ye)))||[],ue=(p==null?void 0:p.unmatched.filter((_e,ye)=>a.has(ye)).map(_e=>({name:_e.name,category:_e.category,usageCount:_e.usageCount})))||[];C.mutate({merges:D,categorizations:B,addToMetadata:ue})},M=D=>{const B=new Set(t);B.has(D)?B.delete(D):B.add(D),n(B)},T=D=>{const B=new Set(r);B.has(D)?B.delete(D):B.add(D),s(B)},R=D=>{const B=new Set(a);B.has(D)?B.delete(D):B.add(D),i(B)},W=()=>{y!=null&&y.suggestions&&(t.size===y.suggestions.length?n(new Set):n(new Set(y.suggestions.map((D,B)=>B))))},Q=()=>{b!=null&&b.categorized&&(r.size===b.categorized.length?s(new Set):s(new Set(b.categorized.map((D,B)=>B))))},he=(p==null?void 0:p.unmatched.filter(D=>D.name.toLowerCase().includes(u.toLowerCase())||D.category.toLowerCase().includes(u.toLowerCase())))||[],Y=(y==null?void 0:y.suggestions.filter(D=>D.source.name.toLowerCase().includes(u.toLowerCase())||D.target.name.toLowerCase().includes(u.toLowerCase())))||[],O=(b==null?void 0:b.categorized.filter(D=>D.name.toLowerCase().includes(u.toLowerCase())||D.oldCategory.toLowerCase().includes(u.toLowerCase())||D.newCategory.toLowerCase().includes(u.toLowerCase())))||[],A=t.size+r.size+a.size,U=A>0&&!C.isPending;return o.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-2",children:[o.jsx(lr,{className:"w-8 h-8 text-blue-600"}),"Tag Cleanup Tool"]}),o.jsx("p",{className:"text-slate-600 mt-1",children:"Auto-merge suggestions, bulk categorize, and fix ~300 unmatched tags"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(V,{onClick:()=>{g(),v(),S()},variant:"outline",disabled:x||w||j,children:[o.jsx(pn,{className:`w-4 h-4 mr-2 ${x||w||j?"animate-spin":""}`}),"Refresh"]}),U&&o.jsxs(V,{onClick:()=>m(!0),disabled:C.isPending,children:[o.jsx(Zw,{className:"w-4 h-4 mr-2"}),"Apply ",A," Changes"]})]})]}),p&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsxs(jt,{className:"p-4",children:[o.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Unmatched Tags"}),o.jsx("div",{className:"text-2xl font-bold text-slate-900",children:p.total}),o.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[p.totalUsage," occurrences"]})]}),o.jsxs(jt,{className:"p-4",children:[o.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Merge Suggestions"}),o.jsx("div",{className:"text-2xl font-bold text-slate-900",children:(y==null?void 0:y.total)||0}),o.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[(y==null?void 0:y.totalUsage)||0," occurrences"]})]}),o.jsxs(jt,{className:"p-4",children:[o.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Categorizations"}),o.jsx("div",{className:"text-2xl font-bold text-slate-900",children:(b==null?void 0:b.total)||0}),o.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[(b==null?void 0:b.totalUsage)||0," occurrences"]})]})]})]}),o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(Yc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),o.jsx(An,{type:"text",placeholder:"Search tags...",value:u,onChange:D=>h(D.target.value),className:"pl-10"})]})}),o.jsxs(mm,{defaultValue:"unmatched",className:"space-y-4",children:[o.jsxs(qu,{children:[o.jsxs(gr,{value:"unmatched",children:["Unmatched Tags",p&&p.total>0&&o.jsx(me,{variant:"secondary",className:"ml-2",children:p.total})]}),o.jsxs(gr,{value:"merges",children:["Auto-Merge",y&&y.total>0&&o.jsx(me,{variant:"secondary",className:"ml-2",children:y.total})]}),o.jsxs(gr,{value:"categorize",children:["Bulk Categorize",b&&b.total>0&&o.jsx(me,{variant:"secondary",className:"ml-2",children:b.total})]})]}),o.jsx(os,{value:"unmatched",className:"space-y-4",children:o.jsxs(jt,{children:[o.jsx("div",{className:"p-4 border-b",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Unmatched Tags"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ts,{htmlFor:"select-all-unmatched",className:"text-sm cursor-pointer",children:"Select All"}),o.jsx(es,{id:"select-all-unmatched",checked:p&&a.size===he.length&&he.length>0,onCheckedChange:D=>{i(D?new Set(he.map((B,ue)=>ue)):new Set)}})]})]})}),x?o.jsxs("div",{className:"p-12 text-center",children:[o.jsx(nt,{className:"w-8 h-8 text-blue-600 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-slate-600",children:"Loading unmatched tags..."})]}):he.length===0?o.jsxs("div",{className:"p-12 text-center",children:[o.jsx(Zw,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"All Tags Matched!"}),o.jsx("p",{className:"text-slate-500",children:"No unmatched tags found."})]}):o.jsxs(ka,{children:[o.jsx(Ta,{children:o.jsxs(ur,{children:[o.jsx(vt,{className:"w-12"}),o.jsx(vt,{children:"Tag Name"}),o.jsx(vt,{children:"Category"}),o.jsx(vt,{className:"text-right",children:"Usage Count"}),o.jsx(vt,{children:"Suggestions"})]})}),o.jsx(Ra,{children:he.map((D,B)=>o.jsxs(ur,{children:[o.jsx(yt,{children:o.jsx(es,{checked:a.has(B),onCheckedChange:()=>R(B)})}),o.jsx(yt,{className:"font-medium",children:D.name}),o.jsx(yt,{children:o.jsx(me,{variant:"outline",children:D.category})}),o.jsx(yt,{className:"text-right",children:D.usageCount}),o.jsx(yt,{children:D.suggestedMatches&&D.suggestedMatches.length>0?o.jsx("div",{className:"flex flex-wrap gap-1",children:D.suggestedMatches.slice(0,3).map((ue,_e)=>o.jsxs(me,{variant:"secondary",className:"text-xs",children:[ue.name," (",Math.round(ue.similarity*100),"%)"]},_e))}):o.jsx("span",{className:"text-slate-400 text-sm",children:"No suggestions"})})]},`${D.name}-${D.category}`))})]})]})}),o.jsx(os,{value:"merges",className:"space-y-4",children:o.jsxs(jt,{children:[o.jsx("div",{className:"p-4 border-b",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Auto-Merge Suggestions"}),o.jsx("p",{className:"text-sm text-slate-600 mt-1",children:'High-confidence matches (e.g., "Obama"  "Barack Obama")'})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ts,{htmlFor:"threshold",className:"text-sm",children:"Threshold:"}),o.jsx(An,{id:"threshold",type:"number",min:"0",max:"1",step:"0.05",value:l,onChange:D=>c(parseFloat(D.target.value)),className:"w-20"})]}),o.jsxs(V,{onClick:N,disabled:w,children:[o.jsx(lr,{className:"w-4 h-4 mr-2"}),"Generate"]}),y&&y.suggestions.length>0&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ts,{htmlFor:"select-all-merges",className:"text-sm cursor-pointer",children:"Select All"}),o.jsx(es,{id:"select-all-merges",checked:t.size===Y.length&&Y.length>0,onCheckedChange:W})]})]})]})}),w?o.jsxs("div",{className:"p-12 text-center",children:[o.jsx(nt,{className:"w-8 h-8 text-blue-600 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-slate-600",children:"Generating merge suggestions..."})]}):!y||Y.length===0?o.jsxs("div",{className:"p-12 text-center",children:[o.jsx(Gs,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"No Merge Suggestions"}),o.jsx("p",{className:"text-slate-500 mb-4",children:'Click "Generate" to find high-confidence merge candidates.'}),o.jsxs(V,{onClick:N,children:[o.jsx(lr,{className:"w-4 h-4 mr-2"}),"Generate Suggestions"]})]}):o.jsxs(ka,{children:[o.jsx(Ta,{children:o.jsxs(ur,{children:[o.jsx(vt,{className:"w-12"}),o.jsx(vt,{children:"Source Tag"}),o.jsx(vt,{className:"w-8"}),o.jsx(vt,{children:"Target Tag"}),o.jsx(vt,{className:"text-right",children:"Confidence"}),o.jsx(vt,{className:"text-right",children:"Usage"})]})}),o.jsx(Ra,{children:Y.map((D,B)=>o.jsxs(ur,{children:[o.jsx(yt,{children:o.jsx(es,{checked:t.has(B),onCheckedChange:()=>M(B)})}),o.jsx(yt,{children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:D.source.name}),o.jsx(me,{variant:"outline",className:"text-xs mt-1",children:D.source.category})]})}),o.jsx(yt,{children:o.jsx(Gc,{className:"w-4 h-4 text-slate-400"})}),o.jsx(yt,{children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:D.target.name}),o.jsx(me,{variant:"outline",className:"text-xs mt-1",children:D.target.category})]})}),o.jsx(yt,{className:"text-right",children:o.jsxs(me,{variant:D.confidence>=.9?"default":"secondary",children:[Math.round(D.confidence*100),"%"]})}),o.jsx(yt,{className:"text-right",children:D.usageCount})]},`${D.source.name}-${D.target.name}`))})]})]})}),o.jsx(os,{value:"categorize",className:"space-y-4",children:o.jsxs(jt,{children:[o.jsx("div",{className:"p-4 border-b",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Bulk Categorization"}),o.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Automatically categorize obvious tags (countries, people, companies, crypto)"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(V,{onClick:_,disabled:j,children:[o.jsx(tb,{className:"w-4 h-4 mr-2"}),"Generate"]}),b&&b.categorized.length>0&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ts,{htmlFor:"select-all-cats",className:"text-sm cursor-pointer",children:"Select All"}),o.jsx(es,{id:"select-all-cats",checked:r.size===O.length&&O.length>0,onCheckedChange:Q})]})]})]})}),j?o.jsxs("div",{className:"p-12 text-center",children:[o.jsx(nt,{className:"w-8 h-8 text-blue-600 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-slate-600",children:"Generating categorizations..."})]}):!b||O.length===0?o.jsxs("div",{className:"p-12 text-center",children:[o.jsx(Gs,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"No Categorizations"}),o.jsx("p",{className:"text-slate-500 mb-4",children:'Click "Generate" to find tags that need recategorization.'}),o.jsxs(V,{onClick:_,children:[o.jsx(tb,{className:"w-4 h-4 mr-2"}),"Generate Categorizations"]})]}):o.jsxs(ka,{children:[o.jsx(Ta,{children:o.jsxs(ur,{children:[o.jsx(vt,{className:"w-12"}),o.jsx(vt,{children:"Tag Name"}),o.jsx(vt,{children:"Old Category"}),o.jsx(vt,{className:"w-8"}),o.jsx(vt,{children:"New Category"}),o.jsx(vt,{className:"text-right",children:"Usage"})]})}),o.jsx(Ra,{children:O.map((D,B)=>o.jsxs(ur,{children:[o.jsx(yt,{children:o.jsx(es,{checked:r.has(B),onCheckedChange:()=>T(B)})}),o.jsx(yt,{className:"font-medium",children:D.name}),o.jsx(yt,{children:o.jsx(me,{variant:"outline",children:D.oldCategory})}),o.jsx(yt,{children:o.jsx(Gc,{className:"w-4 h-4 text-slate-400"})}),o.jsx(yt,{children:o.jsx(me,{children:D.newCategory})}),o.jsx(yt,{className:"text-right",children:D.usageCount})]},`${D.name}-${D.oldCategory}-${D.newCategory}`))})]})]})})]}),o.jsx(Wx,{open:f,onOpenChange:m,children:o.jsxs(am,{children:[o.jsxs(im,{children:[o.jsx(cm,{children:"Apply Changes?"}),o.jsxs(um,{children:["You are about to apply:",o.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[t.size>0&&o.jsxs("li",{children:[t.size," merge(s)"]}),r.size>0&&o.jsxs("li",{children:[r.size," categorization(s)"]}),a.size>0&&o.jsxs("li",{children:[a.size," tag(s) added to metadata"]})]}),o.jsx("p",{className:"mt-2 font-medium",children:"This action cannot be undone."})]})]}),o.jsxs(lm,{children:[o.jsx(hm,{children:"Cancel"}),o.jsx(dm,{onClick:E,disabled:C.isPending,children:C.isPending?o.jsxs(o.Fragment,{children:[o.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}),"Applying..."]}):"Apply Changes"})]})]})})]})}function fU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const vm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ll(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Yx(e){return"nodeType"in e}function qn(e){var t,n;return e?Ll(e)?e:Yx(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Jx(e){const{Document:t}=qn(e);return e instanceof t}function Hu(e){return Ll(e)?!1:e instanceof qn(e).HTMLElement}function W2(e){return e instanceof qn(e).SVGElement}function Fl(e){return e?Ll(e)?e.document:Yx(e)?Jx(e)?e:Hu(e)||W2(e)?e.ownerDocument:document:document:document}const cs=vm?d.useLayoutEffect:d.useEffect;function ym(e){const t=d.useRef(e);return cs(()=>{t.current=e}),d.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function mU(){const e=d.useRef(null),t=d.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=d.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function cu(e,t){t===void 0&&(t=[e]);const n=d.useRef(e);return cs(()=>{n.current!==e&&(n.current=e)},t),n}function Wu(e,t){const n=d.useRef();return d.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Xh(e){const t=ym(e),n=d.useRef(null),r=d.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function Zh(e){const t=d.useRef();return d.useEffect(()=>{t.current=e},[e]),t.current}let Ep={};function Gu(e,t){return d.useMemo(()=>{if(t)return t;const n=Ep[e]==null?0:Ep[e]+1;return Ep[e]=n,e+"-"+n},[e,t])}function G2(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((a,i)=>{const l=Object.entries(i);for(const[c,u]of l){const h=a[c];h!=null&&(a[c]=h+e*u)}return a},{...t})}}const Fi=G2(1),uu=G2(-1);function pU(e){return"clientX"in e&&"clientY"in e}function xm(e){if(!e)return!1;const{KeyboardEvent:t}=qn(e.target);return t&&e instanceof t}function gU(e){if(!e)return!1;const{TouchEvent:t}=qn(e.target);return t&&e instanceof t}function ef(e){if(gU(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return pU(e)?{x:e.clientX,y:e.clientY}:null}const Ko=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Ko.Translate.toString(e),Ko.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),oj="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function vU(e){return e.matches(oj)?e:e.querySelector(oj)}const yU={display:"none"};function xU(e){let{id:t,value:n}=e;return Pe.createElement("div",{id:t,style:yU},n)}function wU(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Pe.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function bU(){const[e,t]=d.useState("");return{announce:d.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Q2=d.createContext(null);function jU(e){const t=d.useContext(Q2);d.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function SU(){const[e]=d.useState(()=>new Set),t=d.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[d.useCallback(r=>{let{type:s,event:a}=r;e.forEach(i=>{var l;return(l=i[s])==null?void 0:l.call(i,a)})},[e]),t]}const NU={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},CU={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function _U(e){let{announcements:t=CU,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=NU}=e;const{announce:a,announcement:i}=bU(),l=Gu("DndLiveRegion"),[c,u]=d.useState(!1);if(d.useEffect(()=>{u(!0)},[]),jU(d.useMemo(()=>({onDragStart(f){let{active:m}=f;a(t.onDragStart({active:m}))},onDragMove(f){let{active:m,over:p}=f;t.onDragMove&&a(t.onDragMove({active:m,over:p}))},onDragOver(f){let{active:m,over:p}=f;a(t.onDragOver({active:m,over:p}))},onDragEnd(f){let{active:m,over:p}=f;a(t.onDragEnd({active:m,over:p}))},onDragCancel(f){let{active:m,over:p}=f;a(t.onDragCancel({active:m,over:p}))}}),[a,t])),!c)return null;const h=Pe.createElement(Pe.Fragment,null,Pe.createElement(xU,{id:r,value:s.draggable}),Pe.createElement(wU,{id:l,announcement:i}));return n?Ir.createPortal(h,n):h}var un;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(un||(un={}));function tf(){}function aj(e,t){return d.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function EU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const us=Object.freeze({x:0,y:0});function Y2(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function kU(e,t){const n=ef(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function J2(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function TU(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function ij(e){let{left:t,top:n,height:r,width:s}=e;return[{x:t,y:n},{x:t+s,y:n},{x:t,y:n+r},{x:t+s,y:n+r}]}function X2(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function lj(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const RU=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=lj(t,t.left,t.top),a=[];for(const i of r){const{id:l}=i,c=n.get(l);if(c){const u=Y2(lj(c),s);a.push({id:l,data:{droppableContainer:i,value:u}})}}return a.sort(J2)},PU=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=ij(t),a=[];for(const i of r){const{id:l}=i,c=n.get(l);if(c){const u=ij(c),h=s.reduce((m,p,x)=>m+Y2(u[x],p),0),f=Number((h/4).toFixed(4));a.push({id:l,data:{droppableContainer:i,value:f}})}}return a.sort(J2)};function AU(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),i=s-r,l=a-n;if(r<s&&n<a){const c=t.width*t.height,u=e.width*e.height,h=i*l,f=h/(c+u-h);return Number(f.toFixed(4))}return 0}const OU=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const a of r){const{id:i}=a,l=n.get(i);if(l){const c=AU(l,t);c>0&&s.push({id:i,data:{droppableContainer:a,value:c}})}}return s.sort(TU)};function IU(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Z2(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:us}function MU(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return s.reduce((i,l)=>({...i,top:i.top+e*l.y,bottom:i.bottom+e*l.y,left:i.left+e*l.x,right:i.right+e*l.x}),{...n})}}const DU=MU(1);function eR(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function $U(e,t,n){const r=eR(t);if(!r)return e;const{scaleX:s,scaleY:a,x:i,y:l}=r,c=e.left-i-(1-s)*parseFloat(n),u=e.top-l-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?e.width/s:e.width,f=a?e.height/a:e.height;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c}}const LU={ignoreTransform:!1};function zl(e,t){t===void 0&&(t=LU);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:h}=qn(e).getComputedStyle(e);u&&(n=$U(n,u,h))}const{top:r,left:s,width:a,height:i,bottom:l,right:c}=n;return{top:r,left:s,width:a,height:i,bottom:l,right:c}}function cj(e){return zl(e,{ignoreTransform:!0})}function FU(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function zU(e,t){return t===void 0&&(t=qn(e).getComputedStyle(e)),t.position==="fixed"}function UU(e,t){t===void 0&&(t=qn(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const a=t[s];return typeof a=="string"?n.test(a):!1})}function wm(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(Jx(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Hu(s)||W2(s)||n.includes(s))return n;const a=qn(e).getComputedStyle(s);return s!==e&&UU(s,a)&&n.push(s),zU(s,a)?n:r(s.parentNode)}return e?r(e):n}function tR(e){const[t]=wm(e,1);return t??null}function kp(e){return!vm||!e?null:Ll(e)?e:Yx(e)?Jx(e)||e===Fl(e).scrollingElement?window:Hu(e)?e:null:null}function nR(e){return Ll(e)?e.scrollX:e.scrollLeft}function rR(e){return Ll(e)?e.scrollY:e.scrollTop}function Ov(e){return{x:nR(e),y:rR(e)}}var mn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(mn||(mn={}));function sR(e){return!vm||!e?!1:e===document.scrollingElement}function oR(e){const t={x:0,y:0},n=sR(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:s,isLeft:a,isBottom:i,isRight:l,maxScroll:r,minScroll:t}}const BU={x:.2,y:.2};function KU(e,t,n,r,s){let{top:a,left:i,right:l,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=BU);const{isTop:u,isBottom:h,isLeft:f,isRight:m}=oR(e),p={x:0,y:0},x={x:0,y:0},g={height:t.height*s.y,width:t.width*s.x};return!u&&a<=t.top+g.height?(p.y=mn.Backward,x.y=r*Math.abs((t.top+g.height-a)/g.height)):!h&&c>=t.bottom-g.height&&(p.y=mn.Forward,x.y=r*Math.abs((t.bottom-g.height-c)/g.height)),!m&&l>=t.right-g.width?(p.x=mn.Forward,x.x=r*Math.abs((t.right-g.width-l)/g.width)):!f&&i<=t.left+g.width&&(p.x=mn.Backward,x.x=r*Math.abs((t.left+g.width-i)/g.width)),{direction:p,speed:x}}function VU(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:i}=window;return{top:0,left:0,right:a,bottom:i,width:a,height:i}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function aR(e){return e.reduce((t,n)=>Fi(t,Ov(n)),us)}function qU(e){return e.reduce((t,n)=>t+nR(n),0)}function HU(e){return e.reduce((t,n)=>t+rR(n),0)}function iR(e,t){if(t===void 0&&(t=zl),!e)return;const{top:n,left:r,bottom:s,right:a}=t(e);tR(e)&&(s<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const WU=[["x",["left","right"],qU],["y",["top","bottom"],HU]];class Xx{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=wm(n),s=aR(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,i,l]of WU)for(const c of i)Object.defineProperty(this,c,{get:()=>{const u=l(r),h=s[a]-u;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Cc{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function GU(e){const{EventTarget:t}=qn(e);return e instanceof t?e:Fl(e)}function Tp(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Er;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Er||(Er={}));function uj(e){e.preventDefault()}function QU(e){e.stopPropagation()}var ut;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(ut||(ut={}));const lR={start:[ut.Space,ut.Enter],cancel:[ut.Esc],end:[ut.Space,ut.Enter,ut.Tab]},YU=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case ut.Right:return{...n,x:n.x+25};case ut.Left:return{...n,x:n.x-25};case ut.Down:return{...n,y:n.y+25};case ut.Up:return{...n,y:n.y-25}}};class Zx{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Cc(Fl(n)),this.windowListeners=new Cc(qn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Er.Resize,this.handleCancel),this.windowListeners.add(Er.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Er.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&iR(r),n(us)}handleKeyDown(t){if(xm(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:a=lR,coordinateGetter:i=YU,scrollBehavior:l="smooth"}=s,{code:c}=t;if(a.end.includes(c)){this.handleEnd(t);return}if(a.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:us;this.referenceCoordinates||(this.referenceCoordinates=h);const f=i(t,{active:n,context:r.current,currentCoordinates:h});if(f){const m=uu(f,h),p={x:0,y:0},{scrollableAncestors:x}=r.current;for(const g of x){const y=t.code,{isTop:w,isRight:v,isLeft:b,isBottom:j,maxScroll:S,minScroll:C}=oR(g),N=VU(g),_={x:Math.min(y===ut.Right?N.right-N.width/2:N.right,Math.max(y===ut.Right?N.left:N.left+N.width/2,f.x)),y:Math.min(y===ut.Down?N.bottom-N.height/2:N.bottom,Math.max(y===ut.Down?N.top:N.top+N.height/2,f.y))},E=y===ut.Right&&!v||y===ut.Left&&!b,M=y===ut.Down&&!j||y===ut.Up&&!w;if(E&&_.x!==f.x){const T=g.scrollLeft+m.x,R=y===ut.Right&&T<=S.x||y===ut.Left&&T>=C.x;if(R&&!m.y){g.scrollTo({left:T,behavior:l});return}R?p.x=g.scrollLeft-T:p.x=y===ut.Right?g.scrollLeft-S.x:g.scrollLeft-C.x,p.x&&g.scrollBy({left:-p.x,behavior:l});break}else if(M&&_.y!==f.y){const T=g.scrollTop+m.y,R=y===ut.Down&&T<=S.y||y===ut.Up&&T>=C.y;if(R&&!m.x){g.scrollTo({top:T,behavior:l});return}R?p.y=g.scrollTop-T:p.y=y===ut.Down?g.scrollTop-S.y:g.scrollTop-C.y,p.y&&g.scrollBy({top:-p.y,behavior:l});break}}this.handleMove(t,Fi(uu(f,this.referenceCoordinates),p))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Zx.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=lR,onActivation:s}=t,{active:a}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const l=a.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function dj(e){return!!(e&&"distance"in e)}function hj(e){return!!(e&&"delay"in e)}class e0{constructor(t,n,r){var s;r===void 0&&(r=GU(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:i}=a;this.props=t,this.events=n,this.document=Fl(i),this.documentListeners=new Cc(this.document),this.listeners=new Cc(r),this.windowListeners=new Cc(qn(i)),this.initialCoordinates=(s=ef(a))!=null?s:us,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Er.Resize,this.handleCancel),this.windowListeners.add(Er.DragStart,uj),this.windowListeners.add(Er.VisibilityChange,this.handleCancel),this.windowListeners.add(Er.ContextMenu,uj),this.documentListeners.add(Er.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(hj(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(dj(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Er.Click,QU,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Er.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:a}=this,{onMove:i,options:{activationConstraint:l}}=a;if(!s)return;const c=(n=ef(t))!=null?n:us,u=uu(s,c);if(!r&&l){if(dj(l)){if(l.tolerance!=null&&Tp(u,l.tolerance))return this.handleCancel();if(Tp(u,l.distance))return this.handleStart()}if(hj(l)&&Tp(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}t.cancelable&&t.preventDefault(),i(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===ut.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const JU={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class t0 extends e0{constructor(t){const{event:n}=t,r=Fl(n.target);super(t,JU,r)}}t0.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const XU={move:{name:"mousemove"},end:{name:"mouseup"}};var Iv;(function(e){e[e.RightClick=2]="RightClick"})(Iv||(Iv={}));class ZU extends e0{constructor(t){super(t,XU,Fl(t.event.target))}}ZU.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Iv.RightClick?!1:(r==null||r({event:n}),!0)}}];const Rp={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class eB extends e0{constructor(t){super(t,Rp)}static setup(){return window.addEventListener(Rp.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Rp.move.name,t)};function t(){}}}eB.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var _c;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(_c||(_c={}));var nf;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(nf||(nf={}));function tB(e){let{acceleration:t,activator:n=_c.Pointer,canScroll:r,draggingRect:s,enabled:a,interval:i=5,order:l=nf.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:h,delta:f,threshold:m}=e;const p=rB({delta:f,disabled:!a}),[x,g]=mU(),y=d.useRef({x:0,y:0}),w=d.useRef({x:0,y:0}),v=d.useMemo(()=>{switch(n){case _c.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case _c.DraggableRect:return s}},[n,s,c]),b=d.useRef(null),j=d.useCallback(()=>{const C=b.current;if(!C)return;const N=y.current.x*w.current.x,_=y.current.y*w.current.y;C.scrollBy(N,_)},[]),S=d.useMemo(()=>l===nf.TreeOrder?[...u].reverse():u,[l,u]);d.useEffect(()=>{if(!a||!u.length||!v){g();return}for(const C of S){if((r==null?void 0:r(C))===!1)continue;const N=u.indexOf(C),_=h[N];if(!_)continue;const{direction:E,speed:M}=KU(C,_,v,t,m);for(const T of["x","y"])p[T][E[T]]||(M[T]=0,E[T]=0);if(M.x>0||M.y>0){g(),b.current=C,x(j,i),y.current=M,w.current=E;return}}y.current={x:0,y:0},w.current={x:0,y:0},g()},[t,j,r,g,a,i,JSON.stringify(v),JSON.stringify(p),x,u,S,h,JSON.stringify(m)])}const nB={x:{[mn.Backward]:!1,[mn.Forward]:!1},y:{[mn.Backward]:!1,[mn.Forward]:!1}};function rB(e){let{delta:t,disabled:n}=e;const r=Zh(t);return Wu(s=>{if(n||!r||!s)return nB;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[mn.Backward]:s.x[mn.Backward]||a.x===-1,[mn.Forward]:s.x[mn.Forward]||a.x===1},y:{[mn.Backward]:s.y[mn.Backward]||a.y===-1,[mn.Forward]:s.y[mn.Forward]||a.y===1}}},[n,t,r])}function sB(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Wu(s=>{var a;return t==null?null:(a=r??s)!=null?a:null},[r,t])}function oB(e,t){return d.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,a=s.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...a]},[]),[e,t])}var du;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(du||(du={}));var Mv;(function(e){e.Optimized="optimized"})(Mv||(Mv={}));const fj=new Map;function aB(e,t){let{dragging:n,dependencies:r,config:s}=t;const[a,i]=d.useState(null),{frequency:l,measure:c,strategy:u}=s,h=d.useRef(e),f=y(),m=cu(f),p=d.useCallback(function(w){w===void 0&&(w=[]),!m.current&&i(v=>v===null?w:v.concat(w.filter(b=>!v.includes(b))))},[m]),x=d.useRef(null),g=Wu(w=>{if(f&&!n)return fj;if(!w||w===fj||h.current!==e||a!=null){const v=new Map;for(let b of e){if(!b)continue;if(a&&a.length>0&&!a.includes(b.id)&&b.rect.current){v.set(b.id,b.rect.current);continue}const j=b.node.current,S=j?new Xx(c(j),j):null;b.rect.current=S,S&&v.set(b.id,S)}return v}return w},[e,a,n,f,c]);return d.useEffect(()=>{h.current=e},[e]),d.useEffect(()=>{f||p()},[n,f]),d.useEffect(()=>{a&&a.length>0&&i(null)},[JSON.stringify(a)]),d.useEffect(()=>{f||typeof l!="number"||x.current!==null||(x.current=setTimeout(()=>{p(),x.current=null},l))},[l,f,p,...r]),{droppableRects:g,measureDroppableContainers:p,measuringScheduled:a!=null};function y(){switch(u){case du.Always:return!1;case du.BeforeDragging:return n;default:return!n}}}function n0(e,t){return Wu(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function iB(e,t){return n0(e,t)}function lB(e){let{callback:t,disabled:n}=e;const r=ym(t),s=d.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return d.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function bm(e){let{callback:t,disabled:n}=e;const r=ym(t),s=d.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return d.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function cB(e){return new Xx(zl(e),e)}function mj(e,t,n){t===void 0&&(t=cB);const[r,s]=d.useState(null);function a(){s(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c??n)!=null?u:null}const h=t(e);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const i=lB({callback(c){if(e)for(const u of c){const{type:h,target:f}=u;if(h==="childList"&&f instanceof HTMLElement&&f.contains(e)){a();break}}}}),l=bm({callback:a});return cs(()=>{a(),e?(l==null||l.observe(e),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),i==null||i.disconnect())},[e]),r}function uB(e){const t=n0(e);return Z2(e,t)}const pj=[];function dB(e){const t=d.useRef(e),n=Wu(r=>e?r&&r!==pj&&e&&t.current&&e.parentNode===t.current.parentNode?r:wm(e):pj,[e]);return d.useEffect(()=>{t.current=e},[e]),n}function hB(e){const[t,n]=d.useState(null),r=d.useRef(e),s=d.useCallback(a=>{const i=kp(a.target);i&&n(l=>l?(l.set(i,Ov(i)),new Map(l)):null)},[]);return d.useEffect(()=>{const a=r.current;if(e!==a){i(a);const l=e.map(c=>{const u=kp(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,Ov(u)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=e}return()=>{i(e),i(a)};function i(l){l.forEach(c=>{const u=kp(c);u==null||u.removeEventListener("scroll",s)})}},[s,e]),d.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,i)=>Fi(a,i),us):aR(e):us,[e,t])}function gj(e,t){t===void 0&&(t=[]);const n=d.useRef(null);return d.useEffect(()=>{n.current=null},t),d.useEffect(()=>{const r=e!==us;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?uu(e,n.current):us}function fB(e){d.useEffect(()=>{if(!vm)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function mB(e,t){return d.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:a}=r;return n[s]=i=>{a(i,t)},n},{}),[e,t])}function cR(e){return d.useMemo(()=>e?FU(e):null,[e])}const vj=[];function pB(e,t){t===void 0&&(t=zl);const[n]=e,r=cR(n?qn(n):null),[s,a]=d.useState(vj);function i(){a(()=>e.length?e.map(c=>sR(c)?r:new Xx(t(c),c)):vj)}const l=bm({callback:i});return cs(()=>{l==null||l.disconnect(),i(),e.forEach(c=>l==null?void 0:l.observe(c))},[e]),s}function uR(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Hu(t)?t:e}function gB(e){let{measure:t}=e;const[n,r]=d.useState(null),s=d.useCallback(u=>{for(const{target:h}of u)if(Hu(h)){r(f=>{const m=t(h);return f?{...f,width:m.width,height:m.height}:m});break}},[t]),a=bm({callback:s}),i=d.useCallback(u=>{const h=uR(u);a==null||a.disconnect(),h&&(a==null||a.observe(h)),r(h?t(h):null)},[t,a]),[l,c]=Xh(i);return d.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const vB=[{sensor:t0,options:{}},{sensor:Zx,options:{}}],yB={current:{}},rh={draggable:{measure:cj},droppable:{measure:cj,strategy:du.WhileDragging,frequency:Mv.Optimized},dragOverlay:{measure:zl}};class Ec extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const xB={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ec,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:tf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:rh,measureDroppableContainers:tf,windowRect:null,measuringScheduled:!1},dR={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:tf,draggableNodes:new Map,over:null,measureDroppableContainers:tf},Qu=d.createContext(dR),hR=d.createContext(xB);function wB(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ec}}}function bB(e,t){switch(t.type){case un.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case un.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case un.DragEnd:case un.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case un.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Ec(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case un.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new Ec(e.droppable.containers);return i.set(n,{...a,disabled:s}),{...e,droppable:{...e.droppable,containers:i}}}case un.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const a=new Ec(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function jB(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=d.useContext(Qu),a=Zh(r),i=Zh(n==null?void 0:n.id);return d.useEffect(()=>{if(!t&&!r&&a&&i!=null){if(!xm(a)||document.activeElement===a.target)return;const l=s.get(i);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[c.current,u.current]){if(!h)continue;const f=vU(h);if(f){f.focus();break}}})}},[r,t,s,i,a]),null}function fR(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,a)=>a({transform:s,...r}),n):n}function SB(e){return d.useMemo(()=>({draggable:{...rh.draggable,...e==null?void 0:e.draggable},droppable:{...rh.droppable,...e==null?void 0:e.droppable},dragOverlay:{...rh.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function NB(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const a=d.useRef(!1),{x:i,y:l}=typeof s=="boolean"?{x:s,y:s}:s;cs(()=>{if(!i&&!l||!t){a.current=!1;return}if(a.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const h=n(u),f=Z2(h,r);if(i||(f.x=0),l||(f.y=0),a.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const m=tR(u);m&&m.scrollBy({top:f.y,left:f.x})}},[t,i,l,r,n])}const jm=d.createContext({...us,scaleX:1,scaleY:1});var co;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(co||(co={}));const CB=d.memo(function(t){var n,r,s,a;let{id:i,accessibility:l,autoScroll:c=!0,children:u,sensors:h=vB,collisionDetection:f=OU,measuring:m,modifiers:p,...x}=t;const g=d.useReducer(bB,void 0,wB),[y,w]=g,[v,b]=SU(),[j,S]=d.useState(co.Uninitialized),C=j===co.Initialized,{draggable:{active:N,nodes:_,translate:E},droppable:{containers:M}}=y,T=N!=null?_.get(N):null,R=d.useRef({initial:null,translated:null}),W=d.useMemo(()=>{var fe;return N!=null?{id:N,data:(fe=T==null?void 0:T.data)!=null?fe:yB,rect:R}:null},[N,T]),Q=d.useRef(null),[he,Y]=d.useState(null),[O,A]=d.useState(null),U=cu(x,Object.values(x)),D=Gu("DndDescribedBy",i),B=d.useMemo(()=>M.getEnabled(),[M]),ue=SB(m),{droppableRects:_e,measureDroppableContainers:ye,measuringScheduled:Be}=aB(B,{dragging:C,dependencies:[E.x,E.y],config:ue.droppable}),Ie=sB(_,N),pe=d.useMemo(()=>O?ef(O):null,[O]),ge=ae(),Ke=iB(Ie,ue.draggable.measure);NB({activeNode:N!=null?_.get(N):null,config:ge.layoutShiftCompensation,initialRect:Ke,measure:ue.draggable.measure});const le=mj(Ie,ue.draggable.measure,Ke),Re=mj(Ie?Ie.parentElement:null),Me=d.useRef({activatorEvent:null,active:null,activeNode:Ie,collisionRect:null,collisions:null,droppableRects:_e,draggableNodes:_,draggingNode:null,draggingNodeRect:null,droppableContainers:M,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ue=M.getNodeFor((n=Me.current.over)==null?void 0:n.id),De=gB({measure:ue.dragOverlay.measure}),Ye=(r=De.nodeRef.current)!=null?r:Ie,st=C?(s=De.rect)!=null?s:le:null,xt=!!(De.nodeRef.current&&De.rect),it=uB(xt?null:le),Yt=cR(Ye?qn(Ye):null),wt=dB(C?Ue??Ie:null),Lt=pB(wt),qe=fR(p,{transform:{x:E.x-it.x,y:E.y-it.y,scaleX:1,scaleY:1},activatorEvent:O,active:W,activeNodeRect:le,containerNodeRect:Re,draggingNodeRect:st,over:Me.current.over,overlayNodeRect:De.rect,scrollableAncestors:wt,scrollableAncestorRects:Lt,windowRect:Yt}),Ft=pe?Fi(pe,E):null,z=hB(wt),G=gj(z),X=gj(z,[le]),oe=Fi(qe,G),L=st?DU(st,qe):null,H=W&&L?f({active:W,collisionRect:L,droppableRects:_e,droppableContainers:B,pointerCoordinates:Ft}):null,se=X2(H,"id"),[re,Se]=d.useState(null),Qe=xt?qe:Fi(qe,X),Ee=IU(Qe,(a=re==null?void 0:re.rect)!=null?a:null,le),Nt=d.useRef(null),F=d.useCallback((fe,be)=>{let{sensor:ve,options:ft}=be;if(Q.current==null)return;const ot=_.get(Q.current);if(!ot)return;const bt=fe.nativeEvent,et=new ve({active:Q.current,activeNode:ot,event:bt,options:ft,context:Me,onAbort(xe){if(!_.get(xe))return;const{onDragAbort:Tt}=U.current,Mn={id:xe};Tt==null||Tt(Mn),v({type:"onDragAbort",event:Mn})},onPending(xe,Ve,Tt,Mn){if(!_.get(xe))return;const{onDragPending:Hn}=U.current,sr={id:xe,constraint:Ve,initialCoordinates:Tt,offset:Mn};Hn==null||Hn(sr),v({type:"onDragPending",event:sr})},onStart(xe){const Ve=Q.current;if(Ve==null)return;const Tt=_.get(Ve);if(!Tt)return;const{onDragStart:Mn}=U.current,br={activatorEvent:bt,active:{id:Ve,data:Tt.data,rect:R}};Ir.unstable_batchedUpdates(()=>{Mn==null||Mn(br),S(co.Initializing),w({type:un.DragStart,initialCoordinates:xe,active:Ve}),v({type:"onDragStart",event:br}),Y(Nt.current),A(bt)})},onMove(xe){w({type:un.DragMove,coordinates:xe})},onEnd:mt(un.DragEnd),onCancel:mt(un.DragCancel)});Nt.current=et;function mt(xe){return async function(){const{active:Tt,collisions:Mn,over:br,scrollAdjustedTranslate:Hn}=Me.current;let sr=null;if(Tt&&Hn){const{cancelDrop:Ur}=U.current;sr={activatorEvent:bt,active:Tt,collisions:Mn,delta:Hn,over:br},xe===un.DragEnd&&typeof Ur=="function"&&await Promise.resolve(Ur(sr))&&(xe=un.DragCancel)}Q.current=null,Ir.unstable_batchedUpdates(()=>{w({type:xe}),S(co.Uninitialized),Se(null),Y(null),A(null),Nt.current=null;const Ur=xe===un.DragEnd?"onDragEnd":"onDragCancel";if(sr){const Br=U.current[Ur];Br==null||Br(sr),v({type:Ur,event:sr})}})}}},[_]),te=d.useCallback((fe,be)=>(ve,ft)=>{const ot=ve.nativeEvent,bt=_.get(ft);if(Q.current!==null||!bt||ot.dndKit||ot.defaultPrevented)return;const et={active:bt};fe(ve,be.options,et)===!0&&(ot.dndKit={capturedBy:be.sensor},Q.current=ft,F(ve,be))},[_,F]),ke=oB(h,te);fB(h),cs(()=>{le&&j===co.Initializing&&S(co.Initialized)},[le,j]),d.useEffect(()=>{const{onDragMove:fe}=U.current,{active:be,activatorEvent:ve,collisions:ft,over:ot}=Me.current;if(!be||!ve)return;const bt={active:be,activatorEvent:ve,collisions:ft,delta:{x:oe.x,y:oe.y},over:ot};Ir.unstable_batchedUpdates(()=>{fe==null||fe(bt),v({type:"onDragMove",event:bt})})},[oe.x,oe.y]),d.useEffect(()=>{const{active:fe,activatorEvent:be,collisions:ve,droppableContainers:ft,scrollAdjustedTranslate:ot}=Me.current;if(!fe||Q.current==null||!be||!ot)return;const{onDragOver:bt}=U.current,et=ft.get(se),mt=et&&et.rect.current?{id:et.id,rect:et.rect.current,data:et.data,disabled:et.disabled}:null,xe={active:fe,activatorEvent:be,collisions:ve,delta:{x:ot.x,y:ot.y},over:mt};Ir.unstable_batchedUpdates(()=>{Se(mt),bt==null||bt(xe),v({type:"onDragOver",event:xe})})},[se]),cs(()=>{Me.current={activatorEvent:O,active:W,activeNode:Ie,collisionRect:L,collisions:H,droppableRects:_e,draggableNodes:_,draggingNode:Ye,draggingNodeRect:st,droppableContainers:M,over:re,scrollableAncestors:wt,scrollAdjustedTranslate:oe},R.current={initial:st,translated:L}},[W,Ie,H,L,_,Ye,st,_e,M,re,wt,oe]),tB({...ge,delta:E,draggingRect:L,pointerCoordinates:Ft,scrollableAncestors:wt,scrollableAncestorRects:Lt});const Te=d.useMemo(()=>({active:W,activeNode:Ie,activeNodeRect:le,activatorEvent:O,collisions:H,containerNodeRect:Re,dragOverlay:De,draggableNodes:_,droppableContainers:M,droppableRects:_e,over:re,measureDroppableContainers:ye,scrollableAncestors:wt,scrollableAncestorRects:Lt,measuringConfiguration:ue,measuringScheduled:Be,windowRect:Yt}),[W,Ie,le,O,H,Re,De,_,M,_e,re,ye,wt,Lt,ue,Be,Yt]),$=d.useMemo(()=>({activatorEvent:O,activators:ke,active:W,activeNodeRect:le,ariaDescribedById:{draggable:D},dispatch:w,draggableNodes:_,over:re,measureDroppableContainers:ye}),[O,ke,W,le,w,D,_,re,ye]);return Pe.createElement(Q2.Provider,{value:b},Pe.createElement(Qu.Provider,{value:$},Pe.createElement(hR.Provider,{value:Te},Pe.createElement(jm.Provider,{value:Ee},u)),Pe.createElement(jB,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Pe.createElement(_U,{...l,hiddenTextDescribedById:D}));function ae(){const fe=(he==null?void 0:he.autoScrollEnabled)===!1,be=typeof c=="object"?c.enabled===!1:c===!1,ve=C&&!fe&&!be;return typeof c=="object"?{...c,enabled:ve}:{enabled:ve}}}),_B=d.createContext(null),yj="button",EB="Draggable";function kB(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const a=Gu(EB),{activators:i,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:h,draggableNodes:f,over:m}=d.useContext(Qu),{role:p=yj,roleDescription:x="draggable",tabIndex:g=0}=s??{},y=(c==null?void 0:c.id)===t,w=d.useContext(y?jm:_B),[v,b]=Xh(),[j,S]=Xh(),C=mB(i,t),N=cu(n);cs(()=>(f.set(t,{id:t,key:a,node:v,activatorNode:j,data:N}),()=>{const E=f.get(t);E&&E.key===a&&f.delete(t)}),[f,t]);const _=d.useMemo(()=>({role:p,tabIndex:g,"aria-disabled":r,"aria-pressed":y&&p===yj?!0:void 0,"aria-roledescription":x,"aria-describedby":h.draggable}),[r,p,g,y,x,h.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:_,isDragging:y,listeners:r?void 0:C,node:v,over:m,setNodeRef:b,setActivatorNodeRef:S,transform:w}}function mR(){return d.useContext(hR)}const TB="Droppable",RB={timeout:25};function pR(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const a=Gu(TB),{active:i,dispatch:l,over:c,measureDroppableContainers:u}=d.useContext(Qu),h=d.useRef({disabled:n}),f=d.useRef(!1),m=d.useRef(null),p=d.useRef(null),{disabled:x,updateMeasurementsFor:g,timeout:y}={...RB,...s},w=cu(g??r),v=d.useCallback(()=>{if(!f.current){f.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{u(Array.isArray(w.current)?w.current:[w.current]),p.current=null},y)},[y]),b=bm({callback:v,disabled:x||!i}),j=d.useCallback((_,E)=>{b&&(E&&(b.unobserve(E),f.current=!1),_&&b.observe(_))},[b]),[S,C]=Xh(j),N=cu(t);return d.useEffect(()=>{!b||!S.current||(b.disconnect(),f.current=!1,b.observe(S.current))},[S,b]),d.useEffect(()=>(l({type:un.RegisterDroppable,element:{id:r,key:a,disabled:n,node:S,rect:m,data:N}}),()=>l({type:un.UnregisterDroppable,key:a,id:r})),[r]),d.useEffect(()=>{n!==h.current.disabled&&(l({type:un.SetDroppableDisabled,id:r,key:a,disabled:n}),h.current.disabled=n)},[r,a,n,l]),{active:i,rect:m,isOver:(c==null?void 0:c.id)===r,node:S,over:c,setNodeRef:C}}function PB(e){let{animation:t,children:n}=e;const[r,s]=d.useState(null),[a,i]=d.useState(null),l=Zh(n);return!n&&!r&&l&&s(l),cs(()=>{if(!a)return;const c=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(c==null||u==null){s(null);return}Promise.resolve(t(u,a)).then(()=>{s(null)})},[t,r,a]),Pe.createElement(Pe.Fragment,null,n,r?d.cloneElement(r,{ref:i}):null)}const AB={x:0,y:0,scaleX:1,scaleY:1};function OB(e){let{children:t}=e;return Pe.createElement(Qu.Provider,{value:dR},Pe.createElement(jm.Provider,{value:AB},t))}const IB={position:"fixed",touchAction:"none"},MB=e=>xm(e)?"transform 250ms ease":void 0,DB=d.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:a,className:i,rect:l,style:c,transform:u,transition:h=MB}=e;if(!l)return null;const f=s?u:{...u,scaleX:1,scaleY:1},m={...IB,width:l.width,height:l.height,top:l.top,left:l.left,transform:Ko.Transform.toString(f),transformOrigin:s&&r?kU(r,l):void 0,transition:typeof h=="function"?h(r):h,...c};return Pe.createElement(n,{className:i,style:m,ref:t},a)}),$B=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:a,className:i}=e;if(a!=null&&a.active)for(const[l,c]of Object.entries(a.active))c!==void 0&&(s[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,c));if(a!=null&&a.dragOverlay)for(const[l,c]of Object.entries(a.dragOverlay))c!==void 0&&r.node.style.setProperty(l,c);return i!=null&&i.active&&n.node.classList.add(i.active),i!=null&&i.dragOverlay&&r.node.classList.add(i.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);i!=null&&i.active&&n.node.classList.remove(i.active)}},LB=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Ko.Transform.toString(t)},{transform:Ko.Transform.toString(n)}]},FB={duration:250,easing:"ease",keyframes:LB,sideEffects:$B({styles:{active:{opacity:"0"}}})};function zB(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return ym((a,i)=>{if(t===null)return;const l=n.get(a);if(!l)return;const c=l.node.current;if(!c)return;const u=uR(i);if(!u)return;const{transform:h}=qn(i).getComputedStyle(i),f=eR(h);if(!f)return;const m=typeof t=="function"?t:UB(t);return iR(c,s.draggable.measure),m({active:{id:a,data:l.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:i,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function UB(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...FB,...e};return a=>{let{active:i,dragOverlay:l,transform:c,...u}=a;if(!t)return;const h={x:l.rect.left-i.rect.left,y:l.rect.top-i.rect.top},f={scaleX:c.scaleX!==1?i.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?i.rect.height*c.scaleY/l.rect.height:1},m={x:c.x-h.x,y:c.y-h.y,...f},p=s({...u,active:i,dragOverlay:l,transform:{initial:c,final:m}}),[x]=p,g=p[p.length-1];if(JSON.stringify(x)===JSON.stringify(g))return;const y=r==null?void 0:r({active:i,dragOverlay:l,...u}),w=l.node.animate(p,{duration:t,easing:n,fill:"forwards"});return new Promise(v=>{w.onfinish=()=>{y==null||y(),v()}})}}let xj=0;function BB(e){return d.useMemo(()=>{if(e!=null)return xj++,xj},[e])}const KB=Pe.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:a,modifiers:i,wrapperElement:l="div",className:c,zIndex:u=999}=e;const{activatorEvent:h,active:f,activeNodeRect:m,containerNodeRect:p,draggableNodes:x,droppableContainers:g,dragOverlay:y,over:w,measuringConfiguration:v,scrollableAncestors:b,scrollableAncestorRects:j,windowRect:S}=mR(),C=d.useContext(jm),N=BB(f==null?void 0:f.id),_=fR(i,{activatorEvent:h,active:f,activeNodeRect:m,containerNodeRect:p,draggingNodeRect:y.rect,over:w,overlayNodeRect:y.rect,scrollableAncestors:b,scrollableAncestorRects:j,transform:C,windowRect:S}),E=n0(m),M=zB({config:r,draggableNodes:x,droppableContainers:g,measuringConfiguration:v}),T=E?y.setRef:void 0;return Pe.createElement(OB,null,Pe.createElement(PB,{animation:M},f&&N?Pe.createElement(DB,{key:N,id:f.id,ref:T,as:l,activatorEvent:h,adjustScale:t,className:c,transition:a,rect:E,style:{zIndex:u,...s},transform:_},n):null))});function gR(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function VB(e,t){return e.reduce((n,r,s)=>{const a=t.get(r);return a&&(n[s]=a),n},Array(e.length))}function Od(e){return e!==null&&e>=0}function qB(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function HB(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const vR=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const a=gR(t,r,n),i=t[s],l=a[s];return!l||!i?null:{x:l.left-i.left,y:l.top-i.top,scaleX:l.width/i.width,scaleY:l.height/i.height}},Id={scaleX:1,scaleY:1},yR=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:a,overIndex:i}=e;const l=(t=a[n])!=null?t:r;if(!l)return null;if(s===n){const u=a[i];return u?{x:0,y:n<i?u.top+u.height-(l.top+l.height):u.top-l.top,...Id}:null}const c=WB(a,s,n);return s>n&&s<=i?{x:0,y:-l.height-c,...Id}:s<n&&s>=i?{x:0,y:l.height+c,...Id}:{x:0,y:0,...Id}};function WB(e,t,n){const r=e[t],s=e[t-1],a=e[t+1];return r?n<t?s?r.top-(s.top+s.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const xR="Sortable",wR=Pe.createContext({activeIndex:-1,containerId:xR,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:vR,disabled:{draggable:!1,droppable:!1}});function bR(e){let{children:t,id:n,items:r,strategy:s=vR,disabled:a=!1}=e;const{active:i,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:h}=mR(),f=Gu(xR,n),m=l.rect!==null,p=d.useMemo(()=>r.map(C=>typeof C=="object"&&"id"in C?C.id:C),[r]),x=i!=null,g=i?p.indexOf(i.id):-1,y=u?p.indexOf(u.id):-1,w=d.useRef(p),v=!qB(p,w.current),b=y!==-1&&g===-1||v,j=HB(a);cs(()=>{v&&x&&h(p)},[v,p,x,h]),d.useEffect(()=>{w.current=p},[p]);const S=d.useMemo(()=>({activeIndex:g,containerId:f,disabled:j,disableTransforms:b,items:p,overIndex:y,useDragOverlay:m,sortedRects:VB(p,c),strategy:s}),[g,f,j.draggable,j.droppable,b,p,y,c,m,s]);return Pe.createElement(wR.Provider,{value:S},t)}const GB=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return gR(n,r,s).indexOf(t)},QB=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:a,newIndex:i,previousItems:l,previousContainerId:c,transition:u}=e;return!u||!r||l!==a&&s===i?!1:n?!0:i!==s&&t===c},YB={duration:200,easing:"ease"},jR="transform",JB=Ko.Transition.toString({property:jR,duration:0,easing:"linear"}),XB={roleDescription:"sortable"};function ZB(e){let{disabled:t,index:n,node:r,rect:s}=e;const[a,i]=d.useState(null),l=d.useRef(n);return cs(()=>{if(!t&&n!==l.current&&r.current){const c=s.current;if(c){const u=zl(r.current,{ignoreTransform:!0}),h={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(h.x||h.y)&&i(h)}}n!==l.current&&(l.current=n)},[t,n,r,s]),d.useEffect(()=>{a&&i(null)},[a]),a}function e9(e){let{animateLayoutChanges:t=QB,attributes:n,disabled:r,data:s,getNewIndex:a=GB,id:i,strategy:l,resizeObserverConfig:c,transition:u=YB}=e;const{items:h,containerId:f,activeIndex:m,disabled:p,disableTransforms:x,sortedRects:g,overIndex:y,useDragOverlay:w,strategy:v}=d.useContext(wR),b=t9(r,p),j=h.indexOf(i),S=d.useMemo(()=>({sortable:{containerId:f,index:j,items:h},...s}),[f,s,j,h]),C=d.useMemo(()=>h.slice(h.indexOf(i)),[h,i]),{rect:N,node:_,isOver:E,setNodeRef:M}=pR({id:i,data:S,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...c}}),{active:T,activatorEvent:R,activeNodeRect:W,attributes:Q,setNodeRef:he,listeners:Y,isDragging:O,over:A,setActivatorNodeRef:U,transform:D}=kB({id:i,data:S,attributes:{...XB,...n},disabled:b.draggable}),B=fU(M,he),ue=!!T,_e=ue&&!x&&Od(m)&&Od(y),ye=!w&&O,Be=ye&&_e?D:null,pe=_e?Be??(l??v)({rects:g,activeNodeRect:W,activeIndex:m,overIndex:y,index:j}):null,ge=Od(m)&&Od(y)?a({id:i,items:h,activeIndex:m,overIndex:y}):j,Ke=T==null?void 0:T.id,le=d.useRef({activeId:Ke,items:h,newIndex:ge,containerId:f}),Re=h!==le.current.items,Me=t({active:T,containerId:f,isDragging:O,isSorting:ue,id:i,index:j,items:h,newIndex:le.current.newIndex,previousItems:le.current.items,previousContainerId:le.current.containerId,transition:u,wasDragging:le.current.activeId!=null}),Ue=ZB({disabled:!Me,index:j,node:_,rect:N});return d.useEffect(()=>{ue&&le.current.newIndex!==ge&&(le.current.newIndex=ge),f!==le.current.containerId&&(le.current.containerId=f),h!==le.current.items&&(le.current.items=h)},[ue,ge,f,h]),d.useEffect(()=>{if(Ke===le.current.activeId)return;if(Ke!=null&&le.current.activeId==null){le.current.activeId=Ke;return}const Ye=setTimeout(()=>{le.current.activeId=Ke},50);return()=>clearTimeout(Ye)},[Ke]),{active:T,activeIndex:m,attributes:Q,data:S,rect:N,index:j,newIndex:ge,items:h,isOver:E,isSorting:ue,isDragging:O,listeners:Y,node:_,overIndex:y,over:A,setNodeRef:B,setActivatorNodeRef:U,setDroppableNodeRef:M,setDraggableNodeRef:he,transform:Ue??pe,transition:De()};function De(){if(Ue||Re&&le.current.newIndex===j)return JB;if(!(ye&&!xm(R)||!u)&&(ue||Me))return Ko.Transition.toString({...u,property:jR})}}function t9(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function rf(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const n9=[ut.Down,ut.Right,ut.Up,ut.Left],r9=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:a,over:i,scrollableAncestors:l}}=t;if(n9.includes(e.code)){if(e.preventDefault(),!n||!r)return;const c=[];a.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const m=s.get(f.id);if(m)switch(e.code){case ut.Down:r.top<m.top&&c.push(f);break;case ut.Up:r.top>m.top&&c.push(f);break;case ut.Left:r.left>m.left&&c.push(f);break;case ut.Right:r.left<m.left&&c.push(f);break}});const u=PU({collisionRect:r,droppableRects:s,droppableContainers:c});let h=X2(u,"id");if(h===(i==null?void 0:i.id)&&u.length>1&&(h=u[1].id),h!=null){const f=a.get(n.id),m=a.get(h),p=m?s.get(m.id):null,x=m==null?void 0:m.node.current;if(x&&p&&f&&m){const y=wm(x).some((C,N)=>l[N]!==C),w=SR(f,m),v=s9(f,m),b=y||!w?{x:0,y:0}:{x:v?r.width-p.width:0,y:v?r.height-p.height:0},j={x:p.left,y:p.top};return b.x&&b.y?j:uu(j,b)}}}};function SR(e,t){return!rf(e)||!rf(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function s9(e,t){return!rf(e)||!rf(t)||!SR(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function NR({id:e,children:t,isOver:n,className:r=""}){const{setNodeRef:s,isOver:a}=pR({id:e}),i=n||a;return o.jsx("div",{ref:s,className:`${r} ${i?"bg-accent/50 ring-2 ring-accent ring-inset":""} transition-colors rounded-md`,children:t})}function CR({tag:e,onDelete:t,onRename:n}){const{attributes:r,listeners:s,setNodeRef:a,transform:i,transition:l,isDragging:c}=e9({id:e.id}),u={transform:Ko.Transform.toString(i),transition:l,opacity:c?.5:1};return o.jsxs("div",{ref:a,style:u,className:`group flex items-center gap-2 p-2 rounded-md bg-muted/30 hover:bg-muted/50 border border-border/50 transition-colors ${c?"z-50 shadow-lg ring-2 ring-primary":""}`,children:[o.jsx("button",{...r,...s,className:"cursor-grab active:cursor-grabbing text-muted-foreground hover:text-foreground",children:o.jsx(gC,{className:"w-4 h-4"})}),o.jsx("span",{className:"flex-1 text-sm text-foreground truncate",children:e.name}),o.jsx(me,{variant:"outline",className:"text-xs bg-background",children:e.usageCount||0}),o.jsxs(Ol,{children:[o.jsx(Il,{asChild:!0,children:o.jsx(V,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(mC,{className:"w-3.5 h-3.5"})})}),o.jsxs(Ja,{align:"end",className:"bg-background border-border",children:[o.jsxs(nr,{onClick:()=>n(e),children:[o.jsx(dl,{className:"w-3.5 h-3.5 mr-2"}),"Rename"]}),o.jsx(jx,{}),o.jsxs(nr,{onClick:()=>t(e),className:"text-red-400 focus:text-red-400",children:[o.jsx(ku,{className:"w-3.5 h-3.5 mr-2"}),"Delete"]})]})]})]})}function _R({subcategory:e,categoryKey:t,depth:n,openPaths:r,togglePath:s,onDeleteTag:a,onRenameTag:i,onAddTag:l,onAddSubcategory:c,onRenameSubcategory:u,onDeleteSubcategory:h,activeDropId:f}){const m=r.has(e.key),p=e.tags.map(w=>w.id);e.tags.length>0||e.subcategories.length>0;const x=`drop:${t}:${e.key}`,g=f===x,y=w=>w.split(".");return o.jsx("div",{className:"ml-4 border-l border-border/30 pl-3",children:o.jsxs(rm,{open:m,onOpenChange:()=>s(e.key),children:[o.jsx(NR,{id:x,isOver:g,children:o.jsxs("div",{className:"flex items-center justify-between py-1.5 hover:bg-muted/20 rounded-md px-2 -ml-2 group",children:[o.jsx(sm,{asChild:!0,children:o.jsxs("button",{className:"flex items-center gap-2 text-sm flex-1",children:[o.jsx("span",{className:"text-xs text-muted-foreground/60 font-mono min-w-[2.5rem]",children:e.key}),o.jsx("span",{className:"text-muted-foreground font-medium",children:e.name}),o.jsx(me,{variant:"secondary",className:"text-xs h-5 px-1.5",children:e.totalTags})]})}),o.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100",children:[o.jsx(V,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:w=>{w.stopPropagation(),l(t,y(e.key))},title:"Add tag",children:o.jsx(zo,{className:"w-3.5 h-3.5"})}),o.jsxs(Ol,{children:[o.jsx(Il,{asChild:!0,children:o.jsx(V,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:w=>w.stopPropagation(),children:o.jsx(mC,{className:"w-3.5 h-3.5"})})}),o.jsxs(Ja,{align:"end",className:"bg-background border-border",children:[o.jsxs(nr,{onClick:()=>c(t,y(e.key),e.name),children:[o.jsx(pC,{className:"w-3.5 h-3.5 mr-2"}),"Add Subcategory"]}),o.jsxs(nr,{onClick:()=>u(t,e.key,e.name),children:[o.jsx(dl,{className:"w-3.5 h-3.5 mr-2"}),"Rename"]}),o.jsx(jx,{}),o.jsxs(nr,{onClick:()=>h(t,e.key,e.name,e.totalTags),className:"text-red-400 focus:text-red-400",children:[o.jsx(ku,{className:"w-3.5 h-3.5 mr-2"}),"Delete"]})]})]})]})]})}),o.jsxs(om,{children:[e.subcategories.map(w=>o.jsx(_R,{subcategory:w,categoryKey:t,depth:n+1,openPaths:r,togglePath:s,onDeleteTag:a,onRenameTag:i,onAddTag:l,onAddSubcategory:c,onRenameSubcategory:u,onDeleteSubcategory:h,activeDropId:f},w.key)),e.tags.length>0&&o.jsx("div",{className:"space-y-1 py-2 ml-4",children:o.jsx(bR,{items:p,strategy:yR,children:e.tags.map(w=>o.jsx(CR,{tag:w,onDelete:a,onRename:i},w.id))})}),e.tags.length===0&&e.subcategories.length===0&&o.jsx("div",{className:"py-2 ml-4 text-xs text-muted-foreground italic",children:"Drop tags here"})]})]})})}function o9({category:e,isOpen:t,onToggle:n,openPaths:r,togglePath:s,onDeleteTag:a,onRenameTag:i,onAddTag:l,onAddSubcategory:c,onRenameSubcategory:u,onDeleteSubcategory:h,activeDropId:f}){const m=e.tags.map(g=>g.id),p=`drop:${e.category}:root`,x=f===p;return o.jsx(rm,{open:t,onOpenChange:n,children:o.jsxs("div",{className:"border border-border rounded-lg bg-background overflow-hidden",children:[o.jsx(NR,{id:p,isOver:x,children:o.jsx(sm,{asChild:!0,children:o.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-muted/30 cursor-pointer transition-colors group",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[t?o.jsx(Go,{className:"w-4 h-4 text-muted-foreground"}):o.jsx(ul,{className:"w-4 h-4 text-muted-foreground"}),e.emoji&&o.jsx("span",{children:e.emoji}),o.jsx("span",{className:"font-medium text-foreground",children:e.name}),o.jsx(me,{variant:"secondary",className:"text-xs",children:e.totalTags})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(V,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:g=>{g.stopPropagation(),l(e.category,[])},title:"Add tag",children:o.jsx(zo,{className:"w-4 h-4"})}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 opacity-0 group-hover:opacity-100",onClick:g=>{g.stopPropagation(),c(e.category,[],e.name)},title:"Add subcategory",children:o.jsx(pC,{className:"w-4 h-4"})})]})]})})}),o.jsx(om,{children:o.jsxs("div",{className:"p-3 pt-0 border-t border-border/50",children:[e.subcategories.map(g=>o.jsx(_R,{subcategory:g,categoryKey:e.category,depth:1,openPaths:r,togglePath:s,onDeleteTag:a,onRenameTag:i,onAddTag:l,onAddSubcategory:c,onRenameSubcategory:u,onDeleteSubcategory:h,activeDropId:f},g.key)),e.tags.length>0&&o.jsxs("div",{className:"space-y-1 py-2",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-2 ml-1",children:"Root tags:"}),o.jsx(bR,{items:m,strategy:yR,children:e.tags.map(g=>o.jsx(CR,{tag:g,onDelete:a,onRename:i},g.id))})]}),e.tags.length===0&&e.subcategories.length===0&&o.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:"No tags in this category"})]})})]})})}function a9({tag:e}){return o.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md bg-accent border border-primary shadow-xl scale-105",children:[o.jsx(gC,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm text-foreground font-medium",children:e.name}),o.jsx(me,{variant:"outline",className:"text-xs",children:e.usageCount||0})]})}function i9(){var Ft,z,G,X,oe;const{toast:e}=wr(),t=Nl(),[n,r]=d.useState(""),[s,a]=d.useState(new Set),[i,l]=d.useState(new Set),[c,u]=d.useState(null),[h,f]=d.useState(null),[m,p]=d.useState({open:!1,tag:null}),[x,g]=d.useState({open:!1,categoryKey:null,subcategoryPath:[]}),[y,w]=d.useState({open:!1,tag:null}),[v,b]=d.useState({open:!1,categoryKey:null,parentPath:[],parentName:""}),[j,S]=d.useState({open:!1,categoryKey:null,subcategoryKey:"",currentName:""}),[C,N]=d.useState({open:!1,categoryKey:null,subcategoryKey:"",subcategoryName:"",tagCount:0}),[_,E]=d.useState(""),[M,T]=d.useState(""),[R,W]=d.useState(""),[Q,he]=d.useState(!1),{data:Y,isLoading:O}=tt({queryKey:["supabase-all-tags-manager"],queryFn:async()=>{if(!Le)return[];const{data:L,error:H}=await Le.from("tags").select("*");if(H)throw H;return L||[]},staleTime:0,refetchOnMount:!0}),{data:A}=tt({queryKey:["supabase-labels-manager"],queryFn:async()=>{if(!Le)return[];const{data:L,error:H}=await Le.from("subcategory_labels").select("*");return H?[]:L||[]},staleTime:1/0}),U=d.useMemo(()=>{if(!Y)return{categories:[],totalTags:0};const L=new Map;return A==null||A.forEach(H=>L.set(H.path,H.label)),nT(Y,L)},[Y,A]),D=O,{data:B,isLoading:ue}=tt({queryKey:["supabase-quality-check"],queryFn:async()=>{if(!Le)throw new Error("Supabase not configured");let L=Y;if(!L){const{data:Ee,error:Nt}=await Le.from("tags").select("*");if(Nt)throw Nt;L=Ee||[]}const H=L||[],se=H.filter(Ee=>!Ee.subcategory_path||Ee.subcategory_path.length===0).map(Ee=>({id:Ee.id,name:Ee.name,category:Ee.category,usage_count:Ee.usage_count})),re=H.filter(Ee=>Ee.usage_count===0).map(Ee=>({id:Ee.id,name:Ee.name,category:Ee.category,usage_count:Ee.usage_count})),Se=H.length,Qe=H.filter(Ee=>Ee.usage_count>0).length;return{tagsWithoutPath:se,unusedTags:re,totalTags:Se,totalUsedInSummaries:Qe}},enabled:Q}),_e=d.useMemo(()=>{if(!(U!=null&&U.categories))return[];if(!n)return U.categories;const L=n.toLowerCase(),H=re=>re.filter(Se=>Se.name.toLowerCase().includes(L)),se=re=>{const Se=H(re.tags),Qe=re.subcategories.map(se).filter(Ee=>Ee!==null);return Se.length===0&&Qe.length===0?null:{...re,tags:Se,subcategories:Qe,totalTags:Se.length+Qe.reduce((Ee,Nt)=>Ee+Nt.totalTags,0)}};return U.categories.map(re=>{const Se=H(re.tags),Qe=re.subcategories.map(se).filter(Ee=>Ee!==null);return Se.length===0&&Qe.length===0?null:{...re,tags:Se,subcategories:Qe,totalTags:Se.length+Qe.reduce((Ee,Nt)=>Ee+Nt.totalTags,0)}}).filter(re=>re!==null)},[U,n]),ye=EU(aj(t0,{activationConstraint:{distance:8}}),aj(Zx,{coordinateGetter:r9})),Be=at({mutationFn:async({tagId:L,category:H,subcategoryKey:se})=>{const re=await fetch(`/api/tags/${L}/move`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:H,subcategoryKey:se})});if(!re.ok){const Se=await re.json();throw new Error(Se.error||`Failed to move tag: ${re.statusText}`)}return re.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["supabase-all-tags-manager"]}),e({description:"Tag moved successfully"})},onError:L=>{e({variant:"destructive",description:`Failed to move tag: ${L.message}`})}}),Ie=at({mutationFn:async({id:L,updates:H})=>{const se=await fetch(`/api/tags/${L}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(H)});if(!se.ok){const re=await se.json();throw new Error(re.error||`Failed to update tag: ${se.statusText}`)}return se.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["supabase-all-tags-manager"]}),e({description:"Tag renamed successfully"})}}),pe=at({mutationFn:async({name:L,category:H,subcategoryPath:se})=>{const re=await fetch("/api/tags",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:L,category:H,subcategoryPath:se})});if(!re.ok){const Se=await re.json();throw new Error(Se.error||`Failed to create tag: ${re.statusText}`)}return re.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["supabase-all-tags-manager"]}),e({description:"Tag created successfully"})}}),ge=at({mutationFn:async L=>{const H=await fetch(`/api/tags/${L}`,{method:"DELETE"});if(!H.ok){const se=await H.json();throw new Error(se.error||`Failed to delete tag: ${H.statusText}`)}return H.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["supabase-all-tags-manager"]}),e({description:"Tag deleted successfully"})}}),Ke=at({mutationFn:async({category:L,parentPath:H,name:se})=>{const re=await fetch("/api/tags/subcategory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:L,parentPath:H,name:se})});if(!re.ok){const Se=await re.json();throw new Error(Se.error||`Failed to create subcategory: ${re.statusText}`)}return re.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["supabase-labels-manager"]}),t.invalidateQueries({queryKey:["supabase-all-tags-manager"]}),e({description:"Subcategory created successfully"})}}),le=at({mutationFn:async({category:L,subcategoryKey:H,newName:se})=>{const re=await fetch("/api/tags/subcategory/rename",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:L,subcategoryKey:H,newName:se})});if(!re.ok){const Se=await re.json();throw new Error(Se.error||`Failed to rename subcategory: ${re.statusText}`)}return re.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["supabase-labels-manager"]}),t.invalidateQueries({queryKey:["supabase-all-tags-manager"]}),e({description:"Subcategory renamed successfully"})}}),Re=at({mutationFn:async({category:L,subcategoryKey:H,action:se})=>{const re=await fetch("/api/tags/subcategory/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:L,subcategoryKey:H,action:se})});if(!re.ok){const Se=await re.json();throw new Error(Se.error||`Failed to delete subcategory: ${re.statusText}`)}return re.json()},onSuccess:(L,H)=>{t.invalidateQueries({queryKey:["supabase-all-tags-manager"]}),e({description:H.action==="delete"?"Subcategory and tags deleted":"Tags moved to parent, subcategory removed"})}}),Me=L=>(se=>{for(const re of se){const Se=re.tags.find(Nt=>Nt.id===L);if(Se)return Se;const Qe=Nt=>{for(const F of Nt){const te=F.tags.find(Te=>Te.id===L);if(te)return te;const ke=Qe(F.subcategories);if(ke)return ke}return null},Ee=Qe(re.subcategories);if(Ee)return Ee}return null})(_e),Ue=L=>{const H=Me(L.active.id);H&&u(H)},De=L=>{const{over:H}=L;H!=null&&H.id&&typeof H.id=="string"&&H.id.startsWith("drop:")?f(H.id):f(null)},Ye=L=>{const{active:H,over:se}=L;if(u(null),f(null),!se||!H)return;const re=se.id;if(!re.startsWith("drop:"))return;const Se=re.split(":");if(Se.length<3)return;const Qe=Se[1],Ee=Se.slice(2).join(":");Be.mutate({tagId:H.id,category:Qe,subcategoryKey:Ee})},st=L=>{a(H=>{const se=new Set(H);return se.has(L)?se.delete(L):se.add(L),se})},xt=L=>{l(H=>{const se=new Set(H);return se.has(L)?se.delete(L):se.add(L),se})},it=()=>{const L=new Set,H=se=>{se.forEach(re=>{L.add(re.key),H(re.subcategories)})};_e.forEach(se=>{L.add(se.category),H(se.subcategories)}),a(new Set(_e.map(se=>se.category))),l(L)},Yt=()=>{a(new Set),l(new Set)},wt=()=>{!_.trim()||!x.categoryKey||(pe.mutate({name:_.trim(),category:x.categoryKey,subcategoryPath:x.subcategoryPath}),E(""),g({open:!1,categoryKey:null,subcategoryPath:[]}))},Lt=()=>{!M.trim()||!m.tag||(Ie.mutate({id:m.tag.id,updates:{name:M.trim()}}),T(""),p({open:!1,tag:null}))},qe=()=>{y.tag&&ge.mutate(y.tag.id),w({open:!1,tag:null})};return D?o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsx("div",{className:"h-10 w-64 bg-muted animate-pulse rounded-md"}),o.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(L=>o.jsx("div",{className:"h-16 bg-muted animate-pulse rounded-lg"},L))})]}):o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Tag Manager"}),o.jsxs(me,{variant:"outline",children:[(U==null?void 0:U.totalTags)||0," tags"]}),o.jsxs(me,{variant:"secondary",children:[_e.length," categories"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(V,{variant:Q?"default":"outline",size:"sm",onClick:()=>he(!Q),children:[ue||!B?o.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}):(((Ft=B.tagsWithoutPath)==null?void 0:Ft.length)||0)+(((z=B.unusedTags)==null?void 0:z.length)||0)>0?o.jsx(bs,{className:"w-4 h-4 mr-2 text-orange-500"}):o.jsx(Xn,{className:"w-4 h-4 mr-2 text-green-500"}),"Quality Check"]}),o.jsx(V,{variant:"outline",size:"sm",onClick:it,children:"Expand All"}),o.jsx(V,{variant:"outline",size:"sm",onClick:Yt,children:"Collapse All"})]})]}),Q&&o.jsxs("div",{className:"p-4 border-b border-border bg-muted/30 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Quality Check Results"}),o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>he(!1),children:o.jsx(On,{className:"w-4 h-4"})})]}),ue?o.jsx("div",{className:"flex items-center justify-center py-4",children:o.jsx(nt,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):B?o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"rounded-lg border border-border bg-background p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[B.tagsWithoutPath.length>0?o.jsx(bs,{className:"w-4 h-4 text-orange-500"}):o.jsx(Xn,{className:"w-4 h-4 text-green-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Tags without subcategory"}),o.jsx(me,{variant:B.tagsWithoutPath.length>0?"destructive":"secondary",children:B.tagsWithoutPath.length})]}),o.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Tags at root level without a subcategory path"}),B.tagsWithoutPath.length>0&&o.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-1",children:[B.tagsWithoutPath.slice(0,20).map(L=>o.jsxs("div",{className:"text-xs flex items-center justify-between px-2 py-1 bg-muted rounded",children:[o.jsx("span",{className:"truncate",children:L.name}),o.jsx(me,{variant:"outline",className:"text-[10px] ml-2",children:L.category})]},L.id)),B.tagsWithoutPath.length>20&&o.jsxs("p",{className:"text-xs text-muted-foreground px-2",children:["+",B.tagsWithoutPath.length-20," more..."]})]})]}),o.jsxs("div",{className:"rounded-lg border border-border bg-background p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[B.unusedTags.length>0?o.jsx(bs,{className:"w-4 h-4 text-orange-500"}):o.jsx(Xn,{className:"w-4 h-4 text-green-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Unused tags"}),o.jsx(me,{variant:B.unusedTags.length>0?"destructive":"secondary",children:B.unusedTags.length})]}),o.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Tags in database but never used in summaries"}),B.unusedTags.length>0&&o.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-1",children:[B.unusedTags.slice(0,20).map(L=>o.jsxs("div",{className:"text-xs flex items-center justify-between px-2 py-1 bg-muted rounded",children:[o.jsx("span",{className:"truncate",children:L.name}),o.jsx(me,{variant:"outline",className:"text-[10px] ml-2",children:L.category})]},L.id)),B.unusedTags.length>20&&o.jsxs("p",{className:"text-xs text-muted-foreground px-2",children:["+",B.unusedTags.length-20," more..."]})]})]})]}):null,B&&o.jsxs("div",{className:"text-xs text-muted-foreground",children:["Total tags in database: ",B.totalTags," | Used in summaries: ",B.totalUsedInSummaries]})]}),o.jsxs("div",{className:"p-4 border-b border-border",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Yc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx(An,{placeholder:"Search tags...",value:n,onChange:L=>r(L.target.value),className:"pl-9 bg-background"}),n&&o.jsx(V,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7 p-0",onClick:()=>r(""),children:o.jsx(On,{className:"w-4 h-4"})})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:" Drag tags between categories and subcategories to reorganize"})]}),o.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-3",children:[o.jsxs(CB,{sensors:ye,collisionDetection:RU,onDragStart:Ue,onDragOver:De,onDragEnd:Ye,children:[_e.map(L=>o.jsx(o9,{category:L,isOpen:s.has(L.category),onToggle:()=>st(L.category),openPaths:i,togglePath:xt,onDeleteTag:H=>w({open:!0,tag:H}),onRenameTag:H=>{T(H.name),p({open:!0,tag:H})},onAddTag:(H,se)=>g({open:!0,categoryKey:H,subcategoryPath:se}),onAddSubcategory:(H,se,re)=>{W(""),b({open:!0,categoryKey:H,parentPath:se,parentName:re})},onRenameSubcategory:(H,se,re)=>{T(re),S({open:!0,categoryKey:H,subcategoryKey:se,currentName:re})},onDeleteSubcategory:(H,se,re,Se)=>{N({open:!0,categoryKey:H,subcategoryKey:se,subcategoryName:re,tagCount:Se})},activeDropId:h},L.category)),o.jsx(KB,{children:c?o.jsx(a9,{tag:c}):null})]}),_e.length===0&&o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx("p",{children:"No tags found"}),n&&o.jsx(V,{variant:"link",className:"mt-2",onClick:()=>r(""),children:"Clear search"})]})]}),o.jsx(en,{open:x.open,onOpenChange:L=>g({open:L,categoryKey:L?x.categoryKey:null,subcategoryPath:L?x.subcategoryPath:[]}),children:o.jsxs(qt,{className:"bg-background border-border",children:[o.jsxs(Ht,{children:[o.jsx(Wt,{children:"Add Tag"}),o.jsxs(Pn,{children:["Category: ",o.jsx("code",{className:"bg-muted px-1 rounded",children:x.categoryKey}),x.subcategoryPath.length>0&&o.jsxs(o.Fragment,{children:["  Path: ",o.jsx("code",{className:"bg-muted px-1 rounded",children:x.subcategoryPath.join("  ")})]})]})]}),o.jsx(An,{placeholder:"Tag name",value:_,onChange:L=>E(L.target.value),onKeyDown:L=>L.key==="Enter"&&wt(),autoFocus:!0}),o.jsxs(Zr,{children:[o.jsx(V,{variant:"outline",onClick:()=>g({open:!1,categoryKey:null,subcategoryPath:[]}),children:"Cancel"}),o.jsx(V,{onClick:wt,disabled:!_.trim(),children:"Add Tag"})]})]})}),o.jsx(en,{open:m.open,onOpenChange:L=>p({open:L,tag:L?m.tag:null}),children:o.jsxs(qt,{className:"bg-background border-border",children:[o.jsxs(Ht,{children:[o.jsx(Wt,{children:"Rename Tag"}),o.jsxs(Pn,{children:['Renaming: "',(G=m.tag)==null?void 0:G.name,'"']})]}),o.jsx(An,{placeholder:"New tag name",value:M,onChange:L=>T(L.target.value),onKeyDown:L=>L.key==="Enter"&&Lt(),autoFocus:!0}),o.jsxs(Zr,{children:[o.jsx(V,{variant:"outline",onClick:()=>p({open:!1,tag:null}),children:"Cancel"}),o.jsx(V,{onClick:Lt,disabled:!M.trim(),children:"Rename"})]})]})}),o.jsx(en,{open:y.open,onOpenChange:L=>w({...y,open:L}),children:o.jsxs(qt,{className:"bg-background border-border",children:[o.jsxs(Ht,{children:[o.jsx(Wt,{children:"Delete Tag?"}),o.jsxs(Pn,{children:['Are you sure you want to delete "',(X=y.tag)==null?void 0:X.name,'"? This tag is used in ',((oe=y.tag)==null?void 0:oe.usageCount)||0," analyses. This action cannot be undone."]})]}),o.jsxs(Zr,{children:[o.jsx(V,{variant:"outline",onClick:()=>w({open:!1,tag:null}),children:"Cancel"}),o.jsx(V,{variant:"destructive",onClick:qe,children:"Delete"})]})]})}),o.jsx(en,{open:v.open,onOpenChange:L=>b({...v,open:L}),children:o.jsxs(qt,{className:"bg-background border-border",children:[o.jsxs(Ht,{children:[o.jsx(Wt,{children:"Add Subcategory"}),o.jsxs(Pn,{children:['Create a new subcategory under "',v.parentName,'"',v.parentPath.length>0&&o.jsxs("span",{className:"block mt-1",children:["Path: ",o.jsx("code",{className:"bg-muted px-1 rounded",children:v.parentPath.join("  ")})]})]})]}),o.jsx(An,{placeholder:"Subcategory name",value:R,onChange:L=>W(L.target.value),onKeyDown:L=>{L.key==="Enter"&&R.trim()&&v.categoryKey&&(Ke.mutate({category:v.categoryKey,parentPath:v.parentPath,name:R.trim()}),W(""),b({open:!1,categoryKey:null,parentPath:[],parentName:""}))},autoFocus:!0}),o.jsxs(Zr,{children:[o.jsx(V,{variant:"outline",onClick:()=>b({open:!1,categoryKey:null,parentPath:[],parentName:""}),children:"Cancel"}),o.jsx(V,{onClick:()=>{R.trim()&&v.categoryKey&&(Ke.mutate({category:v.categoryKey,parentPath:v.parentPath,name:R.trim()}),W(""),b({open:!1,categoryKey:null,parentPath:[],parentName:""}))},disabled:!R.trim(),children:"Create"})]})]})}),o.jsx(en,{open:j.open,onOpenChange:L=>S({...j,open:L}),children:o.jsxs(qt,{className:"bg-background border-border",children:[o.jsxs(Ht,{children:[o.jsx(Wt,{children:"Rename Subcategory"}),o.jsxs(Pn,{children:['Renaming: "',j.currentName,'"']})]}),o.jsx(An,{placeholder:"New name",value:M,onChange:L=>T(L.target.value),onKeyDown:L=>{L.key==="Enter"&&M.trim()&&j.categoryKey&&(le.mutate({category:j.categoryKey,subcategoryKey:j.subcategoryKey,newName:M.trim()}),T(""),S({open:!1,categoryKey:null,subcategoryKey:"",currentName:""}))},autoFocus:!0}),o.jsxs(Zr,{children:[o.jsx(V,{variant:"outline",onClick:()=>S({open:!1,categoryKey:null,subcategoryKey:"",currentName:""}),children:"Cancel"}),o.jsx(V,{onClick:()=>{M.trim()&&j.categoryKey&&(le.mutate({category:j.categoryKey,subcategoryKey:j.subcategoryKey,newName:M.trim()}),T(""),S({open:!1,categoryKey:null,subcategoryKey:"",currentName:""}))},disabled:!M.trim(),children:"Rename"})]})]})}),o.jsx(en,{open:C.open,onOpenChange:L=>N({...C,open:L}),children:o.jsxs(qt,{className:"bg-background border-border",children:[o.jsxs(Ht,{children:[o.jsx(Wt,{children:"Delete Subcategory?"}),o.jsxs(Pn,{children:['Are you sure you want to delete "',C.subcategoryName,'"? This subcategory contains ',C.tagCount," tags."]})]}),o.jsxs("div",{className:"space-y-3 py-2",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"What would you like to do with the tags?"}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(V,{variant:"outline",className:"justify-start",onClick:()=>{C.categoryKey&&(Re.mutate({category:C.categoryKey,subcategoryKey:C.subcategoryKey,action:"move_to_parent"}),N({open:!1,categoryKey:null,subcategoryKey:"",subcategoryName:"",tagCount:0}))},children:"Move tags to parent category"}),o.jsx(V,{variant:"destructive",className:"justify-start",onClick:()=>{C.categoryKey&&(Re.mutate({category:C.categoryKey,subcategoryKey:C.subcategoryKey,action:"delete"}),N({open:!1,categoryKey:null,subcategoryKey:"",subcategoryName:"",tagCount:0}))},children:"Delete subcategory and all tags"})]})]}),o.jsx(Zr,{children:o.jsx(V,{variant:"outline",onClick:()=>N({open:!1,categoryKey:null,subcategoryKey:"",subcategoryName:"",tagCount:0}),children:"Cancel"})})]})})]})}function l9(){return o.jsx("div",{className:"h-[calc(100vh-4rem)]",children:o.jsx(i9,{})})}function c9(e,t){return d.useReducer((n,r)=>t[n][r]??n,e)}var r0="ScrollArea",[ER]=Nn(r0),[u9,Fr]=ER(r0),kR=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...i}=e,[l,c]=d.useState(null),[u,h]=d.useState(null),[f,m]=d.useState(null),[p,x]=d.useState(null),[g,y]=d.useState(null),[w,v]=d.useState(0),[b,j]=d.useState(0),[S,C]=d.useState(!1),[N,_]=d.useState(!1),E=Ge(t,T=>c(T)),M=Al(s);return o.jsx(u9,{scope:n,type:r,dir:M,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:h,content:f,onContentChange:m,scrollbarX:p,onScrollbarXChange:x,scrollbarXEnabled:S,onScrollbarXEnabledChange:C,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:N,onScrollbarYEnabledChange:_,onCornerWidthChange:v,onCornerHeightChange:j,children:o.jsx(we.div,{dir:M,...i,ref:E,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});kR.displayName=r0;var TR="ScrollAreaViewport",RR=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...a}=e,i=Fr(TR,n),l=d.useRef(null),c=Ge(t,l,i.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(we.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:o.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});RR.displayName=TR;var ks="ScrollAreaScrollbar",s0=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Fr(ks,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=s,l=e.orientation==="horizontal";return d.useEffect(()=>(l?a(!0):i(!0),()=>{l?a(!1):i(!1)}),[l,a,i]),s.type==="hover"?o.jsx(d9,{...r,ref:t,forceMount:n}):s.type==="scroll"?o.jsx(h9,{...r,ref:t,forceMount:n}):s.type==="auto"?o.jsx(PR,{...r,ref:t,forceMount:n}):s.type==="always"?o.jsx(o0,{...r,ref:t}):null});s0.displayName=ks;var d9=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Fr(ks,e.__scopeScrollArea),[a,i]=d.useState(!1);return d.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),i(!0)},h=()=>{c=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),o.jsx($t,{present:n||a,children:o.jsx(PR,{"data-state":a?"visible":"hidden",...r,ref:t})})}),h9=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Fr(ks,e.__scopeScrollArea),a=e.orientation==="horizontal",i=Nm(()=>c("SCROLL_END"),100),[l,c]=c9("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return d.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),d.useEffect(()=>{const u=s.viewport,h=a?"scrollLeft":"scrollTop";if(u){let f=u[h];const m=()=>{const p=u[h];f!==p&&(c("SCROLL"),i()),f=p};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[s.viewport,a,c,i]),o.jsx($t,{present:n||l!=="hidden",children:o.jsx(o0,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Z(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Z(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),PR=d.forwardRef((e,t)=>{const n=Fr(ks,e.__scopeScrollArea),{forceMount:r,...s}=e,[a,i]=d.useState(!1),l=e.orientation==="horizontal",c=Nm(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;i(l?u:h)}},10);return yl(n.viewport,c),yl(n.content,c),o.jsx($t,{present:r||a,children:o.jsx(o0,{"data-state":a?"visible":"hidden",...s,ref:t})})}),o0=d.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=Fr(ks,e.__scopeScrollArea),a=d.useRef(null),i=d.useRef(0),[l,c]=d.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=DR(l.viewport,l.content),h={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:m=>i.current=m};function f(m,p){return y9(m,i.current,l,p)}return n==="horizontal"?o.jsx(f9,{...h,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollLeft,p=wj(m,l,s.dir);a.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=f(m,s.dir))}}):n==="vertical"?o.jsx(m9,{...h,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollTop,p=wj(m,l);a.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=f(m))}}):null}),f9=d.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=Fr(ks,e.__scopeScrollArea),[i,l]=d.useState(),c=d.useRef(null),u=Ge(t,c,a.onScrollbarXChange);return d.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(OR,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Sm(n)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.x),onDragScroll:h=>e.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(a.viewport){const m=a.viewport.scrollLeft+h.deltaX;e.onWheelScroll(m),LR(m,f)&&h.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:of(i.paddingLeft),paddingEnd:of(i.paddingRight)}})}})}),m9=d.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=Fr(ks,e.__scopeScrollArea),[i,l]=d.useState(),c=d.useRef(null),u=Ge(t,c,a.onScrollbarYChange);return d.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(OR,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Sm(n)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.y),onDragScroll:h=>e.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(a.viewport){const m=a.viewport.scrollTop+h.deltaY;e.onWheelScroll(m),LR(m,f)&&h.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:of(i.paddingTop),paddingEnd:of(i.paddingBottom)}})}})}),[p9,AR]=ER(ks),OR=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:h,onResize:f,...m}=e,p=Fr(ks,n),[x,g]=d.useState(null),y=Ge(t,E=>g(E)),w=d.useRef(null),v=d.useRef(""),b=p.viewport,j=r.content-r.viewport,S=kt(h),C=kt(c),N=Nm(f,10);function _(E){if(w.current){const M=E.clientX-w.current.left,T=E.clientY-w.current.top;u({x:M,y:T})}}return d.useEffect(()=>{const E=M=>{const T=M.target;(x==null?void 0:x.contains(T))&&S(M,j)};return document.addEventListener("wheel",E,{passive:!1}),()=>document.removeEventListener("wheel",E,{passive:!1})},[b,x,j,S]),d.useEffect(C,[r,C]),yl(x,N),yl(p.content,N),o.jsx(p9,{scope:n,scrollbar:x,hasThumb:s,onThumbChange:kt(a),onThumbPointerUp:kt(i),onThumbPositionChange:C,onThumbPointerDown:kt(l),children:o.jsx(we.div,{...m,ref:y,style:{position:"absolute",...m.style},onPointerDown:Z(e.onPointerDown,E=>{E.button===0&&(E.target.setPointerCapture(E.pointerId),w.current=x.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),_(E))}),onPointerMove:Z(e.onPointerMove,_),onPointerUp:Z(e.onPointerUp,E=>{const M=E.target;M.hasPointerCapture(E.pointerId)&&M.releasePointerCapture(E.pointerId),document.body.style.webkitUserSelect=v.current,p.viewport&&(p.viewport.style.scrollBehavior=""),w.current=null})})})}),sf="ScrollAreaThumb",IR=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=AR(sf,e.__scopeScrollArea);return o.jsx($t,{present:n||s.hasThumb,children:o.jsx(g9,{ref:t,...r})})}),g9=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,a=Fr(sf,n),i=AR(sf,n),{onThumbPositionChange:l}=i,c=Ge(t,f=>i.onThumbChange(f)),u=d.useRef(void 0),h=Nm(()=>{u.current&&(u.current(),u.current=void 0)},100);return d.useEffect(()=>{const f=a.viewport;if(f){const m=()=>{if(h(),!u.current){const p=x9(f,l);u.current=p,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[a.viewport,h,l]),o.jsx(we.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Z(e.onPointerDownCapture,f=>{const p=f.target.getBoundingClientRect(),x=f.clientX-p.left,g=f.clientY-p.top;i.onThumbPointerDown({x,y:g})}),onPointerUp:Z(e.onPointerUp,i.onThumbPointerUp)})});IR.displayName=sf;var a0="ScrollAreaCorner",MR=d.forwardRef((e,t)=>{const n=Fr(a0,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?o.jsx(v9,{...e,ref:t}):null});MR.displayName=a0;var v9=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=Fr(a0,n),[a,i]=d.useState(0),[l,c]=d.useState(0),u=!!(a&&l);return yl(s.scrollbarX,()=>{var f;const h=((f=s.scrollbarX)==null?void 0:f.offsetHeight)||0;s.onCornerHeightChange(h),c(h)}),yl(s.scrollbarY,()=>{var f;const h=((f=s.scrollbarY)==null?void 0:f.offsetWidth)||0;s.onCornerWidthChange(h),i(h)}),u?o.jsx(we.div,{...r,ref:t,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function of(e){return e?parseInt(e,10):0}function DR(e,t){const n=e/t;return isNaN(n)?0:n}function Sm(e){const t=DR(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function y9(e,t,n,r="ltr"){const s=Sm(n),a=s/2,i=t||a,l=s-i,c=n.scrollbar.paddingStart+i,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,h=n.content-n.viewport,f=r==="ltr"?[0,h]:[h*-1,0];return $R([c,u],f)(e)}function wj(e,t,n="ltr"){const r=Sm(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,i=t.content-t.viewport,l=a-r,c=n==="ltr"?[0,i]:[i*-1,0],u=gv(e,c);return $R([0,i],[0,l])(u)}function $R(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function LR(e,t){return e>0&&e<t}var x9=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return(function s(){const a={left:e.scrollLeft,top:e.scrollTop},i=n.left!==a.left,l=n.top!==a.top;(i||l)&&t(),n=a,r=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(r)};function Nm(e,t){const n=kt(e),r=d.useRef(0);return d.useEffect(()=>()=>window.clearTimeout(r.current),[]),d.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function yl(e,t){const n=kt(t);tn(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var FR=kR,w9=RR,b9=MR;const zR=d.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(FR,{ref:r,className:ee("relative overflow-hidden",e),...n,children:[o.jsx(w9,{className:"h-full w-full rounded-[inherit]",children:t}),o.jsx(UR,{}),o.jsx(b9,{})]}));zR.displayName=FR.displayName;const UR=d.forwardRef(({className:e,orientation:t="vertical",...n},r)=>o.jsx(s0,{ref:r,orientation:t,className:ee("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:o.jsx(IR,{className:"relative flex-1 rounded-full bg-border"})}));UR.displayName=s0.displayName;function wn(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function j9(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const Md=43200,bj=1440;let S9={};function N9(){return S9}function jj(e){const t=wn(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function sh(e,t){const n=wn(e),r=wn(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function C9(e){return j9(e,Date.now())}function _9(e,t){const n=wn(e),r=wn(t),s=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return s*12+a}function E9(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function k9(e,t){return+wn(e)-+wn(t)}function T9(e){const t=wn(e);return t.setHours(23,59,59,999),t}function R9(e){const t=wn(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function P9(e){const t=wn(e);return+T9(t)==+R9(t)}function A9(e,t){const n=wn(e),r=wn(t),s=sh(n,r),a=Math.abs(_9(n,r));let i;if(a<1)i=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*a);let l=sh(n,r)===-s;P9(wn(e))&&a===1&&sh(e,r)===1&&(l=!1),i=s*(a-Number(l))}return i===0?0:i}function O9(e,t,n){const r=k9(e,t)/1e3;return E9(n==null?void 0:n.roundingMethod)(r)}const I9={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},M9=(e,t,n)=>{let r;const s=I9[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Pp(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const D9={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},$9={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},L9={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},F9={date:Pp({formats:D9,defaultWidth:"full"}),time:Pp({formats:$9,defaultWidth:"full"}),dateTime:Pp({formats:L9,defaultWidth:"full"})},z9={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},U9=(e,t,n,r)=>z9[e];function nc(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):i;s=e.formattingValues[l]||e.formattingValues[i]}else{const i=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[l]||e.values[i]}const a=e.argumentCallback?e.argumentCallback(t):t;return s[a]}}const B9={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},K9={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},V9={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},q9={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},H9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},W9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},G9=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Q9={ordinalNumber:G9,era:nc({values:B9,defaultWidth:"wide"}),quarter:nc({values:K9,defaultWidth:"wide",argumentCallback:e=>e-1}),month:nc({values:V9,defaultWidth:"wide"}),day:nc({values:q9,defaultWidth:"wide"}),dayPeriod:nc({values:H9,defaultWidth:"wide",formattingValues:W9,defaultFormattingWidth:"wide"})};function rc(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const i=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?J9(l,f=>f.test(i)):Y9(l,f=>f.test(i));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const h=t.slice(i.length);return{value:u,rest:h}}}function Y9(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function J9(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function X9(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],a=t.match(e.parsePattern);if(!a)return null;let i=e.valueCallback?e.valueCallback(a[0]):a[0];i=n.valueCallback?n.valueCallback(i):i;const l=t.slice(s.length);return{value:i,rest:l}}}const Z9=/^(\d+)(th|st|nd|rd)?/i,e7=/\d+/i,t7={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},n7={any:[/^b/i,/^(a|c)/i]},r7={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},s7={any:[/1/i,/2/i,/3/i,/4/i]},o7={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},a7={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},i7={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},l7={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},c7={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},u7={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},d7={ordinalNumber:X9({matchPattern:Z9,parsePattern:e7,valueCallback:e=>parseInt(e,10)}),era:rc({matchPatterns:t7,defaultMatchWidth:"wide",parsePatterns:n7,defaultParseWidth:"any"}),quarter:rc({matchPatterns:r7,defaultMatchWidth:"wide",parsePatterns:s7,defaultParseWidth:"any",valueCallback:e=>e+1}),month:rc({matchPatterns:o7,defaultMatchWidth:"wide",parsePatterns:a7,defaultParseWidth:"any"}),day:rc({matchPatterns:i7,defaultMatchWidth:"wide",parsePatterns:l7,defaultParseWidth:"any"}),dayPeriod:rc({matchPatterns:c7,defaultMatchWidth:"any",parsePatterns:u7,defaultParseWidth:"any"})},h7={code:"en-US",formatDistance:M9,formatLong:F9,formatRelative:U9,localize:Q9,match:d7,options:{weekStartsOn:0,firstWeekContainsDate:1}};function f7(e,t,n){const r=N9(),s=(n==null?void 0:n.locale)??r.locale??h7,a=2520,i=sh(e,t);if(isNaN(i))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:i});let c,u;i>0?(c=wn(t),u=wn(e)):(c=wn(e),u=wn(t));const h=O9(u,c),f=(jj(u)-jj(c))/1e3,m=Math.round((h-f)/60);let p;if(m<2)return n!=null&&n.includeSeconds?h<5?s.formatDistance("lessThanXSeconds",5,l):h<10?s.formatDistance("lessThanXSeconds",10,l):h<20?s.formatDistance("lessThanXSeconds",20,l):h<40?s.formatDistance("halfAMinute",0,l):h<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):m===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",m,l);if(m<45)return s.formatDistance("xMinutes",m,l);if(m<90)return s.formatDistance("aboutXHours",1,l);if(m<bj){const x=Math.round(m/60);return s.formatDistance("aboutXHours",x,l)}else{if(m<a)return s.formatDistance("xDays",1,l);if(m<Md){const x=Math.round(m/bj);return s.formatDistance("xDays",x,l)}else if(m<Md*2)return p=Math.round(m/Md),s.formatDistance("aboutXMonths",p,l)}if(p=A9(u,c),p<12){const x=Math.round(m/Md);return s.formatDistance("xMonths",x,l)}else{const x=p%12,g=Math.trunc(p/12);return x<3?s.formatDistance("aboutXYears",g,l):x<9?s.formatDistance("overXYears",g,l):s.formatDistance("almostXYears",g+1,l)}}function m7(e,t){return f7(e,C9(e),t)}const p7=e=>m7(new Date(e),{addSuffix:!0}).replace(/minutes?/g,"mins").replace(/seconds?/g,"secs").replace(/hours?/g,"hrs").replace(/days?/g,"days").replace(/months?/g,"mos").replace(/years?/g,"yrs"),g7={pending:o.jsx(nt,{className:"w-3 h-3 animate-spin text-yellow-400"}),success:o.jsx(Xn,{className:"w-3 h-3 text-green-400"}),error:o.jsx(Gs,{className:"w-3 h-3 text-red-400"}),cached:o.jsx(sv,{className:"w-3 h-3 text-blue-400"})},v7={pending:"bg-yellow-500/10 border-yellow-500/30",success:"bg-green-500/10 border-green-500/30",error:"bg-red-500/10 border-red-500/30",cached:"bg-blue-500/10 border-blue-500/30"},y7=e=>({openai:"OpenAI",gemini:"Gemini",perplexity:"Perplexity","perplexity-cleaner":"Perplexity Cleaner",exa:"Exa",health:"Health"})[e.toLowerCase()]||e.charAt(0).toUpperCase()+e.slice(1).toLowerCase(),x7=e=>{var n;const t=e.requestData||{};return e.service==="perplexity-cleaner"?t.date?` Resolving contradiction for ${t.date}`:" Resolving contradicted event":e.service==="perplexity"?t.date?` Fact-checking event for ${t.date}`:t.query?` Perplexity search: "${t.query.substring(0,50)}${t.query.length>50?"...":""}"`:" Perplexity analysis":e.service==="exa"?t.query?` Searching: "${t.query.length>60?t.query.substring(0,60)+"...":t.query}"`:t.dateRange?` News search for ${t.dateRange}`:" EXA news search":e.service==="openai"?e.tagName&&e.context==="tag-categorization"?` Categorizing tag: "${e.tagName}"`:(n=t.openaiResponse)!=null&&n.summary?` Generated summary: "${t.openaiResponse.summary.substring(0,60)}${t.openaiResponse.summary.length>60?"...":""}"`:t.date?` Analyzing news for ${t.date}`:t.purpose?` ${t.purpose}`:" OpenAI processing":`${e.method} ${e.endpoint}`};function BR(){const[e,t]=d.useState(!1),[n,r]=d.useState([]),[s,a]=d.useState({totalRequests:0,requestsLastHour:0,requestsLastMinute:0,errorRate:0,cacheHitRate:0,serviceBreakdown:{exa:0,openai:0,health:0}}),[i,l]=d.useState("disconnected"),c=d.useRef(null),u=d.useRef(null),h=d.useRef(null),f=()=>{var v;if(((v=c.current)==null?void 0:v.readyState)===WebSocket.OPEN)return;const w=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/api/monitor/ws`;l("connecting"),c.current=new WebSocket(w),c.current.onopen=()=>{console.log(" Connected to API monitor"),l("connected")},c.current.onmessage=b=>{try{const j=JSON.parse(b.data);j.type==="init"?(a(j.stats),r(j.recentRequests||[])):j.type==="request"?(r(S=>{const C=S.findIndex(N=>N.id===j.data.id);if(C>=0){const N=[...S];return N[C]={...N[C],...j.data},N}return[j.data,...S.slice(0,49)]}),h.current&&clearTimeout(h.current),h.current=setTimeout(m,1e3)):j.type==="request-updated"&&r(S=>{var N,_;const C=S.findIndex(E=>E.id===j.data.id);if(C>=0){const E=[...S],M=E[C],T=M.requestData||j.data.requestData?{...M.requestData,...j.data.requestData,openaiResponse:((N=j.data.requestData)==null?void 0:N.openaiResponse)||((_=M.requestData)==null?void 0:_.openaiResponse)}:void 0;return E[C]={...M,...j.data,requestData:T},E}return S})}catch(j){console.error("Failed to parse WebSocket message:",j)}},c.current.onclose=()=>{console.log(" Disconnected from API monitor"),l("disconnected"),u.current&&clearTimeout(u.current),u.current=setTimeout(f,3e3)},c.current.onerror=b=>{console.error(" WebSocket error:",b),l("disconnected")}},m=async()=>{try{const y=await fetch("/api/monitor/stats");if(y.ok){const w=await y.json();a(w)}}catch(y){console.error("Failed to fetch API stats:",y)}},p=async()=>{try{(await fetch("/api/monitor/clear",{method:"DELETE"})).ok&&(r([]),m())}catch(y){console.error("Failed to clear history:",y)}},x=async()=>{try{const y=await fetch("/api/monitor/requests?limit=50");if(y.ok){const w=await y.json();r(w)}}catch(y){console.error("Failed to fetch API requests:",y)}};d.useEffect(()=>{if(e){f();const y=setInterval(()=>{x(),m()},2e3);return x(),m(),()=>{clearInterval(y),c.current&&c.current.close(),u.current&&clearTimeout(u.current),h.current&&clearTimeout(h.current)}}return()=>{c.current&&c.current.close(),u.current&&clearTimeout(u.current),h.current&&clearTimeout(h.current)}},[e]);const g=()=>{switch(i){case"connected":return"text-green-500";case"connecting":return"text-yellow-500";default:return"text-red-500"}};return o.jsxs(en,{open:e,onOpenChange:t,children:[o.jsx(mx,{asChild:!0,children:o.jsx(V,{variant:"ghost",size:"sm",className:"relative",children:o.jsx(Jw,{className:`w-4 h-4 ${g()} ${s.requestsLastMinute>0?"animate-heartbeat":""}`})})}),o.jsxs(qt,{className:"max-w-4xl max-h-[80vh] overflow-hidden",children:[o.jsx(Ht,{className:"pb-3",children:o.jsxs(Wt,{className:"flex items-center gap-2",children:[o.jsx(Jw,{className:`w-5 h-5 ${g()}`}),"API Request Monitor",o.jsx(me,{variant:"outline",className:`ml-2 ${i==="connected"?"bg-green-500/20 text-green-400 border-green-500/30":i==="connecting"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-red-500/20 text-red-400 border-red-500/30"}`,children:i})]})}),o.jsxs("div",{className:"grid grid-cols-4 gap-3 mb-2",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/5 border border-blue-500/20 rounded-lg p-4 backdrop-blur-sm",children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-2 font-medium",children:"Requests"}),o.jsx("div",{className:"text-2xl font-bold text-foreground mb-1",children:s.totalRequests}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.requestsLastMinute,"/min  ",s.requestsLastHour,"/hr"]})]}),o.jsxs("div",{className:`bg-gradient-to-br rounded-lg p-4 backdrop-blur-sm border ${s.errorRate>.15?"from-red-500/10 to-red-600/5 border-red-500/20":s.errorRate>.05?"from-yellow-500/10 to-yellow-600/5 border-yellow-500/20":"from-green-500/10 to-green-600/5 border-green-500/20"}`,children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-2 font-medium",children:"Error Rate"}),o.jsxs("div",{className:`text-2xl font-bold ${s.errorRate>.15?"text-red-400":s.errorRate>.05?"text-yellow-400":"text-green-400"}`,children:[(s.errorRate*100).toFixed(1),"%"]}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Cache: ",(s.cacheHitRate*100).toFixed(1),"%"]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/5 border border-purple-500/20 rounded-lg p-4 backdrop-blur-sm",children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-2 font-medium",children:"Services"}),o.jsxs("div",{className:"text-xs space-y-1 text-foreground",children:[o.jsxs("div",{children:["Exa: ",s.serviceBreakdown.exa||s.serviceBreakdown.exa||0]}),o.jsxs("div",{children:["OpenAI: ",s.serviceBreakdown.openai||s.serviceBreakdown.openai||0]}),o.jsxs("div",{children:["Gemini: ",s.serviceBreakdown.gemini||0]}),o.jsxs("div",{children:["Perplexity: ",s.serviceBreakdown.perplexity||0]}),s.serviceBreakdown["perplexity-cleaner"]?o.jsxs("div",{children:["Perplexity Cleaner: ",s.serviceBreakdown["perplexity-cleaner"]]}):null]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-indigo-500/10 to-indigo-600/5 border border-indigo-500/20 rounded-lg p-4 backdrop-blur-sm",children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-2 font-medium",children:"Quality"}),o.jsxs("div",{className:"text-2xl font-bold text-foreground mb-1",children:[s.retryRate?(s.retryRate*100).toFixed(1):"0.0","%"]}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Retry Rate"})]})]}),s.errorBreakdown&&Object.values(s.errorBreakdown).some(y=>y>0)&&o.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 mb-3",children:[o.jsx("div",{className:"text-sm font-medium text-red-400 mb-2",children:"Error Breakdown"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-red-300",children:[s.errorBreakdown.validation>0&&o.jsxs("div",{children:["Validation: ",s.errorBreakdown.validation]}),s.errorBreakdown.network>0&&o.jsxs("div",{children:["Network: ",s.errorBreakdown.network]}),s.errorBreakdown["rate-limit"]>0&&o.jsxs("div",{children:["Rate Limit: ",s.errorBreakdown["rate-limit"]]}),s.errorBreakdown.parsing>0&&o.jsxs("div",{children:["Parsing: ",s.errorBreakdown.parsing]}),s.errorBreakdown.other>0&&o.jsxs("div",{children:["Other: ",s.errorBreakdown.other]})]})]}),o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Live Request Feed"}),o.jsxs(V,{onClick:p,variant:"ghost",size:"sm",className:"flex items-center gap-1.5 h-7 px-2 text-xs text-muted-foreground hover:text-foreground",children:[o.jsx(ku,{className:"w-3 h-3"}),"Clear"]})]}),o.jsx(zR,{className:"h-96",children:n.length===0?o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No API requests yet. Start using the app to see requests here."}):o.jsxs(ka,{children:[o.jsx(Ta,{children:o.jsxs(ur,{children:[o.jsx(vt,{className:"w-[40px]"}),o.jsx(vt,{className:"w-[90px]",children:"Service"}),o.jsx(vt,{children:"Description"}),o.jsx(vt,{className:"w-[80px]",children:"Duration"}),o.jsx(vt,{className:"w-[100px]",children:"Time"})]})}),o.jsx(Ra,{children:n.map((y,w)=>o.jsxs(ur,{className:`${v7[y.status]} hover:bg-muted/30`,children:[o.jsx(yt,{className:"py-2",children:g7[y.status]}),o.jsx(yt,{className:"py-2",children:o.jsx("span",{className:"text-xs font-medium text-foreground",children:y7(y.service)})}),o.jsx(yt,{className:"py-2",children:o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("div",{className:"text-xs text-foreground",children:x7(y)}),o.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:[y.method," ",y.endpoint]}),y.error&&o.jsx("div",{className:"text-xs text-red-400 mt-1",children:y.error})]})}),o.jsx(yt,{className:"py-2",children:y.duration?o.jsxs("span",{className:"text-xs text-muted-foreground",children:[y.duration,"ms"]}):o.jsx("span",{className:"text-xs text-muted-foreground",children:""})}),o.jsx(yt,{className:"py-2",children:o.jsx("span",{className:"text-xs text-muted-foreground",children:p7(y.timestamp)})})]},`${y.id}-${w}-${y.timestamp}`))})]})})]})]})}function Ap(){var Ee,Nt,F,te,ke,Te;const{sourceDate:e,date:t}=_f(),[n,r]=_u(),{toast:s}=wr(),[a,i]=d.useState(null),[l,c]=d.useState(0),[u,h]=d.useState(!1),[f,m]=d.useState(null),[p,x]=d.useState([]),[g,y]=d.useState(null),[w,v]=d.useState({}),[b,j]=d.useState(null),[S,C]=d.useState("expanded"),N=n.startsWith("/violation"),_=n.startsWith("/fact-check"),E=N||_?t:e,{data:M}=tt({queryKey:["/api/quality-check/violations"],enabled:N}),T=(M==null?void 0:M.data)||[],R=T.find($=>$.date===E),{data:W}=tt({queryKey:["/api/fact-check/results"],enabled:_}),{data:Q}=tt({queryKey:["/api/perplexity-fact-check/results"],enabled:_,queryFn:async()=>{const $=await fetch("/api/perplexity-fact-check/results");if(!$.ok)throw new Error("Failed to fetch Perplexity fact-check results");return $.json()}}),Y=((W==null?void 0:W.data)||[]).find($=>$.date===E),A=((Q==null?void 0:Q.data)||[]).find($=>$.date===E),U=(A==null?void 0:A.verdict)==="contradicted",D=U&&!!(A!=null&&A.correctDateText),B=(A==null?void 0:A.correctDateText)||null,{data:ue=[]}=tt({queryKey:["/api/conflicts/all-grouped"],queryFn:async()=>(await fetch("/api/conflicts/all-grouped")).json(),enabled:!N&&!_}),{data:_e}=tt({queryKey:[`/api/conflicts/cluster/${E}`],enabled:!N&&!_&&!!E}),ye=(N||_)&&E?{clusterId:_?`factcheck-${E}`:`violation-${E}`,dates:[E],conflictIds:[]}:_e,Be=ue.findIndex($=>$.clusterId===(ye==null?void 0:ye.clusterId)),Ie=(ye==null?void 0:ye.dates)||[],pe=cM({queries:Ie.map($=>({queryKey:[`/api/analysis/date/${$}`],enabled:!!$}))}),ge=(Ee=pe[0])==null?void 0:Ee.data,Ke=Ie.slice(1).map(($,ae)=>({date:$,id:(ye==null?void 0:ye.conflictIds[ae])||0})),le=pe.slice(1),Re=at({mutationFn:async({date:$,articleId:ae})=>{i(ae);const fe=await Rr("PUT",`/api/analysis/date/${$}/select-article`,{articleId:ae});return{date:$,result:await fe.json()}},onSuccess:({date:$})=>{i(null),J.invalidateQueries({queryKey:[`/api/analysis/date/${$}`]}),$===E&&J.invalidateQueries({queryKey:[`/api/analysis/date/${E}`]}),s({title:"Article Selected",description:"Summary updated with selected article"})},onError:$=>{i(null),s({variant:"destructive",title:"Selection Failed",description:"Failed to update summary"})}}),Me=($,ae)=>{a||Re.isPending||Re.mutate({date:$,articleId:ae})},{data:Ue}=tt({queryKey:[`/api/analysis/date/${B}`],enabled:_&&!!B&&!!D}),De=at({mutationFn:async $=>{const ae=await fetch("/api/cleaner/resolve-contradiction",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:$})});if(!ae.ok){const fe=await ae.json();throw new Error(fe.error||"Failed to resolve contradiction")}return ae.json()},onSuccess:async $=>{s({title:"Resolution Successful",description:$.message||`Event for ${E} has been resolved.`,variant:"default"}),await J.invalidateQueries({queryKey:["/api/analysis/date",E]}),B&&await J.invalidateQueries({queryKey:["/api/analysis/date",B]}),await J.invalidateQueries({queryKey:["/api/perplexity-fact-check/results"]}),await J.invalidateQueries({queryKey:["/api/fact-check/results"]})},onError:$=>{s({title:"Resolution Failed",description:$.message||"An unexpected error occurred.",variant:"destructive"})}}),Ye=at({mutationFn:async()=>(await Rr("DELETE",`/api/conflicts/resolve/${E}`)).json(),onSuccess:()=>{J.invalidateQueries({queryKey:["/api/conflicts/all-grouped"]}),J.invalidateQueries({queryKey:["/api/conflicts/all"]}),J.invalidateQueries({queryKey:["/api/conflicts"]}),s({title:"Conflict Resolved",description:"All changes saved and conflict removed"}),r("/cleaner")},onError:()=>{s({variant:"destructive",title:"Error",description:"Failed to resolve conflict"})}}),st=at({mutationFn:async()=>Ie.length?(await Rr("POST","/api/conflicts/ai-recommendations",{sourceDate:Ie[0],duplicateDates:Ie.slice(1)})).json():{groups:[],recommendations:[],overallStrategy:""},onSuccess:$=>{const ae=$.recommendations.map(fe=>{var ot;const be=Ie.findIndex(bt=>bt===fe.date),ve=(ot=pe[be])==null?void 0:ot.data;let ft="bitcoin";if(fe.articleId&&ve&&ve.tieredArticles){const{bitcoin:bt=[],crypto:et=[],macro:mt=[]}=ve.tieredArticles;bt.some(xe=>xe.id===fe.articleId)?ft="bitcoin":et.some(xe=>xe.id===fe.articleId)?ft="crypto":mt.some(xe=>xe.id===fe.articleId)&&(ft="macro")}return{...fe,category:ft}});m({...$,recommendations:ae}),s({title:"Strategic Analysis Ready",description:`${$.groups.length} theme groups with ${ae.length} recommendations`})},onError:()=>{s({variant:"destructive",title:"Error",description:"Failed to get AI recommendations"})}}),xt=at({mutationFn:async()=>Ie.length?(await Rr("POST","/api/conflicts/smart-dedup",{sourceDate:Ie[0],duplicateDates:Ie.slice(1)})).json():{suggestions:[],overlapGroups:[]},onSuccess:$=>{x($.suggestions),Ie.forEach(ae=>{J.invalidateQueries({queryKey:[`/api/analysis/date/${ae}`]})}),s({title:"Smart Dedup Complete",description:`Found ${$.overlapGroups.length} overlapping topics. ${$.suggestions.length} alternative articles suggested.`})},onError:()=>{s({variant:"destructive",title:"Error",description:"Failed to perform smart deduplication"})}}),it=async()=>{if((N||_)&&g===E&&w[E])try{await L.mutateAsync({date:E,summary:w[E]})}catch{return}r(N?"/cleaner?tab=quality":_?"/cleaner?tab=factcheck":"/cleaner")},Yt=()=>{h(!0)},wt=()=>{Ye.mutate()},Lt=()=>{st.mutate()},qe=()=>{xt.mutate()},Ft=$=>{$.action==="switch"&&$.articleId&&Me($.date,$.articleId)},z=$=>{Me($.date,$.suggestedArticleId)},G=($,ae)=>{y($),v(fe=>({...fe,[$]:ae}))},X=($,ae)=>{v(fe=>({...fe,[$]:ae}))},oe=$=>{y(null),v(ae=>{const fe={...ae};return delete fe[$],fe})},L=at({mutationFn:async({date:$,summary:ae})=>(await Rr("PATCH",`/api/analysis/date/${$}`,{summary:ae})).json(),onSuccess:($,ae)=>{J.invalidateQueries({queryKey:[`/api/analysis/date/${ae.date}`]}),y(null),v(fe=>{const be={...fe};return delete be[ae.date],be}),s({title:"Summary Updated",description:"The summary has been saved successfully"})},onError:()=>{s({variant:"destructive",title:"Error",description:"Failed to save summary"})}}),H=at({mutationFn:async $=>(j($),(await Rr("POST",`/api/analysis/date/${$}/reanalyze-all`,{})).json()),onSuccess:($,ae)=>{j(null),J.invalidateQueries({queryKey:[`/api/analysis/date/${ae}`]}),s({title:"Re-analysis Complete",description:`Fetched ${$.totalArticles} articles from all tiers. Select an article to generate summary.`})},onError:($,ae)=>{j(null),s({variant:"destructive",title:"Re-analysis Failed",description:"Failed to fetch news from all tiers"})}}),se=()=>{if(Be>0){const $=ue[Be-1];r(`/conflict/${$.dates[0]}`)}},re=()=>{if(Be<ue.length-1){const $=ue[Be+1];r(`/conflict/${$.dates[0]}`)}},Se=$=>new Date($).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),Qe=($,ae,fe=!1)=>{var ft,ot,bt,et;if(!($!=null&&$.tieredArticles))return o.jsx("div",{className:"text-sm text-slate-500",children:"No cached news available"});const be=(ft=$.analysis)==null?void 0:ft.topArticleId,ve=$.winningTier||"bitcoin";return[...$.tieredArticles.bitcoin||[],...$.tieredArticles.crypto||[],...$.tieredArticles.macro||[]],o.jsxs(mm,{defaultValue:ve,className:"w-full",children:[o.jsxs(qu,{className:"grid w-full grid-cols-3",children:[o.jsxs(gr,{value:"bitcoin",children:["Bitcoin (",((ot=$.tieredArticles.bitcoin)==null?void 0:ot.length)||0,")"]}),o.jsxs(gr,{value:"crypto",children:["Crypto (",((bt=$.tieredArticles.crypto)==null?void 0:bt.length)||0,")"]}),o.jsxs(gr,{value:"macro",children:["Macro (",((et=$.tieredArticles.macro)==null?void 0:et.length)||0,")"]})]}),["bitcoin","crypto","macro"].map(mt=>{var xe;return o.jsx(os,{value:mt,className:"space-y-2 max-h-96 overflow-y-auto",children:(((xe=$.tieredArticles)==null?void 0:xe[mt])||[]).map(Ve=>{const Tt=Ve.id===be;return o.jsx(jt,{className:`p-3 ${Tt?"border-orange-500 bg-orange-50":""}`,children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[o.jsx(V,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>Me(ae,Ve.id),disabled:a===Ve.id||Re.isPending,"data-testid":`select-article-${Ve.id}`,children:a===Ve.id?o.jsx(pn,{className:"w-4 h-4 animate-spin text-orange-600"}):Tt?o.jsx(Pr,{className:"w-4 h-4 fill-orange-600 text-orange-600"}):o.jsx(Pr,{className:"w-4 h-4 text-slate-400 hover:text-orange-600 transition-colors"})}),o.jsx(V,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>window.open(Ve.url,"_blank"),title:"Open article in new tab","data-testid":`open-article-${Ve.id}`,children:o.jsx(Rf,{className:"w-4 h-4 text-slate-400 hover:text-blue-600 transition-colors"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"text-sm font-semibold text-slate-900 truncate",children:Ve.title}),o.jsx("p",{className:"text-xs text-slate-600 line-clamp-2 mt-1",children:Ve.summary}),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx("span",{className:"text-xs text-slate-500",children:Ve.author||"Unknown"}),o.jsx("span",{className:"text-xs text-slate-400",children:""}),o.jsx("span",{className:"text-xs text-slate-500",children:new Date(Ve.publishedDate).toLocaleDateString()})]})]})]})},Ve.id)})},mt)})]})};return!ye||!Ie.length?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"text-center",children:o.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Loading cluster..."})})}):o.jsxs("div",{className:"fixed inset-0 bg-white z-50 flex flex-col",children:[o.jsx("div",{className:"border-b bg-slate-50 p-4",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(V,{variant:"ghost",size:"sm",onClick:it,"data-testid":"button-close-cockpit",children:o.jsx(On,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-slate-900",children:N?"Quality Violation Editor":_?"Fact-Check Review":"Conflict Resolution Cockpit"}),o.jsx("p",{className:"text-sm text-slate-600",children:N?"Fix quality violations and browse articles":_?"Review fact-check verdict and browse articles":"Review and resolve duplicate events"})]})]}),N&&R&&o.jsx("div",{className:"flex flex-wrap gap-2",children:R.violations.map(($,ae)=>o.jsx(me,{variant:"outline",className:"bg-red-100 text-red-700 border-red-300",children:$},ae))}),_&&(A||Y)&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[((A==null?void 0:A.verdict)||(Y==null?void 0:Y.verdict))==="verified"&&o.jsxs(me,{variant:"outline",className:"bg-green-100 text-green-700 border-green-300 flex items-center gap-1",children:[o.jsx(Ai,{className:"w-3 h-3"}),"Verified"]}),((A==null?void 0:A.verdict)||(Y==null?void 0:Y.verdict))==="contradicted"&&o.jsxs(me,{variant:"outline",className:"bg-red-100 text-red-700 border-red-300 flex items-center gap-1",children:[o.jsx(hC,{className:"w-3 h-3"}),"Contradicted"]}),((A==null?void 0:A.verdict)||(Y==null?void 0:Y.verdict))==="uncertain"&&o.jsxs(me,{variant:"outline",className:"bg-amber-100 text-amber-700 border-amber-300 flex items-center gap-1",children:[o.jsx(Gs,{className:"w-3 h-3"}),"Uncertain"]}),o.jsxs(me,{variant:"outline",className:"text-xs",children:["Confidence: ",Math.round((A==null?void 0:A.confidence)||(Y==null?void 0:Y.confidence)||0),"%"]})]}),((A==null?void 0:A.reasoning)||(Y==null?void 0:Y.reasoning))&&o.jsx("p",{className:"text-xs text-slate-600 max-w-md",children:(A==null?void 0:A.reasoning)||(Y==null?void 0:Y.reasoning)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(V,{variant:"outline",size:"sm",onClick:()=>C(S==="expanded"?"compact":"expanded"),"data-testid":"button-toggle-view",title:S==="expanded"?"Switch to Compact View":"Switch to Expanded View",children:S==="expanded"?o.jsxs(o.Fragment,{children:[o.jsx(yD,{className:"w-4 h-4 mr-2"}),"Compact"]}):o.jsxs(o.Fragment,{children:[o.jsx(vD,{className:"w-4 h-4 mr-2"}),"Expanded"]})}),!N&&!_&&o.jsxs(V,{variant:"outline",size:"sm",onClick:Lt,disabled:st.isPending,"data-testid":"button-ask-ai",children:[st.isPending?o.jsx(nt,{className:"w-4 h-4 animate-spin mr-2"}):o.jsx(lr,{className:"w-4 h-4 mr-2"}),"Ask AI for Help"]}),_&&U&&o.jsxs(V,{variant:"default",size:"sm",onClick:()=>De.mutate(E),disabled:De.isPending,className:"bg-blue-600 hover:bg-blue-700","data-testid":"button-ai-resolve",children:[De.isPending?o.jsx(nt,{className:"w-4 h-4 animate-spin mr-2"}):o.jsx(lr,{className:"w-4 h-4 mr-2"}),"AI Resolve"]}),!N&&!_&&o.jsxs(V,{variant:"outline",size:"sm",onClick:qe,disabled:xt.isPending,"data-testid":"button-smart-dedup",className:"bg-purple-50 hover:bg-purple-100 border-purple-200",children:[xt.isPending?o.jsx(nt,{className:"w-4 h-4 animate-spin mr-2"}):o.jsx(lr,{className:"w-4 h-4 mr-2 text-purple-600"}),"Smart Dedup"]}),N||_?o.jsxs(V,{variant:"default",size:"sm",onClick:it,"data-testid":"button-save-close",className:"bg-green-600 hover:bg-green-700",children:[o.jsx(Ai,{className:"w-4 h-4 mr-2"}),"Save & Close"]}):o.jsxs(V,{variant:"default",size:"sm",onClick:Yt,disabled:Ye.isPending,"data-testid":"button-done-delete",className:"bg-green-600 hover:bg-green-700",children:[Ye.isPending?o.jsx(nt,{className:"w-4 h-4 animate-spin mr-2"}):o.jsx(Ai,{className:"w-4 h-4 mr-2"}),"Done & Delete"]}),o.jsx(BR,{}),!N&&!_&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"h-6 w-px bg-slate-300 mx-2"}),o.jsxs("span",{className:"text-sm text-slate-600",children:[Be+1," / ",ue.length]}),o.jsx(V,{variant:"outline",size:"sm",onClick:se,disabled:Be===0,"data-testid":"button-prev-conflict",children:o.jsx(Zg,{className:"w-4 h-4"})}),o.jsx(V,{variant:"outline",size:"sm",onClick:re,disabled:Be===ue.length-1,"data-testid":"button-next-conflict",children:o.jsx(ul,{className:"w-4 h-4"})})]}),N&&T.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"h-6 w-px bg-slate-300 mx-2"}),o.jsxs("span",{className:"text-sm text-slate-600",children:[T.findIndex($=>$.date===E)+1," / ",T.length]}),o.jsx(V,{variant:"outline",size:"sm",onClick:()=>{const $=T.findIndex(ae=>ae.date===E);$>0&&r(`/violation/${T[$-1].date}`)},disabled:T.findIndex($=>$.date===E)===0,"data-testid":"button-prev-violation",children:o.jsx(Zg,{className:"w-4 h-4"})}),o.jsx(V,{variant:"outline",size:"sm",onClick:()=>{const $=T.findIndex(ae=>ae.date===E);$<T.length-1&&r(`/violation/${T[$+1].date}`)},disabled:T.findIndex($=>$.date===E)===T.length-1,"data-testid":"button-next-violation",children:o.jsx(ul,{className:"w-4 h-4"})})]})]})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:o.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[o.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Do,{className:"w-6 h-6 text-blue-600"}),o.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Source Date"}),o.jsx(me,{variant:"default",className:"ml-2",children:"Canonical"})]}),o.jsxs("div",{className:S==="expanded"?"grid grid-cols-1 lg:grid-cols-3 gap-6":"space-y-6",children:[o.jsx("div",{className:S==="expanded"?"lg:col-span-2":"",children:o.jsxs("div",{className:"bg-white rounded-lg p-4 border",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"font-semibold text-slate-900",children:Se(E)}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-sm text-slate-500",children:[g===E?((Nt=w[E])==null?void 0:Nt.length)||0:((te=(F=ge==null?void 0:ge.analysis)==null?void 0:F.summary)==null?void 0:te.length)||0," chars"]}),g!==E&&o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{var $;return G(E,(($=ge==null?void 0:ge.analysis)==null?void 0:$.summary)||"")},"data-testid":`edit-summary-${E}`,children:o.jsx(dl,{className:"w-4 h-4"})})]})]}),g===E?o.jsxs(o.Fragment,{children:[o.jsx(lu,{value:w[E]||"",onChange:$=>X(E,$.target.value),className:"text-slate-800 text-lg leading-relaxed mb-3 min-h-[100px] bg-white",placeholder:"Edit the summary...","data-testid":`textarea-summary-${E}`}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(V,{size:"sm",variant:"outline",onClick:()=>oe(E),"data-testid":`cancel-edit-${E}`,children:"Cancel"}),o.jsxs(V,{size:"sm",onClick:()=>L.mutate({date:E,summary:w[E]||""}),disabled:L.isPending,className:"bg-green-600 hover:bg-green-700","data-testid":`save-edit-${E}`,children:[L.isPending?o.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(tv,{className:"w-4 h-4 mr-2"}),"Save"]})]})]}):o.jsx("p",{className:"text-slate-700",children:(ke=ge==null?void 0:ge.analysis)==null?void 0:ke.summary})]})}),S==="expanded"&&o.jsx("div",{className:"lg:col-span-1",children:o.jsxs("div",{className:"bg-white rounded-lg p-4 border",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"font-semibold text-slate-900",children:"Cached News"}),o.jsxs(V,{size:"sm",variant:"outline",onClick:()=>E&&H.mutate(E),disabled:b===E||H.isPending,"data-testid":`reanalyze-${E}`,title:"Fetch news from all tiers (Bitcoin, Crypto, Macro)",children:[b===E?o.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(pn,{className:"w-4 h-4 mr-2"}),"Re-analyze"]})]}),Qe(ge,E)]})})]})]}),_&&D&&B&&o.jsxs("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Do,{className:"w-6 h-6 text-amber-600"}),o.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Suggested Correct Date"}),o.jsx(me,{variant:"outline",className:"ml-2 bg-amber-100 text-amber-700 border-amber-300",children:"Perplexity Suggested"})]}),o.jsxs("div",{className:S==="expanded"?"grid grid-cols-1 lg:grid-cols-3 gap-6":"space-y-6",children:[o.jsx("div",{className:S==="expanded"?"lg:col-span-2":"",children:o.jsxs("div",{className:"bg-white rounded-lg p-4 border",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsx("h3",{className:"font-semibold text-slate-900",children:/^\d{4}-\d{2}-\d{2}$/.test(B)?Se(B):B})}),(Te=Ue==null?void 0:Ue.analysis)!=null&&Te.summary?o.jsx("p",{className:"text-slate-700",children:Ue.analysis.summary}):o.jsx("p",{className:"text-slate-500 italic",children:"No analysis exists for this date yet. The AI resolution may move the summary here."})]})}),o.jsx("div",{className:"",children:Ue&&Qe(Ue,B)})]})]}),f&&o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-300 rounded-lg p-6 shadow-lg",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(lr,{className:"w-6 h-6 text-blue-600"}),o.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Strategic Cluster Analysis"}),o.jsx(me,{variant:"default",className:"bg-blue-600",children:"AI-Powered"})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4 border border-blue-200",children:[o.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Overall Resolution Strategy"}),o.jsx("p",{className:"text-sm text-slate-700",children:f.overallStrategy})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h3",{className:"text-sm font-semibold text-slate-900",children:["Theme Groups (",f.groups.length,")"]}),f.groups.map(($,ae)=>o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(me,{variant:"outline",className:"bg-slate-100 text-slate-800",children:$.theme}),o.jsxs("span",{className:"text-xs text-slate-500",children:[$.dates.length," date",$.dates.length>1?"s":""]})]}),o.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:$.dates.map((fe,be)=>o.jsx(me,{variant:"secondary",className:"text-xs",children:fe},be))})]}),o.jsx(me,{variant:"outline",className:$.action.toLowerCase().includes("keep")?"bg-green-100 text-green-700 border-green-300":"bg-yellow-100 text-yellow-700 border-yellow-300",children:$.action})]}),o.jsx("p",{className:"text-xs text-slate-600",children:$.reasoning})]},ae))]})]}),o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:["Duplicate Dates (",Ke.length,")"]}),o.jsx("div",{className:"space-y-4",children:Ke.map(({date:$,id:ae},fe)=>{var ft,ot,bt,et,mt;const be=(ft=le[fe])==null?void 0:ft.data,ve=f==null?void 0:f.recommendations.find(xe=>xe.date===$);return o.jsx("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-lg p-6",children:o.jsxs("div",{className:S==="expanded"?"grid grid-cols-1 lg:grid-cols-3 gap-6":"space-y-6",children:[o.jsx("div",{className:S==="expanded"?"lg:col-span-2":"",children:o.jsxs("div",{className:"bg-white rounded-lg p-4 border",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"font-semibold text-slate-900",children:Se($)}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-sm text-slate-500",children:[g===$?((ot=w[$])==null?void 0:ot.length)||0:((et=(bt=be==null?void 0:be.analysis)==null?void 0:bt.summary)==null?void 0:et.length)||0," chars"]}),g!==$&&o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{var xe;return G($,((xe=be==null?void 0:be.analysis)==null?void 0:xe.summary)||"")},"data-testid":`edit-summary-${$}`,children:o.jsx(dl,{className:"w-4 h-4"})})]})]}),g===$?o.jsxs(o.Fragment,{children:[o.jsx(lu,{value:w[$]||"",onChange:xe=>X($,xe.target.value),className:"text-slate-800 text-lg leading-relaxed mb-3 min-h-[100px] bg-white",placeholder:"Edit the summary...","data-testid":`textarea-summary-${$}`}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(V,{size:"sm",variant:"outline",onClick:()=>oe($),"data-testid":`cancel-edit-${$}`,children:"Cancel"}),o.jsxs(V,{size:"sm",onClick:()=>L.mutate({date:$,summary:w[$]||""}),disabled:L.isPending,className:"bg-green-600 hover:bg-green-700","data-testid":`save-edit-${$}`,children:[L.isPending?o.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(tv,{className:"w-4 h-4 mr-2"}),"Save"]})]})]}):o.jsx("p",{className:"text-slate-700",children:((mt=be==null?void 0:be.analysis)==null?void 0:mt.summary)||"No summary available"}),(()=>{const xe=p.find(Ve=>Ve.date===$);return xe?o.jsx("div",{className:"mt-4 p-4 bg-purple-50 border-2 border-purple-300 rounded-lg",children:o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(lr,{className:"w-5 h-5 text-purple-600"}),o.jsx("span",{className:"text-sm font-bold text-purple-900",children:"Smart Dedup Suggestion"})]}),o.jsxs("div",{className:"space-y-2 mb-3",children:[o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(me,{variant:"outline",className:"bg-red-100 text-red-700 border-red-300 shrink-0",children:"Current Topic"}),o.jsx("p",{className:"text-sm text-slate-700 flex-1",children:xe.currentTopic})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(me,{variant:"outline",className:"bg-green-100 text-green-700 border-green-300 shrink-0",children:"Suggested Topic"}),o.jsx("p",{className:"text-sm text-slate-700 flex-1",children:xe.newTopic})]})]}),o.jsxs("div",{className:"bg-white p-2 rounded border border-purple-200 mb-2",children:[o.jsx("p",{className:"text-xs text-slate-600 font-semibold mb-1",children:"AI Reasoning:"}),o.jsx("p",{className:"text-xs text-slate-700",children:xe.reasoning})]}),o.jsxs("p",{className:"text-xs text-purple-600 font-mono",children:["Article ID: ",xe.suggestedArticleId]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(V,{size:"sm",variant:"outline",onClick:()=>x(Ve=>Ve.filter(Tt=>Tt.date!==$)),"data-testid":`reject-smart-dedup-${$}`,children:"Reject"}),o.jsx(V,{size:"sm",onClick:()=>{z(xe),x(Ve=>Ve.filter(Tt=>Tt.date!==$))},"data-testid":`accept-smart-dedup-${$}`,className:"bg-purple-600 hover:bg-purple-700",children:"Accept"})]})]})}):null})(),ve&&o.jsx("div",{className:`mt-4 p-3 ${ve.action==="keep"?"bg-green-50 border border-green-200":"bg-blue-50 border border-blue-200"} rounded-lg`,children:o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(lr,{className:"w-4 h-4 text-blue-600"}),o.jsx("span",{className:"text-sm font-semibold text-blue-900",children:"AI Recommendation"}),o.jsx(me,{variant:"outline",className:ve.action==="keep"?"bg-green-100 text-green-700 border-green-300":"bg-yellow-100 text-yellow-700 border-yellow-300",children:ve.action.toUpperCase()}),ve.category&&o.jsx(me,{variant:"outline",className:`text-xs ${ve.category==="bitcoin"?"bg-orange-100 text-orange-700 border-orange-300":ve.category==="crypto"?"bg-purple-100 text-purple-700 border-purple-300":"bg-blue-100 text-blue-700 border-blue-300"}`,children:ve.category})]}),ve.action==="switch"&&ve.newTopic&&o.jsxs("div",{className:"mb-2 p-2 bg-white rounded border border-blue-200",children:[o.jsx("p",{className:"text-xs text-slate-600 font-semibold mb-1",children:"Suggested Topic:"}),o.jsx("p",{className:"text-sm text-slate-800",children:ve.newTopic})]}),o.jsx("p",{className:"text-sm text-slate-700 mb-2",children:ve.reasoning}),ve.articleId&&o.jsxs("p",{className:"text-xs text-slate-500",children:["Article ID: ",ve.articleId]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(V,{size:"sm",variant:"outline",onClick:()=>m(xe=>xe?{...xe,recommendations:xe.recommendations.filter(Ve=>Ve.date!==$)}:null),"data-testid":`reject-recommendation-${$}`,children:"Dismiss"}),ve.action==="switch"&&ve.articleId&&o.jsx(V,{size:"sm",onClick:()=>{Ft(ve),m(xe=>xe?{...xe,recommendations:xe.recommendations.filter(Ve=>Ve.date!==$)}:null)},"data-testid":`accept-recommendation-${$}`,className:"bg-green-600 hover:bg-green-700",children:"Apply Switch"})]})]})})]})}),S==="expanded"&&o.jsx("div",{className:"lg:col-span-1",children:o.jsxs("div",{className:"bg-white rounded-lg p-4 border",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"font-semibold text-slate-900",children:"Cached News"}),o.jsxs(V,{size:"sm",variant:"outline",onClick:()=>H.mutate($),disabled:b===$||H.isPending,"data-testid":`reanalyze-${$}`,title:"Fetch news from all tiers (Bitcoin, Crypto, Macro)",children:[b===$?o.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(pn,{className:"w-4 h-4 mr-2"}),"Re-analyze"]})]}),Qe(be,$)]})})]})},ae)})})]})]})}),o.jsx(Wx,{open:u,onOpenChange:h,children:o.jsxs(am,{children:[o.jsxs(im,{children:[o.jsx(cm,{children:"Confirm Resolution"}),o.jsx(um,{children:"Are you sure you want to mark this conflict as resolved? This will save all current article selections and remove the conflict from the database."})]}),o.jsxs(lm,{children:[o.jsx(hm,{children:"Cancel"}),o.jsx(dm,{onClick:wt,className:"bg-green-600 hover:bg-green-700",children:"Confirm & Delete"})]})]})})]})}const w7={},zi=w7,Sj=zi.VITE_SUPABASE_URL??zi.SUPABASE_URL??zi.PUBLIC_SUPABASE_URL,Nj=zi.VITE_SUPABASE_ANON_KEY??zi.SUPABASE_ANON_KEY??zi.PUBLIC_SUPABASE_ANON_KEY,li=Sj&&Nj?FT(Sj,Nj,{auth:{persistSession:!1}}):null;function b7(){const[e,t]=d.useState([]),[n,r]=d.useState(!0),[s,a]=d.useState(!1),[i,l]=d.useState(!1),[c,u]=d.useState(null),[h,f]=d.useState({title:"",details:"",importance:1}),m=!!li,p=async(g=!0)=>{if(!li)return;g?r(!0):a(!0);const{data:y,error:w}=await li.from("isolated_lab_samples").select("*").order("created_at",{ascending:!1});w?u(w.message):(u(null),t(y??[])),g?r(!1):a(!1)};d.useEffect(()=>{if(!li){u("Supabase credentials are missing. Please set SUPABASE_URL and SUPABASE_ANON_KEY (VITE_/PUBLIC_ prefixes also work)."),r(!1);return}p()},[]);const x=async g=>{if(g.preventDefault(),!li)return;if(!h.title.trim()){u("Title is required.");return}l(!0),u(null);const{error:y}=await li.from("isolated_lab_samples").insert({title:h.title.trim(),details:h.details.trim()||null,importance:h.importance});y?u(y.message):(f({title:"",details:"",importance:1}),p(!1)),l(!1)};return o.jsx("div",{style:Rt.wrapper,children:o.jsxs("div",{style:Rt.card,children:[o.jsxs("header",{style:Rt.header,children:[o.jsxs("div",{children:[o.jsx("p",{style:Rt.eyebrow,children:"Supabase Lab"}),o.jsx("h1",{style:Rt.title,children:"Isolated Testing Ground"}),o.jsxs("p",{style:Rt.subtitle,children:["Minimal React page that talks directly to the Supabase table",o.jsx("code",{style:Rt.code,children:"isolated_lab_samples"}),"."]})]}),o.jsx("button",{style:Rt.refreshButton,onClick:()=>p(!1),disabled:!m||n||s,children:s?"Refreshing":"Manual Refresh"})]}),!m&&o.jsx("div",{style:Rt.alert,children:"Supabase client is not configured. Set environment variables and reload."}),c&&o.jsx("div",{style:Rt.error,children:c}),o.jsx("section",{children:o.jsxs("form",{style:Rt.form,onSubmit:x,children:[o.jsxs("label",{style:Rt.label,children:["Title",o.jsx("input",{style:Rt.input,type:"text",value:h.title,onChange:g=>f(y=>({...y,title:g.target.value})),placeholder:"Quick headline",required:!0,disabled:!m||i})]}),o.jsxs("label",{style:Rt.label,children:["Details",o.jsx("textarea",{style:{...Rt.input,minHeight:80,resize:"vertical"},value:h.details,onChange:g=>f(y=>({...y,details:g.target.value})),placeholder:"Longer note for context (optional)",disabled:!m||i})]}),o.jsxs("label",{style:Rt.label,children:["Importance (0-5)",o.jsx("input",{style:Rt.input,type:"number",min:0,max:5,step:1,value:h.importance,onChange:g=>f(y=>({...y,importance:Number(g.target.value)})),disabled:!m||i})]}),o.jsx("button",{style:Rt.primaryButton,type:"submit",disabled:!m||i,children:i?"Saving":"Insert Row"})]})}),o.jsxs("section",{children:[o.jsxs("h2",{style:Rt.sectionTitle,children:["Latest rows (",e.length,")"]}),n?o.jsx("p",{style:Rt.muted,children:"Loading data"}):e.length===0?o.jsx("p",{style:Rt.muted,children:"No entries yet. Add one above to populate the table."}):o.jsx("div",{style:Rt.list,children:e.map(g=>o.jsxs("article",{style:Rt.listItem,children:[o.jsxs("div",{style:Rt.listItemHeader,children:[o.jsx("strong",{children:g.title}),o.jsxs("span",{style:Rt.badge,children:["importance ",g.importance]})]}),g.details&&o.jsx("p",{style:Rt.details,children:g.details}),o.jsx("p",{style:Rt.timestamp,children:new Date(g.created_at).toLocaleString()})]},g.id))})]})]})})}const Rt={wrapper:{minHeight:"100vh",padding:"32px",background:"linear-gradient(120deg, rgba(13,17,23,1) 0%, rgba(29,35,42,1) 60%, rgba(43,50,61,1) 100%)",color:"#f2f4f8",fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif'},card:{maxWidth:960,margin:"0 auto",background:"rgba(10, 12, 15, 0.65)",borderRadius:16,border:"1px solid rgba(255,255,255,0.08)",padding:32,boxShadow:"0 20px 60px rgba(0,0,0,0.35)",backdropFilter:"blur(10px)"},header:{display:"flex",justifyContent:"space-between",gap:16,flexWrap:"wrap",marginBottom:24},eyebrow:{textTransform:"uppercase",letterSpacing:2,fontSize:12,color:"#a0aec0",marginBottom:4},title:{fontSize:32,margin:0},subtitle:{marginTop:8,color:"#cbd5f5"},code:{marginLeft:8,padding:"2px 6px",borderRadius:4,background:"rgba(255,255,255,0.08)",fontSize:14},refreshButton:{alignSelf:"flex-start",padding:"10px 18px",background:"#1e293b",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"#e2e8f0",cursor:"pointer"},alert:{padding:16,borderRadius:8,border:"1px solid #facc15",background:"rgba(250,204,21,0.1)",color:"#facc15",marginBottom:16},error:{padding:16,borderRadius:8,border:"1px solid #f87171",background:"rgba(248,113,113,0.1)",color:"#fca5a5",marginBottom:16},form:{display:"flex",flexDirection:"column",gap:16,marginBottom:32},label:{display:"flex",flexDirection:"column",gap:8,fontSize:14,color:"#cbd5f5"},input:{padding:"12px 14px",borderRadius:10,border:"1px solid rgba(255,255,255,0.12)",background:"rgba(15,18,25,0.9)",color:"#f8fafc",fontSize:16},primaryButton:{padding:"12px 18px",borderRadius:10,border:"none",background:"linear-gradient(135deg, rgba(56,189,248,1), rgba(14,165,233,1))",color:"#0f172a",fontWeight:600,cursor:"pointer"},sectionTitle:{fontSize:22,marginBottom:12},muted:{color:"#94a3b8"},list:{display:"flex",flexDirection:"column",gap:16},listItem:{padding:20,borderRadius:12,border:"1px solid rgba(148,163,184,0.25)",background:"rgba(15,18,25,0.9)"},listItemHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8,gap:16},badge:{fontSize:12,padding:"4px 8px",borderRadius:999,background:"rgba(14,165,233,0.15)",color:"#38bdf8",textTransform:"uppercase",letterSpacing:1},details:{margin:"8px 0 12px",color:"#e2e8f0",lineHeight:1.5},timestamp:{fontSize:13,color:"#94a3b8"}};function j7(e,t=[]){let n=[];function r(a,i){const l=d.createContext(i);l.displayName=a+"Context";const c=n.length;n=[...n,i];const u=f=>{var w;const{scope:m,children:p,...x}=f,g=((w=m==null?void 0:m[e])==null?void 0:w[c])||l,y=d.useMemo(()=>x,Object.values(x));return o.jsx(g.Provider,{value:y,children:p})};u.displayName=a+"Provider";function h(f,m){var g;const p=((g=m==null?void 0:m[e])==null?void 0:g[c])||l,x=d.useContext(p);if(x)return x;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[u,h]}const s=()=>{const a=n.map(i=>d.createContext(i));return function(l){const c=(l==null?void 0:l[e])||a;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,S7(s,...t)]}function S7(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const i=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}var i0="Progress",l0=100,[N7]=j7(i0),[C7,_7]=N7(i0),KR=d.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=E7,...i}=e;(s||s===0)&&!Cj(s)&&console.error(k7(`${s}`,"Progress"));const l=Cj(s)?s:l0;r!==null&&!_j(r,l)&&console.error(T7(`${r}`,"Progress"));const c=_j(r,l)?r:null,u=af(c)?a(c,l):void 0;return o.jsx(C7,{scope:n,value:c,max:l,children:o.jsx(Zf.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":af(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":HR(c,l),"data-value":c??void 0,"data-max":l,...i,ref:t})})});KR.displayName=i0;var VR="ProgressIndicator",qR=d.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=_7(VR,n);return o.jsx(Zf.div,{"data-state":HR(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});qR.displayName=VR;function E7(e,t){return`${Math.round(e/t*100)}%`}function HR(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function af(e){return typeof e=="number"}function Cj(e){return af(e)&&!isNaN(e)&&e>0}function _j(e,t){return af(e)&&!isNaN(e)&&e<=t&&e>=0}function k7(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${l0}\`.`}function T7(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${l0} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var WR=KR,R7=qR;const c0=d.forwardRef(({className:e,value:t,...n},r)=>o.jsx(WR,{ref:r,className:ee("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:o.jsx(R7,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));c0.displayName=WR.displayName;function P7({open:e,onClose:t,onImportComplete:n,buttonVariant:r="ghost",buttonSize:s="sm",showLabel:a=!1}={}){const[i,l]=d.useState(!1),c=e!==void 0?e:i,u=t!==void 0?T=>{T||t()}:l,[h,f]=d.useState(null),[m,p]=d.useState(!1),[x,g]=d.useState(0),[y,w]=d.useState(null),[v,b]=d.useState(null),{toast:j}=wr(),S=T=>T.name.toLowerCase().endsWith(".csv")?T.size>5*1024*1024?"CSV file must be smaller than 5MB":null:"Please select a CSV file (must have .csv extension)",C=T=>{var Q;const R=(Q=T.target.files)==null?void 0:Q[0];if(!R)return;const W=S(R);if(W){b(W),f(null);return}f(R),b(null)},N=T=>{var he,Y;const R=T.trim().split(`
`),W=[],Q=(he=R[0])!=null&&he.toLowerCase().includes("date")||(Y=R[0])!=null&&Y.toLowerCase().includes("summary")?1:0;for(let O=Q;O<R.length;O++){const A=R[O].trim();if(!A)continue;const U=A.match(/^"?([^",]+)"?,\s*"?([^"]*)"?$/);if(U){const[,D,B]=U;D&&B&&/^\d{4}-\d{2}-\d{2}$/.test(D.trim())&&W.push({date:D.trim(),summary:B.trim().replace(/"/g,"")})}}return W},_=async()=>{if(h){p(!0),g(0),b(null),w(null);try{const T=await h.text(),R=N(T);if(R.length===0)throw new Error("No valid entries found in CSV. Please check the format: Date,Summary");let W=0,Q=0;const he=[];for(let Y=0;Y<R.length;Y++){const O=R[Y];g((Y+1)/R.length*100);try{const A=await fetch("/api/manual-entries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:O.date,title:O.summary,summary:O.summary,description:`Imported from CSV on ${new Date().toLocaleDateString()}`})});if(A.ok)W++;else{const U=await A.text();A.status===409?Q++:he.push(`${O.date}: ${U}`)}}catch(A){he.push(`${O.date}: ${A.message}`)}}w({total:R.length,imported:W,skipped:Q,errors:he}),W>0&&(j({title:"Import Complete",description:`Successfully imported ${W} key dates`}),n==null||n())}catch(T){const R=T.message;R.includes("encoding")?b("File encoding error: Please save your CSV file with UTF-8 encoding and try again"):R.includes("parse")||R.includes("malformed")?b("CSV parsing error: File appears to be corrupted or malformed. Please check your file format"):R.includes("memory")||R.includes("size")?b("File too large: Cannot process this CSV file due to size limitations"):R.includes("network")||R.includes("fetch")?b("Network error: Unable to connect to server. Please check your internet connection"):b(`Import failed: ${R}

Please verify your CSV file format and try again`)}finally{p(!1)}}},E=()=>{f(null),g(0),w(null),b(null),u(!1)},M=()=>{const T=`Date,Summary
2009-01-03,Bitcoin Genesis Block created by Satoshi Nakamoto
2009-01-12,First Bitcoin transaction between Satoshi and Hal Finney
2010-05-22,First commercial Bitcoin transaction - 10000 BTC for two pizzas
2010-07-17,Mt. Gox exchange launches
2011-02-09,Bitcoin reaches parity with US Dollar
2012-11-28,First Bitcoin halving reduces block reward to 25 BTC
2013-12-17,Bitcoin price peaks at over $1000 for first time
2017-12-17,Bitcoin reaches all-time high near $20000
2020-05-11,Third Bitcoin halving reduces block reward to 6.25 BTC
2021-02-08,Tesla announces $1.5B Bitcoin purchase`,R=new Blob([T],{type:"text/csv;charset=utf-8;"}),W=document.createElement("a"),Q=URL.createObjectURL(R);W.setAttribute("href",Q),W.setAttribute("download","bitcoin-events-template.csv"),W.style.visibility="hidden",document.body.appendChild(W),W.click(),document.body.removeChild(W),j({title:"Template Downloaded",description:"Use this CSV template as a guide for your imports"})};return o.jsxs(en,{open:c,onOpenChange:u,children:[o.jsx(mx,{asChild:!0,children:o.jsxs(V,{variant:r,size:s,title:"Import Bitcoin Events",children:[o.jsx(Xd,{className:"w-4 h-4"}),a&&o.jsx("span",{className:"ml-2",children:"Import Bitcoin Events"})]})}),o.jsxs(qt,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto","aria-describedby":"import-description",children:[o.jsx(Ht,{children:o.jsxs(Wt,{className:"flex items-center gap-2",children:[o.jsx(Xd,{className:"w-5 h-5"}),"Import Bitcoin Events & Key Dates"]})}),o.jsx("div",{id:"import-description",className:"sr-only",children:"Dialog to import Bitcoin events and key dates from CSV files"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(ts,{htmlFor:"csv-file",children:"Select CSV File"}),o.jsxs(V,{variant:"outline",size:"sm",onClick:M,className:"text-xs",children:[o.jsx(ev,{className:"w-3 h-3 mr-1"}),"Download Template"]})]}),o.jsx(An,{id:"csv-file",type:"file",accept:".csv",onChange:C,disabled:m}),o.jsx("p",{className:"text-sm text-slate-500",children:"CSV format: Date,Summary (e.g., 2009-01-03,Bitcoin Genesis Block)"})]}),v&&o.jsxs($h,{variant:"destructive",children:[o.jsx(Gs,{className:"h-4 w-4"}),o.jsx(Lh,{children:v})]}),m&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Xd,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:"Importing key dates..."})]}),o.jsx(c0,{value:x,className:"w-full"})]}),y&&o.jsxs($h,{children:[o.jsx(Xn,{className:"h-4 w-4"}),o.jsx(Lh,{children:o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{children:o.jsx("strong",{children:"Import Summary:"})}),o.jsxs("p",{children:[" Total records: ",y.total]}),o.jsxs("p",{children:[" Imported: ",y.imported]}),o.jsxs("p",{children:[" Skipped (already exists): ",y.skipped]}),y.errors.length>0&&o.jsxs("p",{children:[" Errors: ",y.errors.length]})]})})]})]}),o.jsxs(Zr,{children:[o.jsx(V,{variant:"outline",onClick:E,children:"Cancel"}),o.jsx(V,{onClick:_,disabled:!h||m,children:m?"Importing...":"Import CSV"})]})]})]})}function A7(){const{toast:e}=wr(),[t,n]=d.useState(!1),[r,s]=d.useState(!1),a=async()=>{n(!0);try{if(!Le)throw new Error("Supabase client not configured");let u=[],h=0;const f=1e3;let m=!0;for(;m;){const{data:j,error:S}=await Le.from("historical_news_analyses").select("date, summary, is_manual_override").gte("date","2008-01-01").lte("date",new Date().toISOString().split("T")[0]).order("date",{ascending:!0}).range(h*f,(h+1)*f-1);if(S)throw new Error(`Database error: ${S.message}`);j&&j.length>0?(u=[...u,...j],j.length<f?m=!1:h++):m=!1}const p=(u||[]).map(j=>({date:j.date,summary:j.summary||"",isManualOverride:j.is_manual_override||!1}));if(!p||p.length===0){e({title:"No Data Found",description:"No analysis data available for export.",variant:"destructive"});return}p.sort((j,S)=>{const C=new Date(j.date),N=new Date(S.date);return C.getTime()-N.getTime()});const x=new Set(p.filter(j=>j.isManualOverride).map(j=>j.date)),g=[];g.push(["Date","Summary","Type"]),p.forEach(j=>{const S=`'${j.date}`,C=j.summary||"No summary available",_=x.has(j.date)?"Key Date":"";g.push([S,C,_]),g.push([S,C,_])});const y=g.map(j=>j.map(S=>`"${S.toString().replace(/"/g,'""')}"`).join(",")).join(`
`),w=new Blob([y],{type:"text/csv;charset=utf-8;"}),v=document.createElement("a"),b=URL.createObjectURL(w);v.setAttribute("href",b),v.setAttribute("download",`bitcoin-news-analysis-${new Date().toISOString().split("T")[0]}.csv`),v.style.visibility="hidden",document.body.appendChild(v),v.click(),document.body.removeChild(v),e({title:"Export Successful",description:`Exported ${p.length*2} rows (${p.length} unique days, duplicated) to CSV file with Key Date indicators.`})}catch(u){console.error("Export failed:",u),e({title:"Export Failed",description:u instanceof Error?u.message:"Failed to export data. Please try again.",variant:"destructive"})}finally{n(!1)}},i=async()=>{n(!0);try{if(!Le)throw new Error("Supabase client not configured");let u=[],h=0;const f=1e3;let m=!0;for(;m;){const{data:v,error:b}=await Le.from("historical_news_analyses").select("date, summary, is_manual_override").gte("date","2008-01-01").lte("date",new Date().toISOString().split("T")[0]).order("date",{ascending:!0}).range(h*f,(h+1)*f-1);if(b)throw new Error(`Database error: ${b.message}`);v&&v.length>0?(u=[...u,...v],v.length<f?m=!1:h++):m=!1}const p=(u||[]).map(v=>({date:v.date,summary:v.summary||"",isManualOverride:v.is_manual_override||!1}));if(!p||p.length===0){e({title:"No Data Found",description:"No analysis data available for export.",variant:"destructive"});return}p.sort((v,b)=>{const j=new Date(v.date),S=new Date(b.date);return j.getTime()-S.getTime()});let x=`Bitcoin News Analysis - Historical Timeline
`;x+="=".repeat(50)+`

`,p.forEach((v,b)=>{const j=v.date,S=v.summary||"No summary available",C=v.isManualOverride;x+=`${b+1}. ${j}${C?" [KEY DATE]":""}
`,x+=`${S}

`});const g=new Blob([x],{type:"text/plain;charset=utf-8;"}),y=document.createElement("a"),w=URL.createObjectURL(g);y.setAttribute("href",w),y.setAttribute("download",`bitcoin-news-analysis-${new Date().toISOString().split("T")[0]}.txt`),y.style.visibility="hidden",document.body.appendChild(y),y.click(),document.body.removeChild(y),e({title:"Export Successful",description:`Exported ${p.length} analyses to TXT file.`})}catch(u){console.error("Export failed:",u),e({title:"Export Failed",description:u instanceof Error?u.message:"Failed to export data. Please try again.",variant:"destructive"})}finally{n(!1)}},l=()=>{s(!0)},c=u=>{s(!1),u==="csv"?a():i()};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Admin"}),o.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage data imports and system administration"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(jt,{children:[o.jsxs(Us,{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Xd,{className:"w-5 h-5"}),o.jsx(Bs,{children:"Import Bitcoin Events"})]}),o.jsx(tu,{children:"Upload CSV files to import Bitcoin news events into the database"})]}),o.jsxs(on,{className:"space-y-4",children:[o.jsx("div",{children:o.jsx(P7,{buttonVariant:"default",buttonSize:"default",showLabel:!0})}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload a CSV file with Bitcoin events. The file should have two columns: Date (YYYY-MM-DD format) and Summary."})]})]}),o.jsxs(jt,{children:[o.jsxs(Us,{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ev,{className:"w-5 h-5"}),o.jsx(Bs,{children:"Export Data"})]}),o.jsx(tu,{children:"Download all Bitcoin news analysis data to CSV or TXT file"})]}),o.jsxs(on,{className:"space-y-4",children:[o.jsxs(V,{variant:"outline",size:"sm",onClick:l,disabled:t,"data-testid":"button-export",children:[t?o.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(ev,{className:"w-4 h-4 mr-2"}),t?"Exporting...":"Export Data"]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Export all historical Bitcoin news analyses. Choose between CSV (for spreadsheets) or TXT (for reading) format."})]})]})]}),o.jsx(en,{open:r,onOpenChange:s,children:o.jsxs(qt,{className:"sm:max-w-md",children:[o.jsxs(Ht,{children:[o.jsx(Wt,{children:"Choose Export Format"}),o.jsx(Pn,{children:"Select the format for exporting your Bitcoin news analysis data."})]}),o.jsxs("div",{className:"flex flex-col space-y-3 mt-4",children:[o.jsxs(V,{variant:"outline",onClick:()=>c("csv"),className:"flex items-center justify-start space-x-3 p-4 h-auto",children:[o.jsx(Ns,{className:"w-5 h-5"}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-medium",children:"CSV Format"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Comma-separated values, good for spreadsheets"})]})]}),o.jsxs(V,{variant:"outline",onClick:()=>c("txt"),className:"flex items-center justify-start space-x-3 p-4 h-auto",children:[o.jsx(Ns,{className:"w-5 h-5"}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-medium",children:"TXT Format"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Plain text, easy to read and share"})]})]})]})]})})]})}const Op=[{id:"empty-summary",label:"Empty Summary",filterFn:e=>!e.summary||e.summary.trim()===""},{id:"untagged",label:"Untagged",filterFn:e=>!e.tags_version2||e.tags_version2.length===0},{id:"too-short",label:"Too short (< 100 chars)",filterFn:e=>e.length>0&&e.length<100},{id:"too-long",label:"Too long (> 110 chars)",filterFn:e=>e.length>110},{id:"ends-period",label:"Ends with period",filterFn:e=>{var t;return((t=e.summary)==null?void 0:t.trim().endsWith("."))||e.violations.some(n=>n.toLowerCase().includes("period"))}},{id:"has-hyphen",label:"Contains unusual symbols",filterFn:e=>e.violations.some(t=>t.includes("unusual symbols")||t.includes("hyphen")||t.includes("semicolon")||t.includes("colon")||t.includes("question mark"))},{id:"truncated",label:"Truncated ending",filterFn:e=>e.violations.some(t=>t.includes("Ends with")||t.includes("Truncated"))},{id:"excessive-dots",label:"Excessive dots",filterFn:e=>e.violations.some(t=>t.toLowerCase().includes("excessive dots"))},{id:"generic-fallback",label:"Generic fallback",filterFn:e=>e.violations.some(t=>t.toLowerCase().includes("generic")||t.toLowerCase().includes("fallback"))},{id:"repeated-words",label:"Repeated words",filterFn:e=>e.violations.some(t=>t.toLowerCase().includes("repeated"))},{id:"placeholder-text",label:"Placeholder text",filterFn:e=>e.violations.some(t=>t.toLowerCase().includes("placeholder"))},{id:"duplicate-summary",label:"Duplicate summary",filterFn:e=>e.violations.some(t=>t.toLowerCase().includes("duplicate"))},{id:"missing-months",label:"Missing months",filterFn:e=>e.violations.some(t=>t.includes("Missing month"))}],Ej=[50,200,500];function O7(){var Vl,ql;const{toast:e}=wr(),[,t]=_u(),[n,r]=d.useState("keywords"),[s,a]=d.useState(50),[i,l]=d.useState(new Set),[c,u]=d.useState(!1),[h,f]=d.useState(new Set),[m,p]=d.useState(1),[x,g]=d.useState(!1),[y,w]=d.useState(""),[v,b]=d.useState(""),[j,S]=d.useState(!1),[C,N]=d.useState(""),[_,E]=d.useState(!1),[M,T]=d.useState(!1),[R,W]=d.useState(null);d.useEffect(()=>{const P=setTimeout(()=>{b(y),p(1)},300);return()=>clearTimeout(P)},[y]);const[Q,he]=d.useState(!1),[Y,O]=d.useState(!1),[A,U]=d.useState(!1),[D,B]=d.useState(""),[ue,_e]=d.useState("crypto"),[ye,Be]=d.useState(!1),[Ie,pe]=d.useState(!1),[ge,Ke]=d.useState(null),[le,Re]=d.useState(null),[Me,Ue]=d.useState(1),{data:De,isLoading:Ye}=tt({queryKey:["quality-violations"],queryFn:async()=>{const P=await fetch("/api/quality-check/violations");if(!P.ok)throw new Error("Failed to fetch quality violations");return(await P.json()).data||[]},staleTime:1e3*60*5}),{data:st,isLoading:xt}=tt({queryKey:["events-manager-empty-summaries"],queryFn:async()=>{if(!Le)return console.warn("Supabase not configured for empty summary check"),{entries:[],totalCount:0};let P=[],q=0;const K=1e3;let ne=!0;for(;ne;){const{data:Ut,error:Pt}=await Le.from("historical_news_analyses").select("date, summary").range(q,q+K-1);if(Pt)throw console.error("Error fetching summaries:",Pt),Pt;Ut&&Ut.length>0?(P=P.concat(Ut),q+=K,ne=Ut.length===K):ne=!1}const Fe=new Date("2009-01-03"),je=P.filter(Ut=>new Date(Ut.date)>=Fe),Je=je.filter(Ut=>!Ut.summary||Ut.summary.trim()===""),_t=new Set(je.map(Ut=>Ut.date)),dt=je.map(Ut=>Ut.date).sort(),zt=[];if(dt.length>0){const Ut=new Date("2009-01-03"),Pt=new Date(dt[dt.length-1]),vn=new Date(Ut);for(;vn<=Pt;){const lt=vn.toISOString().split("T")[0];_t.has(lt)||zt.push({date:lt,summary:""}),vn.setDate(vn.getDate()+1)}}const Cn=[...Je,...zt];return console.log(`Empty summaries: ${Je.length}, Missing dates: ${zt.length}, Total: ${Cn.length}`),{entries:Cn,totalCount:Cn.length}},staleTime:1e3*60*5}),{data:it,isLoading:Yt}=tt({queryKey:["events-manager-untagged"],queryFn:async()=>{if(!Le)return console.warn("Supabase not configured for untagged check"),{entries:[],totalCount:0};let P=[],q=0;const K=1e3;let ne=!0;for(;ne;){const{data:je,error:Je}=await Le.from("historical_news_analyses").select("date, summary, tags_version2").range(q,q+K-1);if(Je)throw console.error("Error fetching untagged analyses:",Je),Je;je&&je.length>0?(P=P.concat(je),q+=K,ne=je.length===K):ne=!1}const Fe=P.filter(je=>!je.tags_version2||Array.isArray(je.tags_version2)&&je.tags_version2.length===0);return console.log(`Untagged analyses: ${Fe.length}`),{entries:Fe,totalCount:Fe.length}},staleTime:1e3*60*5}),{data:wt,isLoading:Lt}=tt({queryKey:["events-manager-missing-months"],queryFn:async()=>{if(!Le)return console.warn("Supabase not configured for missing months check"),{entries:[],totalCount:0};let P=[],q=0;const K=1e3;let ne=!0;for(;ne;){const{data:lt,error:pt}=await Le.from("historical_news_analyses").select("date").range(q,q+K-1);if(pt)throw console.error("Error fetching dates:",pt),pt;lt&&lt.length>0?(P=P.concat(lt),q+=K,ne=lt.length===K):ne=!1}const Fe=new Map;P.forEach(lt=>{const pt=new Date(lt.date),jr=pt.getFullYear(),I=pt.getMonth()+1,ce=`${jr}-${String(I).padStart(2,"0")}`;Fe.has(ce)||Fe.set(ce,{year:jr,month:I,daysPresent:new Set}),Fe.get(ce).daysPresent.add(lt.date)});const je=new Date("2009-01-03"),Je=new Date("2024-12-31"),_t=[],dt=new Date(je.getFullYear(),je.getMonth(),1),zt=["January","February","March","April","May","June","July","August","September","October","November","December"],Cn=new Date,Ut=Cn.getFullYear(),Pt=Cn.getMonth()+1,vn=Cn.getDate();for(;dt<=Je;){const lt=dt.getFullYear(),pt=dt.getMonth()+1,jr=`${lt}-${String(pt).padStart(2,"0")}`,I=new Date(lt,pt,0).getDate();let ce=I;lt===2009&&pt===1&&(ce=I-2),lt===Ut&&pt===Pt&&(ce=vn);const Xe=Fe.get(jr),ze=Xe?Xe.daysPresent.size:0;if(lt===2025){dt.setMonth(dt.getMonth()+1);continue}if(ze<ce){const gt=new Date(lt,pt-1,1),Et=zt[pt-1],Kr=ce-ze;_t.push({date:gt.toISOString().split("T")[0],summary:`${Et} ${lt}: ${ze}/${ce} days${lt===Ut&&pt===Pt?" (current month)":""}`,violations:[`Missing ${Kr} day${Kr!==1?"s":""} in ${Et} ${lt}`],length:0,year:lt,month:pt,monthName:Et,daysPresent:ze,totalDays:ce,missingDays:Kr})}dt.setMonth(dt.getMonth()+1)}return _t.sort((lt,pt)=>lt.year!==pt.year?lt.year-pt.year:lt.month-pt.month),console.log(`Incomplete months: ${_t.length}`),{entries:_t,totalCount:_t.length}},staleTime:1e3*60*5}),{data:qe,isLoading:Ft}=tt({queryKey:["events-manager-veribadge-manual"],queryFn:async()=>{if(!Le)return console.warn("Supabase not configured for veribadge check"),{entries:[],totalCount:0};const{data:P,error:q}=await Le.from("historical_news_analyses").select("date, summary, veri_badge").eq("veri_badge","Manual");if(q)throw console.error("Error fetching manual analyses:",q),q;const K=(P||[]).map(ne=>({date:ne.date,summary:ne.summary||"",veri_badge:ne.veri_badge}));return{entries:K,totalCount:K.length}},staleTime:1e3*60*5}),{data:z,isLoading:G}=tt({queryKey:["events-manager-veribadge-orphan"],queryFn:async()=>{if(!Le)return console.warn("Supabase not configured for veribadge check"),{entries:[],totalCount:0};const{data:P,error:q}=await Le.from("historical_news_analyses").select("date, summary, veri_badge").eq("veri_badge","Orphan");if(q)throw console.error("Error fetching orphan analyses:",q),q;const K=(P||[]).map(ne=>({date:ne.date,summary:ne.summary||"",veri_badge:ne.veri_badge}));return{entries:K,totalCount:K.length}},staleTime:1e3*60*5}),{data:X,isLoading:oe}=tt({queryKey:["events-manager-veribadge-verified"],queryFn:async()=>{if(!Le)return console.warn("Supabase not configured for veribadge check"),{entries:[],totalCount:0};const{data:P,error:q}=await Le.from("historical_news_analyses").select("date, summary, veri_badge").eq("veri_badge","Verified");if(q)throw console.error("Error fetching verified analyses:",q),q;const K=(P||[]).map(ne=>({date:ne.date,summary:ne.summary||"",veri_badge:ne.veri_badge}));return{entries:K,totalCount:K.length}},staleTime:1e3*60*5}),{data:L,isLoading:H}=tt({queryKey:["events-manager-veribadge-not-available"],queryFn:async()=>{if(!Le)return console.warn("Supabase not configured for veribadge check"),{entries:[],totalCount:0};const{data:P,error:q}=await Le.from("historical_news_analyses").select("date, summary, veri_badge").eq("veri_badge","Not Available");if(q)throw console.error("Error fetching not available analyses:",q),q;const K=(P||[]).map(ne=>({date:ne.date,summary:ne.summary||"",veri_badge:ne.veri_badge}));return{entries:K,totalCount:K.length}},staleTime:1e3*60*5}),{data:se,isLoading:re}=tt({queryKey:["events-manager-veribadge-empty"],queryFn:async()=>{if(!Le)return console.warn("Supabase not configured for veribadge check"),{entries:[],totalCount:0};let P=[],q=0;const K=1e3;let ne=!0;for(;ne;){const{data:je,error:Je}=await Le.from("historical_news_analyses").select("date, summary, veri_badge").range(q,q+K-1);if(Je)throw console.error("Error fetching analyses:",Je),Je;je&&je.length>0?(P=P.concat(je),q+=K,ne=je.length===K):ne=!1}const Fe=P.filter(je=>!je.veri_badge||je.veri_badge.trim()==="").map(je=>({date:je.date,summary:je.summary||"",veri_badge:null}));return{entries:Fe,totalCount:Fe.length}},staleTime:1e3*60*5}),Se=d.useMemo(()=>{const P=[],q=De||[],K=(st==null?void 0:st.totalCount)||0,ne=(it==null?void 0:it.totalCount)||0,Fe=(wt==null?void 0:wt.totalCount)||0,je=xt,Je=Yt,_t=Lt,dt=!De&&Ye;P.push({id:"empty-summary",label:"Empty Summary",count:K,hasIssues:K>0,isLoading:je}),P.push({id:"untagged",label:"Untagged",count:ne,hasIssues:ne>0,isLoading:Je}),P.push({id:"missing-months",label:"Missing months",count:Fe,hasIssues:Fe>0,isLoading:_t});for(const zt of Op){if(zt.id==="empty-summary"||zt.id==="untagged"||zt.id==="missing-months")continue;const Cn=dt?0:q.filter(zt.filterFn).length;P.push({id:zt.id,label:zt.label,count:Cn,hasIssues:Cn>0,isLoading:dt})}return P},[De,st,it,wt,Ye,xt,Yt,Lt]),Qe=d.useMemo(()=>[{id:"manual",label:"Manual",count:(qe==null?void 0:qe.totalCount)||0,hasIssues:!1,isLoading:Ft},{id:"orphan",label:"Orphan",count:(z==null?void 0:z.totalCount)||0,hasIssues:!1,isLoading:G},{id:"verified",label:"Verified",count:(X==null?void 0:X.totalCount)||0,hasIssues:!1,isLoading:oe},{id:"not-available",label:"Not available",count:(L==null?void 0:L.totalCount)||0,hasIssues:!1,isLoading:H},{id:"empty",label:"Empty",count:(se==null?void 0:se.totalCount)||0,hasIssues:!1,isLoading:re}],[qe,z,X,L,se,Ft,G,oe,H,re]),Ee=d.useMemo(()=>{if(le){if(le==="manual")return((qe==null?void 0:qe.entries)||[]).map(K=>{var ne;return{date:K.date,summary:K.summary||"",violations:[`VeriBadge: ${K.veri_badge}`],length:((ne=K.summary)==null?void 0:ne.length)||0,tags_version2:null}});if(le==="orphan")return((z==null?void 0:z.entries)||[]).map(K=>{var ne;return{date:K.date,summary:K.summary||"",violations:[`VeriBadge: ${K.veri_badge}`],length:((ne=K.summary)==null?void 0:ne.length)||0,tags_version2:null}});if(le==="verified")return((X==null?void 0:X.entries)||[]).map(K=>{var ne;return{date:K.date,summary:K.summary||"",violations:[`VeriBadge: ${K.veri_badge}`],length:((ne=K.summary)==null?void 0:ne.length)||0,tags_version2:null}});if(le==="not-available")return((L==null?void 0:L.entries)||[]).map(K=>{var ne;return{date:K.date,summary:K.summary||"",violations:[`VeriBadge: ${K.veri_badge}`],length:((ne=K.summary)==null?void 0:ne.length)||0,tags_version2:null}});if(le==="empty")return((se==null?void 0:se.entries)||[]).map(K=>{var ne;return{date:K.date,summary:K.summary||"",violations:["VeriBadge: Empty"],length:((ne=K.summary)==null?void 0:ne.length)||0,tags_version2:null}})}if(!ge)return[];if(ge==="empty-summary")return((st==null?void 0:st.entries)||[]).map(K=>({date:K.date,summary:K.summary||"",violations:["Empty summary"],length:0,tags_version2:null}));if(ge==="untagged")return((it==null?void 0:it.entries)||[]).map(K=>{var ne;return{date:K.date,summary:K.summary||"",violations:["Untagged"],length:((ne=K.summary)==null?void 0:ne.length)||0,tags_version2:K.tags_version2||null}});if(ge==="missing-months")return((wt==null?void 0:wt.entries)||[]).map(K=>({date:K.date,summary:K.summary||`${K.monthName} ${K.year}: ${K.daysPresent}/${K.totalDays} days`,violations:K.violations||[`Missing ${K.missingDays} day${K.missingDays!==1?"s":""} in ${K.monthName} ${K.year}`],length:0,tags_version2:null,monthName:K.monthName,year:K.year,month:K.month,daysPresent:K.daysPresent,totalDays:K.totalDays,missingDays:K.missingDays}));const P=De||[],q=Op.find(K=>K.id===ge);return q?P.filter(q.filterFn):P},[ge,le,De,st,it,wt,qe,z,X,L,se]),Nt=d.useMemo(()=>{const P=(Me-1)*s;return Ee.slice(P,P+s)},[Ee,Me,s]),{data:F,error:te}=tt({queryKey:["tags-catalog-v2"],queryFn:async()=>{var K;const P=await fetch("/api/tags/catalog-v2");if(!P.ok){const ne=await P.text();throw console.error("Catalog v2 API error:",P.status,ne),new Error(`Failed to fetch catalog: ${P.statusText}`)}const q=await P.json();return console.log("Catalog v2 data received:",{tagCount:((K=q.tags)==null?void 0:K.length)||0,taggedCount:q.taggedCount}),q},retry:1}),{data:ke,refetch:Te}=tt({queryKey:["tags-filter-tree"],queryFn:async()=>{const P=await fetch("/api/tags/filter-tree");if(!P.ok)throw new Error("Failed to fetch filter tree");return P.json()},staleTime:0,refetchOnMount:!0}),{data:$}=tt({queryKey:["tags-hierarchy"],queryFn:async()=>{const P=await fetch("/api/tags/hierarchy");if(!P.ok)throw new Error("Failed to fetch hierarchy");return P.json()},staleTime:1e3*60*60,enabled:!ke}),ae=ke||$,fe=d.useMemo(()=>{if(!(ae!=null&&ae.categories))return null;const P={};return ae.categories.forEach(q=>{const K=q.category,ne=je=>{const Je=[];let _t=je.totalTags||0;return je.subcategories&&Object.keys(je.subcategories).length>0&&Object.values(je.subcategories).forEach(dt=>{const zt=ne(dt);zt&&Je.push(zt)}),je.tags&&Array.isArray(je.tags)&&je.tags.forEach(dt=>{Je.push({name:dt.name,category:K,count:dt.usageCount||0,isTag:!0})}),Je.sort((dt,zt)=>dt.isTag&&!zt.isTag?1:!dt.isTag&&zt.isTag?-1:dt.name.localeCompare(zt.name)),Je.length===0?null:{category:K,name:je.name,count:_t,isParent:!0,children:Je}},Fe=[];q.tags&&Array.isArray(q.tags)&&q.tags.forEach(je=>{Fe.push({name:je.name,category:K,count:je.usageCount||0,isTag:!0})}),q.subcategories&&Object.values(q.subcategories).forEach(je=>{const Je=ne(je);Je&&Fe.push(Je)}),Fe.sort((je,Je)=>je.isTag&&!Je.isTag?1:!je.isTag&&Je.isTag?-1:je.name.localeCompare(Je.name)),Fe.length>0&&(P[K]=Fe)}),{entitiesByCategory:P,taggedCount:(F==null?void 0:F.taggedCount)||0,untaggedCount:(F==null?void 0:F.untaggedCount)||0,totalAnalyses:(F==null?void 0:F.totalAnalyses)||0}},[F,ae]),{data:be,isLoading:ve,refetch:ft}=tt({queryKey:["supabase-tags-analyses",Array.from(i).sort().join(","),c,v,m,s],refetchOnMount:!0,refetchOnWindowFocus:!1,queryFn:async()=>{var Cn,Ut;if(!Le)throw new Error("Supabase not configured");let P=Le.from("historical_news_analyses").select("date, summary, tags_version2, tier_used, is_manual_override",{count:"exact"});c||i.size>0,v&&(P=P.ilike("summary",`%${v}%`)),P=P.order("date",{ascending:!1});let q=[],K=null;const ne=c||i.size>0;if(ne){let Pt=[],vn=0;const lt=1e3;for(;;){const{data:pt,error:jr}=await P.range(vn,vn+lt-1);if(jr)throw jr;if(!pt||pt.length===0||(Pt=Pt.concat(pt),pt.length<lt))break;vn+=lt}q=Pt,K=Pt.length}else{const Pt=(m-1)*s,vn=Pt+s-1;P=P.range(Pt,vn);const{data:lt,error:pt,count:jr}=await P;if(pt)throw pt;q=lt||[],K=jr}console.log(" Analyses Query Result:",JSON.stringify({analysesCount:q==null?void 0:q.length,totalCount:K,showUntagged:c,selectedEntitiesCount:i.size,needsClientSideFiltering:ne,firstAnalysisDate:(Cn=q==null?void 0:q[0])==null?void 0:Cn.date,firstAnalysisTags:(Ut=q==null?void 0:q[0])==null?void 0:Ut.tags_version2},null,2));let Fe=q||[];c&&(Fe=Fe.filter(Pt=>!Pt.tags_version2||Pt.tags_version2.length===0)),i.size>0&&!c&&(Fe=Fe.filter(Pt=>!Pt.tags_version2||!Array.isArray(Pt.tags_version2)?!1:Array.from(i).some(vn=>{const[lt,pt]=vn.split("::");return Pt.tags_version2.includes(pt)})));const je=(m-1)*s,Je=je+s,_t=Fe.slice(je,Je),dt=ne?Fe.length:K||Fe.length,zt=Math.ceil(dt/s);return console.log(" Received:",_t.length,"analyses, filtered total:",dt),{analyses:_t,pagination:{currentPage:m,pageSize:s,totalCount:dt,totalPages:zt}}}}),ot=fe?Object.entries(fe.entitiesByCategory).map(([P,q])=>({category:P,entities:q.sort((K,ne)=>ne.count-K.count),totalCount:q.reduce((K,ne)=>K+ne.count,0)})).sort((P,q)=>q.totalCount-P.totalCount):[];fe&&ot.length>0&&console.log(" Available categories:",ot.map(P=>P.category));const et=["bitcoin","money-economics","technology","organizations","people","regulation-law","markets-geography","education-community","crime-security","topics","miscellaneous"];let mt=n==="keywords"?(ot||[]).filter(({category:P})=>et.includes(P)):(ot||[]).filter(({category:P})=>P.toLowerCase()==="topics");Array.isArray(mt)||(mt=[]),mt.length===0&&ot&&ot.length>0&&(console.warn(" Filtering removed all categories, showing all categories instead"),mt=ot),fe&&(console.log(" Filtered categories:",mt.map(P=>P.category),"viewMode:",n),console.log(" All categories:",ot.map(P=>({cat:P.category,count:P.entities.length}))));const xe=(be==null?void 0:be.analyses)||[];be!=null&&be.pagination.totalPages;const Ve=(be==null?void 0:be.pagination.totalCount)||0,Tt=P=>Tx(P,fe),Mn=()=>{if(x){g(!1),f(new Set);return}const P=xe.length>0&&xe.every(q=>h.has(q.date));f(P?q=>{const K=new Set(q);return xe.forEach(ne=>K.delete(ne.date)),K}:q=>{const K=new Set(q);return xe.forEach(ne=>K.add(ne.date)),K})},br=async()=>{if(!Le)throw new Error("Supabase not configured");let P=Le.from("historical_news_analyses").select("date, tags_version2, summary");v&&(P=P.ilike("summary",`%${v}%`));const{data:q,error:K}=await P;if(K)throw K;let ne=q||[];return c&&(ne=ne.filter(Fe=>!Fe.tags_version2||Fe.tags_version2.length===0)),i.size>0&&!c&&(ne=ne.filter(Fe=>!Fe.tags_version2||!Array.isArray(Fe.tags_version2)?!1:Array.from(i).some(je=>{const[Je,_t]=je.split("::");return Fe.tags_version2.includes(_t)}))),ne.map(Fe=>Fe.date)},Hn=at({mutationFn:async({dates:P,tag:q})=>Rr("POST","/api/tags/bulk-add",{dates:P,tag:q}),onSuccess:(P,q)=>{J.invalidateQueries({queryKey:["supabase-tags-catalog"]}),J.invalidateQueries({queryKey:["supabase-tags-analyses"]}),e({title:"Tags Added",description:`Successfully added tag to ${q.dates.length} analyses`}),he(!1),B(""),f(new Set),g(!1)},onError:P=>{e({title:"Error",description:P.message,variant:"destructive"})}}),sr=at({mutationFn:async({dates:P,tag:q})=>Rr("POST","/api/tags/bulk-remove",{dates:P,tag:q}),onSuccess:(P,q)=>{J.invalidateQueries({queryKey:["supabase-tags-catalog"]}),J.invalidateQueries({queryKey:["supabase-tags-analyses"]}),J.invalidateQueries({queryKey:["supabase-tags-selected-summaries"]}),e({title:"Tag Removed",description:`Successfully removed tag from ${q.dates.length} analyses`})},onError:P=>{e({title:"Error",description:P.message,variant:"destructive"})}}),Ur=at({mutationFn:async({tagName:P,oldCategory:q,newName:K,newCategory:ne,newSubcategoryPath:Fe})=>{const je=await fetch("/api/tags-manager/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tagName:P,oldCategory:q,newName:K,newCategory:ne,newSubcategoryPath:Fe})});if(!je.ok){let Je="Failed to update tag";try{Je=(await je.json()).error||Je}catch{Je=`Error ${je.status}: ${je.statusText||"Unknown error"}`}throw new Error(Je)}return await je.json()},onSuccess:async P=>{e({title:"Tag Updated",description:`Tag has been updated in ${P.updated} analyses`}),await J.invalidateQueries({queryKey:["supabase-tags-catalog"]}),await J.invalidateQueries({queryKey:["tags-catalog-v2"]}),await J.invalidateQueries({queryKey:["tags-filter-tree"]}),await J.invalidateQueries({queryKey:["supabase-tags-analyses"]}),E(!1),W(null)},onError:P=>{e({title:"Update Failed",description:P.message,variant:"destructive"})}}),Br=at({mutationFn:async({tagName:P,category:q})=>{const K=await fetch("/api/tags-manager/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tagName:P,category:q})});if(!K.ok){let ne="Failed to delete tag";try{ne=(await K.json()).error||ne}catch{ne=`Error ${K.status}: ${K.statusText||"Unknown error"}`}throw new Error(ne)}return await K.json()},onSuccess:async P=>{e({title:"Tag Deleted",description:`Tag has been deleted from ${P.updated} analyses`}),await J.invalidateQueries({queryKey:["supabase-tags-catalog"]}),await J.invalidateQueries({queryKey:["tags-catalog-v2"]}),await J.invalidateQueries({queryKey:["tags-filter-tree"]}),await J.invalidateQueries({queryKey:["tags-hierarchy"]}),await J.invalidateQueries({queryKey:["supabase-tags-analyses"]}),await J.refetchQueries({queryKey:["tags-filter-tree"]}),T(!1),W(null)},onError:P=>{e({title:"Delete Failed",description:P.message,variant:"destructive"})}});at({mutationFn:async()=>{const P=await fetch("/api/tags/flush-cache",{method:"POST"});if(!P.ok)throw new Error("Failed to flush cache");return await P.json()},onSuccess:async()=>{e({title:"Cache Flushed",description:"Tag cache has been cleared successfully"}),await J.invalidateQueries({queryKey:["tags-catalog-v2"]}),await J.invalidateQueries({queryKey:["tags-filter-tree"]}),await J.invalidateQueries({queryKey:["tags-hierarchy"]}),await J.refetchQueries({queryKey:["tags-catalog-v2"]}),await J.refetchQueries({queryKey:["tags-filter-tree"]})},onError:P=>{e({title:"Cache Flush Failed",description:P.message,variant:"destructive"})}});const Ul=async()=>{if(!D.trim()){e({title:"Error",description:"Please enter a tag name",variant:"destructive"});return}try{let P;x?P=await br():P=Array.from(h),Hn.mutate({dates:P,tag:{name:D.trim(),category:ue}})}catch{e({title:"Error",description:"Failed to prepare bulk operation",variant:"destructive"})}},{data:eo=[],isLoading:Bl}=tt({queryKey:["supabase-tags-selected-summaries",Array.from(h).sort(),x,v,c],queryFn:async()=>{if(!Le)throw new Error("Supabase not configured");let P;if(x)try{P=await br()}catch{return[]}else{if(h.size===0)return[];P=Array.from(h)}const{data:q,error:K}=await Le.from("historical_news_analyses").select("tags_version2").in("date",P);if(K)throw K;const ne=new Map;return q==null||q.forEach(Fe=>{Fe.tags_version2&&Array.isArray(Fe.tags_version2)&&Fe.tags_version2.forEach(je=>{const Je=Tt(je),_t=`${Je}::${je}`;ne.has(_t)||ne.set(_t,{name:je,category:Je})})}),Array.from(ne.values())},enabled:(Y||A)&&(h.size>0||x)}),Kl=async P=>{try{let q;x?q=await br():q=Array.from(h),sr.mutate({dates:q,tag:P})}catch{e({title:"Error",description:"Failed to prepare bulk operation",variant:"destructive"})}},Ju=async()=>{try{let P;if(x){e({title:"Too many items",description:"Cannot copy more than 50 items at once. Please refine your selection.",variant:"destructive"});return}if(h.size>0){if(h.size>50){e({title:"Too many items",description:"Cannot copy more than 50 items at once.",variant:"destructive"});return}P=Array.from(h)}else P=xe.map(ne=>ne.date);let q=xe.filter(ne=>P.includes(ne.date));if(q.length<P.length){if(!Le)throw new Error("Supabase not configured");const{data:ne,error:Fe}=await Le.from("historical_news_analyses").select("date, summary, tags").in("date",P);if(Fe)throw Fe;q=ne||[]}if(q.length===0){e({title:"Nothing to Copy",description:"No analyses selected",variant:"destructive"});return}const K=q.map(ne=>`${new Date(ne.date).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"2-digit"})} - ${ne.summary}`).join(`
`);N(K),S(!0)}catch(P){console.error("Copy to clipboard error:",P),e({title:"Copy Failed",description:P instanceof Error?P.message:"Failed to prepare text for copying",variant:"destructive"})}};return xe.length>0&&xe.every(P=>h.has(P.date)),o.jsx(tm,{className:"w-full",children:o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row",children:[o.jsx("div",{className:"lg:w-72 shrink-0",children:o.jsx(o2,{catalogData:fe,selectedEntities:i,showUntagged:c,searchQuery:y,mode:"inline",showCategories:!1,showOverview:!1,qualityCheckItems:Se,selectedQualityCheck:ge,onQualityCheckSelect:P=>{Ke(ge===P?null:P),Re(null),Ue(1),u(!1),l(new Set)},veriBadgeItems:Qe,selectedVeriBadge:le,onVeriBadgeSelect:P=>{Re(le===P?null:P),Ke(null),Ue(1),u(!1),l(new Set)},onEntitySelect:P=>{const q=new Set(i);q.has(P)?q.delete(P):q.add(P),l(q),u(!1),Ke(null),Re(null),p(1)},onUntaggedToggle:()=>{u(!c),l(new Set),Ke(null),Re(null),p(1)},onSearchChange:P=>{w(P),p(1)}})}),o.jsxs("div",{className:"flex-1 space-y-4",children:[o.jsx("div",{className:"space-y-6",children:o.jsx(jt,{className:"pt-0 px-6 pb-6 border-0",children:ge||le?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("h2",{className:"text-lg font-semibold text-foreground",children:le?((Vl=Qe.find(P=>P.id===le))==null?void 0:Vl.label)||"VeriBadge":((ql=Op.find(P=>P.id===ge))==null?void 0:ql.label)||"Quality Check"}),o.jsxs(me,{variant:"secondary",className:"font-normal",children:[Ee.length.toLocaleString()," ",le?"entr":"issue",Ee.length!==1?"ies":"y"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[ge==="empty-summary"&&o.jsxs(V,{variant:"default",size:"sm",disabled:ye||Ee.length===0,onClick:async()=>{Be(!0);const P=Ee.map(K=>K.date);let q=0;for(const K of P)try{await fetch(`/api/analysis/date/${K}`,{method:"POST"}),q++}catch(ne){console.error(`Failed to analyze ${K}:`,ne)}Be(!1),J.invalidateQueries({queryKey:["empty-summary-entries"]}),J.invalidateQueries({queryKey:["quality-violations"]}),e({title:"Analysis complete",description:`Analyzed ${q} date(s)`})},children:[ye?o.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(pn,{className:"w-4 h-4 mr-2"}),"Analyse All Days"]}),(ge==="too-short"||ge==="too-long")&&o.jsxs(pl,{onValueChange:async P=>{if(P==="adjust-length"){Be(!0);try{const K=await(await fetch("/api/quality-check/bulk-adjust-length",{method:"POST"})).json();e({title:"Length adjustment complete",description:`Updated ${K.updated} summaries`}),J.invalidateQueries({queryKey:["quality-violations"]})}catch{e({title:"Error",description:"Failed to adjust lengths",variant:"destructive"})}Be(!1)}else if(P==="regenerate"){Be(!0);try{const K=await(await fetch("/api/quality-check/bulk-regenerate-summaries",{method:"POST"})).json();e({title:"Regeneration complete",description:`Updated ${K.updated} summaries`}),J.invalidateQueries({queryKey:["quality-violations"]})}catch{e({title:"Error",description:"Failed to regenerate summaries",variant:"destructive"})}Be(!1)}},children:[o.jsx(Ka,{className:"w-[200px]",disabled:ye,children:o.jsx(gl,{placeholder:"Select bulk action"})}),o.jsxs(Va,{children:[o.jsx(nn,{value:"adjust-length",children:"Adjust Length"}),o.jsx(nn,{value:"regenerate",children:"Regenerate Summaries"})]})]}),ge==="ends-period"&&o.jsxs(V,{variant:"default",size:"sm",disabled:ye||Ee.length===0,onClick:async()=>{Be(!0);try{const q=await(await fetch("/api/quality-check/bulk-remove-periods",{method:"POST"})).json();e({title:"Periods removed",description:`Updated ${q.updated} summaries`}),J.invalidateQueries({queryKey:["quality-violations"]})}catch{e({title:"Error",description:"Failed to remove periods",variant:"destructive"})}Be(!1)},children:[ye?o.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(On,{className:"w-4 h-4 mr-2"}),"Remove All Periods"]})]})]}),o.jsx(Vh,{analyses:Nt.map(P=>({date:P.date,summary:P.summary||"",tags_version2:[],tier:void 0,url:void 0,source_url:void 0,isManualOverride:!1})),isLoading:le==="manual"?Ft:le==="orphan"?G:le==="verified"?oe:le==="not-available"?H:le==="empty"?re:ge==="empty-summary"?xt:ge==="untagged"?Yt:ge==="missing-months"?Lt:Ye,selectedDates:h,onDateSelect:P=>{f(q=>new Set(q).add(P))},onDateDeselect:P=>{f(q=>{const K=new Set(q);return K.delete(P),K})},onRowClick:P=>t(`/day/${P}`),onTagClick:P=>w(P),emptyMessage:"No issues found in this category",showCheckbox:!0,pageSize:s,currentPage:Me,totalCount:Ee.length,catalogData:fe,onPageChange:P=>Ue(P),onPageSizeChange:P=>{a(P),Ue(1)},onSelectAll:Mn,selectAllMatching:x,pageSizeOptions:Ej,showPagination:!0,showSelectAll:!0,showBulkActions:!0,bulkActions:{showSelectAllLink:!0,onSelectAllMatching:()=>g(!0),onClearSelection:()=>{f(new Set),g(!1)}}})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("h2",{className:"text-lg font-semibold text-foreground",children:c?"Untagged Analyses":"Events Manager"}),o.jsxs(me,{variant:"secondary",className:"font-normal",children:[Ve.toLocaleString()," result",Ve!==1?"s":""]})]}),Ve>0&&o.jsxs(V,{variant:"outline",size:"sm",onClick:Ju,disabled:x||h.size>50,className:"flex items-center space-x-2","data-testid":"button-copy-txt",children:[o.jsx(fC,{className:"w-4 h-4"}),o.jsx("span",{children:"Copy TXT"})]})]}),o.jsx(Vh,{analyses:xe,isLoading:ve,selectedDates:h,onDateSelect:P=>{f(q=>new Set(q).add(P))},onDateDeselect:P=>{f(q=>{const K=new Set(q);return K.delete(P),K})},onRowClick:P=>t(`/day/${P}`),onTagClick:P=>w(P),emptyMessage:c?"No untagged analyses found":i.size>0?"No analyses match the selected entities":v?"No analyses match your search":"No tagged analyses found",showCheckbox:!0,pageSize:s,currentPage:m,totalCount:Ve,catalogData:fe,onPageChange:P=>p(P),onPageSizeChange:P=>{a(P),p(1)},onSelectAll:Mn,selectAllMatching:x,pageSizeOptions:Ej,showPagination:!0,showSelectAll:!0,showBulkActions:!0,bulkActions:{showSelectAllLink:!0,onSelectAllMatching:()=>g(!0),onClearSelection:()=>{f(new Set),g(!1)},customActions:o.jsxs(o.Fragment,{children:[o.jsxs(Ol,{children:[o.jsx(Il,{asChild:!0,children:o.jsxs(V,{variant:"outline",size:"sm",disabled:ye,title:"Re-analyze (R)",children:[o.jsx(pn,{className:`w-4 h-4 mr-2 ${ye?"animate-spin":""}`}),"Re-analyze",o.jsx(Go,{className:"w-4 h-4 ml-2"})]})}),o.jsxs(Ja,{align:"end",children:[o.jsxs(nr,{onClick:async()=>{Be(!0);const P=x?xe.map(q=>q.date):Array.from(h);for(const q of P)try{await fetch(`/api/analysis/date/${q}`,{method:"POST"})}catch(K){console.error(`Failed to analyze ${q}:`,K)}Be(!1),J.invalidateQueries({queryKey:["analyses"]}),e({title:"Re-analysis complete",description:`Analyzed ${P.length} date(s)`})},disabled:ye,children:[o.jsx(pn,{className:"w-4 h-4 mr-2"}),"Analyse Days"]}),o.jsxs(nr,{onClick:async()=>{Be(!0);const P=x?xe.map(q=>q.date):Array.from(h);for(const q of P)try{await fetch(`/api/analysis/date/${q}/redo-summary`,{method:"POST"})}catch(K){console.error(`Failed to redo summary for ${q}:`,K)}Be(!1),J.invalidateQueries({queryKey:["analyses"]}),e({title:"Summaries updated",description:`Redid summaries for ${P.length} date(s)`})},disabled:ye,children:[o.jsx(Ns,{className:"w-4 h-4 mr-2"}),"Redo Summaries"]})]})]}),o.jsxs(V,{variant:"outline",size:"sm",disabled:Ie,onClick:async()=>{pe(!0);try{await fetch("/api/tags/categorize/start",{method:"POST"}),e({title:"Auto Tagging started",description:"AI is categorizing tags in the background"})}catch{e({title:"Error",description:"Failed to start auto tagging",variant:"destructive"})}pe(!1)},children:[Ie?o.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(Rx,{className:"w-4 h-4 mr-2"}),"Auto Tagging"]}),o.jsxs(V,{variant:"outline",size:"sm",onClick:()=>U(!0),children:[o.jsx(Jc,{className:"w-4 h-4 mr-2"}),"Manage Tags"]})]})}})]})})}),o.jsx(en,{open:j,onOpenChange:S,children:o.jsxs(qt,{className:"max-w-2xl",children:[o.jsxs(Ht,{children:[o.jsx(Wt,{children:"Copy Analyses to Clipboard"}),o.jsx(Pn,{children:"The text below has been selected for you. Press Ctrl+C or Cmd+C to copy."})]}),o.jsx("div",{className:"mt-4",children:o.jsx("textarea",{readOnly:!0,value:C,className:"w-full h-64 p-2 border rounded bg-slate-50 text-sm text-slate-800",onFocus:P=>P.target.select(),autoFocus:!0,"data-testid":"textarea-copy"})}),o.jsx("div",{className:"flex justify-end pt-4",children:o.jsx(V,{onClick:()=>S(!1),variant:"outline","data-testid":"button-close-copy-dialog",children:"Close"})})]})}),o.jsx(en,{open:Q,onOpenChange:he,children:o.jsxs(qt,{children:[o.jsx(Ht,{children:o.jsxs(Wt,{children:["Add Tag to ",x?Ve:h.size," Analyses"]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-slate-700 mb-1 block",children:"Tag Name"}),o.jsx(An,{placeholder:"Enter tag name",value:D,onChange:P=>B(P.target.value),"data-testid":"input-bulk-tag-name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-slate-700 mb-1 block",children:"Category"}),o.jsxs("select",{value:ue,onChange:P=>_e(P.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-md","data-testid":"select-bulk-category",children:[o.jsx("option",{value:"crypto",children:"Cryptocurrency"}),o.jsx("option",{value:"company",children:"Company"}),o.jsx("option",{value:"person",children:"Person"}),o.jsx("option",{value:"country",children:"Country"}),o.jsx("option",{value:"organization",children:"Organization"}),o.jsx("option",{value:"protocol",children:"Protocol"}),o.jsx("option",{value:"topic",children:"Topic"})]})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(V,{variant:"outline",onClick:()=>he(!1),"data-testid":"button-cancel-bulk-add",children:"Cancel"}),o.jsx(V,{onClick:Ul,disabled:Hn.isPending,"data-testid":"button-confirm-bulk-add",children:Hn.isPending?"Adding...":"Add Tag"})]})]})]})}),o.jsx(en,{open:Y,onOpenChange:O,children:o.jsxs(qt,{className:"max-w-2xl",children:[o.jsx(Ht,{children:o.jsxs(Wt,{children:["Remove Tags from ",x?Ve:h.size," Analyses"]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-slate-600",children:"Click on any tag below to remove it from all selected analyses:"}),Bl?o.jsx("div",{className:"text-center py-8 text-slate-500",children:"Loading tags..."}):eo.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(ss,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),o.jsx("p",{className:"text-slate-500",children:"No tags found in selected analyses"})]}):o.jsx("div",{className:"max-h-96 overflow-y-auto",children:o.jsx("div",{className:"flex flex-wrap gap-2",children:eo.map(P=>o.jsxs(me,{variant:"outline",className:`${vl(P.category)} cursor-pointer hover:opacity-70 transition-opacity px-3 py-2`,onClick:()=>Kl(P),"data-testid":`badge-remove-${P.category}-${P.name}`,children:[o.jsx("span",{className:"font-medium",children:P.name}),o.jsxs("span",{className:"ml-2 text-xs opacity-60",children:["(",P.category,")"]}),o.jsx(On,{className:"w-3 h-3 ml-2"})]},`${P.category}::${P.name}`))})}),o.jsx("div",{className:"flex justify-end space-x-2 pt-2 border-t",children:o.jsx(V,{variant:"outline",onClick:()=>O(!1),"data-testid":"button-cancel-bulk-remove",children:"Close"})})]})]})}),o.jsx(en,{open:A,onOpenChange:U,children:o.jsxs(qt,{className:"max-w-2xl",children:[o.jsxs(Ht,{children:[o.jsxs(Wt,{className:"flex items-center gap-2",children:[o.jsx(Jc,{className:"w-5 h-5"}),"Manage Tags for ",x?Ve.toLocaleString():h.size," Analyses"]}),o.jsx(Pn,{children:"View, add, or remove tags from all selected analyses"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg border",children:[o.jsxs("h4",{className:"text-sm font-medium mb-3 flex items-center gap-2",children:[o.jsx(zo,{className:"w-4 h-4"}),"Add New Tag"]}),o.jsxs("div",{className:"flex items-end gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"Tag Name"}),o.jsx(An,{placeholder:"Enter tag name",value:D,onChange:P=>B(P.target.value),className:"h-9"})]}),o.jsxs("div",{className:"w-40",children:[o.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"Category"}),o.jsxs(pl,{value:ue,onValueChange:_e,children:[o.jsx(Ka,{className:"h-9",children:o.jsx(gl,{})}),o.jsxs(Va,{children:[o.jsx(nn,{value:"crypto",children:"Cryptocurrency"}),o.jsx(nn,{value:"company",children:"Company"}),o.jsx(nn,{value:"person",children:"Person"}),o.jsx(nn,{value:"country",children:"Country"}),o.jsx(nn,{value:"organization",children:"Organization"}),o.jsx(nn,{value:"protocol",children:"Protocol"}),o.jsx(nn,{value:"topic",children:"Topic"})]})]})]}),o.jsx(V,{size:"sm",onClick:()=>{D.trim()&&(Ul(),U(!1))},disabled:!D.trim()||Hn.isPending,className:"h-9",children:Hn.isPending?o.jsx(nt,{className:"w-4 h-4 animate-spin"}):o.jsx(zo,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-medium mb-3 flex items-center gap-2",children:[o.jsx(ss,{className:"w-4 h-4"}),"Existing Tags",o.jsx(me,{variant:"secondary",className:"font-normal ml-1",children:eo.length})]}),Bl?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(nt,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading tags..."]}):eo.length===0?o.jsxs("div",{className:"text-center py-8 border border-dashed rounded-lg",children:[o.jsx(ss,{className:"w-10 h-10 text-muted-foreground/30 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"No tags found in selected analyses"})]}):o.jsx("div",{className:"max-h-64 overflow-y-auto border rounded-lg p-3",children:o.jsx("div",{className:"flex flex-wrap gap-2",children:eo.map(P=>o.jsxs(me,{variant:"outline",className:`${vl(P.category)} group cursor-pointer hover:opacity-80 transition-all px-3 py-1.5`,onClick:()=>Kl(P),children:[o.jsx("span",{className:"font-medium",children:P.name}),o.jsxs("span",{className:"ml-1.5 text-xs opacity-60",children:["(",P.category,")"]}),o.jsx(On,{className:"w-3 h-3 ml-2 opacity-0 group-hover:opacity-100 transition-opacity"})]},`manage-${P.category}::${P.name}`))})}),o.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Click on a tag to remove it from all selected analyses"})]}),o.jsx("div",{className:"flex justify-end pt-2 border-t",children:o.jsx(V,{variant:"outline",onClick:()=>U(!1),children:"Done"})})]})]})}),o.jsx(BT,{open:_,onOpenChange:E,tag:R,onConfirm:P=>{R&&Ur.mutate({tagName:R.name,oldCategory:R.category,newName:P.newName,newCategory:P.newCategory,newSubcategoryPath:P.newSubcategoryPath})},isLoading:Ur.isPending}),o.jsx(KT,{open:M,onOpenChange:T,tag:R,onConfirm:async()=>{if(R)try{const P=await fetch(`/api/tags-manager/find-categories?tagName=${encodeURIComponent(R.name)}`);if(P.ok){const q=await P.json();if(q.categories&&q.categories.length>0){const K=q.categories.map(je=>fetch("/api/tags-manager/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tagName:R.name,category:je.category})})),ne=await Promise.all(K);if(ne.every(je=>je.ok)){const Je=(await Promise.all(ne.map(_t=>_t.json().then(dt=>dt.updated||0)))).reduce((_t,dt)=>_t+dt,0);e({title:"Tag Deleted",description:`Tag has been deleted from ${Je} analyses across ${q.categories.length} category(ies)`}),await J.invalidateQueries({queryKey:["supabase-tags-catalog"]}),await J.invalidateQueries({queryKey:["tags-catalog-v2"]}),await J.invalidateQueries({queryKey:["supabase-tags-analyses"]}),T(!1),W(null)}else throw new Error("Some deletions failed")}else console.warn(`No categories found for "${R.name}", using provided category: ${R.category}`),Br.mutate({tagName:R.name,category:R.category})}else console.warn(`Failed to find categories for "${R.name}", using provided category: ${R.category}`),Br.mutate({tagName:R.name,category:R.category})}catch(P){console.error(`Error finding categories for "${R.name}":`,P),Br.mutate({tagName:R.name,category:R.category})}},isLoading:Br.isPending})]})]})})})}function I7(){return o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-background p-4",children:o.jsxs(jt,{className:"w-full max-w-lg",children:[o.jsxs(Us,{className:"text-center",children:[o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("div",{className:"rounded-full bg-muted p-3",children:o.jsx(Gs,{className:"h-12 w-12 text-muted-foreground"})})}),o.jsx(Bs,{className:"text-4xl font-bold",children:"404"}),o.jsx(tu,{className:"text-lg mt-2",children:"Page Not Found"})]}),o.jsx(on,{className:"text-center",children:o.jsx("p",{className:"text-muted-foreground",children:"The page you're looking for doesn't exist or has been moved."})}),o.jsx(ox,{className:"flex justify-center",children:o.jsx(kn,{href:"/",children:o.jsxs(V,{children:[o.jsx(vC,{className:"mr-2 h-4 w-4"}),"Go Home"]})})})]})})}var Xa="NavigationMenu",[u0,GR,M7]=_l(Xa),[Dv,D7,$7]=_l(Xa),[d0]=Nn(Xa,[M7,$7]),[L7,zr]=d0(Xa),[F7,z7]=d0(Xa),QR=d.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,value:r,onValueChange:s,defaultValue:a,delayDuration:i=200,skipDelayDuration:l=300,orientation:c="horizontal",dir:u,...h}=e,[f,m]=d.useState(null),p=Ge(t,E=>m(E)),x=Al(u),g=d.useRef(0),y=d.useRef(0),w=d.useRef(0),[v,b]=d.useState(!0),[j,S]=rr({prop:r,onChange:E=>{const M=E!=="",T=l>0;M?(window.clearTimeout(w.current),T&&b(!1)):(window.clearTimeout(w.current),w.current=window.setTimeout(()=>b(!0),l)),s==null||s(E)},defaultProp:a??"",caller:Xa}),C=d.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>S(""),150)},[S]),N=d.useCallback(E=>{window.clearTimeout(y.current),S(E)},[S]),_=d.useCallback(E=>{j===E?window.clearTimeout(y.current):g.current=window.setTimeout(()=>{window.clearTimeout(y.current),S(E)},i)},[j,S,i]);return d.useEffect(()=>()=>{window.clearTimeout(g.current),window.clearTimeout(y.current),window.clearTimeout(w.current)},[]),o.jsx(YR,{scope:n,isRootMenu:!0,value:j,dir:x,orientation:c,rootNavigationMenu:f,onTriggerEnter:E=>{window.clearTimeout(g.current),v?_(E):N(E)},onTriggerLeave:()=>{window.clearTimeout(g.current),C()},onContentEnter:()=>window.clearTimeout(y.current),onContentLeave:C,onItemSelect:E=>{S(M=>M===E?"":E)},onItemDismiss:()=>S(""),children:o.jsx(we.nav,{"aria-label":"Main","data-orientation":c,dir:x,...h,ref:p})})});QR.displayName=Xa;var $v="NavigationMenuSub",U7=d.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,value:r,onValueChange:s,defaultValue:a,orientation:i="horizontal",...l}=e,c=zr($v,n),[u,h]=rr({prop:r,onChange:s,defaultProp:a??"",caller:$v});return o.jsx(YR,{scope:n,isRootMenu:!1,value:u,dir:c.dir,orientation:i,rootNavigationMenu:c.rootNavigationMenu,onTriggerEnter:f=>h(f),onItemSelect:f=>h(f),onItemDismiss:()=>h(""),children:o.jsx(we.div,{"data-orientation":i,...l,ref:t})})});U7.displayName=$v;var YR=e=>{const{scope:t,isRootMenu:n,rootNavigationMenu:r,dir:s,orientation:a,children:i,value:l,onItemSelect:c,onItemDismiss:u,onTriggerEnter:h,onTriggerLeave:f,onContentEnter:m,onContentLeave:p}=e,[x,g]=d.useState(null),[y,w]=d.useState(new Map),[v,b]=d.useState(null);return o.jsx(L7,{scope:t,isRootMenu:n,rootNavigationMenu:r,value:l,previousValue:Sx(l),baseId:Un(),dir:s,orientation:a,viewport:x,onViewportChange:g,indicatorTrack:v,onIndicatorTrackChange:b,onTriggerEnter:kt(h),onTriggerLeave:kt(f),onContentEnter:kt(m),onContentLeave:kt(p),onItemSelect:kt(c),onItemDismiss:kt(u),onViewportContentChange:d.useCallback((j,S)=>{w(C=>(C.set(j,S),new Map(C)))},[]),onViewportContentRemove:d.useCallback(j=>{w(S=>S.has(j)?(S.delete(j),new Map(S)):S)},[]),children:o.jsx(u0.Provider,{scope:t,children:o.jsx(F7,{scope:t,items:y,children:i})})})},JR="NavigationMenuList",XR=d.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,...r}=e,s=zr(JR,n),a=o.jsx(we.ul,{"data-orientation":s.orientation,...r,ref:t});return o.jsx(we.div,{style:{position:"relative"},ref:s.onIndicatorTrackChange,children:o.jsx(u0.Slot,{scope:n,children:s.isRootMenu?o.jsx(lP,{asChild:!0,children:a}):a})})});XR.displayName=JR;var ZR="NavigationMenuItem",[B7,eP]=d0(ZR),tP=d.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,value:r,...s}=e,a=Un(),i=r||a||"LEGACY_REACT_AUTO_VALUE",l=d.useRef(null),c=d.useRef(null),u=d.useRef(null),h=d.useRef(()=>{}),f=d.useRef(!1),m=d.useCallback((x="start")=>{if(l.current){h.current();const g=Fv(l.current);g.length&&m0(x==="start"?g:g.reverse())}},[]),p=d.useCallback(()=>{if(l.current){const x=Fv(l.current);x.length&&(h.current=Q7(x))}},[]);return o.jsx(B7,{scope:n,value:i,triggerRef:c,contentRef:l,focusProxyRef:u,wasEscapeCloseRef:f,onEntryKeyDown:m,onFocusProxyEnter:m,onRootContentClose:p,onContentFocusOutside:p,children:o.jsx(we.li,{...s,ref:t})})});tP.displayName=ZR;var Lv="NavigationMenuTrigger",nP=d.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,disabled:r,...s}=e,a=zr(Lv,e.__scopeNavigationMenu),i=eP(Lv,e.__scopeNavigationMenu),l=d.useRef(null),c=Ge(l,i.triggerRef,t),u=uP(a.baseId,i.value),h=dP(a.baseId,i.value),f=d.useRef(!1),m=d.useRef(!1),p=i.value===a.value;return o.jsxs(o.Fragment,{children:[o.jsx(u0.ItemSlot,{scope:n,value:i.value,children:o.jsx(cP,{asChild:!0,children:o.jsx(we.button,{id:u,disabled:r,"data-disabled":r?"":void 0,"data-state":p0(p),"aria-expanded":p,"aria-controls":h,...s,ref:c,onPointerEnter:Z(e.onPointerEnter,()=>{m.current=!1,i.wasEscapeCloseRef.current=!1}),onPointerMove:Z(e.onPointerMove,lf(()=>{r||m.current||i.wasEscapeCloseRef.current||f.current||(a.onTriggerEnter(i.value),f.current=!0)})),onPointerLeave:Z(e.onPointerLeave,lf(()=>{r||(a.onTriggerLeave(),f.current=!1)})),onClick:Z(e.onClick,()=>{a.onItemSelect(i.value),m.current=p}),onKeyDown:Z(e.onKeyDown,x=>{const y={horizontal:"ArrowDown",vertical:a.dir==="rtl"?"ArrowLeft":"ArrowRight"}[a.orientation];p&&x.key===y&&(i.onEntryKeyDown(),x.preventDefault())})})})}),p&&o.jsxs(o.Fragment,{children:[o.jsx(z1,{"aria-hidden":!0,tabIndex:0,ref:i.focusProxyRef,onFocus:x=>{const g=i.contentRef.current,y=x.relatedTarget,w=y===l.current,v=g==null?void 0:g.contains(y);(w||!v)&&i.onFocusProxyEnter(w?"start":"end")}}),a.viewport&&o.jsx("span",{"aria-owns":h})]})]})});nP.displayName=Lv;var K7="NavigationMenuLink",kj="navigationMenu.linkSelect",rP=d.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,active:r,onSelect:s,...a}=e;return o.jsx(cP,{asChild:!0,children:o.jsx(we.a,{"data-active":r?"":void 0,"aria-current":r?"page":void 0,...a,ref:t,onClick:Z(e.onClick,i=>{const l=i.target,c=new CustomEvent(kj,{bubbles:!0,cancelable:!0});if(l.addEventListener(kj,u=>s==null?void 0:s(u),{once:!0}),Wc(l,c),!c.defaultPrevented&&!i.metaKey){const u=new CustomEvent(oh,{bubbles:!0,cancelable:!0});Wc(l,u)}},{checkForDefaultPrevented:!1})})})});rP.displayName=K7;var h0="NavigationMenuIndicator",sP=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=zr(h0,e.__scopeNavigationMenu),a=!!s.value;return s.indicatorTrack?n1.createPortal(o.jsx($t,{present:n||a,children:o.jsx(V7,{...r,ref:t})}),s.indicatorTrack):null});sP.displayName=h0;var V7=d.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,...r}=e,s=zr(h0,n),a=GR(n),[i,l]=d.useState(null),[c,u]=d.useState(null),h=s.orientation==="horizontal",f=!!s.value;d.useEffect(()=>{var g;const x=(g=a().find(y=>y.value===s.value))==null?void 0:g.ref.current;x&&l(x)},[a,s.value]);const m=()=>{i&&u({size:h?i.offsetWidth:i.offsetHeight,offset:h?i.offsetLeft:i.offsetTop})};return zv(i,m),zv(s.indicatorTrack,m),c?o.jsx(we.div,{"aria-hidden":!0,"data-state":f?"visible":"hidden","data-orientation":s.orientation,...r,ref:t,style:{position:"absolute",...h?{left:0,width:c.size+"px",transform:`translateX(${c.offset}px)`}:{top:0,height:c.size+"px",transform:`translateY(${c.offset}px)`},...r.style}}):null}),xl="NavigationMenuContent",oP=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=zr(xl,e.__scopeNavigationMenu),a=eP(xl,e.__scopeNavigationMenu),i=Ge(a.contentRef,t),l=a.value===s.value,c={value:a.value,triggerRef:a.triggerRef,focusProxyRef:a.focusProxyRef,wasEscapeCloseRef:a.wasEscapeCloseRef,onContentFocusOutside:a.onContentFocusOutside,onRootContentClose:a.onRootContentClose,...r};return s.viewport?o.jsx(q7,{forceMount:n,...c,ref:i}):o.jsx($t,{present:n||l,children:o.jsx(aP,{"data-state":p0(l),...c,ref:i,onPointerEnter:Z(e.onPointerEnter,s.onContentEnter),onPointerLeave:Z(e.onPointerLeave,lf(s.onContentLeave)),style:{pointerEvents:!l&&s.isRootMenu?"none":void 0,...c.style}})})});oP.displayName=xl;var q7=d.forwardRef((e,t)=>{const n=zr(xl,e.__scopeNavigationMenu),{onViewportContentChange:r,onViewportContentRemove:s}=n;return tn(()=>{r(e.value,{ref:t,...e})},[e,t,r]),tn(()=>()=>s(e.value),[e.value,s]),null}),oh="navigationMenu.rootContentDismiss",aP=d.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,value:r,triggerRef:s,focusProxyRef:a,wasEscapeCloseRef:i,onRootContentClose:l,onContentFocusOutside:c,...u}=e,h=zr(xl,n),f=d.useRef(null),m=Ge(f,t),p=uP(h.baseId,r),x=dP(h.baseId,r),g=GR(n),y=d.useRef(null),{onItemDismiss:w}=h;d.useEffect(()=>{const b=f.current;if(h.isRootMenu&&b){const j=()=>{var S;w(),l(),b.contains(document.activeElement)&&((S=s.current)==null||S.focus())};return b.addEventListener(oh,j),()=>b.removeEventListener(oh,j)}},[h.isRootMenu,e.value,s,w,l]);const v=d.useMemo(()=>{const j=g().map(M=>M.value);h.dir==="rtl"&&j.reverse();const S=j.indexOf(h.value),C=j.indexOf(h.previousValue),N=r===h.value,_=C===j.indexOf(r);if(!N&&!_)return y.current;const E=(()=>{if(S!==C){if(N&&C!==-1)return S>C?"from-end":"from-start";if(_&&S!==-1)return S>C?"to-start":"to-end"}return null})();return y.current=E,E},[h.previousValue,h.value,h.dir,g,r]);return o.jsx(lP,{asChild:!0,children:o.jsx(Xs,{id:x,"aria-labelledby":p,"data-motion":v,"data-orientation":h.orientation,...u,ref:m,disableOutsidePointerEvents:!1,onDismiss:()=>{var j;const b=new Event(oh,{bubbles:!0,cancelable:!0});(j=f.current)==null||j.dispatchEvent(b)},onFocusOutside:Z(e.onFocusOutside,b=>{var S;c();const j=b.target;(S=h.rootNavigationMenu)!=null&&S.contains(j)&&b.preventDefault()}),onPointerDownOutside:Z(e.onPointerDownOutside,b=>{var N;const j=b.target,S=g().some(_=>{var E;return(E=_.ref.current)==null?void 0:E.contains(j)}),C=h.isRootMenu&&((N=h.viewport)==null?void 0:N.contains(j));(S||C||!h.isRootMenu)&&b.preventDefault()}),onKeyDown:Z(e.onKeyDown,b=>{var C;const j=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!j){const N=Fv(b.currentTarget),_=document.activeElement,E=N.findIndex(R=>R===_),T=b.shiftKey?N.slice(0,E).reverse():N.slice(E+1,N.length);m0(T)?b.preventDefault():(C=a.current)==null||C.focus()}}),onEscapeKeyDown:Z(e.onEscapeKeyDown,b=>{i.current=!0})})})}),f0="NavigationMenuViewport",iP=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=!!zr(f0,e.__scopeNavigationMenu).value;return o.jsx($t,{present:n||a,children:o.jsx(H7,{...r,ref:t})})});iP.displayName=f0;var H7=d.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,children:r,...s}=e,a=zr(f0,n),i=Ge(t,a.onViewportChange),l=z7(xl,e.__scopeNavigationMenu),[c,u]=d.useState(null),[h,f]=d.useState(null),m=c?(c==null?void 0:c.width)+"px":void 0,p=c?(c==null?void 0:c.height)+"px":void 0,x=!!a.value,g=x?a.value:a.previousValue;return zv(h,()=>{h&&u({width:h.offsetWidth,height:h.offsetHeight})}),o.jsx(we.div,{"data-state":p0(x),"data-orientation":a.orientation,...s,ref:i,style:{pointerEvents:!x&&a.isRootMenu?"none":void 0,"--radix-navigation-menu-viewport-width":m,"--radix-navigation-menu-viewport-height":p,...s.style},onPointerEnter:Z(e.onPointerEnter,a.onContentEnter),onPointerLeave:Z(e.onPointerLeave,lf(a.onContentLeave)),children:Array.from(l.items).map(([w,{ref:v,forceMount:b,...j}])=>{const S=g===w;return o.jsx($t,{present:b||S,children:o.jsx(aP,{...j,ref:Cl(v,C=>{S&&C&&f(C)})})},w)})})}),W7="FocusGroup",lP=d.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,...r}=e,s=zr(W7,n);return o.jsx(Dv.Provider,{scope:n,children:o.jsx(Dv.Slot,{scope:n,children:o.jsx(we.div,{dir:s.dir,...r,ref:t})})})}),Tj=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],G7="FocusGroupItem",cP=d.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,...r}=e,s=D7(n),a=zr(G7,n);return o.jsx(Dv.ItemSlot,{scope:n,children:o.jsx(we.button,{...r,ref:t,onKeyDown:Z(e.onKeyDown,i=>{if(["Home","End",...Tj].includes(i.key)){let c=s().map(f=>f.ref.current);if([a.dir==="rtl"?"ArrowRight":"ArrowLeft","ArrowUp","End"].includes(i.key)&&c.reverse(),Tj.includes(i.key)){const f=c.indexOf(i.currentTarget);c=c.slice(f+1)}setTimeout(()=>m0(c)),i.preventDefault()}})})})});function Fv(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function m0(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}function Q7(e){return e.forEach(t=>{t.dataset.tabindex=t.getAttribute("tabindex")||"",t.setAttribute("tabindex","-1")}),()=>{e.forEach(t=>{const n=t.dataset.tabindex;t.setAttribute("tabindex",n)})}}function zv(e,t){const n=kt(t);tn(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}function p0(e){return e?"open":"closed"}function uP(e,t){return`${e}-trigger-${t}`}function dP(e,t){return`${e}-content-${t}`}function lf(e){return t=>t.pointerType==="mouse"?e(t):void 0}var hP=QR,fP=XR,Y7=tP,mP=nP,J7=rP,pP=sP,gP=oP,vP=iP;const yP=d.forwardRef(({className:e,children:t,...n},r)=>o.jsx(hP,{ref:r,className:ee("relative z-10 flex max-w-max flex-1 items-center justify-center",e),...n,children:t}));yP.displayName=hP.displayName;const xP=d.forwardRef(({className:e,...t},n)=>o.jsx(fP,{ref:n,className:ee("group flex flex-1 list-none items-center justify-center space-x-1",e),...t}));xP.displayName=fP.displayName;const Uv=d.forwardRef(({className:e,...t},n)=>o.jsx(Y7,{ref:n,className:ee("relative",e),...t}));Uv.displayName="NavigationMenuItem";const wP=Wo("group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent"),bP=d.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(mP,{ref:r,className:ee(wP(),"group",e),...n,children:[t," ",o.jsx(Go,{className:"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180","aria-hidden":"true"})]}));bP.displayName=mP.displayName;const jP=d.forwardRef(({className:e,...t},n)=>o.jsx(gP,{ref:n,className:ee("absolute left-0 top-full mt-1.5 w-auto rounded-md border bg-popover text-popover-foreground shadow-lg data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95",e),...t}));jP.displayName=gP.displayName;const Dd=J7,X7=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{className:ee("absolute left-0 top-full flex justify-start"),children:o.jsx(vP,{className:ee("origin-top-left relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",e),ref:n,...t})}));X7.displayName=vP.displayName;const Z7=d.forwardRef(({className:e,...t},n)=>o.jsx(pP,{ref:n,className:ee("top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",e),...t,children:o.jsx("div",{className:"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md"})}));Z7.displayName=pP.displayName;function eK(){const[e,t]=d.useState([]),{data:n,isLoading:r,error:s}=tt({queryKey:["/api/health/status"],refetchInterval:3e5,staleTime:28e4,retry:3,retryDelay:h=>Math.min(1e3*2**h,3e4)}),a=n&&n.overall!=="operational"&&!e.length;return{health:n,isLoading:r,error:s,showBanner:a,dismissBanner:()=>{if(n){const h=n.apis.filter(f=>f.status!=="operational").map(f=>`${f.name}:${f.status}`);t(f=>[...f,...h])}},getStatusColor:h=>{switch(h){case"operational":return"text-green-600";case"degraded":return"text-yellow-600";case"outage":return"text-red-600";default:return"text-gray-600"}},getStatusDot:h=>{switch(h){case"operational":return"bg-green-500";case"degraded":return"bg-yellow-500";case"outage":return"bg-red-500";default:return"bg-gray-500"}},formatStatus:h=>h.status==="operational"?`${h.name} (${h.responseTime}ms)`:`${h.name} experiencing issues`}}var Cm="Popover",[SP]=Nn(Cm,[Es]),Yu=Es(),[tK,Zo]=SP(Cm),NP=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:i=!1}=e,l=Yu(t),c=d.useRef(null),[u,h]=d.useState(!1),[f,m]=rr({prop:r,defaultProp:s??!1,onChange:a,caller:Cm});return o.jsx(Ru,{...l,children:o.jsx(tK,{scope:t,contentId:Un(),triggerRef:c,open:f,onOpenChange:m,onOpenToggle:d.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:u,onCustomAnchorAdd:d.useCallback(()=>h(!0),[]),onCustomAnchorRemove:d.useCallback(()=>h(!1),[]),modal:i,children:n})})};NP.displayName=Cm;var CP="PopoverAnchor",nK=d.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Zo(CP,n),a=Yu(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=s;return d.useEffect(()=>(i(),()=>l()),[i,l]),o.jsx(Rl,{...a,...r,ref:t})});nK.displayName=CP;var _P="PopoverTrigger",EP=d.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Zo(_P,n),a=Yu(n),i=Ge(t,s.triggerRef),l=o.jsx(we.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":AP(s.open),...r,ref:i,onClick:Z(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:o.jsx(Rl,{asChild:!0,...a,children:l})});EP.displayName=_P;var g0="PopoverPortal",[rK,sK]=SP(g0,{forceMount:void 0}),kP=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,a=Zo(g0,t);return o.jsx(rK,{scope:t,forceMount:n,children:o.jsx($t,{present:n||a.open,children:o.jsx(Ga,{asChild:!0,container:s,children:r})})})};kP.displayName=g0;var wl="PopoverContent",TP=d.forwardRef((e,t)=>{const n=sK(wl,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,a=Zo(wl,e.__scopePopover);return o.jsx($t,{present:r||a.open,children:a.modal?o.jsx(aK,{...s,ref:t}):o.jsx(iK,{...s,ref:t})})});TP.displayName=wl;var oK=La("PopoverContent.RemoveScroll"),aK=d.forwardRef((e,t)=>{const n=Zo(wl,e.__scopePopover),r=d.useRef(null),s=Ge(t,r),a=d.useRef(!1);return d.useEffect(()=>{const i=r.current;if(i)return zf(i)},[]),o.jsx(Mu,{as:oK,allowPinchZoom:!0,children:o.jsx(RP,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Z(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),a.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Z(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Z(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),iK=d.forwardRef((e,t)=>{const n=Zo(wl,e.__scopePopover),r=d.useRef(!1),s=d.useRef(!1);return o.jsx(RP,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),RP=d.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:h,...f}=e,m=Zo(wl,n),p=Yu(n);return $f(),o.jsx(Iu,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(Xs,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:o.jsx(Pu,{"data-state":AP(m.open),role:"dialog",id:m.contentId,...p,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),PP="PopoverClose",lK=d.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Zo(PP,n);return o.jsx(we.button,{type:"button",...r,ref:t,onClick:Z(e.onClick,()=>s.onOpenChange(!1))})});lK.displayName=PP;var cK="PopoverArrow",uK=d.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Yu(n);return o.jsx(Au,{...s,...r,ref:t})});uK.displayName=cK;function AP(e){return e?"open":"closed"}var dK=NP,hK=EP,fK=kP,OP=TP;const mK=dK,pK=hK,IP=d.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},s)=>o.jsx(fK,{children:o.jsx(OP,{ref:s,align:t,sideOffset:n,className:ee("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...r})}));IP.displayName=OP.displayName;function gK(){const{health:e,isLoading:t,error:n,getStatusDot:r}=eK();if(t)return o.jsx(iu,{className:"w-4 h-4 rounded-full"});if(!e)return o.jsxs("div",{className:"flex items-center space-x-2",title:(n==null?void 0:n.message)||"Health check failed",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Status Unknown"})]});const s=r(e.overall),a=i=>({openai:"OpenAI",gemini:"Gemini",perplexity:"Perplexity",exa:"Exa",EXA:"Exa"})[i.toLowerCase()]||i.charAt(0).toUpperCase()+i.slice(1).toLowerCase();return o.jsxs(mK,{children:[o.jsx(pK,{asChild:!0,children:o.jsxs(V,{variant:"ghost",size:"sm",className:"flex items-center space-x-2 h-8 px-2",children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${s}`}),o.jsx("span",{className:"text-sm",children:"API Status"})]})}),o.jsx(IP,{className:"w-72",align:"end",children:o.jsxs("div",{className:"space-y-2.5",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h4",{className:"font-semibold text-sm",children:"API Status"}),o.jsx(me,{variant:e.overall==="operational"?"default":"destructive",className:e.overall==="operational"?"bg-green-500/20 text-green-400 border-green-500/30 text-xs px-1.5 py-0":"text-xs px-1.5 py-0",children:e.overall})]}),o.jsx("div",{className:"space-y-1.5",children:e.apis.map(i=>o.jsxs("div",{className:"flex items-center justify-between py-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${r(i.status)}`}),o.jsx("span",{className:"font-medium text-xs",children:a(i.name)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[i.responseTime&&i.status==="operational"&&o.jsxs("span",{className:"text-xs text-muted-foreground",children:[i.responseTime,"ms"]}),i.error&&o.jsx("div",{className:"text-xs text-destructive max-w-28 truncate",children:i.error})]})]},i.name))}),o.jsxs("div",{className:"text-xs text-muted-foreground pt-1.5",children:["Last checked: ",new Date(e.lastUpdate).toLocaleTimeString()]})]})})]})}function vK(){const{activeAnalyses:e,stopAnalysis:t,hasActiveAnalyses:n}=d_(),{toast:r}=wr(),[s,a]=d.useState(!1);if(d.useEffect(()=>{n&&s&&a(!1)},[n,s]),!n)return null;const i=(u,h)=>{t(u),r({title:"Analysis stopped",description:`${h} has been cancelled.`})},l=u=>{const h=Math.floor((Date.now()-u)/1e3),f=Math.floor(h/60),m=h%60;return f>0?`${f}m ${m}s`:`${m}s`},c=u=>{switch(u){case"year":return dC;case"month":return Do;case"batch":return Do;default:return Do}};return s?o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-blue-200 px-4 py-2 flex items-center justify-between shadow-sm",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),o.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[e.size," analysis",e.size>1?"es":""," running"]})]}),o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>a(!1),className:"h-6 px-2 text-blue-700 hover:bg-blue-100",children:"Show"})]}):o.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-blue-200 px-4 py-3 shadow-sm",children:o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),o.jsxs("h3",{className:"text-sm font-semibold text-blue-900",children:["Running Analyses (",e.size,")"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>a(!0),className:"h-6 px-2 text-blue-700 hover:bg-blue-100",children:"Minimize"}),o.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>{Array.from(e.keys()).forEach(u=>{const h=e.get(u);h&&i(u,h.label)})},className:"h-6 px-2 text-red-700 hover:bg-red-100",children:[o.jsx(On,{className:"w-3 h-3 mr-1"}),"Stop All"]})]})]}),o.jsx("div",{className:"space-y-3",children:Array.from(e.values()).map(u=>{const h=c(u.type),f=u.total>0?Math.round(u.completed/u.total*100):0;return o.jsxs("div",{className:"bg-white rounded-lg border border-blue-200 p-3",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(h,{className:"w-4 h-4 text-blue-600"}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-sm font-medium text-slate-900",children:u.label}),o.jsx(me,{variant:"secondary",className:"text-xs",children:u.type})]}),o.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[u.completed," / ",u.total," completed",u.currentDate&&o.jsxs("span",{className:"ml-2",children:[" Currently: ",u.currentDate]}),o.jsxs("span",{className:"ml-2",children:[" ",l(u.startTime)]})]})]})]}),o.jsxs(V,{variant:"outline",size:"sm",onClick:()=>i(u.id,u.label),className:"flex items-center space-x-1 text-red-600 border-red-200 hover:bg-red-50",children:[o.jsx(hD,{className:"w-3 h-3"}),o.jsx("span",{children:"Stop"})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex justify-between text-xs text-slate-600",children:[o.jsxs("span",{children:[f,"% complete"]}),o.jsxs("span",{children:[u.completed," / ",u.total]})]}),o.jsx(c0,{value:f,className:"h-2"})]})]},u.id)})})]})})}function yK({children:e}){const[t]=_u(),n=[{path:"/",label:"Home",icon:ss},{path:"/monthly",label:"Monthly View",icon:Do}];return o.jsxs("div",{className:"min-h-screen",children:[o.jsx(vK,{}),o.jsx("header",{className:"sticky top-0 z-40 bg-card",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"relative flex justify-between items-center h-16",children:[o.jsx("div",{className:"flex items-center",children:o.jsxs(kn,{href:"/",className:"flex items-center space-x-2 hover:opacity-80",children:[o.jsx("div",{className:"w-8 h-8 bg-black border border-white rounded-full flex items-center justify-center",children:o.jsx(Xg,{className:"text-white w-4 h-4"})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("h1",{className:"text-xl font-bold text-foreground leading-tight",children:"The Origins"}),o.jsx("span",{className:"text-[10px] text-muted-foreground leading-tight",children:"News Analyser"})]})]})}),o.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2",children:o.jsx(yP,{className:"hidden md:flex",delayDuration:0,children:o.jsxs(xP,{className:"gap-1",children:[n.map(r=>{const s=t===r.path;return o.jsx(Uv,{children:o.jsx(kn,{href:r.path,children:o.jsx(Dd,{className:wP({className:`${s?"bg-accent text-accent-foreground":""}`}),children:r.label})})},r.path)}),o.jsxs(Uv,{children:[o.jsx(bP,{children:"Manager"}),o.jsx(jP,{children:o.jsxs("ul",{className:"grid w-[280px] gap-1 p-2 bg-accent rounded-md",children:[o.jsx("li",{children:o.jsx(Dd,{asChild:!0,children:o.jsxs(kn,{href:"/admin",className:"block select-none space-y-0.5 rounded-md p-2 leading-none no-underline outline-none transition-all duration-200 bg-accent hover:bg-primary/10 hover:shadow-sm focus:bg-primary/10 focus:text-accent-foreground cursor-pointer group",children:[o.jsx("div",{className:"text-xs font-medium leading-none group-hover:text-primary transition-colors",children:"Admin"}),o.jsx("p",{className:"line-clamp-2 text-xs leading-snug text-muted-foreground group-hover:text-foreground/80 transition-colors",children:"Export data and settings."})]})})}),o.jsx("li",{children:o.jsx(Dd,{asChild:!0,children:o.jsxs(kn,{href:"/tags-manager",className:"block select-none space-y-0.5 rounded-md p-2 leading-none no-underline outline-none transition-all duration-200 bg-accent hover:bg-primary/10 hover:shadow-sm focus:bg-primary/10 focus:text-accent-foreground cursor-pointer group",children:[o.jsx("div",{className:"text-xs font-medium leading-none group-hover:text-primary transition-colors",children:"Tag Manager"}),o.jsx("p",{className:"line-clamp-2 text-xs leading-snug text-muted-foreground group-hover:text-foreground/80 transition-colors",children:"Organize and manage tags with drag-drop."})]})})}),o.jsx("li",{children:o.jsx(Dd,{asChild:!0,children:o.jsxs(kn,{href:"/events",className:"block select-none space-y-0.5 rounded-md p-2 leading-none no-underline outline-none transition-all duration-200 bg-accent hover:bg-primary/10 hover:shadow-sm focus:bg-primary/10 focus:text-accent-foreground cursor-pointer group",children:[o.jsx("div",{className:"text-xs font-medium leading-none group-hover:text-primary transition-colors",children:"Events"}),o.jsx("p",{className:"line-clamp-2 text-xs leading-snug text-muted-foreground group-hover:text-foreground/80 transition-colors",children:"View and change events."})]})})})]})})]})]})})}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(gK,{}),o.jsx(BR,{})]})]})})}),o.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e})]})}function xK(){return o.jsx(yK,{children:o.jsxs(MI,{children:[o.jsx(Wn,{path:"/",component:sj}),o.jsx(Wn,{path:"/monthly",component:G8}),o.jsx(Wn,{path:"/month/:year/:month",component:V8}),o.jsx(Wn,{path:"/day/:date",component:dU}),o.jsx(Wn,{path:"/events",component:O7}),o.jsx(Wn,{path:"/tags-browser",component:sj}),o.jsx(Wn,{path:"/tags-cleanup",component:hU}),o.jsx(Wn,{path:"/tags-manager",component:l9}),o.jsx(Wn,{path:"/conflict/:sourceDate",component:Ap}),o.jsx(Wn,{path:"/violation/:date",component:Ap}),o.jsx(Wn,{path:"/fact-check/:date",component:Ap}),o.jsx(Wn,{path:"/admin",component:A7}),o.jsx(Wn,{path:"/lab/isolated",component:b7}),o.jsx(Wn,{component:I7})]})})}function wK(){return o.jsx(r3,{children:o.jsx(aM,{client:J,children:o.jsx(s3,{children:o.jsxs(o_,{children:[o.jsx(a4,{}),o.jsx(xK,{})]})})})})}typeof window<"u"&&(window.addEventListener("unhandledrejection",e=>{var n;const t=((n=e.reason)==null?void 0:n.toString())||"";if(t.includes("NetworkError")||t.includes("fetch")||t.includes("AbortError")||t.includes("The user aborted a request")){e.preventDefault();return}console.group(" Unhandled Promise Rejection"),console.error("Promise rejection:",e.reason),console.error("Promise:",e.promise),console.trace("Stack trace"),console.groupEnd(),e.preventDefault()}),window.addEventListener("error",e=>{console.group(" Uncaught JavaScript Error"),console.error("Error:",e.error),console.error("Message:",e.message),console.error("Filename:",e.filename),console.error("Line:",e.lineno),console.error("Column:",e.colno),console.trace("Stack trace"),console.groupEnd()}));r1(document.getElementById("root")).render(o.jsx(wK,{}));
