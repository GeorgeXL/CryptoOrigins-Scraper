var g0=e=>{throw TypeError(e)};var Nm=(e,t,n)=>t.has(e)||g0("Cannot "+n);var k=(e,t,n)=>(Nm(e,t,"read from private field"),n?n.call(e):t.get(e)),be=(e,t,n)=>t.has(e)?g0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),le=(e,t,n,r)=>(Nm(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Ke=(e,t,n)=>(Nm(e,t,"access private method"),n);var Xu=(e,t,n,r)=>({set _(s){le(e,t,s,n)},get _(){return k(e,t,r)}});function zj(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function Uj(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function OP(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var Bj={exports:{}},lf={},Kj={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wu=Symbol.for("react.element"),IP=Symbol.for("react.portal"),MP=Symbol.for("react.fragment"),DP=Symbol.for("react.strict_mode"),$P=Symbol.for("react.profiler"),LP=Symbol.for("react.provider"),FP=Symbol.for("react.context"),zP=Symbol.for("react.forward_ref"),UP=Symbol.for("react.suspense"),BP=Symbol.for("react.memo"),KP=Symbol.for("react.lazy"),v0=Symbol.iterator;function VP(e){return e===null||typeof e!="object"?null:(e=v0&&e[v0]||e["@@iterator"],typeof e=="function"?e:null)}var Vj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qj=Object.assign,Hj={};function bl(e,t,n){this.props=e,this.context=t,this.refs=Hj,this.updater=n||Vj}bl.prototype.isReactComponent={};bl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};bl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Wj(){}Wj.prototype=bl.prototype;function Bv(e,t,n){this.props=e,this.context=t,this.refs=Hj,this.updater=n||Vj}var Kv=Bv.prototype=new Wj;Kv.constructor=Bv;qj(Kv,bl.prototype);Kv.isPureReactComponent=!0;var y0=Array.isArray,Gj=Object.prototype.hasOwnProperty,Vv={current:null},Qj={key:!0,ref:!0,__self:!0,__source:!0};function Yj(e,t,n){var r,s={},a=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)Gj.call(t,r)&&!Qj.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:wu,type:e,key:a,ref:i,props:s,_owner:Vv.current}}function qP(e,t){return{$$typeof:wu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function qv(e){return typeof e=="object"&&e!==null&&e.$$typeof===wu}function HP(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var x0=/\/+/g;function Cm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?HP(""+e.key):t.toString(36)}function $d(e,t,n,r,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case wu:case IP:i=!0}}if(i)return i=e,s=s(i),e=r===""?"."+Cm(i,0):r,y0(s)?(n="",e!=null&&(n=e.replace(x0,"$&/")+"/"),$d(s,t,n,"",function(u){return u})):s!=null&&(qv(s)&&(s=qP(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(x0,"$&/")+"/")+e)),t.push(s)),1;if(i=0,r=r===""?".":r+":",y0(e))for(var l=0;l<e.length;l++){a=e[l];var c=r+Cm(a,l);i+=$d(a,t,n,c,s)}else if(c=VP(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=r+Cm(a,l++),i+=$d(a,t,n,c,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Zu(e,t,n){if(e==null)return e;var r=[],s=0;return $d(e,r,"","",function(a){return t.call(n,a,s++)}),r}function WP(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Bn={current:null},Ld={transition:null},GP={ReactCurrentDispatcher:Bn,ReactCurrentBatchConfig:Ld,ReactCurrentOwner:Vv};function Jj(){throw Error("act(...) is not supported in production builds of React.")}tt.Children={map:Zu,forEach:function(e,t,n){Zu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Zu(e,function(){t++}),t},toArray:function(e){return Zu(e,function(t){return t})||[]},only:function(e){if(!qv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};tt.Component=bl;tt.Fragment=MP;tt.Profiler=$P;tt.PureComponent=Bv;tt.StrictMode=DP;tt.Suspense=UP;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GP;tt.act=Jj;tt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=qj({},e.props),s=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=Vv.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Gj.call(t,c)&&!Qj.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:wu,type:e.type,key:s,ref:a,props:r,_owner:i}};tt.createContext=function(e){return e={$$typeof:FP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:LP,_context:e},e.Consumer=e};tt.createElement=Yj;tt.createFactory=function(e){var t=Yj.bind(null,e);return t.type=e,t};tt.createRef=function(){return{current:null}};tt.forwardRef=function(e){return{$$typeof:zP,render:e}};tt.isValidElement=qv;tt.lazy=function(e){return{$$typeof:KP,_payload:{_status:-1,_result:e},_init:WP}};tt.memo=function(e,t){return{$$typeof:BP,type:e,compare:t===void 0?null:t}};tt.startTransition=function(e){var t=Ld.transition;Ld.transition={};try{e()}finally{Ld.transition=t}};tt.unstable_act=Jj;tt.useCallback=function(e,t){return Bn.current.useCallback(e,t)};tt.useContext=function(e){return Bn.current.useContext(e)};tt.useDebugValue=function(){};tt.useDeferredValue=function(e){return Bn.current.useDeferredValue(e)};tt.useEffect=function(e,t){return Bn.current.useEffect(e,t)};tt.useId=function(){return Bn.current.useId()};tt.useImperativeHandle=function(e,t,n){return Bn.current.useImperativeHandle(e,t,n)};tt.useInsertionEffect=function(e,t){return Bn.current.useInsertionEffect(e,t)};tt.useLayoutEffect=function(e,t){return Bn.current.useLayoutEffect(e,t)};tt.useMemo=function(e,t){return Bn.current.useMemo(e,t)};tt.useReducer=function(e,t,n){return Bn.current.useReducer(e,t,n)};tt.useRef=function(e){return Bn.current.useRef(e)};tt.useState=function(e){return Bn.current.useState(e)};tt.useSyncExternalStore=function(e,t,n){return Bn.current.useSyncExternalStore(e,t,n)};tt.useTransition=function(){return Bn.current.useTransition()};tt.version="18.3.1";Kj.exports=tt;var d=Kj.exports;const Ce=Uj(d),cf=zj({__proto__:null,default:Ce},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QP=d,YP=Symbol.for("react.element"),JP=Symbol.for("react.fragment"),XP=Object.prototype.hasOwnProperty,ZP=QP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eA={key:!0,ref:!0,__self:!0,__source:!0};function Xj(e,t,n){var r,s={},a=null,i=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)XP.call(t,r)&&!eA.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:YP,type:e,key:a,ref:i,props:s,_owner:ZP.current}}lf.Fragment=JP;lf.jsx=Xj;lf.jsxs=Xj;Bj.exports=lf;var o=Bj.exports,Zj={exports:{}},yr={},eS={exports:{}},tS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,B){var $=T.length;T.push(B);e:for(;0<$;){var W=$-1>>>1,ae=T[W];if(0<s(ae,B))T[W]=B,T[$]=ae,$=W;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var B=T[0],$=T.pop();if($!==B){T[0]=$;e:for(var W=0,ae=T.length,_e=ae>>>1;W<_e;){var ge=2*(W+1)-1,De=T[ge],Ee=ge+1,fe=T[Ee];if(0>s(De,$))Ee<ae&&0>s(fe,De)?(T[W]=fe,T[Ee]=$,W=Ee):(T[W]=De,T[ge]=$,W=ge);else if(Ee<ae&&0>s(fe,$))T[W]=fe,T[Ee]=$,W=Ee;else break e}}return B}function s(T,B){var $=T.sortIndex-B.sortIndex;return $!==0?$:T.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],u=[],h=1,f=null,m=3,p=!1,w=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(T){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=T)r(u),B.sortIndex=B.expirationTime,t(c,B);else break;B=n(u)}}function j(T){if(g=!1,b(T),!w)if(n(c)!==null)w=!0,Y(S);else{var B=n(u);B!==null&&O(j,B.startTime-T)}}function S(T,B){w=!1,g&&(g=!1,x(C),C=-1),p=!0;var $=m;try{for(b(B),f=n(c);f!==null&&(!(f.expirationTime>B)||T&&!R());){var W=f.callback;if(typeof W=="function"){f.callback=null,m=f.priorityLevel;var ae=W(f.expirationTime<=B);B=e.unstable_now(),typeof ae=="function"?f.callback=ae:f===n(c)&&r(c),b(B)}else r(c);f=n(c)}if(f!==null)var _e=!0;else{var ge=n(u);ge!==null&&O(j,ge.startTime-B),_e=!1}return _e}finally{f=null,m=$,p=!1}}var _=!1,N=null,C=-1,E=5,D=-1;function R(){return!(e.unstable_now()-D<E)}function P(){if(N!==null){var T=e.unstable_now();D=T;var B=!0;try{B=N(!0,T)}finally{B?G():(_=!1,N=null)}}else _=!1}var G;if(typeof v=="function")G=function(){v(P)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ce=Q.port2;Q.port1.onmessage=P,G=function(){ce.postMessage(null)}}else G=function(){y(P,0)};function Y(T){N=T,_||(_=!0,G())}function O(T,B){C=y(function(){T(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){w||p||(w=!0,Y(S))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var $=m;m=B;try{return T()}finally{m=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,B){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var $=m;m=T;try{return B()}finally{m=$}},e.unstable_scheduleCallback=function(T,B,$){var W=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?W+$:W):$=W,T){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=$+ae,T={id:h++,callback:B,priorityLevel:T,startTime:$,expirationTime:ae,sortIndex:-1},$>W?(T.sortIndex=$,t(u,T),n(c)===null&&T===n(u)&&(g?(x(C),C=-1):g=!0,O(j,$-W))):(T.sortIndex=ae,t(c,T),w||p||(w=!0,Y(S))),T},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(T){var B=m;return function(){var $=m;m=B;try{return T.apply(this,arguments)}finally{m=$}}}})(tS);eS.exports=tS;var tA=eS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nA=d,vr=tA;function se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nS=new Set,kc={};function Va(e,t){nl(e,t),nl(e+"Capture",t)}function nl(e,t){for(kc[e]=t,e=0;e<t.length;e++)nS.add(t[e])}var Ks=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Op=Object.prototype.hasOwnProperty,rA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w0={},b0={};function sA(e){return Op.call(b0,e)?!0:Op.call(w0,e)?!1:rA.test(e)?b0[e]=!0:(w0[e]=!0,!1)}function oA(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function aA(e,t,n,r){if(t===null||typeof t>"u"||oA(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Kn(e,t,n,r,s,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){jn[e]=new Kn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];jn[t]=new Kn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){jn[e]=new Kn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){jn[e]=new Kn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){jn[e]=new Kn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){jn[e]=new Kn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){jn[e]=new Kn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){jn[e]=new Kn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){jn[e]=new Kn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Hv=/[\-:]([a-z])/g;function Wv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Hv,Wv);jn[t]=new Kn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Hv,Wv);jn[t]=new Kn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Hv,Wv);jn[t]=new Kn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){jn[e]=new Kn(e,1,!1,e.toLowerCase(),null,!1,!1)});jn.xlinkHref=new Kn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){jn[e]=new Kn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Gv(e,t,n,r){var s=jn.hasOwnProperty(t)?jn[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(aA(t,n,s,r)&&(n=null),r||s===null?sA(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ys=nA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ed=Symbol.for("react.element"),hi=Symbol.for("react.portal"),fi=Symbol.for("react.fragment"),Qv=Symbol.for("react.strict_mode"),Ip=Symbol.for("react.profiler"),rS=Symbol.for("react.provider"),sS=Symbol.for("react.context"),Yv=Symbol.for("react.forward_ref"),Mp=Symbol.for("react.suspense"),Dp=Symbol.for("react.suspense_list"),Jv=Symbol.for("react.memo"),ao=Symbol.for("react.lazy"),oS=Symbol.for("react.offscreen"),j0=Symbol.iterator;function Hl(e){return e===null||typeof e!="object"?null:(e=j0&&e[j0]||e["@@iterator"],typeof e=="function"?e:null)}var Gt=Object.assign,_m;function sc(e){if(_m===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);_m=t&&t[1]||""}return`
`+_m+e}var Em=!1;function km(e,t){if(!e||Em)return"";Em=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=r.stack.split(`
`),i=s.length-1,l=a.length-1;1<=i&&0<=l&&s[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==a[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==a[l]){var c=`
`+s[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{Em=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?sc(e):""}function iA(e){switch(e.tag){case 5:return sc(e.type);case 16:return sc("Lazy");case 13:return sc("Suspense");case 19:return sc("SuspenseList");case 0:case 2:case 15:return e=km(e.type,!1),e;case 11:return e=km(e.type.render,!1),e;case 1:return e=km(e.type,!0),e;default:return""}}function $p(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fi:return"Fragment";case hi:return"Portal";case Ip:return"Profiler";case Qv:return"StrictMode";case Mp:return"Suspense";case Dp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case sS:return(e.displayName||"Context")+".Consumer";case rS:return(e._context.displayName||"Context")+".Provider";case Yv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Jv:return t=e.displayName||null,t!==null?t:$p(e.type)||"Memo";case ao:t=e._payload,e=e._init;try{return $p(e(t))}catch{}}return null}function lA(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $p(t);case 8:return t===Qv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function $o(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function aS(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function cA(e){var t=aS(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function td(e){e._valueTracker||(e._valueTracker=cA(e))}function iS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=aS(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function oh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Lp(e,t){var n=t.checked;return Gt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function S0(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=$o(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function lS(e,t){t=t.checked,t!=null&&Gv(e,"checked",t,!1)}function Fp(e,t){lS(e,t);var n=$o(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?zp(e,t.type,n):t.hasOwnProperty("defaultValue")&&zp(e,t.type,$o(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function N0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function zp(e,t,n){(t!=="number"||oh(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var oc=Array.isArray;function _i(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$o(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Up(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(se(91));return Gt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function C0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(se(92));if(oc(n)){if(1<n.length)throw Error(se(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:$o(n)}}function cS(e,t){var n=$o(t.value),r=$o(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function _0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function uS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?uS(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var nd,dS=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(nd=nd||document.createElement("div"),nd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=nd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Tc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var fc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uA=["Webkit","ms","Moz","O"];Object.keys(fc).forEach(function(e){uA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fc[t]=fc[e]})});function hS(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||fc.hasOwnProperty(e)&&fc[e]?(""+t).trim():t+"px"}function fS(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=hS(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var dA=Gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kp(e,t){if(t){if(dA[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(se(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(se(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(se(61))}if(t.style!=null&&typeof t.style!="object")throw Error(se(62))}}function Vp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qp=null;function Xv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hp=null,Ei=null,ki=null;function E0(e){if(e=Su(e)){if(typeof Hp!="function")throw Error(se(280));var t=e.stateNode;t&&(t=mf(t),Hp(e.stateNode,e.type,t))}}function mS(e){Ei?ki?ki.push(e):ki=[e]:Ei=e}function pS(){if(Ei){var e=Ei,t=ki;if(ki=Ei=null,E0(e),t)for(e=0;e<t.length;e++)E0(t[e])}}function gS(e,t){return e(t)}function vS(){}var Tm=!1;function yS(e,t,n){if(Tm)return e(t,n);Tm=!0;try{return gS(e,t,n)}finally{Tm=!1,(Ei!==null||ki!==null)&&(vS(),pS())}}function Rc(e,t){var n=e.stateNode;if(n===null)return null;var r=mf(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(se(231,t,typeof n));return n}var Wp=!1;if(Ks)try{var Wl={};Object.defineProperty(Wl,"passive",{get:function(){Wp=!0}}),window.addEventListener("test",Wl,Wl),window.removeEventListener("test",Wl,Wl)}catch{Wp=!1}function hA(e,t,n,r,s,a,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var mc=!1,ah=null,ih=!1,Gp=null,fA={onError:function(e){mc=!0,ah=e}};function mA(e,t,n,r,s,a,i,l,c){mc=!1,ah=null,hA.apply(fA,arguments)}function pA(e,t,n,r,s,a,i,l,c){if(mA.apply(this,arguments),mc){if(mc){var u=ah;mc=!1,ah=null}else throw Error(se(198));ih||(ih=!0,Gp=u)}}function qa(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function xS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function k0(e){if(qa(e)!==e)throw Error(se(188))}function gA(e){var t=e.alternate;if(!t){if(t=qa(e),t===null)throw Error(se(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return k0(s),e;if(a===r)return k0(s),t;a=a.sibling}throw Error(se(188))}if(n.return!==r.return)n=s,r=a;else{for(var i=!1,l=s.child;l;){if(l===n){i=!0,n=s,r=a;break}if(l===r){i=!0,r=s,n=a;break}l=l.sibling}if(!i){for(l=a.child;l;){if(l===n){i=!0,n=a,r=s;break}if(l===r){i=!0,r=a,n=s;break}l=l.sibling}if(!i)throw Error(se(189))}}if(n.alternate!==r)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?e:t}function wS(e){return e=gA(e),e!==null?bS(e):null}function bS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=bS(e);if(t!==null)return t;e=e.sibling}return null}var jS=vr.unstable_scheduleCallback,T0=vr.unstable_cancelCallback,vA=vr.unstable_shouldYield,yA=vr.unstable_requestPaint,rn=vr.unstable_now,xA=vr.unstable_getCurrentPriorityLevel,Zv=vr.unstable_ImmediatePriority,SS=vr.unstable_UserBlockingPriority,lh=vr.unstable_NormalPriority,wA=vr.unstable_LowPriority,NS=vr.unstable_IdlePriority,uf=null,ys=null;function bA(e){if(ys&&typeof ys.onCommitFiberRoot=="function")try{ys.onCommitFiberRoot(uf,e,void 0,(e.current.flags&128)===128)}catch{}}var ts=Math.clz32?Math.clz32:NA,jA=Math.log,SA=Math.LN2;function NA(e){return e>>>=0,e===0?32:31-(jA(e)/SA|0)|0}var rd=64,sd=4194304;function ac(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ch(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,i=n&268435455;if(i!==0){var l=i&~s;l!==0?r=ac(l):(a&=i,a!==0&&(r=ac(a)))}else i=n&~s,i!==0?r=ac(i):a!==0&&(r=ac(a));if(r===0)return 0;if(t!==0&&t!==r&&(t&s)===0&&(s=r&-r,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ts(t),s=1<<n,r|=e[n],t&=~s;return r}function CA(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _A(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-ts(a),l=1<<i,c=s[i];c===-1?((l&n)===0||(l&r)!==0)&&(s[i]=CA(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function Qp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function CS(){var e=rd;return rd<<=1,(rd&4194240)===0&&(rd=64),e}function Rm(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bu(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ts(t),e[t]=n}function EA(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ts(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}function ey(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ts(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Nt=0;function _S(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var ES,ty,kS,TS,RS,Yp=!1,od=[],_o=null,Eo=null,ko=null,Pc=new Map,Ac=new Map,co=[],kA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function R0(e,t){switch(e){case"focusin":case"focusout":_o=null;break;case"dragenter":case"dragleave":Eo=null;break;case"mouseover":case"mouseout":ko=null;break;case"pointerover":case"pointerout":Pc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ac.delete(t.pointerId)}}function Gl(e,t,n,r,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},t!==null&&(t=Su(t),t!==null&&ty(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function TA(e,t,n,r,s){switch(t){case"focusin":return _o=Gl(_o,e,t,n,r,s),!0;case"dragenter":return Eo=Gl(Eo,e,t,n,r,s),!0;case"mouseover":return ko=Gl(ko,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return Pc.set(a,Gl(Pc.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Ac.set(a,Gl(Ac.get(a)||null,e,t,n,r,s)),!0}return!1}function PS(e){var t=da(e.target);if(t!==null){var n=qa(t);if(n!==null){if(t=n.tag,t===13){if(t=xS(n),t!==null){e.blockedOn=t,RS(e.priority,function(){kS(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);qp=r,n.target.dispatchEvent(r),qp=null}else return t=Su(n),t!==null&&ty(t),e.blockedOn=n,!1;t.shift()}return!0}function P0(e,t,n){Fd(e)&&n.delete(t)}function RA(){Yp=!1,_o!==null&&Fd(_o)&&(_o=null),Eo!==null&&Fd(Eo)&&(Eo=null),ko!==null&&Fd(ko)&&(ko=null),Pc.forEach(P0),Ac.forEach(P0)}function Ql(e,t){e.blockedOn===t&&(e.blockedOn=null,Yp||(Yp=!0,vr.unstable_scheduleCallback(vr.unstable_NormalPriority,RA)))}function Oc(e){function t(s){return Ql(s,e)}if(0<od.length){Ql(od[0],e);for(var n=1;n<od.length;n++){var r=od[n];r.blockedOn===e&&(r.blockedOn=null)}}for(_o!==null&&Ql(_o,e),Eo!==null&&Ql(Eo,e),ko!==null&&Ql(ko,e),Pc.forEach(t),Ac.forEach(t),n=0;n<co.length;n++)r=co[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<co.length&&(n=co[0],n.blockedOn===null);)PS(n),n.blockedOn===null&&co.shift()}var Ti=Ys.ReactCurrentBatchConfig,uh=!0;function PA(e,t,n,r){var s=Nt,a=Ti.transition;Ti.transition=null;try{Nt=1,ny(e,t,n,r)}finally{Nt=s,Ti.transition=a}}function AA(e,t,n,r){var s=Nt,a=Ti.transition;Ti.transition=null;try{Nt=4,ny(e,t,n,r)}finally{Nt=s,Ti.transition=a}}function ny(e,t,n,r){if(uh){var s=Jp(e,t,n,r);if(s===null)zm(e,t,r,dh,n),R0(e,r);else if(TA(s,e,t,n,r))r.stopPropagation();else if(R0(e,r),t&4&&-1<kA.indexOf(e)){for(;s!==null;){var a=Su(s);if(a!==null&&ES(a),a=Jp(e,t,n,r),a===null&&zm(e,t,r,dh,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else zm(e,t,r,null,n)}}var dh=null;function Jp(e,t,n,r){if(dh=null,e=Xv(r),e=da(e),e!==null)if(t=qa(e),t===null)e=null;else if(n=t.tag,n===13){if(e=xS(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return dh=e,null}function AS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xA()){case Zv:return 1;case SS:return 4;case lh:case wA:return 16;case NS:return 536870912;default:return 16}default:return 16}}var No=null,ry=null,zd=null;function OS(){if(zd)return zd;var e,t=ry,n=t.length,r,s="value"in No?No.value:No.textContent,a=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===s[a-r];r++);return zd=s.slice(e,1<r?1-r:void 0)}function Ud(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ad(){return!0}function A0(){return!1}function xr(e){function t(n,r,s,a,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ad:A0,this.isPropagationStopped=A0,this}return Gt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ad)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ad)},persist:function(){},isPersistent:ad}),t}var jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sy=xr(jl),ju=Gt({},jl,{view:0,detail:0}),OA=xr(ju),Pm,Am,Yl,df=Gt({},ju,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yl&&(Yl&&e.type==="mousemove"?(Pm=e.screenX-Yl.screenX,Am=e.screenY-Yl.screenY):Am=Pm=0,Yl=e),Pm)},movementY:function(e){return"movementY"in e?e.movementY:Am}}),O0=xr(df),IA=Gt({},df,{dataTransfer:0}),MA=xr(IA),DA=Gt({},ju,{relatedTarget:0}),Om=xr(DA),$A=Gt({},jl,{animationName:0,elapsedTime:0,pseudoElement:0}),LA=xr($A),FA=Gt({},jl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),zA=xr(FA),UA=Gt({},jl,{data:0}),I0=xr(UA),BA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qA(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=VA[e])?!!t[e]:!1}function oy(){return qA}var HA=Gt({},ju,{key:function(e){if(e.key){var t=BA[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ud(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?KA[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oy,charCode:function(e){return e.type==="keypress"?Ud(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ud(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),WA=xr(HA),GA=Gt({},df,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),M0=xr(GA),QA=Gt({},ju,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oy}),YA=xr(QA),JA=Gt({},jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),XA=xr(JA),ZA=Gt({},df,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),eO=xr(ZA),tO=[9,13,27,32],ay=Ks&&"CompositionEvent"in window,pc=null;Ks&&"documentMode"in document&&(pc=document.documentMode);var nO=Ks&&"TextEvent"in window&&!pc,IS=Ks&&(!ay||pc&&8<pc&&11>=pc),D0=" ",$0=!1;function MS(e,t){switch(e){case"keyup":return tO.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mi=!1;function rO(e,t){switch(e){case"compositionend":return DS(t);case"keypress":return t.which!==32?null:($0=!0,D0);case"textInput":return e=t.data,e===D0&&$0?null:e;default:return null}}function sO(e,t){if(mi)return e==="compositionend"||!ay&&MS(e,t)?(e=OS(),zd=ry=No=null,mi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return IS&&t.locale!=="ko"?null:t.data;default:return null}}var oO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function L0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!oO[e.type]:t==="textarea"}function $S(e,t,n,r){mS(r),t=hh(t,"onChange"),0<t.length&&(n=new sy("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var gc=null,Ic=null;function aO(e){GS(e,0)}function hf(e){var t=vi(e);if(iS(t))return e}function iO(e,t){if(e==="change")return t}var LS=!1;if(Ks){var Im;if(Ks){var Mm="oninput"in document;if(!Mm){var F0=document.createElement("div");F0.setAttribute("oninput","return;"),Mm=typeof F0.oninput=="function"}Im=Mm}else Im=!1;LS=Im&&(!document.documentMode||9<document.documentMode)}function z0(){gc&&(gc.detachEvent("onpropertychange",FS),Ic=gc=null)}function FS(e){if(e.propertyName==="value"&&hf(Ic)){var t=[];$S(t,Ic,e,Xv(e)),yS(aO,t)}}function lO(e,t,n){e==="focusin"?(z0(),gc=t,Ic=n,gc.attachEvent("onpropertychange",FS)):e==="focusout"&&z0()}function cO(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hf(Ic)}function uO(e,t){if(e==="click")return hf(t)}function dO(e,t){if(e==="input"||e==="change")return hf(t)}function hO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var os=typeof Object.is=="function"?Object.is:hO;function Mc(e,t){if(os(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Op.call(t,s)||!os(e[s],t[s]))return!1}return!0}function U0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function B0(e,t){var n=U0(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=U0(n)}}function zS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function US(){for(var e=window,t=oh();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=oh(e.document)}return t}function iy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function fO(e){var t=US(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&zS(n.ownerDocument.documentElement,n)){if(r!==null&&iy(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=B0(n,a);var i=B0(n,r);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mO=Ks&&"documentMode"in document&&11>=document.documentMode,pi=null,Xp=null,vc=null,Zp=!1;function K0(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zp||pi==null||pi!==oh(r)||(r=pi,"selectionStart"in r&&iy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vc&&Mc(vc,r)||(vc=r,r=hh(Xp,"onSelect"),0<r.length&&(t=new sy("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pi)))}function id(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var gi={animationend:id("Animation","AnimationEnd"),animationiteration:id("Animation","AnimationIteration"),animationstart:id("Animation","AnimationStart"),transitionend:id("Transition","TransitionEnd")},Dm={},BS={};Ks&&(BS=document.createElement("div").style,"AnimationEvent"in window||(delete gi.animationend.animation,delete gi.animationiteration.animation,delete gi.animationstart.animation),"TransitionEvent"in window||delete gi.transitionend.transition);function ff(e){if(Dm[e])return Dm[e];if(!gi[e])return e;var t=gi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in BS)return Dm[e]=t[n];return e}var KS=ff("animationend"),VS=ff("animationiteration"),qS=ff("animationstart"),HS=ff("transitionend"),WS=new Map,V0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ko(e,t){WS.set(e,t),Va(t,[e])}for(var $m=0;$m<V0.length;$m++){var Lm=V0[$m],pO=Lm.toLowerCase(),gO=Lm[0].toUpperCase()+Lm.slice(1);Ko(pO,"on"+gO)}Ko(KS,"onAnimationEnd");Ko(VS,"onAnimationIteration");Ko(qS,"onAnimationStart");Ko("dblclick","onDoubleClick");Ko("focusin","onFocus");Ko("focusout","onBlur");Ko(HS,"onTransitionEnd");nl("onMouseEnter",["mouseout","mouseover"]);nl("onMouseLeave",["mouseout","mouseover"]);nl("onPointerEnter",["pointerout","pointerover"]);nl("onPointerLeave",["pointerout","pointerover"]);Va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Va("onBeforeInput",["compositionend","keypress","textInput","paste"]);Va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vO=new Set("cancel close invalid load scroll toggle".split(" ").concat(ic));function q0(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,pA(r,t,void 0,e),e.currentTarget=null}function GS(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;q0(s,l,u),a=c}else for(i=0;i<r.length;i++){if(l=r[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;q0(s,l,u),a=c}}}if(ih)throw e=Gp,ih=!1,Gp=null,e}function Mt(e,t){var n=t[sg];n===void 0&&(n=t[sg]=new Set);var r=e+"__bubble";n.has(r)||(QS(t,e,2,!1),n.add(r))}function Fm(e,t,n){var r=0;t&&(r|=4),QS(n,e,r,t)}var ld="_reactListening"+Math.random().toString(36).slice(2);function Dc(e){if(!e[ld]){e[ld]=!0,nS.forEach(function(n){n!=="selectionchange"&&(vO.has(n)||Fm(n,!1,e),Fm(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ld]||(t[ld]=!0,Fm("selectionchange",!1,t))}}function QS(e,t,n,r){switch(AS(t)){case 1:var s=PA;break;case 4:s=AA;break;default:s=ny}n=s.bind(null,t,n,e),s=void 0,!Wp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function zm(e,t,n,r,s){var a=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;l!==null;){if(i=da(l),i===null)return;if(c=i.tag,c===5||c===6){r=a=i;continue e}l=l.parentNode}}r=r.return}yS(function(){var u=a,h=Xv(n),f=[];e:{var m=WS.get(e);if(m!==void 0){var p=sy,w=e;switch(e){case"keypress":if(Ud(n)===0)break e;case"keydown":case"keyup":p=WA;break;case"focusin":w="focus",p=Om;break;case"focusout":w="blur",p=Om;break;case"beforeblur":case"afterblur":p=Om;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=O0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=MA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=YA;break;case KS:case VS:case qS:p=LA;break;case HS:p=XA;break;case"scroll":p=OA;break;case"wheel":p=eO;break;case"copy":case"cut":case"paste":p=zA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=M0}var g=(t&4)!==0,y=!g&&e==="scroll",x=g?m!==null?m+"Capture":null:m;g=[];for(var v=u,b;v!==null;){b=v;var j=b.stateNode;if(b.tag===5&&j!==null&&(b=j,x!==null&&(j=Rc(v,x),j!=null&&g.push($c(v,j,b)))),y)break;v=v.return}0<g.length&&(m=new p(m,w,null,n,h),f.push({event:m,listeners:g}))}}if((t&7)===0){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&n!==qp&&(w=n.relatedTarget||n.fromElement)&&(da(w)||w[Vs]))break e;if((p||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,p?(w=n.relatedTarget||n.toElement,p=u,w=w?da(w):null,w!==null&&(y=qa(w),w!==y||w.tag!==5&&w.tag!==6)&&(w=null)):(p=null,w=u),p!==w)){if(g=O0,j="onMouseLeave",x="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=M0,j="onPointerLeave",x="onPointerEnter",v="pointer"),y=p==null?m:vi(p),b=w==null?m:vi(w),m=new g(j,v+"leave",p,n,h),m.target=y,m.relatedTarget=b,j=null,da(h)===u&&(g=new g(x,v+"enter",w,n,h),g.target=b,g.relatedTarget=y,j=g),y=j,p&&w)t:{for(g=p,x=w,v=0,b=g;b;b=Za(b))v++;for(b=0,j=x;j;j=Za(j))b++;for(;0<v-b;)g=Za(g),v--;for(;0<b-v;)x=Za(x),b--;for(;v--;){if(g===x||x!==null&&g===x.alternate)break t;g=Za(g),x=Za(x)}g=null}else g=null;p!==null&&H0(f,m,p,g,!1),w!==null&&y!==null&&H0(f,y,w,g,!0)}}e:{if(m=u?vi(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var S=iO;else if(L0(m))if(LS)S=dO;else{S=cO;var _=lO}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=uO);if(S&&(S=S(e,u))){$S(f,S,n,h);break e}_&&_(e,m,u),e==="focusout"&&(_=m._wrapperState)&&_.controlled&&m.type==="number"&&zp(m,"number",m.value)}switch(_=u?vi(u):window,e){case"focusin":(L0(_)||_.contentEditable==="true")&&(pi=_,Xp=u,vc=null);break;case"focusout":vc=Xp=pi=null;break;case"mousedown":Zp=!0;break;case"contextmenu":case"mouseup":case"dragend":Zp=!1,K0(f,n,h);break;case"selectionchange":if(mO)break;case"keydown":case"keyup":K0(f,n,h)}var N;if(ay)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else mi?MS(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(IS&&n.locale!=="ko"&&(mi||C!=="onCompositionStart"?C==="onCompositionEnd"&&mi&&(N=OS()):(No=h,ry="value"in No?No.value:No.textContent,mi=!0)),_=hh(u,C),0<_.length&&(C=new I0(C,e,null,n,h),f.push({event:C,listeners:_}),N?C.data=N:(N=DS(n),N!==null&&(C.data=N)))),(N=nO?rO(e,n):sO(e,n))&&(u=hh(u,"onBeforeInput"),0<u.length&&(h=new I0("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=N))}GS(f,t)})}function $c(e,t,n){return{instance:e,listener:t,currentTarget:n}}function hh(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Rc(e,n),a!=null&&r.unshift($c(e,a,s)),a=Rc(e,t),a!=null&&r.push($c(e,a,s))),e=e.return}return r}function Za(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function H0(e,t,n,r,s){for(var a=t._reactName,i=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Rc(n,a),c!=null&&i.unshift($c(n,c,l))):s||(c=Rc(n,a),c!=null&&i.push($c(n,c,l)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var yO=/\r\n?/g,xO=/\u0000|\uFFFD/g;function W0(e){return(typeof e=="string"?e:""+e).replace(yO,`
`).replace(xO,"")}function cd(e,t,n){if(t=W0(t),W0(e)!==t&&n)throw Error(se(425))}function fh(){}var eg=null,tg=null;function ng(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rg=typeof setTimeout=="function"?setTimeout:void 0,wO=typeof clearTimeout=="function"?clearTimeout:void 0,G0=typeof Promise=="function"?Promise:void 0,bO=typeof queueMicrotask=="function"?queueMicrotask:typeof G0<"u"?function(e){return G0.resolve(null).then(e).catch(jO)}:rg;function jO(e){setTimeout(function(){throw e})}function Um(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Oc(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Oc(t)}function To(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Q0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Sl=Math.random().toString(36).slice(2),gs="__reactFiber$"+Sl,Lc="__reactProps$"+Sl,Vs="__reactContainer$"+Sl,sg="__reactEvents$"+Sl,SO="__reactListeners$"+Sl,NO="__reactHandles$"+Sl;function da(e){var t=e[gs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Vs]||n[gs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Q0(e);e!==null;){if(n=e[gs])return n;e=Q0(e)}return t}e=n,n=e.parentNode}return null}function Su(e){return e=e[gs]||e[Vs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(se(33))}function mf(e){return e[Lc]||null}var og=[],yi=-1;function Vo(e){return{current:e}}function Dt(e){0>yi||(e.current=og[yi],og[yi]=null,yi--)}function At(e,t){yi++,og[yi]=e.current,e.current=t}var Lo={},In=Vo(Lo),Zn=Vo(!1),Ra=Lo;function rl(e,t){var n=e.type.contextTypes;if(!n)return Lo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function er(e){return e=e.childContextTypes,e!=null}function mh(){Dt(Zn),Dt(In)}function Y0(e,t,n){if(In.current!==Lo)throw Error(se(168));At(In,t),At(Zn,n)}function YS(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(se(108,lA(e)||"Unknown",s));return Gt({},n,r)}function ph(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Lo,Ra=In.current,At(In,e),At(Zn,Zn.current),!0}function J0(e,t,n){var r=e.stateNode;if(!r)throw Error(se(169));n?(e=YS(e,t,Ra),r.__reactInternalMemoizedMergedChildContext=e,Dt(Zn),Dt(In),At(In,e)):Dt(Zn),At(Zn,n)}var As=null,pf=!1,Bm=!1;function JS(e){As===null?As=[e]:As.push(e)}function CO(e){pf=!0,JS(e)}function qo(){if(!Bm&&As!==null){Bm=!0;var e=0,t=Nt;try{var n=As;for(Nt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}As=null,pf=!1}catch(s){throw As!==null&&(As=As.slice(e+1)),jS(Zv,qo),s}finally{Nt=t,Bm=!1}}return null}var xi=[],wi=0,gh=null,vh=0,Er=[],kr=0,Pa=null,$s=1,Ls="";function na(e,t){xi[wi++]=vh,xi[wi++]=gh,gh=e,vh=t}function XS(e,t,n){Er[kr++]=$s,Er[kr++]=Ls,Er[kr++]=Pa,Pa=e;var r=$s;e=Ls;var s=32-ts(r)-1;r&=~(1<<s),n+=1;var a=32-ts(t)+s;if(30<a){var i=s-s%5;a=(r&(1<<i)-1).toString(32),r>>=i,s-=i,$s=1<<32-ts(t)+s|n<<s|r,Ls=a+e}else $s=1<<a|n<<s|r,Ls=e}function ly(e){e.return!==null&&(na(e,1),XS(e,1,0))}function cy(e){for(;e===gh;)gh=xi[--wi],xi[wi]=null,vh=xi[--wi],xi[wi]=null;for(;e===Pa;)Pa=Er[--kr],Er[kr]=null,Ls=Er[--kr],Er[kr]=null,$s=Er[--kr],Er[kr]=null}var mr=null,fr=null,Ut=!1,Jr=null;function ZS(e,t){var n=Ar(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function X0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,mr=e,fr=To(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,mr=e,fr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Pa!==null?{id:$s,overflow:Ls}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ar(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,mr=e,fr=null,!0):!1;default:return!1}}function ag(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ig(e){if(Ut){var t=fr;if(t){var n=t;if(!X0(e,t)){if(ag(e))throw Error(se(418));t=To(n.nextSibling);var r=mr;t&&X0(e,t)?ZS(r,n):(e.flags=e.flags&-4097|2,Ut=!1,mr=e)}}else{if(ag(e))throw Error(se(418));e.flags=e.flags&-4097|2,Ut=!1,mr=e}}}function Z0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;mr=e}function ud(e){if(e!==mr)return!1;if(!Ut)return Z0(e),Ut=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ng(e.type,e.memoizedProps)),t&&(t=fr)){if(ag(e))throw eN(),Error(se(418));for(;t;)ZS(e,t),t=To(t.nextSibling)}if(Z0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(se(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){fr=To(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}fr=null}}else fr=mr?To(e.stateNode.nextSibling):null;return!0}function eN(){for(var e=fr;e;)e=To(e.nextSibling)}function sl(){fr=mr=null,Ut=!1}function uy(e){Jr===null?Jr=[e]:Jr.push(e)}var _O=Ys.ReactCurrentBatchConfig;function Jl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var r=n.stateNode}if(!r)throw Error(se(147,e));var s=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var l=s.refs;i===null?delete l[a]:l[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,e))}return e}function dd(e,t){throw e=Object.prototype.toString.call(t),Error(se(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ew(e){var t=e._init;return t(e._payload)}function tN(e){function t(x,v){if(e){var b=x.deletions;b===null?(x.deletions=[v],x.flags|=16):b.push(v)}}function n(x,v){if(!e)return null;for(;v!==null;)t(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function s(x,v){return x=Oo(x,v),x.index=0,x.sibling=null,x}function a(x,v,b){return x.index=b,e?(b=x.alternate,b!==null?(b=b.index,b<v?(x.flags|=2,v):b):(x.flags|=2,v)):(x.flags|=1048576,v)}function i(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,v,b,j){return v===null||v.tag!==6?(v=Qm(b,x.mode,j),v.return=x,v):(v=s(v,b),v.return=x,v)}function c(x,v,b,j){var S=b.type;return S===fi?h(x,v,b.props.children,j,b.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ao&&ew(S)===v.type)?(j=s(v,b.props),j.ref=Jl(x,v,b),j.return=x,j):(j=Gd(b.type,b.key,b.props,null,x.mode,j),j.ref=Jl(x,v,b),j.return=x,j)}function u(x,v,b,j){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Ym(b,x.mode,j),v.return=x,v):(v=s(v,b.children||[]),v.return=x,v)}function h(x,v,b,j,S){return v===null||v.tag!==7?(v=_a(b,x.mode,j,S),v.return=x,v):(v=s(v,b),v.return=x,v)}function f(x,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Qm(""+v,x.mode,b),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ed:return b=Gd(v.type,v.key,v.props,null,x.mode,b),b.ref=Jl(x,null,v),b.return=x,b;case hi:return v=Ym(v,x.mode,b),v.return=x,v;case ao:var j=v._init;return f(x,j(v._payload),b)}if(oc(v)||Hl(v))return v=_a(v,x.mode,b,null),v.return=x,v;dd(x,v)}return null}function m(x,v,b,j){var S=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:l(x,v,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ed:return b.key===S?c(x,v,b,j):null;case hi:return b.key===S?u(x,v,b,j):null;case ao:return S=b._init,m(x,v,S(b._payload),j)}if(oc(b)||Hl(b))return S!==null?null:h(x,v,b,j,null);dd(x,b)}return null}function p(x,v,b,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(b)||null,l(v,x,""+j,S);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ed:return x=x.get(j.key===null?b:j.key)||null,c(v,x,j,S);case hi:return x=x.get(j.key===null?b:j.key)||null,u(v,x,j,S);case ao:var _=j._init;return p(x,v,b,_(j._payload),S)}if(oc(j)||Hl(j))return x=x.get(b)||null,h(v,x,j,S,null);dd(v,j)}return null}function w(x,v,b,j){for(var S=null,_=null,N=v,C=v=0,E=null;N!==null&&C<b.length;C++){N.index>C?(E=N,N=null):E=N.sibling;var D=m(x,N,b[C],j);if(D===null){N===null&&(N=E);break}e&&N&&D.alternate===null&&t(x,N),v=a(D,v,C),_===null?S=D:_.sibling=D,_=D,N=E}if(C===b.length)return n(x,N),Ut&&na(x,C),S;if(N===null){for(;C<b.length;C++)N=f(x,b[C],j),N!==null&&(v=a(N,v,C),_===null?S=N:_.sibling=N,_=N);return Ut&&na(x,C),S}for(N=r(x,N);C<b.length;C++)E=p(N,x,C,b[C],j),E!==null&&(e&&E.alternate!==null&&N.delete(E.key===null?C:E.key),v=a(E,v,C),_===null?S=E:_.sibling=E,_=E);return e&&N.forEach(function(R){return t(x,R)}),Ut&&na(x,C),S}function g(x,v,b,j){var S=Hl(b);if(typeof S!="function")throw Error(se(150));if(b=S.call(b),b==null)throw Error(se(151));for(var _=S=null,N=v,C=v=0,E=null,D=b.next();N!==null&&!D.done;C++,D=b.next()){N.index>C?(E=N,N=null):E=N.sibling;var R=m(x,N,D.value,j);if(R===null){N===null&&(N=E);break}e&&N&&R.alternate===null&&t(x,N),v=a(R,v,C),_===null?S=R:_.sibling=R,_=R,N=E}if(D.done)return n(x,N),Ut&&na(x,C),S;if(N===null){for(;!D.done;C++,D=b.next())D=f(x,D.value,j),D!==null&&(v=a(D,v,C),_===null?S=D:_.sibling=D,_=D);return Ut&&na(x,C),S}for(N=r(x,N);!D.done;C++,D=b.next())D=p(N,x,C,D.value,j),D!==null&&(e&&D.alternate!==null&&N.delete(D.key===null?C:D.key),v=a(D,v,C),_===null?S=D:_.sibling=D,_=D);return e&&N.forEach(function(P){return t(x,P)}),Ut&&na(x,C),S}function y(x,v,b,j){if(typeof b=="object"&&b!==null&&b.type===fi&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ed:e:{for(var S=b.key,_=v;_!==null;){if(_.key===S){if(S=b.type,S===fi){if(_.tag===7){n(x,_.sibling),v=s(_,b.props.children),v.return=x,x=v;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ao&&ew(S)===_.type){n(x,_.sibling),v=s(_,b.props),v.ref=Jl(x,_,b),v.return=x,x=v;break e}n(x,_);break}else t(x,_);_=_.sibling}b.type===fi?(v=_a(b.props.children,x.mode,j,b.key),v.return=x,x=v):(j=Gd(b.type,b.key,b.props,null,x.mode,j),j.ref=Jl(x,v,b),j.return=x,x=j)}return i(x);case hi:e:{for(_=b.key;v!==null;){if(v.key===_)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(x,v.sibling),v=s(v,b.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else t(x,v);v=v.sibling}v=Ym(b,x.mode,j),v.return=x,x=v}return i(x);case ao:return _=b._init,y(x,v,_(b._payload),j)}if(oc(b))return w(x,v,b,j);if(Hl(b))return g(x,v,b,j);dd(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(x,v.sibling),v=s(v,b),v.return=x,x=v):(n(x,v),v=Qm(b,x.mode,j),v.return=x,x=v),i(x)):n(x,v)}return y}var ol=tN(!0),nN=tN(!1),yh=Vo(null),xh=null,bi=null,dy=null;function hy(){dy=bi=xh=null}function fy(e){var t=yh.current;Dt(yh),e._currentValue=t}function lg(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ri(e,t){xh=e,dy=bi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Jn=!0),e.firstContext=null)}function Dr(e){var t=e._currentValue;if(dy!==e)if(e={context:e,memoizedValue:t,next:null},bi===null){if(xh===null)throw Error(se(308));bi=e,xh.dependencies={lanes:0,firstContext:e}}else bi=bi.next=e;return t}var ha=null;function my(e){ha===null?ha=[e]:ha.push(e)}function rN(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,my(t)):(n.next=s.next,s.next=n),t.interleaved=n,qs(e,r)}function qs(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var io=!1;function py(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sN(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ro(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(ft&2)!==0){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,qs(e,n)}return s=r.interleaved,s===null?(t.next=t,my(r)):(t.next=s.next,s.next=t),r.interleaved=t,qs(e,n)}function Bd(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ey(e,n)}}function tw(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=i:a=a.next=i,n=n.next}while(n!==null);a===null?s=a=t:a=a.next=t}else s=a=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function wh(e,t,n,r){var s=e.updateQueue;io=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?a=u:i.next=u,i=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==i&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(a!==null){var f=s.baseState;i=0,h=u=c=null,l=a;do{var m=l.lane,p=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,g=l;switch(m=t,p=n,g.tag){case 1:if(w=g.payload,typeof w=="function"){f=w.call(p,f,m);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=g.payload,m=typeof w=="function"?w.call(p,f,m):w,m==null)break e;f=Gt({},f,m);break e;case 2:io=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=p,c=f):h=h.next=p,i|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);Oa|=i,e.lanes=i,e.memoizedState=f}}function nw(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(se(191,s));s.call(r)}}}var Nu={},xs=Vo(Nu),Fc=Vo(Nu),zc=Vo(Nu);function fa(e){if(e===Nu)throw Error(se(174));return e}function gy(e,t){switch(At(zc,t),At(Fc,e),At(xs,Nu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Bp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Bp(t,e)}Dt(xs),At(xs,t)}function al(){Dt(xs),Dt(Fc),Dt(zc)}function oN(e){fa(zc.current);var t=fa(xs.current),n=Bp(t,e.type);t!==n&&(At(Fc,e),At(xs,n))}function vy(e){Fc.current===e&&(Dt(xs),Dt(Fc))}var Kt=Vo(0);function bh(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Km=[];function yy(){for(var e=0;e<Km.length;e++)Km[e]._workInProgressVersionPrimary=null;Km.length=0}var Kd=Ys.ReactCurrentDispatcher,Vm=Ys.ReactCurrentBatchConfig,Aa=0,Wt=null,cn=null,fn=null,jh=!1,yc=!1,Uc=0,EO=0;function _n(){throw Error(se(321))}function xy(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!os(e[n],t[n]))return!1;return!0}function wy(e,t,n,r,s,a){if(Aa=a,Wt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Kd.current=e===null||e.memoizedState===null?PO:AO,e=n(r,s),yc){a=0;do{if(yc=!1,Uc=0,25<=a)throw Error(se(301));a+=1,fn=cn=null,t.updateQueue=null,Kd.current=OO,e=n(r,s)}while(yc)}if(Kd.current=Sh,t=cn!==null&&cn.next!==null,Aa=0,fn=cn=Wt=null,jh=!1,t)throw Error(se(300));return e}function by(){var e=Uc!==0;return Uc=0,e}function hs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Wt.memoizedState=fn=e:fn=fn.next=e,fn}function $r(){if(cn===null){var e=Wt.alternate;e=e!==null?e.memoizedState:null}else e=cn.next;var t=fn===null?Wt.memoizedState:fn.next;if(t!==null)fn=t,cn=e;else{if(e===null)throw Error(se(310));cn=e,e={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},fn===null?Wt.memoizedState=fn=e:fn=fn.next=e}return fn}function Bc(e,t){return typeof t=="function"?t(e):t}function qm(e){var t=$r(),n=t.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=e;var r=cn,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var i=s.next;s.next=a.next,a.next=i}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var l=i=null,c=null,u=a;do{var h=u.lane;if((Aa&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,i=r):c=c.next=f,Wt.lanes|=h,Oa|=h}u=u.next}while(u!==null&&u!==a);c===null?i=r:c.next=l,os(r,t.memoizedState)||(Jn=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do a=s.lane,Wt.lanes|=a,Oa|=a,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Hm(e){var t=$r(),n=t.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do a=e(a,i.action),i=i.next;while(i!==s);os(a,t.memoizedState)||(Jn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function aN(){}function iN(e,t){var n=Wt,r=$r(),s=t(),a=!os(r.memoizedState,s);if(a&&(r.memoizedState=s,Jn=!0),r=r.queue,jy(uN.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||fn!==null&&fn.memoizedState.tag&1){if(n.flags|=2048,Kc(9,cN.bind(null,n,r,s,t),void 0,null),gn===null)throw Error(se(349));(Aa&30)!==0||lN(n,t,s)}return s}function lN(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Wt.updateQueue,t===null?(t={lastEffect:null,stores:null},Wt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function cN(e,t,n,r){t.value=n,t.getSnapshot=r,dN(t)&&hN(e)}function uN(e,t,n){return n(function(){dN(t)&&hN(e)})}function dN(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!os(e,n)}catch{return!0}}function hN(e){var t=qs(e,1);t!==null&&ns(t,e,1,-1)}function rw(e){var t=hs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bc,lastRenderedState:e},t.queue=e,e=e.dispatch=RO.bind(null,Wt,e),[t.memoizedState,e]}function Kc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Wt.updateQueue,t===null?(t={lastEffect:null,stores:null},Wt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function fN(){return $r().memoizedState}function Vd(e,t,n,r){var s=hs();Wt.flags|=e,s.memoizedState=Kc(1|t,n,void 0,r===void 0?null:r)}function gf(e,t,n,r){var s=$r();r=r===void 0?null:r;var a=void 0;if(cn!==null){var i=cn.memoizedState;if(a=i.destroy,r!==null&&xy(r,i.deps)){s.memoizedState=Kc(t,n,a,r);return}}Wt.flags|=e,s.memoizedState=Kc(1|t,n,a,r)}function sw(e,t){return Vd(8390656,8,e,t)}function jy(e,t){return gf(2048,8,e,t)}function mN(e,t){return gf(4,2,e,t)}function pN(e,t){return gf(4,4,e,t)}function gN(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vN(e,t,n){return n=n!=null?n.concat([e]):null,gf(4,4,gN.bind(null,t,e),n)}function Sy(){}function yN(e,t){var n=$r();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&xy(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xN(e,t){var n=$r();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&xy(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function wN(e,t,n){return(Aa&21)===0?(e.baseState&&(e.baseState=!1,Jn=!0),e.memoizedState=n):(os(n,t)||(n=CS(),Wt.lanes|=n,Oa|=n,e.baseState=!0),t)}function kO(e,t){var n=Nt;Nt=n!==0&&4>n?n:4,e(!0);var r=Vm.transition;Vm.transition={};try{e(!1),t()}finally{Nt=n,Vm.transition=r}}function bN(){return $r().memoizedState}function TO(e,t,n){var r=Ao(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jN(e))SN(t,n);else if(n=rN(e,t,n,r),n!==null){var s=zn();ns(n,e,r,s),NN(n,t,r)}}function RO(e,t,n){var r=Ao(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jN(e))SN(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,l=a(i,n);if(s.hasEagerState=!0,s.eagerState=l,os(l,i)){var c=t.interleaved;c===null?(s.next=s,my(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=rN(e,t,s,r),n!==null&&(s=zn(),ns(n,e,r,s),NN(n,t,r))}}function jN(e){var t=e.alternate;return e===Wt||t!==null&&t===Wt}function SN(e,t){yc=jh=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function NN(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ey(e,n)}}var Sh={readContext:Dr,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useInsertionEffect:_n,useLayoutEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useMutableSource:_n,useSyncExternalStore:_n,useId:_n,unstable_isNewReconciler:!1},PO={readContext:Dr,useCallback:function(e,t){return hs().memoizedState=[e,t===void 0?null:t],e},useContext:Dr,useEffect:sw,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Vd(4194308,4,gN.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vd(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vd(4,2,e,t)},useMemo:function(e,t){var n=hs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=hs();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=TO.bind(null,Wt,e),[r.memoizedState,e]},useRef:function(e){var t=hs();return e={current:e},t.memoizedState=e},useState:rw,useDebugValue:Sy,useDeferredValue:function(e){return hs().memoizedState=e},useTransition:function(){var e=rw(!1),t=e[0];return e=kO.bind(null,e[1]),hs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Wt,s=hs();if(Ut){if(n===void 0)throw Error(se(407));n=n()}else{if(n=t(),gn===null)throw Error(se(349));(Aa&30)!==0||lN(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,sw(uN.bind(null,r,a,e),[e]),r.flags|=2048,Kc(9,cN.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=hs(),t=gn.identifierPrefix;if(Ut){var n=Ls,r=$s;n=(r&~(1<<32-ts(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Uc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=EO++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},AO={readContext:Dr,useCallback:yN,useContext:Dr,useEffect:jy,useImperativeHandle:vN,useInsertionEffect:mN,useLayoutEffect:pN,useMemo:xN,useReducer:qm,useRef:fN,useState:function(){return qm(Bc)},useDebugValue:Sy,useDeferredValue:function(e){var t=$r();return wN(t,cn.memoizedState,e)},useTransition:function(){var e=qm(Bc)[0],t=$r().memoizedState;return[e,t]},useMutableSource:aN,useSyncExternalStore:iN,useId:bN,unstable_isNewReconciler:!1},OO={readContext:Dr,useCallback:yN,useContext:Dr,useEffect:jy,useImperativeHandle:vN,useInsertionEffect:mN,useLayoutEffect:pN,useMemo:xN,useReducer:Hm,useRef:fN,useState:function(){return Hm(Bc)},useDebugValue:Sy,useDeferredValue:function(e){var t=$r();return cn===null?t.memoizedState=e:wN(t,cn.memoizedState,e)},useTransition:function(){var e=Hm(Bc)[0],t=$r().memoizedState;return[e,t]},useMutableSource:aN,useSyncExternalStore:iN,useId:bN,unstable_isNewReconciler:!1};function Hr(e,t){if(e&&e.defaultProps){t=Gt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function cg(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Gt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var vf={isMounted:function(e){return(e=e._reactInternals)?qa(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=zn(),s=Ao(e),a=Fs(r,s);a.payload=t,n!=null&&(a.callback=n),t=Ro(e,a,s),t!==null&&(ns(t,e,s,r),Bd(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=zn(),s=Ao(e),a=Fs(r,s);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Ro(e,a,s),t!==null&&(ns(t,e,s,r),Bd(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=zn(),r=Ao(e),s=Fs(n,r);s.tag=2,t!=null&&(s.callback=t),t=Ro(e,s,r),t!==null&&(ns(t,e,r,n),Bd(t,e,r))}};function ow(e,t,n,r,s,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,i):t.prototype&&t.prototype.isPureReactComponent?!Mc(n,r)||!Mc(s,a):!0}function CN(e,t,n){var r=!1,s=Lo,a=t.contextType;return typeof a=="object"&&a!==null?a=Dr(a):(s=er(t)?Ra:In.current,r=t.contextTypes,a=(r=r!=null)?rl(e,s):Lo),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vf,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function aw(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vf.enqueueReplaceState(t,t.state,null)}function ug(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},py(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=Dr(a):(a=er(t)?Ra:In.current,s.context=rl(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(cg(e,t,a,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&vf.enqueueReplaceState(s,s.state,null),wh(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function il(e,t){try{var n="",r=t;do n+=iA(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function Wm(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function dg(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var IO=typeof WeakMap=="function"?WeakMap:Map;function _N(e,t,n){n=Fs(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ch||(Ch=!0,bg=r),dg(e,t)},n}function EN(e,t,n){n=Fs(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){dg(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){dg(e,t),typeof r!="function"&&(Po===null?Po=new Set([this]):Po.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function iw(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new IO;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=GO.bind(null,e,t,n),t.then(e,e))}function lw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function cw(e,t,n,r,s){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Fs(-1,1),t.tag=2,Ro(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var MO=Ys.ReactCurrentOwner,Jn=!1;function Ln(e,t,n,r){t.child=e===null?nN(t,null,n,r):ol(t,e.child,n,r)}function uw(e,t,n,r,s){n=n.render;var a=t.ref;return Ri(t,s),r=wy(e,t,n,r,a,s),n=by(),e!==null&&!Jn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Hs(e,t,s)):(Ut&&n&&ly(t),t.flags|=1,Ln(e,t,r,s),t.child)}function dw(e,t,n,r,s){if(e===null){var a=n.type;return typeof a=="function"&&!Py(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,kN(e,t,a,r,s)):(e=Gd(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,(e.lanes&s)===0){var i=a.memoizedProps;if(n=n.compare,n=n!==null?n:Mc,n(i,r)&&e.ref===t.ref)return Hs(e,t,s)}return t.flags|=1,e=Oo(a,r),e.ref=t.ref,e.return=t,t.child=e}function kN(e,t,n,r,s){if(e!==null){var a=e.memoizedProps;if(Mc(a,r)&&e.ref===t.ref)if(Jn=!1,t.pendingProps=r=a,(e.lanes&s)!==0)(e.flags&131072)!==0&&(Jn=!0);else return t.lanes=e.lanes,Hs(e,t,s)}return hg(e,t,n,r,s)}function TN(e,t,n){var r=t.pendingProps,s=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},At(Si,ir),ir|=n;else{if((n&1073741824)===0)return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,At(Si,ir),ir|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,At(Si,ir),ir|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,At(Si,ir),ir|=r;return Ln(e,t,s,n),t.child}function RN(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function hg(e,t,n,r,s){var a=er(n)?Ra:In.current;return a=rl(t,a),Ri(t,s),n=wy(e,t,n,r,a,s),r=by(),e!==null&&!Jn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Hs(e,t,s)):(Ut&&r&&ly(t),t.flags|=1,Ln(e,t,n,s),t.child)}function hw(e,t,n,r,s){if(er(n)){var a=!0;ph(t)}else a=!1;if(Ri(t,s),t.stateNode===null)qd(e,t),CN(t,n,r),ug(t,n,r,s),r=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=Dr(u):(u=er(n)?Ra:In.current,u=rl(t,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||c!==u)&&aw(t,i,r,u),io=!1;var m=t.memoizedState;i.state=m,wh(t,r,i,s),c=t.memoizedState,l!==r||m!==c||Zn.current||io?(typeof h=="function"&&(cg(t,n,h,r),c=t.memoizedState),(l=io||ow(t,n,l,r,m,c,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=u,r=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,sN(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Hr(t.type,l),i.props=u,f=t.pendingProps,m=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=Dr(c):(c=er(n)?Ra:In.current,c=rl(t,c));var p=n.getDerivedStateFromProps;(h=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==f||m!==c)&&aw(t,i,r,c),io=!1,m=t.memoizedState,i.state=m,wh(t,r,i,s);var w=t.memoizedState;l!==f||m!==w||Zn.current||io?(typeof p=="function"&&(cg(t,n,p,r),w=t.memoizedState),(u=io||ow(t,n,u,r,m,w,c)||!1)?(h||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,w,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,w,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),i.props=r,i.state=w,i.context=c,r=u):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return fg(e,t,n,r,a,s)}function fg(e,t,n,r,s,a){RN(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return s&&J0(t,n,!1),Hs(e,t,a);r=t.stateNode,MO.current=t;var l=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=ol(t,e.child,null,a),t.child=ol(t,null,l,a)):Ln(e,t,l,a),t.memoizedState=r.state,s&&J0(t,n,!0),t.child}function PN(e){var t=e.stateNode;t.pendingContext?Y0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Y0(e,t.context,!1),gy(e,t.containerInfo)}function fw(e,t,n,r,s){return sl(),uy(s),t.flags|=256,Ln(e,t,n,r),t.child}var mg={dehydrated:null,treeContext:null,retryLane:0};function pg(e){return{baseLanes:e,cachePool:null,transitions:null}}function AN(e,t,n){var r=t.pendingProps,s=Kt.current,a=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),At(Kt,s&1),e===null)return ig(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(i=r.children,e=r.fallback,a?(r=t.mode,a=t.child,i={mode:"hidden",children:i},(r&1)===0&&a!==null?(a.childLanes=0,a.pendingProps=i):a=wf(i,r,0,null),e=_a(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=pg(n),t.memoizedState=mg,e):Ny(t,i));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return DO(e,t,i,r,l,s,n);if(a){a=r.fallback,i=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return(i&1)===0&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Oo(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Oo(l,a):(a=_a(a,i,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,i=e.child.memoizedState,i=i===null?pg(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~n,t.memoizedState=mg,r}return a=e.child,e=a.sibling,r=Oo(a,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ny(e,t){return t=wf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function hd(e,t,n,r){return r!==null&&uy(r),ol(t,e.child,null,n),e=Ny(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function DO(e,t,n,r,s,a,i){if(n)return t.flags&256?(t.flags&=-257,r=Wm(Error(se(422))),hd(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=wf({mode:"visible",children:r.children},s,0,null),a=_a(a,s,i,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,(t.mode&1)!==0&&ol(t,e.child,null,i),t.child.memoizedState=pg(i),t.memoizedState=mg,a);if((t.mode&1)===0)return hd(e,t,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(se(419)),r=Wm(a,r,void 0),hd(e,t,i,r)}if(l=(i&e.childLanes)!==0,Jn||l){if(r=gn,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=(s&(r.suspendedLanes|i))!==0?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,qs(e,s),ns(r,e,s,-1))}return Ry(),r=Wm(Error(se(421))),hd(e,t,i,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=QO.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,fr=To(s.nextSibling),mr=t,Ut=!0,Jr=null,e!==null&&(Er[kr++]=$s,Er[kr++]=Ls,Er[kr++]=Pa,$s=e.id,Ls=e.overflow,Pa=t),t=Ny(t,r.children),t.flags|=4096,t)}function mw(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),lg(e.return,t,n)}function Gm(e,t,n,r,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function ON(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(Ln(e,t,r.children,n),r=Kt.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mw(e,n,t);else if(e.tag===19)mw(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(At(Kt,r),(t.mode&1)===0)t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&bh(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Gm(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&bh(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Gm(t,!0,n,null,a);break;case"together":Gm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qd(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Oa|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(se(153));if(t.child!==null){for(e=t.child,n=Oo(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Oo(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function $O(e,t,n){switch(t.tag){case 3:PN(t),sl();break;case 5:oN(t);break;case 1:er(t.type)&&ph(t);break;case 4:gy(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;At(yh,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(At(Kt,Kt.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?AN(e,t,n):(At(Kt,Kt.current&1),e=Hs(e,t,n),e!==null?e.sibling:null);At(Kt,Kt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return ON(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),At(Kt,Kt.current),r)break;return null;case 22:case 23:return t.lanes=0,TN(e,t,n)}return Hs(e,t,n)}var IN,gg,MN,DN;IN=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gg=function(){};MN=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,fa(xs.current);var a=null;switch(n){case"input":s=Lp(e,s),r=Lp(e,r),a=[];break;case"select":s=Gt({},s,{value:void 0}),r=Gt({},r,{value:void 0}),a=[];break;case"textarea":s=Up(e,s),r=Up(e,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=fh)}Kp(n,r);var i;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(kc.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(kc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Mt("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};DN=function(e,t,n,r){n!==r&&(t.flags|=4)};function Xl(e,t){if(!Ut)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function En(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function LO(e,t,n){var r=t.pendingProps;switch(cy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return En(t),null;case 1:return er(t.type)&&mh(),En(t),null;case 3:return r=t.stateNode,al(),Dt(Zn),Dt(In),yy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ud(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Jr!==null&&(Ng(Jr),Jr=null))),gg(e,t),En(t),null;case 5:vy(t);var s=fa(zc.current);if(n=t.type,e!==null&&t.stateNode!=null)MN(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(se(166));return En(t),null}if(e=fa(xs.current),ud(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[gs]=t,r[Lc]=a,e=(t.mode&1)!==0,n){case"dialog":Mt("cancel",r),Mt("close",r);break;case"iframe":case"object":case"embed":Mt("load",r);break;case"video":case"audio":for(s=0;s<ic.length;s++)Mt(ic[s],r);break;case"source":Mt("error",r);break;case"img":case"image":case"link":Mt("error",r),Mt("load",r);break;case"details":Mt("toggle",r);break;case"input":S0(r,a),Mt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Mt("invalid",r);break;case"textarea":C0(r,a),Mt("invalid",r)}Kp(n,a),s=null;for(var i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&cd(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&cd(r.textContent,l,e),s=["children",""+l]):kc.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Mt("scroll",r)}switch(n){case"input":td(r),N0(r,a,!0);break;case"textarea":td(r),_0(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=fh)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=uS(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[gs]=t,e[Lc]=r,IN(e,t,!1,!1),t.stateNode=e;e:{switch(i=Vp(n,r),n){case"dialog":Mt("cancel",e),Mt("close",e),s=r;break;case"iframe":case"object":case"embed":Mt("load",e),s=r;break;case"video":case"audio":for(s=0;s<ic.length;s++)Mt(ic[s],e);s=r;break;case"source":Mt("error",e),s=r;break;case"img":case"image":case"link":Mt("error",e),Mt("load",e),s=r;break;case"details":Mt("toggle",e),s=r;break;case"input":S0(e,r),s=Lp(e,r),Mt("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Gt({},r,{value:void 0}),Mt("invalid",e);break;case"textarea":C0(e,r),s=Up(e,r),Mt("invalid",e);break;default:s=r}Kp(n,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?fS(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&dS(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Tc(e,c):typeof c=="number"&&Tc(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(kc.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Mt("scroll",e):c!=null&&Gv(e,a,c,i))}switch(n){case"input":td(e),N0(e,r,!1);break;case"textarea":td(e),_0(e);break;case"option":r.value!=null&&e.setAttribute("value",""+$o(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?_i(e,!!r.multiple,a,!1):r.defaultValue!=null&&_i(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=fh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return En(t),null;case 6:if(e&&t.stateNode!=null)DN(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(se(166));if(n=fa(zc.current),fa(xs.current),ud(t)){if(r=t.stateNode,n=t.memoizedProps,r[gs]=t,(a=r.nodeValue!==n)&&(e=mr,e!==null))switch(e.tag){case 3:cd(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&cd(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gs]=t,t.stateNode=r}return En(t),null;case 13:if(Dt(Kt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ut&&fr!==null&&(t.mode&1)!==0&&(t.flags&128)===0)eN(),sl(),t.flags|=98560,a=!1;else if(a=ud(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(se(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(se(317));a[gs]=t}else sl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;En(t),a=!1}else Jr!==null&&(Ng(Jr),Jr=null),a=!0;if(!a)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Kt.current&1)!==0?dn===0&&(dn=3):Ry())),t.updateQueue!==null&&(t.flags|=4),En(t),null);case 4:return al(),gg(e,t),e===null&&Dc(t.stateNode.containerInfo),En(t),null;case 10:return fy(t.type._context),En(t),null;case 17:return er(t.type)&&mh(),En(t),null;case 19:if(Dt(Kt),a=t.memoizedState,a===null)return En(t),null;if(r=(t.flags&128)!==0,i=a.rendering,i===null)if(r)Xl(a,!1);else{if(dn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=bh(e),i!==null){for(t.flags|=128,Xl(a,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return At(Kt,Kt.current&1|2),t.child}e=e.sibling}a.tail!==null&&rn()>ll&&(t.flags|=128,r=!0,Xl(a,!1),t.lanes=4194304)}else{if(!r)if(e=bh(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Xl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!Ut)return En(t),null}else 2*rn()-a.renderingStartTime>ll&&n!==1073741824&&(t.flags|=128,r=!0,Xl(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(n=a.last,n!==null?n.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=rn(),t.sibling=null,n=Kt.current,At(Kt,r?n&1|2:n&1),t):(En(t),null);case 22:case 23:return Ty(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(ir&1073741824)!==0&&(En(t),t.subtreeFlags&6&&(t.flags|=8192)):En(t),null;case 24:return null;case 25:return null}throw Error(se(156,t.tag))}function FO(e,t){switch(cy(t),t.tag){case 1:return er(t.type)&&mh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return al(),Dt(Zn),Dt(In),yy(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return vy(t),null;case 13:if(Dt(Kt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(se(340));sl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Dt(Kt),null;case 4:return al(),null;case 10:return fy(t.type._context),null;case 22:case 23:return Ty(),null;case 24:return null;default:return null}}var fd=!1,Rn=!1,zO=typeof WeakSet=="function"?WeakSet:Set,je=null;function ji(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Jt(e,t,r)}else n.current=null}function vg(e,t,n){try{n()}catch(r){Jt(e,t,r)}}var pw=!1;function UO(e,t){if(eg=uh,e=US(),iy(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var i=0,l=-1,c=-1,u=0,h=0,f=e,m=null;t:for(;;){for(var p;f!==n||s!==0&&f.nodeType!==3||(l=i+s),f!==a||r!==0&&f.nodeType!==3||(c=i+r),f.nodeType===3&&(i+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===e)break t;if(m===n&&++u===s&&(l=i),m===a&&++h===r&&(c=i),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tg={focusedElem:e,selectionRange:n},uh=!1,je=t;je!==null;)if(t=je,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,je=e;else for(;je!==null;){t=je;try{var w=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var g=w.memoizedProps,y=w.memoizedState,x=t.stateNode,v=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:Hr(t.type,g),y);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(j){Jt(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,je=e;break}je=t.return}return w=pw,pw=!1,w}function xc(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&vg(t,n,a)}s=s.next}while(s!==r)}}function yf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function yg(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function $N(e){var t=e.alternate;t!==null&&(e.alternate=null,$N(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[gs],delete t[Lc],delete t[sg],delete t[SO],delete t[NO])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function LN(e){return e.tag===5||e.tag===3||e.tag===4}function gw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||LN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function xg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=fh));else if(r!==4&&(e=e.child,e!==null))for(xg(e,t,n),e=e.sibling;e!==null;)xg(e,t,n),e=e.sibling}function wg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(wg(e,t,n),e=e.sibling;e!==null;)wg(e,t,n),e=e.sibling}var xn=null,Yr=!1;function eo(e,t,n){for(n=n.child;n!==null;)FN(e,t,n),n=n.sibling}function FN(e,t,n){if(ys&&typeof ys.onCommitFiberUnmount=="function")try{ys.onCommitFiberUnmount(uf,n)}catch{}switch(n.tag){case 5:Rn||ji(n,t);case 6:var r=xn,s=Yr;xn=null,eo(e,t,n),xn=r,Yr=s,xn!==null&&(Yr?(e=xn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):xn.removeChild(n.stateNode));break;case 18:xn!==null&&(Yr?(e=xn,n=n.stateNode,e.nodeType===8?Um(e.parentNode,n):e.nodeType===1&&Um(e,n),Oc(e)):Um(xn,n.stateNode));break;case 4:r=xn,s=Yr,xn=n.stateNode.containerInfo,Yr=!0,eo(e,t,n),xn=r,Yr=s;break;case 0:case 11:case 14:case 15:if(!Rn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,i=a.destroy;a=a.tag,i!==void 0&&((a&2)!==0||(a&4)!==0)&&vg(n,t,i),s=s.next}while(s!==r)}eo(e,t,n);break;case 1:if(!Rn&&(ji(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Jt(n,t,l)}eo(e,t,n);break;case 21:eo(e,t,n);break;case 22:n.mode&1?(Rn=(r=Rn)||n.memoizedState!==null,eo(e,t,n),Rn=r):eo(e,t,n);break;default:eo(e,t,n)}}function vw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new zO),t.forEach(function(r){var s=YO.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Kr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:xn=l.stateNode,Yr=!1;break e;case 3:xn=l.stateNode.containerInfo,Yr=!0;break e;case 4:xn=l.stateNode.containerInfo,Yr=!0;break e}l=l.return}if(xn===null)throw Error(se(160));FN(a,i,s),xn=null,Yr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Jt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)zN(t,e),t=t.sibling}function zN(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Kr(t,e),ds(e),r&4){try{xc(3,e,e.return),yf(3,e)}catch(g){Jt(e,e.return,g)}try{xc(5,e,e.return)}catch(g){Jt(e,e.return,g)}}break;case 1:Kr(t,e),ds(e),r&512&&n!==null&&ji(n,n.return);break;case 5:if(Kr(t,e),ds(e),r&512&&n!==null&&ji(n,n.return),e.flags&32){var s=e.stateNode;try{Tc(s,"")}catch(g){Jt(e,e.return,g)}}if(r&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,i=n!==null?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&lS(s,a),Vp(l,i);var u=Vp(l,a);for(i=0;i<c.length;i+=2){var h=c[i],f=c[i+1];h==="style"?fS(s,f):h==="dangerouslySetInnerHTML"?dS(s,f):h==="children"?Tc(s,f):Gv(s,h,f,u)}switch(l){case"input":Fp(s,a);break;case"textarea":cS(s,a);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?_i(s,!!a.multiple,p,!1):m!==!!a.multiple&&(a.defaultValue!=null?_i(s,!!a.multiple,a.defaultValue,!0):_i(s,!!a.multiple,a.multiple?[]:"",!1))}s[Lc]=a}catch(g){Jt(e,e.return,g)}}break;case 6:if(Kr(t,e),ds(e),r&4){if(e.stateNode===null)throw Error(se(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){Jt(e,e.return,g)}}break;case 3:if(Kr(t,e),ds(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Oc(t.containerInfo)}catch(g){Jt(e,e.return,g)}break;case 4:Kr(t,e),ds(e);break;case 13:Kr(t,e),ds(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Ey=rn())),r&4&&vw(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(Rn=(u=Rn)||h,Kr(t,e),Rn=u):Kr(t,e),ds(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&(e.mode&1)!==0)for(je=e,h=e.child;h!==null;){for(f=je=h;je!==null;){switch(m=je,p=m.child,m.tag){case 0:case 11:case 14:case 15:xc(4,m,m.return);break;case 1:ji(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(g){Jt(r,n,g)}}break;case 5:ji(m,m.return);break;case 22:if(m.memoizedState!==null){xw(f);continue}}p!==null?(p.return=m,je=p):xw(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=hS("display",i))}catch(g){Jt(e,e.return,g)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Jt(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Kr(t,e),ds(e),r&4&&vw(e);break;case 21:break;default:Kr(t,e),ds(e)}}function ds(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(LN(n)){var r=n;break e}n=n.return}throw Error(se(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Tc(s,""),r.flags&=-33);var a=gw(e);wg(e,a,s);break;case 3:case 4:var i=r.stateNode.containerInfo,l=gw(e);xg(e,l,i);break;default:throw Error(se(161))}}catch(c){Jt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function BO(e,t,n){je=e,UN(e)}function UN(e,t,n){for(var r=(e.mode&1)!==0;je!==null;){var s=je,a=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||fd;if(!i){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Rn;l=fd;var u=Rn;if(fd=i,(Rn=c)&&!u)for(je=s;je!==null;)i=je,c=i.child,i.tag===22&&i.memoizedState!==null?ww(s):c!==null?(c.return=i,je=c):ww(s);for(;a!==null;)je=a,UN(a),a=a.sibling;je=s,fd=l,Rn=u}yw(e)}else(s.subtreeFlags&8772)!==0&&a!==null?(a.return=s,je=a):yw(e)}}function yw(e){for(;je!==null;){var t=je;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Rn||yf(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Rn)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Hr(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&nw(t,a,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}nw(t,i,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Oc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}Rn||t.flags&512&&yg(t)}catch(m){Jt(t,t.return,m)}}if(t===e){je=null;break}if(n=t.sibling,n!==null){n.return=t.return,je=n;break}je=t.return}}function xw(e){for(;je!==null;){var t=je;if(t===e){je=null;break}var n=t.sibling;if(n!==null){n.return=t.return,je=n;break}je=t.return}}function ww(e){for(;je!==null;){var t=je;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{yf(4,t)}catch(c){Jt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Jt(t,s,c)}}var a=t.return;try{yg(t)}catch(c){Jt(t,a,c)}break;case 5:var i=t.return;try{yg(t)}catch(c){Jt(t,i,c)}}}catch(c){Jt(t,t.return,c)}if(t===e){je=null;break}var l=t.sibling;if(l!==null){l.return=t.return,je=l;break}je=t.return}}var KO=Math.ceil,Nh=Ys.ReactCurrentDispatcher,Cy=Ys.ReactCurrentOwner,Ir=Ys.ReactCurrentBatchConfig,ft=0,gn=null,an=null,bn=0,ir=0,Si=Vo(0),dn=0,Vc=null,Oa=0,xf=0,_y=0,wc=null,Yn=null,Ey=0,ll=1/0,Rs=null,Ch=!1,bg=null,Po=null,md=!1,Co=null,_h=0,bc=0,jg=null,Hd=-1,Wd=0;function zn(){return(ft&6)!==0?rn():Hd!==-1?Hd:Hd=rn()}function Ao(e){return(e.mode&1)===0?1:(ft&2)!==0&&bn!==0?bn&-bn:_O.transition!==null?(Wd===0&&(Wd=CS()),Wd):(e=Nt,e!==0||(e=window.event,e=e===void 0?16:AS(e.type)),e)}function ns(e,t,n,r){if(50<bc)throw bc=0,jg=null,Error(se(185));bu(e,n,r),((ft&2)===0||e!==gn)&&(e===gn&&((ft&2)===0&&(xf|=n),dn===4&&uo(e,bn)),tr(e,r),n===1&&ft===0&&(t.mode&1)===0&&(ll=rn()+500,pf&&qo()))}function tr(e,t){var n=e.callbackNode;_A(e,t);var r=ch(e,e===gn?bn:0);if(r===0)n!==null&&T0(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&T0(n),t===1)e.tag===0?CO(bw.bind(null,e)):JS(bw.bind(null,e)),bO(function(){(ft&6)===0&&qo()}),n=null;else{switch(_S(r)){case 1:n=Zv;break;case 4:n=SS;break;case 16:n=lh;break;case 536870912:n=NS;break;default:n=lh}n=QN(n,BN.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function BN(e,t){if(Hd=-1,Wd=0,(ft&6)!==0)throw Error(se(327));var n=e.callbackNode;if(Pi()&&e.callbackNode!==n)return null;var r=ch(e,e===gn?bn:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=Eh(e,r);else{t=r;var s=ft;ft|=2;var a=VN();(gn!==e||bn!==t)&&(Rs=null,ll=rn()+500,Ca(e,t));do try{HO();break}catch(l){KN(e,l)}while(!0);hy(),Nh.current=a,ft=s,an!==null?t=0:(gn=null,bn=0,t=dn)}if(t!==0){if(t===2&&(s=Qp(e),s!==0&&(r=s,t=Sg(e,s))),t===1)throw n=Vc,Ca(e,0),uo(e,r),tr(e,rn()),n;if(t===6)uo(e,r);else{if(s=e.current.alternate,(r&30)===0&&!VO(s)&&(t=Eh(e,r),t===2&&(a=Qp(e),a!==0&&(r=a,t=Sg(e,a))),t===1))throw n=Vc,Ca(e,0),uo(e,r),tr(e,rn()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(se(345));case 2:ra(e,Yn,Rs);break;case 3:if(uo(e,r),(r&130023424)===r&&(t=Ey+500-rn(),10<t)){if(ch(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){zn(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rg(ra.bind(null,e,Yn,Rs),t);break}ra(e,Yn,Rs);break;case 4:if(uo(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-ts(r);a=1<<i,i=t[i],i>s&&(s=i),r&=~a}if(r=s,r=rn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*KO(r/1960))-r,10<r){e.timeoutHandle=rg(ra.bind(null,e,Yn,Rs),r);break}ra(e,Yn,Rs);break;case 5:ra(e,Yn,Rs);break;default:throw Error(se(329))}}}return tr(e,rn()),e.callbackNode===n?BN.bind(null,e):null}function Sg(e,t){var n=wc;return e.current.memoizedState.isDehydrated&&(Ca(e,t).flags|=256),e=Eh(e,t),e!==2&&(t=Yn,Yn=n,t!==null&&Ng(t)),e}function Ng(e){Yn===null?Yn=e:Yn.push.apply(Yn,e)}function VO(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!os(a(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function uo(e,t){for(t&=~_y,t&=~xf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ts(t),r=1<<n;e[n]=-1,t&=~r}}function bw(e){if((ft&6)!==0)throw Error(se(327));Pi();var t=ch(e,0);if((t&1)===0)return tr(e,rn()),null;var n=Eh(e,t);if(e.tag!==0&&n===2){var r=Qp(e);r!==0&&(t=r,n=Sg(e,r))}if(n===1)throw n=Vc,Ca(e,0),uo(e,t),tr(e,rn()),n;if(n===6)throw Error(se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ra(e,Yn,Rs),tr(e,rn()),null}function ky(e,t){var n=ft;ft|=1;try{return e(t)}finally{ft=n,ft===0&&(ll=rn()+500,pf&&qo())}}function Ia(e){Co!==null&&Co.tag===0&&(ft&6)===0&&Pi();var t=ft;ft|=1;var n=Ir.transition,r=Nt;try{if(Ir.transition=null,Nt=1,e)return e()}finally{Nt=r,Ir.transition=n,ft=t,(ft&6)===0&&qo()}}function Ty(){ir=Si.current,Dt(Si)}function Ca(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,wO(n)),an!==null)for(n=an.return;n!==null;){var r=n;switch(cy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&mh();break;case 3:al(),Dt(Zn),Dt(In),yy();break;case 5:vy(r);break;case 4:al();break;case 13:Dt(Kt);break;case 19:Dt(Kt);break;case 10:fy(r.type._context);break;case 22:case 23:Ty()}n=n.return}if(gn=e,an=e=Oo(e.current,null),bn=ir=t,dn=0,Vc=null,_y=xf=Oa=0,Yn=wc=null,ha!==null){for(t=0;t<ha.length;t++)if(n=ha[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var i=a.next;a.next=s,r.next=i}n.pending=r}ha=null}return e}function KN(e,t){do{var n=an;try{if(hy(),Kd.current=Sh,jh){for(var r=Wt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}jh=!1}if(Aa=0,fn=cn=Wt=null,yc=!1,Uc=0,Cy.current=null,n===null||n.return===null){dn=1,Vc=t,an=null;break}e:{var a=e,i=n.return,l=n,c=t;if(t=bn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if((h.mode&1)===0&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=lw(i);if(p!==null){p.flags&=-257,cw(p,i,l,a,t),p.mode&1&&iw(a,u,t),t=p,c=u;var w=t.updateQueue;if(w===null){var g=new Set;g.add(c),t.updateQueue=g}else w.add(c);break e}else{if((t&1)===0){iw(a,u,t),Ry();break e}c=Error(se(426))}}else if(Ut&&l.mode&1){var y=lw(i);if(y!==null){(y.flags&65536)===0&&(y.flags|=256),cw(y,i,l,a,t),uy(il(c,l));break e}}a=c=il(c,l),dn!==4&&(dn=2),wc===null?wc=[a]:wc.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var x=_N(a,c,t);tw(a,x);break e;case 1:l=c;var v=a.type,b=a.stateNode;if((a.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Po===null||!Po.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=EN(a,l,t);tw(a,j);break e}}a=a.return}while(a!==null)}HN(n)}catch(S){t=S,an===n&&n!==null&&(an=n=n.return);continue}break}while(!0)}function VN(){var e=Nh.current;return Nh.current=Sh,e===null?Sh:e}function Ry(){(dn===0||dn===3||dn===2)&&(dn=4),gn===null||(Oa&268435455)===0&&(xf&268435455)===0||uo(gn,bn)}function Eh(e,t){var n=ft;ft|=2;var r=VN();(gn!==e||bn!==t)&&(Rs=null,Ca(e,t));do try{qO();break}catch(s){KN(e,s)}while(!0);if(hy(),ft=n,Nh.current=r,an!==null)throw Error(se(261));return gn=null,bn=0,dn}function qO(){for(;an!==null;)qN(an)}function HO(){for(;an!==null&&!vA();)qN(an)}function qN(e){var t=GN(e.alternate,e,ir);e.memoizedProps=e.pendingProps,t===null?HN(e):an=t,Cy.current=null}function HN(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=LO(n,t,ir),n!==null){an=n;return}}else{if(n=FO(n,t),n!==null){n.flags&=32767,an=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{dn=6,an=null;return}}if(t=t.sibling,t!==null){an=t;return}an=t=e}while(t!==null);dn===0&&(dn=5)}function ra(e,t,n){var r=Nt,s=Ir.transition;try{Ir.transition=null,Nt=1,WO(e,t,n,r)}finally{Ir.transition=s,Nt=r}return null}function WO(e,t,n,r){do Pi();while(Co!==null);if((ft&6)!==0)throw Error(se(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(se(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(EA(e,a),e===gn&&(an=gn=null,bn=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||md||(md=!0,QN(lh,function(){return Pi(),null})),a=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||a){a=Ir.transition,Ir.transition=null;var i=Nt;Nt=1;var l=ft;ft|=4,Cy.current=null,UO(e,n),zN(n,e),fO(tg),uh=!!eg,tg=eg=null,e.current=n,BO(n),yA(),ft=l,Nt=i,Ir.transition=a}else e.current=n;if(md&&(md=!1,Co=e,_h=s),a=e.pendingLanes,a===0&&(Po=null),bA(n.stateNode),tr(e,rn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ch)throw Ch=!1,e=bg,bg=null,e;return(_h&1)!==0&&e.tag!==0&&Pi(),a=e.pendingLanes,(a&1)!==0?e===jg?bc++:(bc=0,jg=e):bc=0,qo(),null}function Pi(){if(Co!==null){var e=_S(_h),t=Ir.transition,n=Nt;try{if(Ir.transition=null,Nt=16>e?16:e,Co===null)var r=!1;else{if(e=Co,Co=null,_h=0,(ft&6)!==0)throw Error(se(331));var s=ft;for(ft|=4,je=e.current;je!==null;){var a=je,i=a.child;if((je.flags&16)!==0){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(je=u;je!==null;){var h=je;switch(h.tag){case 0:case 11:case 15:xc(8,h,a)}var f=h.child;if(f!==null)f.return=h,je=f;else for(;je!==null;){h=je;var m=h.sibling,p=h.return;if($N(h),h===u){je=null;break}if(m!==null){m.return=p,je=m;break}je=p}}}var w=a.alternate;if(w!==null){var g=w.child;if(g!==null){w.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}je=a}}if((a.subtreeFlags&2064)!==0&&i!==null)i.return=a,je=i;else e:for(;je!==null;){if(a=je,(a.flags&2048)!==0)switch(a.tag){case 0:case 11:case 15:xc(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,je=x;break e}je=a.return}}var v=e.current;for(je=v;je!==null;){i=je;var b=i.child;if((i.subtreeFlags&2064)!==0&&b!==null)b.return=i,je=b;else e:for(i=v;je!==null;){if(l=je,(l.flags&2048)!==0)try{switch(l.tag){case 0:case 11:case 15:yf(9,l)}}catch(S){Jt(l,l.return,S)}if(l===i){je=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,je=j;break e}je=l.return}}if(ft=s,qo(),ys&&typeof ys.onPostCommitFiberRoot=="function")try{ys.onPostCommitFiberRoot(uf,e)}catch{}r=!0}return r}finally{Nt=n,Ir.transition=t}}return!1}function jw(e,t,n){t=il(n,t),t=_N(e,t,1),e=Ro(e,t,1),t=zn(),e!==null&&(bu(e,1,t),tr(e,t))}function Jt(e,t,n){if(e.tag===3)jw(e,e,n);else for(;t!==null;){if(t.tag===3){jw(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Po===null||!Po.has(r))){e=il(n,e),e=EN(t,e,1),t=Ro(t,e,1),e=zn(),t!==null&&(bu(t,1,e),tr(t,e));break}}t=t.return}}function GO(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=zn(),e.pingedLanes|=e.suspendedLanes&n,gn===e&&(bn&n)===n&&(dn===4||dn===3&&(bn&130023424)===bn&&500>rn()-Ey?Ca(e,0):_y|=n),tr(e,t)}function WN(e,t){t===0&&((e.mode&1)===0?t=1:(t=sd,sd<<=1,(sd&130023424)===0&&(sd=4194304)));var n=zn();e=qs(e,t),e!==null&&(bu(e,t,n),tr(e,n))}function QO(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),WN(e,n)}function YO(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(se(314))}r!==null&&r.delete(t),WN(e,n)}var GN;GN=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Zn.current)Jn=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return Jn=!1,$O(e,t,n);Jn=(e.flags&131072)!==0}else Jn=!1,Ut&&(t.flags&1048576)!==0&&XS(t,vh,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qd(e,t),e=t.pendingProps;var s=rl(t,In.current);Ri(t,n),s=wy(null,t,r,e,s,n);var a=by();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,er(r)?(a=!0,ph(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,py(t),s.updater=vf,t.stateNode=s,s._reactInternals=t,ug(t,r,e,n),t=fg(null,t,r,!0,a,n)):(t.tag=0,Ut&&a&&ly(t),Ln(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qd(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=XO(r),e=Hr(r,e),s){case 0:t=hg(null,t,r,e,n);break e;case 1:t=hw(null,t,r,e,n);break e;case 11:t=uw(null,t,r,e,n);break e;case 14:t=dw(null,t,r,Hr(r.type,e),n);break e}throw Error(se(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Hr(r,s),hg(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Hr(r,s),hw(e,t,r,s,n);case 3:e:{if(PN(t),e===null)throw Error(se(387));r=t.pendingProps,a=t.memoizedState,s=a.element,sN(e,t),wh(t,r,null,n);var i=t.memoizedState;if(r=i.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=il(Error(se(423)),t),t=fw(e,t,r,n,s);break e}else if(r!==s){s=il(Error(se(424)),t),t=fw(e,t,r,n,s);break e}else for(fr=To(t.stateNode.containerInfo.firstChild),mr=t,Ut=!0,Jr=null,n=nN(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(sl(),r===s){t=Hs(e,t,n);break e}Ln(e,t,r,n)}t=t.child}return t;case 5:return oN(t),e===null&&ig(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,ng(r,s)?i=null:a!==null&&ng(r,a)&&(t.flags|=32),RN(e,t),Ln(e,t,i,n),t.child;case 6:return e===null&&ig(t),null;case 13:return AN(e,t,n);case 4:return gy(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ol(t,null,r,n):Ln(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Hr(r,s),uw(e,t,r,s,n);case 7:return Ln(e,t,t.pendingProps,n),t.child;case 8:return Ln(e,t,t.pendingProps.children,n),t.child;case 12:return Ln(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,i=s.value,At(yh,r._currentValue),r._currentValue=i,a!==null)if(os(a.value,i)){if(a.children===s.children&&!Zn.current){t=Hs(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){i=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=Fs(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),lg(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(se(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),lg(i,n,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}Ln(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ri(t,n),s=Dr(s),r=r(s),t.flags|=1,Ln(e,t,r,n),t.child;case 14:return r=t.type,s=Hr(r,t.pendingProps),s=Hr(r.type,s),dw(e,t,r,s,n);case 15:return kN(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Hr(r,s),qd(e,t),t.tag=1,er(r)?(e=!0,ph(t)):e=!1,Ri(t,n),CN(t,r,s),ug(t,r,s,n),fg(null,t,r,!0,e,n);case 19:return ON(e,t,n);case 22:return TN(e,t,n)}throw Error(se(156,t.tag))};function QN(e,t){return jS(e,t)}function JO(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ar(e,t,n,r){return new JO(e,t,n,r)}function Py(e){return e=e.prototype,!(!e||!e.isReactComponent)}function XO(e){if(typeof e=="function")return Py(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Yv)return 11;if(e===Jv)return 14}return 2}function Oo(e,t){var n=e.alternate;return n===null?(n=Ar(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gd(e,t,n,r,s,a){var i=2;if(r=e,typeof e=="function")Py(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case fi:return _a(n.children,s,a,t);case Qv:i=8,s|=8;break;case Ip:return e=Ar(12,n,t,s|2),e.elementType=Ip,e.lanes=a,e;case Mp:return e=Ar(13,n,t,s),e.elementType=Mp,e.lanes=a,e;case Dp:return e=Ar(19,n,t,s),e.elementType=Dp,e.lanes=a,e;case oS:return wf(n,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case rS:i=10;break e;case sS:i=9;break e;case Yv:i=11;break e;case Jv:i=14;break e;case ao:i=16,r=null;break e}throw Error(se(130,e==null?e:typeof e,""))}return t=Ar(i,n,t,s),t.elementType=e,t.type=r,t.lanes=a,t}function _a(e,t,n,r){return e=Ar(7,e,r,t),e.lanes=n,e}function wf(e,t,n,r){return e=Ar(22,e,r,t),e.elementType=oS,e.lanes=n,e.stateNode={isHidden:!1},e}function Qm(e,t,n){return e=Ar(6,e,null,t),e.lanes=n,e}function Ym(e,t,n){return t=Ar(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ZO(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rm(0),this.expirationTimes=Rm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ay(e,t,n,r,s,a,i,l,c){return e=new ZO(e,t,n,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Ar(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},py(a),e}function eI(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function YN(e){if(!e)return Lo;e=e._reactInternals;e:{if(qa(e)!==e||e.tag!==1)throw Error(se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(er(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(se(171))}if(e.tag===1){var n=e.type;if(er(n))return YS(e,n,t)}return t}function JN(e,t,n,r,s,a,i,l,c){return e=Ay(n,r,!0,e,s,a,i,l,c),e.context=YN(null),n=e.current,r=zn(),s=Ao(n),a=Fs(r,s),a.callback=t??null,Ro(n,a,s),e.current.lanes=s,bu(e,s,r),tr(e,r),e}function bf(e,t,n,r){var s=t.current,a=zn(),i=Ao(s);return n=YN(n),t.context===null?t.context=n:t.pendingContext=n,t=Fs(a,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ro(s,t,i),e!==null&&(ns(e,s,i,a),Bd(e,s,i)),i}function kh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Sw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Oy(e,t){Sw(e,t),(e=e.alternate)&&Sw(e,t)}function tI(){return null}var XN=typeof reportError=="function"?reportError:function(e){console.error(e)};function Iy(e){this._internalRoot=e}jf.prototype.render=Iy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(se(409));bf(e,t,null,null)};jf.prototype.unmount=Iy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ia(function(){bf(null,e,null,null)}),t[Vs]=null}};function jf(e){this._internalRoot=e}jf.prototype.unstable_scheduleHydration=function(e){if(e){var t=TS();e={blockedOn:null,target:e,priority:t};for(var n=0;n<co.length&&t!==0&&t<co[n].priority;n++);co.splice(n,0,e),n===0&&PS(e)}};function My(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nw(){}function nI(e,t,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var u=kh(i);a.call(u)}}var i=JN(t,r,e,0,null,!1,!1,"",Nw);return e._reactRootContainer=i,e[Vs]=i.current,Dc(e.nodeType===8?e.parentNode:e),Ia(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=kh(c);l.call(u)}}var c=Ay(e,0,!1,null,null,!1,!1,"",Nw);return e._reactRootContainer=c,e[Vs]=c.current,Dc(e.nodeType===8?e.parentNode:e),Ia(function(){bf(t,c,n,r)}),c}function Nf(e,t,n,r,s){var a=n._reactRootContainer;if(a){var i=a;if(typeof s=="function"){var l=s;s=function(){var c=kh(i);l.call(c)}}bf(t,i,e,s)}else i=nI(n,t,e,s,r);return kh(i)}ES=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ac(t.pendingLanes);n!==0&&(ey(t,n|1),tr(t,rn()),(ft&6)===0&&(ll=rn()+500,qo()))}break;case 13:Ia(function(){var r=qs(e,1);if(r!==null){var s=zn();ns(r,e,1,s)}}),Oy(e,1)}};ty=function(e){if(e.tag===13){var t=qs(e,134217728);if(t!==null){var n=zn();ns(t,e,134217728,n)}Oy(e,134217728)}};kS=function(e){if(e.tag===13){var t=Ao(e),n=qs(e,t);if(n!==null){var r=zn();ns(n,e,t,r)}Oy(e,t)}};TS=function(){return Nt};RS=function(e,t){var n=Nt;try{return Nt=e,t()}finally{Nt=n}};Hp=function(e,t,n){switch(t){case"input":if(Fp(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=mf(r);if(!s)throw Error(se(90));iS(r),Fp(r,s)}}}break;case"textarea":cS(e,n);break;case"select":t=n.value,t!=null&&_i(e,!!n.multiple,t,!1)}};gS=ky;vS=Ia;var rI={usingClientEntryPoint:!1,Events:[Su,vi,mf,mS,pS,ky]},Zl={findFiberByHostInstance:da,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sI={bundleType:Zl.bundleType,version:Zl.version,rendererPackageName:Zl.rendererPackageName,rendererConfig:Zl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ys.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wS(e),e===null?null:e.stateNode},findFiberByHostInstance:Zl.findFiberByHostInstance||tI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pd.isDisabled&&pd.supportsFiber)try{uf=pd.inject(sI),ys=pd}catch{}}yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rI;yr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!My(t))throw Error(se(200));return eI(e,t,null,n)};yr.createRoot=function(e,t){if(!My(e))throw Error(se(299));var n=!1,r="",s=XN;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Ay(e,1,!1,null,null,n,!1,r,s),e[Vs]=t.current,Dc(e.nodeType===8?e.parentNode:e),new Iy(t)};yr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(se(188)):(e=Object.keys(e).join(","),Error(se(268,e)));return e=wS(t),e=e===null?null:e.stateNode,e};yr.flushSync=function(e){return Ia(e)};yr.hydrate=function(e,t,n){if(!Sf(t))throw Error(se(200));return Nf(null,e,t,!0,n)};yr.hydrateRoot=function(e,t,n){if(!My(e))throw Error(se(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",i=XN;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=JN(t,null,e,1,n??null,s,!1,a,i),e[Vs]=t.current,Dc(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new jf(t)};yr.render=function(e,t,n){if(!Sf(t))throw Error(se(200));return Nf(null,e,t,!1,n)};yr.unmountComponentAtNode=function(e){if(!Sf(e))throw Error(se(40));return e._reactRootContainer?(Ia(function(){Nf(null,null,e,!1,function(){e._reactRootContainer=null,e[Vs]=null})}),!0):!1};yr.unstable_batchedUpdates=ky;yr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Sf(n))throw Error(se(200));if(e==null||e._reactInternals===void 0)throw Error(se(38));return Nf(e,t,n,!1,r)};yr.version="18.3.1-next-f1338f8080-20240426";function ZN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ZN)}catch(e){console.error(e)}}ZN(),Zj.exports=yr;var Or=Zj.exports;const e1=Uj(Or);var t1,Cw=Or;t1=Cw.createRoot,Cw.hydrateRoot;function oI(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,s,a,i=[],l="",c=e.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(i.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),a=s.indexOf(".",1),i.push(s.substring(1,~r?r:~a?a:s.length)),l+=~r&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(l+=(~r?"?":"")+"\\"+s.substring(a))):l+="/"+s;return{keys:i,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}var n1={exports:{}},r1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cl=d;function aI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var iI=typeof Object.is=="function"?Object.is:aI,lI=cl.useState,cI=cl.useEffect,uI=cl.useLayoutEffect,dI=cl.useDebugValue;function hI(e,t){var n=t(),r=lI({inst:{value:n,getSnapshot:t}}),s=r[0].inst,a=r[1];return uI(function(){s.value=n,s.getSnapshot=t,Jm(s)&&a({inst:s})},[e,n,t]),cI(function(){return Jm(s)&&a({inst:s}),e(function(){Jm(s)&&a({inst:s})})},[e]),dI(n),n}function Jm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!iI(e,n)}catch{return!0}}function fI(e,t){return t()}var mI=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?fI:hI;r1.useSyncExternalStore=cl.useSyncExternalStore!==void 0?cl.useSyncExternalStore:mI;n1.exports=r1;var pI=n1.exports;const gI=cf.useInsertionEffect,vI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yI=vI?d.useLayoutEffect:d.useEffect,xI=gI||yI,s1=e=>{const t=d.useRef([e,(...n)=>t[0](...n)]).current;return xI(()=>{t[0]=e}),t[1]},wI="popstate",Dy="pushState",$y="replaceState",bI="hashchange",_w=[wI,Dy,$y,bI],jI=e=>{for(const t of _w)addEventListener(t,e);return()=>{for(const t of _w)removeEventListener(t,e)}},o1=(e,t)=>pI.useSyncExternalStore(jI,e,t),SI=()=>location.search,NI=({ssrSearch:e=""}={})=>o1(SI,()=>e),Ew=()=>location.pathname,CI=({ssrPath:e}={})=>o1(Ew,e?()=>e:Ew),_I=(e,{replace:t=!1,state:n=null}={})=>history[t?$y:Dy](n,"",e),EI=(e={})=>[CI(e),_I],kw=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[kw]>"u"){for(const e of[Dy,$y]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),r=new Event(e);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,kw,{value:!0})}const kI=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",a1=(e="")=>e==="/"?"":e,TI=(e,t)=>e[0]==="~"?e.slice(1):a1(t)+e,RI=(e="",t)=>kI(Tw(a1(e)),Tw(t)),Tw=e=>{try{return decodeURI(e)}catch{return e}},i1={hook:EI,searchHook:NI,parser:oI,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:e=>e},l1=d.createContext(i1),Cu=()=>d.useContext(l1),c1={},u1=d.createContext(c1),Cf=()=>d.useContext(u1),_f=e=>{const[t,n]=e.hook(e);return[RI(e.base,t),s1((r,s)=>n(TI(r,e.base),s))]},_u=()=>_f(Cu()),d1=(e,t,n,r)=>{const{pattern:s,keys:a}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",r),i=s.exec(n)||[],[l,...c]=i;return l!==void 0?[!0,(()=>{const u=a!==!1?Object.fromEntries(a.map((f,m)=>[f,c[m]])):i.groups;let h={...c};return u&&Object.assign(h,u),h})(),...r?[l]:[]]:[!1,null]},PI=({children:e,...t})=>{var h,f;const n=Cu(),r=t.hook?i1:n;let s=r;const[a,i]=((h=t.ssrPath)==null?void 0:h.split("?"))??[];i&&(t.ssrSearch=i,t.ssrPath=a),t.hrefs=t.hrefs??((f=t.hook)==null?void 0:f.hrefs);let l=d.useRef({}),c=l.current,u=c;for(let m in r){const p=m==="base"?r[m]+(t[m]||""):t[m]||r[m];c===u&&p!==u[m]&&(l.current=u={...u}),u[m]=p,(p!==r[m]||p!==s[m])&&(s=u)}return d.createElement(l1.Provider,{value:s,children:e})},Rw=({children:e,component:t},n)=>t?d.createElement(t,{params:n}):typeof e=="function"?e(n):e,AI=e=>{let t=d.useRef(c1);const n=t.current;return t.current=Object.keys(e).length!==Object.keys(n).length||Object.entries(e).some(([r,s])=>s!==n[r])?e:n},Wn=({path:e,nest:t,match:n,...r})=>{const s=Cu(),[a]=_f(s),[i,l,c]=n??d1(s.parser,e,a,t),u=AI({...Cf(),...l});if(!i)return null;const h=c?d.createElement(PI,{base:c},Rw(r,u)):Rw(r,u);return d.createElement(u1.Provider,{value:u,children:h})},kn=d.forwardRef((e,t)=>{const n=Cu(),[r,s]=_f(n),{to:a="",href:i=a,onClick:l,asChild:c,children:u,className:h,replace:f,state:m,...p}=e,w=s1(y=>{y.ctrlKey||y.metaKey||y.altKey||y.shiftKey||y.button!==0||(l==null||l(y),y.defaultPrevented||(y.preventDefault(),s(i,e)))}),g=n.hrefs(i[0]==="~"?i.slice(1):n.base+i,n);return c&&d.isValidElement(u)?d.cloneElement(u,{onClick:w,href:g}):d.createElement("a",{...p,onClick:w,href:g,className:h!=null&&h.call?h(r===i):h,children:u,ref:t})}),h1=e=>Array.isArray(e)?e.flatMap(t=>h1(t&&t.type===d.Fragment?t.props.children:t)):[e],OI=({children:e,location:t})=>{const n=Cu(),[r]=_f(n);for(const s of h1(e)){let a=0;if(d.isValidElement(s)&&(a=d1(n.parser,s.props.path,t||r,s.props.nest))[0])return d.cloneElement(s,{match:a})}return null};var Ha=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},II={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},mo,Uv,kj,MI=(kj=class{constructor(){be(this,mo,II);be(this,Uv,!1)}setTimeoutProvider(e){le(this,mo,e)}setTimeout(e,t){return k(this,mo).setTimeout(e,t)}clearTimeout(e){k(this,mo).clearTimeout(e)}setInterval(e,t){return k(this,mo).setInterval(e,t)}clearInterval(e){k(this,mo).clearInterval(e)}},mo=new WeakMap,Uv=new WeakMap,kj),ma=new MI;function DI(e){setTimeout(e,0)}var Ma=typeof window>"u"||"Deno"in globalThis;function Tn(){}function $I(e,t){return typeof e=="function"?e(t):e}function Cg(e){return typeof e=="number"&&e>=0&&e!==1/0}function f1(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Io(e,t){return typeof e=="function"?e(t):e}function Nr(e,t){return typeof e=="function"?e(t):e}function Pw(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:i,stale:l}=e;if(i){if(r){if(t.queryHash!==Ly(i,t.options))return!1}else if(!qc(t.queryKey,i))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||a&&!a(t))}function Aw(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(Da(t.options.mutationKey)!==Da(a))return!1}else if(!qc(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function Ly(e,t){return((t==null?void 0:t.queryKeyHashFn)||Da)(e)}function Da(e){return JSON.stringify(e,(t,n)=>_g(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function qc(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>qc(e[n],t[n])):!1}var LI=Object.prototype.hasOwnProperty;function Fy(e,t){if(e===t)return e;const n=Ow(e)&&Ow(t);if(!n&&!(_g(e)&&_g(t)))return t;const s=(n?e:Object.keys(e)).length,a=n?t:Object.keys(t),i=a.length,l=n?new Array(i):{};let c=0;for(let u=0;u<i;u++){const h=n?u:a[u],f=e[h],m=t[h];if(f===m){l[h]=f,(n?u<s:LI.call(e,h))&&c++;continue}if(f===null||m===null||typeof f!="object"||typeof m!="object"){l[h]=m;continue}const p=Fy(f,m);l[h]=p,p===f&&c++}return s===i&&c===s?e:l}function Hc(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Ow(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function _g(e){if(!Iw(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Iw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Iw(e){return Object.prototype.toString.call(e)==="[object Object]"}function FI(e){return new Promise(t=>{ma.setTimeout(t,e)})}function Eg(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Fy(e,t):t}function zI(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function UI(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var zy=Symbol();function m1(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===zy?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function p1(e,t){return typeof e=="function"?e(...t):!!e}var ga,po,Ui,Tj,BI=(Tj=class extends Ha{constructor(){super();be(this,ga);be(this,po);be(this,Ui);le(this,Ui,t=>{if(!Ma&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){k(this,po)||this.setEventListener(k(this,Ui))}onUnsubscribe(){var t;this.hasListeners()||((t=k(this,po))==null||t.call(this),le(this,po,void 0))}setEventListener(t){var n;le(this,Ui,t),(n=k(this,po))==null||n.call(this),le(this,po,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){k(this,ga)!==t&&(le(this,ga,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof k(this,ga)=="boolean"?k(this,ga):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ga=new WeakMap,po=new WeakMap,Ui=new WeakMap,Tj),Uy=new BI;function kg(){let e,t;const n=new Promise((s,a)=>{e=s,t=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var KI=DI;function VI(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=KI;const a=l=>{t?e.push(l):s(()=>{n(l)})},i=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Xt=VI(),Bi,go,Ki,Rj,qI=(Rj=class extends Ha{constructor(){super();be(this,Bi,!0);be(this,go);be(this,Ki);le(this,Ki,t=>{if(!Ma&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){k(this,go)||this.setEventListener(k(this,Ki))}onUnsubscribe(){var t;this.hasListeners()||((t=k(this,go))==null||t.call(this),le(this,go,void 0))}setEventListener(t){var n;le(this,Ki,t),(n=k(this,go))==null||n.call(this),le(this,go,t(this.setOnline.bind(this)))}setOnline(t){k(this,Bi)!==t&&(le(this,Bi,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return k(this,Bi)}},Bi=new WeakMap,go=new WeakMap,Ki=new WeakMap,Rj),Th=new qI;function HI(e){return Math.min(1e3*2**e,3e4)}function g1(e){return(e??"online")==="online"?Th.isOnline():!0}var Tg=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function v1(e){let t=!1,n=0,r;const s=kg(),a=()=>s.status!=="pending",i=g=>{var y;if(!a()){const x=new Tg(g);m(x),(y=e.onCancel)==null||y.call(e,x)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>Uy.isFocused()&&(e.networkMode==="always"||Th.isOnline())&&e.canRun(),h=()=>g1(e.networkMode)&&e.canRun(),f=g=>{a()||(r==null||r(),s.resolve(g))},m=g=>{a()||(r==null||r(),s.reject(g))},p=()=>new Promise(g=>{var y;r=x=>{(a()||u())&&g(x)},(y=e.onPause)==null||y.call(e)}).then(()=>{var g;r=void 0,a()||(g=e.onContinue)==null||g.call(e)}),w=()=>{if(a())return;let g;const y=n===0?e.initialPromise:void 0;try{g=y??e.fn()}catch(x){g=Promise.reject(x)}Promise.resolve(g).then(f).catch(x=>{var _;if(a())return;const v=e.retry??(Ma?0:3),b=e.retryDelay??HI,j=typeof b=="function"?b(n,x):b,S=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,x);if(t||!S){m(x);return}n++,(_=e.onFail)==null||_.call(e,n,x),FI(j).then(()=>u()?void 0:p()).then(()=>{t?m(x):w()})})};return{promise:s,status:()=>s.status,cancel:i,continue:()=>(r==null||r(),s),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?w():p().then(w),s)}}var va,Pj,y1=(Pj=class{constructor(){be(this,va)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Cg(this.gcTime)&&le(this,va,ma.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ma?1/0:300*1e3))}clearGcTimeout(){k(this,va)&&(ma.clearTimeout(k(this,va)),le(this,va,void 0))}},va=new WeakMap,Pj),ya,Vi,jr,xa,hn,hu,wa,Gr,Ts,Aj,WI=(Aj=class extends y1{constructor(t){super();be(this,Gr);be(this,ya);be(this,Vi);be(this,jr);be(this,xa);be(this,hn);be(this,hu);be(this,wa);le(this,wa,!1),le(this,hu,t.defaultOptions),this.setOptions(t.options),this.observers=[],le(this,xa,t.client),le(this,jr,k(this,xa).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,le(this,ya,Dw(this.options)),this.state=t.state??k(this,ya),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=k(this,hn))==null?void 0:t.promise}setOptions(t){if(this.options={...k(this,hu),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Dw(this.options);n.data!==void 0&&(this.setState(Mw(n.data,n.dataUpdatedAt)),le(this,ya,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&k(this,jr).remove(this)}setData(t,n){const r=Eg(this.state.data,t,this.options);return Ke(this,Gr,Ts).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Ke(this,Gr,Ts).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=k(this,hn))==null?void 0:r.promise;return(s=k(this,hn))==null||s.cancel(t),n?n.then(Tn).catch(Tn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(k(this,ya))}isActive(){return this.observers.some(t=>Nr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===zy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Io(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!f1(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=k(this,hn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=k(this,hn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),k(this,jr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(k(this,hn)&&(k(this,wa)?k(this,hn).cancel({revert:!0}):k(this,hn).cancelRetry()),this.scheduleGc()),k(this,jr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ke(this,Gr,Ts).call(this,{type:"invalidate"})}async fetch(t,n){var c,u,h,f,m,p,w,g,y,x,v,b;if(this.state.fetchStatus!=="idle"&&((c=k(this,hn))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(k(this,hn))return k(this,hn).continueRetry(),k(this,hn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const j=this.observers.find(S=>S.options.queryFn);j&&this.setOptions(j.options)}const r=new AbortController,s=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(le(this,wa,!0),r.signal)})},a=()=>{const j=m1(this.options,n),_=(()=>{const N={client:k(this,xa),queryKey:this.queryKey,meta:this.meta};return s(N),N})();return le(this,wa,!1),this.options.persister?this.options.persister(j,_,this):j(_)},l=(()=>{const j={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:k(this,xa),state:this.state,fetchFn:a};return s(j),j})();(u=this.options.behavior)==null||u.onFetch(l,this),le(this,Vi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Ke(this,Gr,Ts).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),le(this,hn,v1({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:j=>{j instanceof Tg&&j.revert&&this.setState({...k(this,Vi),fetchStatus:"idle"}),r.abort()},onFail:(j,S)=>{Ke(this,Gr,Ts).call(this,{type:"failed",failureCount:j,error:S})},onPause:()=>{Ke(this,Gr,Ts).call(this,{type:"pause"})},onContinue:()=>{Ke(this,Gr,Ts).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const j=await k(this,hn).start();if(j===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(j),(p=(m=k(this,jr).config).onSuccess)==null||p.call(m,j,this),(g=(w=k(this,jr).config).onSettled)==null||g.call(w,j,this.state.error,this),j}catch(j){if(j instanceof Tg){if(j.silent)return k(this,hn).promise;if(j.revert){if(this.state.data===void 0)throw j;return this.state.data}}throw Ke(this,Gr,Ts).call(this,{type:"error",error:j}),(x=(y=k(this,jr).config).onError)==null||x.call(y,j,this),(b=(v=k(this,jr).config).onSettled)==null||b.call(v,this.state.data,j,this),j}finally{this.scheduleGc()}}},ya=new WeakMap,Vi=new WeakMap,jr=new WeakMap,xa=new WeakMap,hn=new WeakMap,hu=new WeakMap,wa=new WeakMap,Gr=new WeakSet,Ts=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...x1(r.data,this.options),fetchMeta:t.meta??null};case"success":const s={...r,...Mw(t.data,t.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return le(this,Vi,t.manual?s:void 0),s;case"error":const a=t.error;return{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Xt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),k(this,jr).notify({query:this,type:"updated",action:t})})},Aj);function x1(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:g1(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Mw(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Dw(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Gn,lt,fu,Dn,ba,qi,Os,vo,mu,Hi,Wi,ja,Sa,yo,Gi,St,lc,Rg,Pg,Ag,Og,Ig,Mg,Dg,w1,Oj,By=(Oj=class extends Ha{constructor(t,n){super();be(this,St);be(this,Gn);be(this,lt);be(this,fu);be(this,Dn);be(this,ba);be(this,qi);be(this,Os);be(this,vo);be(this,mu);be(this,Hi);be(this,Wi);be(this,ja);be(this,Sa);be(this,yo);be(this,Gi,new Set);this.options=n,le(this,Gn,t),le(this,vo,null),le(this,Os,kg()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(k(this,lt).addObserver(this),$w(k(this,lt),this.options)?Ke(this,St,lc).call(this):this.updateResult(),Ke(this,St,Og).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return $g(k(this,lt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return $g(k(this,lt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ke(this,St,Ig).call(this),Ke(this,St,Mg).call(this),k(this,lt).removeObserver(this)}setOptions(t){const n=this.options,r=k(this,lt);if(this.options=k(this,Gn).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Nr(this.options.enabled,k(this,lt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ke(this,St,Dg).call(this),k(this,lt).setOptions(this.options),n._defaulted&&!Hc(this.options,n)&&k(this,Gn).getQueryCache().notify({type:"observerOptionsUpdated",query:k(this,lt),observer:this});const s=this.hasListeners();s&&Lw(k(this,lt),r,this.options,n)&&Ke(this,St,lc).call(this),this.updateResult(),s&&(k(this,lt)!==r||Nr(this.options.enabled,k(this,lt))!==Nr(n.enabled,k(this,lt))||Io(this.options.staleTime,k(this,lt))!==Io(n.staleTime,k(this,lt)))&&Ke(this,St,Rg).call(this);const a=Ke(this,St,Pg).call(this);s&&(k(this,lt)!==r||Nr(this.options.enabled,k(this,lt))!==Nr(n.enabled,k(this,lt))||a!==k(this,yo))&&Ke(this,St,Ag).call(this,a)}getOptimisticResult(t){const n=k(this,Gn).getQueryCache().build(k(this,Gn),t),r=this.createResult(n,t);return QI(this,r)&&(le(this,Dn,r),le(this,qi,this.options),le(this,ba,k(this,lt).state)),r}getCurrentResult(){return k(this,Dn)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&k(this,Os).status==="pending"&&k(this,Os).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(t){k(this,Gi).add(t)}getCurrentQuery(){return k(this,lt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=k(this,Gn).defaultQueryOptions(t),r=k(this,Gn).getQueryCache().build(k(this,Gn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return Ke(this,St,lc).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),k(this,Dn)))}createResult(t,n){var E;const r=k(this,lt),s=this.options,a=k(this,Dn),i=k(this,ba),l=k(this,qi),u=t!==r?t.state:k(this,fu),{state:h}=t;let f={...h},m=!1,p;if(n._optimisticResults){const D=this.hasListeners(),R=!D&&$w(t,n),P=D&&Lw(t,r,n,s);(R||P)&&(f={...f,...x1(h.data,t.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:w,errorUpdatedAt:g,status:y}=f;p=f.data;let x=!1;if(n.placeholderData!==void 0&&p===void 0&&y==="pending"){let D;a!=null&&a.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(D=a.data,x=!0):D=typeof n.placeholderData=="function"?n.placeholderData((E=k(this,Wi))==null?void 0:E.state.data,k(this,Wi)):n.placeholderData,D!==void 0&&(y="success",p=Eg(a==null?void 0:a.data,D,n),m=!0)}if(n.select&&p!==void 0&&!x)if(a&&p===(i==null?void 0:i.data)&&n.select===k(this,mu))p=k(this,Hi);else try{le(this,mu,n.select),p=n.select(p),p=Eg(a==null?void 0:a.data,p,n),le(this,Hi,p),le(this,vo,null)}catch(D){le(this,vo,D)}k(this,vo)&&(w=k(this,vo),p=k(this,Hi),g=Date.now(),y="error");const v=f.fetchStatus==="fetching",b=y==="pending",j=y==="error",S=b&&v,_=p!==void 0,C={status:y,fetchStatus:f.fetchStatus,isPending:b,isSuccess:y==="success",isError:j,isInitialLoading:S,isLoading:S,data:p,dataUpdatedAt:f.dataUpdatedAt,error:w,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:v,isRefetching:v&&!b,isLoadingError:j&&!_,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:j&&_,isStale:Ky(t,n),refetch:this.refetch,promise:k(this,Os),isEnabled:Nr(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const D=G=>{C.status==="error"?G.reject(C.error):C.data!==void 0&&G.resolve(C.data)},R=()=>{const G=le(this,Os,C.promise=kg());D(G)},P=k(this,Os);switch(P.status){case"pending":t.queryHash===r.queryHash&&D(P);break;case"fulfilled":(C.status==="error"||C.data!==P.value)&&R();break;case"rejected":(C.status!=="error"||C.error!==P.reason)&&R();break}}return C}updateResult(){const t=k(this,Dn),n=this.createResult(k(this,lt),this.options);if(le(this,ba,k(this,lt).state),le(this,qi,this.options),k(this,ba).data!==void 0&&le(this,Wi,k(this,lt)),Hc(n,t))return;le(this,Dn,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!k(this,Gi).size)return!0;const i=new Set(a??k(this,Gi));return this.options.throwOnError&&i.add("error"),Object.keys(k(this,Dn)).some(l=>{const c=l;return k(this,Dn)[c]!==t[c]&&i.has(c)})};Ke(this,St,w1).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ke(this,St,Og).call(this)}},Gn=new WeakMap,lt=new WeakMap,fu=new WeakMap,Dn=new WeakMap,ba=new WeakMap,qi=new WeakMap,Os=new WeakMap,vo=new WeakMap,mu=new WeakMap,Hi=new WeakMap,Wi=new WeakMap,ja=new WeakMap,Sa=new WeakMap,yo=new WeakMap,Gi=new WeakMap,St=new WeakSet,lc=function(t){Ke(this,St,Dg).call(this);let n=k(this,lt).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Tn)),n},Rg=function(){Ke(this,St,Ig).call(this);const t=Io(this.options.staleTime,k(this,lt));if(Ma||k(this,Dn).isStale||!Cg(t))return;const r=f1(k(this,Dn).dataUpdatedAt,t)+1;le(this,ja,ma.setTimeout(()=>{k(this,Dn).isStale||this.updateResult()},r))},Pg=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(k(this,lt)):this.options.refetchInterval)??!1},Ag=function(t){Ke(this,St,Mg).call(this),le(this,yo,t),!(Ma||Nr(this.options.enabled,k(this,lt))===!1||!Cg(k(this,yo))||k(this,yo)===0)&&le(this,Sa,ma.setInterval(()=>{(this.options.refetchIntervalInBackground||Uy.isFocused())&&Ke(this,St,lc).call(this)},k(this,yo)))},Og=function(){Ke(this,St,Rg).call(this),Ke(this,St,Ag).call(this,Ke(this,St,Pg).call(this))},Ig=function(){k(this,ja)&&(ma.clearTimeout(k(this,ja)),le(this,ja,void 0))},Mg=function(){k(this,Sa)&&(ma.clearInterval(k(this,Sa)),le(this,Sa,void 0))},Dg=function(){const t=k(this,Gn).getQueryCache().build(k(this,Gn),this.options);if(t===k(this,lt))return;const n=k(this,lt);le(this,lt,t),le(this,fu,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},w1=function(t){Xt.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(k(this,Dn))}),k(this,Gn).getQueryCache().notify({query:k(this,lt),type:"observerResultsUpdated"})})},Oj);function GI(e,t){return Nr(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function $w(e,t){return GI(e,t)||e.state.data!==void 0&&$g(e,t,t.refetchOnMount)}function $g(e,t,n){if(Nr(t.enabled,e)!==!1&&Io(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Ky(e,t)}return!1}function Lw(e,t,n,r){return(e!==t||Nr(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Ky(e,n)}function Ky(e,t){return Nr(t.enabled,e)!==!1&&e.isStaleByTime(Io(t.staleTime,e))}function QI(e,t){return!Hc(e.getCurrentResult(),t)}function Fw(e){return{onFetch:(t,n)=>{var h,f,m,p,w;const r=t.options,s=(m=(f=(h=t.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,a=((p=t.state.data)==null?void 0:p.pages)||[],i=((w=t.state.data)==null?void 0:w.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const y=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},x=m1(t.options,t.fetchOptions),v=async(b,j,S)=>{if(g)return Promise.reject();if(j==null&&b.pages.length)return Promise.resolve(b);const N=(()=>{const R={client:t.client,queryKey:t.queryKey,pageParam:j,direction:S?"backward":"forward",meta:t.options.meta};return y(R),R})(),C=await x(N),{maxPages:E}=t.options,D=S?UI:zI;return{pages:D(b.pages,C,E),pageParams:D(b.pageParams,j,E)}};if(s&&a.length){const b=s==="backward",j=b?YI:zw,S={pages:a,pageParams:i},_=j(r,S);l=await v(S,_,b)}else{const b=e??a.length;do{const j=c===0?i[0]??r.initialPageParam:zw(r,l);if(c>0&&j==null)break;l=await v(l,j),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var g,y;return(y=(g=t.options).persister)==null?void 0:y.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function zw(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function YI(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var pu,fs,$n,Na,ms,so,Ij,JI=(Ij=class extends y1{constructor(t){super();be(this,ms);be(this,pu);be(this,fs);be(this,$n);be(this,Na);le(this,pu,t.client),this.mutationId=t.mutationId,le(this,$n,t.mutationCache),le(this,fs,[]),this.state=t.state||b1(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){k(this,fs).includes(t)||(k(this,fs).push(t),this.clearGcTimeout(),k(this,$n).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){le(this,fs,k(this,fs).filter(n=>n!==t)),this.scheduleGc(),k(this,$n).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){k(this,fs).length||(this.state.status==="pending"?this.scheduleGc():k(this,$n).remove(this))}continue(){var t;return((t=k(this,Na))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,l,c,u,h,f,m,p,w,g,y,x,v,b,j,S,_,N,C,E;const n=()=>{Ke(this,ms,so).call(this,{type:"continue"})},r={client:k(this,pu),meta:this.options.meta,mutationKey:this.options.mutationKey};le(this,Na,v1({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(D,R)=>{Ke(this,ms,so).call(this,{type:"failed",failureCount:D,error:R})},onPause:()=>{Ke(this,ms,so).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>k(this,$n).canRun(this)}));const s=this.state.status==="pending",a=!k(this,Na).canStart();try{if(s)n();else{Ke(this,ms,so).call(this,{type:"pending",variables:t,isPaused:a}),await((l=(i=k(this,$n).config).onMutate)==null?void 0:l.call(i,t,this,r));const R=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,r));R!==this.state.context&&Ke(this,ms,so).call(this,{type:"pending",context:R,variables:t,isPaused:a})}const D=await k(this,Na).start();return await((f=(h=k(this,$n).config).onSuccess)==null?void 0:f.call(h,D,t,this.state.context,this,r)),await((p=(m=this.options).onSuccess)==null?void 0:p.call(m,D,t,this.state.context,r)),await((g=(w=k(this,$n).config).onSettled)==null?void 0:g.call(w,D,null,this.state.variables,this.state.context,this,r)),await((x=(y=this.options).onSettled)==null?void 0:x.call(y,D,null,t,this.state.context,r)),Ke(this,ms,so).call(this,{type:"success",data:D}),D}catch(D){try{throw await((b=(v=k(this,$n).config).onError)==null?void 0:b.call(v,D,t,this.state.context,this,r)),await((S=(j=this.options).onError)==null?void 0:S.call(j,D,t,this.state.context,r)),await((N=(_=k(this,$n).config).onSettled)==null?void 0:N.call(_,void 0,D,this.state.variables,this.state.context,this,r)),await((E=(C=this.options).onSettled)==null?void 0:E.call(C,void 0,D,t,this.state.context,r)),D}finally{Ke(this,ms,so).call(this,{type:"error",error:D})}}finally{k(this,$n).runNext(this)}}},pu=new WeakMap,fs=new WeakMap,$n=new WeakMap,Na=new WeakMap,ms=new WeakSet,so=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Xt.batch(()=>{k(this,fs).forEach(r=>{r.onMutationUpdate(t)}),k(this,$n).notify({mutation:this,type:"updated",action:t})})},Ij);function b1(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Is,Qr,gu,Mj,XI=(Mj=class extends Ha{constructor(t={}){super();be(this,Is);be(this,Qr);be(this,gu);this.config=t,le(this,Is,new Set),le(this,Qr,new Map),le(this,gu,0)}build(t,n,r){const s=new JI({client:t,mutationCache:this,mutationId:++Xu(this,gu)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){k(this,Is).add(t);const n=gd(t);if(typeof n=="string"){const r=k(this,Qr).get(n);r?r.push(t):k(this,Qr).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(k(this,Is).delete(t)){const n=gd(t);if(typeof n=="string"){const r=k(this,Qr).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&k(this,Qr).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=gd(t);if(typeof n=="string"){const r=k(this,Qr).get(n),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=gd(t);if(typeof n=="string"){const s=(r=k(this,Qr).get(n))==null?void 0:r.find(a=>a!==t&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Xt.batch(()=>{k(this,Is).forEach(t=>{this.notify({type:"removed",mutation:t})}),k(this,Is).clear(),k(this,Qr).clear()})}getAll(){return Array.from(k(this,Is))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Aw(n,r))}findAll(t={}){return this.getAll().filter(n=>Aw(t,n))}notify(t){Xt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Xt.batch(()=>Promise.all(t.map(n=>n.continue().catch(Tn))))}},Is=new WeakMap,Qr=new WeakMap,gu=new WeakMap,Mj);function gd(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Ms,xo,Qn,Ds,Bs,Qd,Lg,Dj,ZI=(Dj=class extends Ha{constructor(n,r){super();be(this,Bs);be(this,Ms);be(this,xo);be(this,Qn);be(this,Ds);le(this,Ms,n),this.setOptions(r),this.bindMethods(),Ke(this,Bs,Qd).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=k(this,Ms).defaultMutationOptions(n),Hc(this.options,r)||k(this,Ms).getMutationCache().notify({type:"observerOptionsUpdated",mutation:k(this,Qn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Da(r.mutationKey)!==Da(this.options.mutationKey)?this.reset():((s=k(this,Qn))==null?void 0:s.state.status)==="pending"&&k(this,Qn).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=k(this,Qn))==null||n.removeObserver(this)}onMutationUpdate(n){Ke(this,Bs,Qd).call(this),Ke(this,Bs,Lg).call(this,n)}getCurrentResult(){return k(this,xo)}reset(){var n;(n=k(this,Qn))==null||n.removeObserver(this),le(this,Qn,void 0),Ke(this,Bs,Qd).call(this),Ke(this,Bs,Lg).call(this)}mutate(n,r){var s;return le(this,Ds,r),(s=k(this,Qn))==null||s.removeObserver(this),le(this,Qn,k(this,Ms).getMutationCache().build(k(this,Ms),this.options)),k(this,Qn).addObserver(this),k(this,Qn).execute(n)}},Ms=new WeakMap,xo=new WeakMap,Qn=new WeakMap,Ds=new WeakMap,Bs=new WeakSet,Qd=function(){var r;const n=((r=k(this,Qn))==null?void 0:r.state)??b1();le(this,xo,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Lg=function(n){Xt.batch(()=>{var r,s,a,i,l,c,u,h;if(k(this,Ds)&&this.hasListeners()){const f=k(this,xo).variables,m=k(this,xo).context,p={client:k(this,Ms),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((s=(r=k(this,Ds)).onSuccess)==null||s.call(r,n.data,f,m,p),(i=(a=k(this,Ds)).onSettled)==null||i.call(a,n.data,null,f,m,p)):(n==null?void 0:n.type)==="error"&&((c=(l=k(this,Ds)).onError)==null||c.call(l,n.error,f,m,p),(h=(u=k(this,Ds)).onSettled)==null||h.call(u,void 0,n.error,f,m,p))}this.listeners.forEach(f=>{f(k(this,xo))})})},Dj);function Uw(e,t){const n=new Set(t);return e.filter(r=>!n.has(r))}function eM(e,t,n){const r=e.slice(0);return r[t]=n,r}var Qi,ar,Yi,Ji,Sr,wo,vu,yu,xu,Sn,Fg,zg,Ug,Bg,Kg,$j,tM=($j=class extends Ha{constructor(t,n,r){super();be(this,Sn);be(this,Qi);be(this,ar);be(this,Yi);be(this,Ji);be(this,Sr);be(this,wo);be(this,vu);be(this,yu);be(this,xu,[]);le(this,Qi,t),le(this,Ji,r),le(this,Yi,[]),le(this,Sr,[]),le(this,ar,[]),this.setQueries(n)}onSubscribe(){this.listeners.size===1&&k(this,Sr).forEach(t=>{t.subscribe(n=>{Ke(this,Sn,Bg).call(this,t,n)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,k(this,Sr).forEach(t=>{t.destroy()})}setQueries(t,n){le(this,Yi,t),le(this,Ji,n),Xt.batch(()=>{const r=k(this,Sr),s=Ke(this,Sn,Ug).call(this,k(this,Yi));le(this,xu,s),s.forEach(f=>f.observer.setOptions(f.defaultedQueryOptions));const a=s.map(f=>f.observer),i=a.map(f=>f.getCurrentResult()),l=r.length!==a.length,c=a.some((f,m)=>f!==r[m]),u=l||c,h=u?!0:i.some((f,m)=>{const p=k(this,ar)[m];return!p||!Hc(f,p)});!u&&!h||(u&&le(this,Sr,a),le(this,ar,i),this.hasListeners()&&(u&&(Uw(r,a).forEach(f=>{f.destroy()}),Uw(a,r).forEach(f=>{f.subscribe(m=>{Ke(this,Sn,Bg).call(this,f,m)})})),Ke(this,Sn,Kg).call(this)))})}getCurrentResult(){return k(this,ar)}getQueries(){return k(this,Sr).map(t=>t.getCurrentQuery())}getObservers(){return k(this,Sr)}getOptimisticResult(t,n){const r=Ke(this,Sn,Ug).call(this,t),s=r.map(a=>a.observer.getOptimisticResult(a.defaultedQueryOptions));return[s,a=>Ke(this,Sn,zg).call(this,a??s,n),()=>Ke(this,Sn,Fg).call(this,s,r)]}},Qi=new WeakMap,ar=new WeakMap,Yi=new WeakMap,Ji=new WeakMap,Sr=new WeakMap,wo=new WeakMap,vu=new WeakMap,yu=new WeakMap,xu=new WeakMap,Sn=new WeakSet,Fg=function(t,n){return n.map((r,s)=>{const a=t[s];return r.defaultedQueryOptions.notifyOnChangeProps?a:r.observer.trackResult(a,i=>{n.forEach(l=>{l.observer.trackProp(i)})})})},zg=function(t,n){return n?((!k(this,wo)||k(this,ar)!==k(this,yu)||n!==k(this,vu))&&(le(this,vu,n),le(this,yu,k(this,ar)),le(this,wo,Fy(k(this,wo),n(t)))),k(this,wo)):t},Ug=function(t){const n=new Map(k(this,Sr).map(s=>[s.options.queryHash,s])),r=[];return t.forEach(s=>{const a=k(this,Qi).defaultQueryOptions(s),i=n.get(a.queryHash);i?r.push({defaultedQueryOptions:a,observer:i}):r.push({defaultedQueryOptions:a,observer:new By(k(this,Qi),a)})}),r},Bg=function(t,n){const r=k(this,Sr).indexOf(t);r!==-1&&(le(this,ar,eM(k(this,ar),r,n)),Ke(this,Sn,Kg).call(this))},Kg=function(){var t;if(this.hasListeners()){const n=k(this,wo),r=Ke(this,Sn,Fg).call(this,k(this,ar),k(this,xu)),s=Ke(this,Sn,zg).call(this,r,(t=k(this,Ji))==null?void 0:t.combine);n!==s&&Xt.batch(()=>{this.listeners.forEach(a=>{a(k(this,ar))})})}},$j),ps,Lj,nM=(Lj=class extends Ha{constructor(t={}){super();be(this,ps);this.config=t,le(this,ps,new Map)}build(t,n,r){const s=n.queryKey,a=n.queryHash??Ly(s,n);let i=this.get(a);return i||(i=new WI({client:t,queryKey:s,queryHash:a,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(i)),i}add(t){k(this,ps).has(t.queryHash)||(k(this,ps).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=k(this,ps).get(t.queryHash);n&&(t.destroy(),n===t&&k(this,ps).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Xt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return k(this,ps).get(t)}getAll(){return[...k(this,ps).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Pw(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Pw(t,r)):n}notify(t){Xt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Xt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Xt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ps=new WeakMap,Lj),Yt,bo,jo,Xi,Zi,So,el,tl,Fj,rM=(Fj=class{constructor(e={}){be(this,Yt);be(this,bo);be(this,jo);be(this,Xi);be(this,Zi);be(this,So);be(this,el);be(this,tl);le(this,Yt,e.queryCache||new nM),le(this,bo,e.mutationCache||new XI),le(this,jo,e.defaultOptions||{}),le(this,Xi,new Map),le(this,Zi,new Map),le(this,So,0)}mount(){Xu(this,So)._++,k(this,So)===1&&(le(this,el,Uy.subscribe(async e=>{e&&(await this.resumePausedMutations(),k(this,Yt).onFocus())})),le(this,tl,Th.subscribe(async e=>{e&&(await this.resumePausedMutations(),k(this,Yt).onOnline())})))}unmount(){var e,t;Xu(this,So)._--,k(this,So)===0&&((e=k(this,el))==null||e.call(this),le(this,el,void 0),(t=k(this,tl))==null||t.call(this),le(this,tl,void 0))}isFetching(e){return k(this,Yt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return k(this,bo).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=k(this,Yt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=k(this,Yt).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Io(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return k(this,Yt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=k(this,Yt).get(r.queryHash),a=s==null?void 0:s.state.data,i=$I(t,a);if(i!==void 0)return k(this,Yt).build(this,r).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return Xt.batch(()=>k(this,Yt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=k(this,Yt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=k(this,Yt);Xt.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=k(this,Yt);return Xt.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Xt.batch(()=>k(this,Yt).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Tn).catch(Tn)}invalidateQueries(e,t={}){return Xt.batch(()=>(k(this,Yt).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Xt.batch(()=>k(this,Yt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Tn)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Tn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=k(this,Yt).build(this,t);return n.isStaleByTime(Io(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Tn).catch(Tn)}fetchInfiniteQuery(e){return e.behavior=Fw(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Tn).catch(Tn)}ensureInfiniteQueryData(e){return e.behavior=Fw(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Th.isOnline()?k(this,bo).resumePausedMutations():Promise.resolve()}getQueryCache(){return k(this,Yt)}getMutationCache(){return k(this,bo)}getDefaultOptions(){return k(this,jo)}setDefaultOptions(e){le(this,jo,e)}setQueryDefaults(e,t){k(this,Xi).set(Da(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...k(this,Xi).values()],n={};return t.forEach(r=>{qc(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){k(this,Zi).set(Da(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...k(this,Zi).values()],n={};return t.forEach(r=>{qc(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...k(this,jo).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Ly(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===zy&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...k(this,jo).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){k(this,Yt).clear(),k(this,bo).clear()}},Yt=new WeakMap,bo=new WeakMap,jo=new WeakMap,Xi=new WeakMap,Zi=new WeakMap,So=new WeakMap,el=new WeakMap,tl=new WeakMap,Fj),j1=d.createContext(void 0),Nl=e=>{const t=d.useContext(j1);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},sM=({client:e,children:t})=>(d.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(j1.Provider,{value:e,children:t})),S1=d.createContext(!1),N1=()=>d.useContext(S1);S1.Provider;function oM(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var aM=d.createContext(oM()),C1=()=>d.useContext(aM),_1=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},E1=e=>{d.useEffect(()=>{e.clearReset()},[e])},k1=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||p1(n,[e.error,r])),T1=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},R1=(e,t)=>e.isLoading&&e.isFetching&&!t,Vg=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Rh=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function iM({queries:e,...t},n){const r=Nl(),s=N1(),a=C1(),i=d.useMemo(()=>e.map(g=>{const y=r.defaultQueryOptions(g);return y._optimisticResults=s?"isRestoring":"optimistic",y}),[e,r,s]);i.forEach(g=>{T1(g),_1(g,a)}),E1(a);const[l]=d.useState(()=>new tM(r,i,t)),[c,u,h]=l.getOptimisticResult(i,t.combine),f=!s&&t.subscribed!==!1;d.useSyncExternalStore(d.useCallback(g=>f?l.subscribe(Xt.batchCalls(g)):Tn,[l,f]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),d.useEffect(()=>{l.setQueries(i,t)},[i,t,l]);const p=c.some((g,y)=>Vg(i[y],g))?c.flatMap((g,y)=>{const x=i[y];if(x){const v=new By(r,x);if(Vg(x,g))return Rh(x,v,a);R1(g,s)&&Rh(x,v,a)}return[]}):[];if(p.length>0)throw Promise.all(p);const w=c.find((g,y)=>{const x=i[y];return x&&k1({result:g,errorResetBoundary:a,throwOnError:x.throwOnError,query:r.getQueryCache().get(x.queryHash),suspense:x.suspense})});if(w!=null&&w.error)throw w.error;return u(h())}function lM(e,t,n){var f,m,p,w,g;const r=N1(),s=C1(),a=Nl(),i=a.defaultQueryOptions(e);(m=(f=a.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||m.call(f,i),i._optimisticResults=r?"isRestoring":"optimistic",T1(i),_1(i,s),E1(s);const l=!a.getQueryCache().get(i.queryHash),[c]=d.useState(()=>new t(a,i)),u=c.getOptimisticResult(i),h=!r&&e.subscribed!==!1;if(d.useSyncExternalStore(d.useCallback(y=>{const x=h?c.subscribe(Xt.batchCalls(y)):Tn;return c.updateResult(),x},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),d.useEffect(()=>{c.setOptions(i)},[i,c]),Vg(i,u))throw Rh(i,c,s);if(k1({result:u,errorResetBoundary:s,throwOnError:i.throwOnError,query:a.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw u.error;if((w=(p=a.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||w.call(p,i,u),i.experimental_prefetchInRender&&!Ma&&R1(u,r)){const y=l?Rh(i,c,s):(g=a.getQueryCache().get(i.queryHash))==null?void 0:g.promise;y==null||y.catch(Tn).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?u:c.trackResult(u)}function ot(e,t){return lM(e,By)}function at(e,t){const n=Nl(),[r]=d.useState(()=>new ZI(n,e));d.useEffect(()=>{r.setOptions(e)},[r,e]);const s=d.useSyncExternalStore(d.useCallback(i=>r.subscribe(Xt.batchCalls(i)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=d.useCallback((i,l)=>{r.mutate(i,l).catch(Tn)},[r]);if(s.error&&p1(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}class cM{constructor(){this.config={enableComponentTracking:!1,enableAPILogging:!1,enableStateTracking:!1,logLevel:"info"}}trackComponent(t,n,r){this.config.enableComponentTracking&&(console.group(` Component: ${t}`),console.log(`Action: ${n}`),r&&console.log("Data:",r),console.trace("Component stack"),console.groupEnd())}trackAPICall(t,n,r,s){if(!this.config.enableAPILogging||r===404&&t.includes("/api/analysis/date/"))return;const i=s?"":r&&r>=400?"":"";console.group(`${i} API Call: ${n} ${t}`),r&&console.log(`Status: ${r}`),s&&(console.error("Error:",s),console.trace("Error stack")),console.groupEnd()}trackHookState(t,n,r){this.config.enableStateTracking&&(console.group(` Hook: ${t}`),r&&console.log(`Action: ${r}`),console.log("State:",n),console.groupEnd())}reportError(t,n,r){console.group(" Error Report"),console.error("Error:",t),console.error("Error message:",t.message),console.error("Error stack:",t.stack),n&&console.error("Error info:",n),r&&console.error("Context:",r),console.trace("Current stack"),console.groupEnd(),typeof window<"u"&&window.Sentry&&window.Sentry.captureException(t,{extra:{errorInfo:n,context:r}})}debugRuntimeIssue(t,n){console.group(` Runtime Debug: ${t}`),console.error("Issue details:",n),console.log("Window object keys:",Object.keys(window).slice(0,20)),console.log("Document readyState:",document.readyState),console.log("Location:",window.location.href),console.trace("Debug stack"),console.groupEnd()}}const js=new cM;js.trackComponent.bind(js);const qg=js.trackAPICall.bind(js);js.trackHookState.bind(js);const uM=js.reportError.bind(js);js.debugRuntimeIssue.bind(js);async function P1(e){if(!e.ok){const t=await e.text()||e.statusText,n=new Error(`${e.status}: ${t}`);throw qg(e.url,"unknown",e.status,n),n}}async function Tr(e,t,n){const r=performance.now();try{const s=await fetch(t,{method:e,headers:n?{"Content-Type":"application/json"}:{},body:n?JSON.stringify(n):void 0,credentials:"include"}),a=performance.now()-r;return qg(t,e,s.status),await P1(s),s}catch(s){throw qg(t,e,void 0,s),uM(s,{url:t,method:e,data:n},"API Request"),s}}const dM=({on401:e})=>async({queryKey:t})=>{const n=await fetch(t[0],{credentials:"include"}),r=t[0];return n.status===404&&r.includes("/api/analysis/date/")?null:(await P1(n),await n.json())},X=new rM({defaultOptions:{queries:{queryFn:dM({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:300*1e3,gcTime:1800*1e3,retry:!1},mutations:{retry:!1}}});function hM(e){X.removeQueries({queryKey:[`/api/analysis/date/${e}`]}),X.removeQueries({queryKey:[`/api/news/fetch/${e}`]});const t=e.substring(0,4);X.removeQueries({queryKey:[`/api/analysis/year/${t}`]})}const fM=1,mM=1e6;let Xm=0;function pM(){return Xm=(Xm+1)%Number.MAX_SAFE_INTEGER,Xm.toString()}const Zm=new Map,Bw=e=>{if(Zm.has(e))return;const t=setTimeout(()=>{Zm.delete(e),jc({type:"REMOVE_TOAST",toastId:e})},mM);Zm.set(e,t)},gM=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,fM)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Bw(n):e.toasts.forEach(r=>{Bw(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Yd=[];let Jd={toasts:[]};function jc(e){Jd=gM(Jd,e),Yd.forEach(t=>{t(Jd)})}function Hg({...e}){const t=pM(),n=s=>jc({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>jc({type:"DISMISS_TOAST",toastId:t});return jc({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function wr(){const[e,t]=d.useState(Jd);return d.useEffect(()=>(Yd.push(t),()=>{const n=Yd.indexOf(t);n>-1&&Yd.splice(n,1)}),[e]),{...e,toast:Hg,dismiss:n=>jc({type:"DISMISS_TOAST",toastId:n})}}function Z(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Kw(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Cl(...e){return t=>{let n=!1;const r=e.map(s=>{const a=Kw(s,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():Kw(e[s],null)}}}}function qe(...e){return d.useCallback(Cl(...e),e)}function vM(e,t){const n=d.createContext(t),r=a=>{const{children:i,...l}=a,c=d.useMemo(()=>l,Object.values(l));return o.jsx(n.Provider,{value:c,children:i})};r.displayName=e+"Provider";function s(a){const i=d.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,s]}function Nn(e,t=[]){let n=[];function r(a,i){const l=d.createContext(i),c=n.length;n=[...n,i];const u=f=>{var x;const{scope:m,children:p,...w}=f,g=((x=m==null?void 0:m[e])==null?void 0:x[c])||l,y=d.useMemo(()=>w,Object.values(w));return o.jsx(g.Provider,{value:y,children:p})};u.displayName=a+"Provider";function h(f,m){var g;const p=((g=m==null?void 0:m[e])==null?void 0:g[c])||l,w=d.useContext(p);if(w)return w;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[u,h]}const s=()=>{const a=n.map(i=>d.createContext(i));return function(l){const c=(l==null?void 0:l[e])||a;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,yM(s,...t)]}function yM(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const i=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function $a(e){const t=xM(e),n=d.forwardRef((r,s)=>{const{children:a,...i}=r,l=d.Children.toArray(a),c=l.find(wM);if(c){const u=c.props.children,h=l.map(f=>f===c?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:f);return o.jsx(t,{...i,ref:s,children:d.isValidElement(u)?d.cloneElement(u,void 0,h):null})}return o.jsx(t,{...i,ref:s,children:a})});return n.displayName=`${e}.Slot`,n}function xM(e){const t=d.forwardRef((n,r)=>{const{children:s,...a}=n;if(d.isValidElement(s)){const i=jM(s),l=bM(a,s.props);return s.type!==d.Fragment&&(l.ref=r?Cl(r,i):i),d.cloneElement(s,l)}return d.Children.count(s)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var A1=Symbol("radix.slottable");function O1(e){const t=({children:n})=>o.jsx(o.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=A1,t}function wM(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===A1}function bM(e,t){const n={...t};for(const r in t){const s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}function jM(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function _l(e){const t=e+"CollectionProvider",[n,r]=Nn(t),[s,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=g=>{const{scope:y,children:x}=g,v=Ce.useRef(null),b=Ce.useRef(new Map).current;return o.jsx(s,{scope:y,itemMap:b,collectionRef:v,children:x})};i.displayName=t;const l=e+"CollectionSlot",c=$a(l),u=Ce.forwardRef((g,y)=>{const{scope:x,children:v}=g,b=a(l,x),j=qe(y,b.collectionRef);return o.jsx(c,{ref:j,children:v})});u.displayName=l;const h=e+"CollectionItemSlot",f="data-radix-collection-item",m=$a(h),p=Ce.forwardRef((g,y)=>{const{scope:x,children:v,...b}=g,j=Ce.useRef(null),S=qe(y,j),_=a(h,x);return Ce.useEffect(()=>(_.itemMap.set(j,{ref:j,...b}),()=>void _.itemMap.delete(j))),o.jsx(m,{[f]:"",ref:S,children:v})});p.displayName=h;function w(g){const y=a(e+"CollectionConsumer",g);return Ce.useCallback(()=>{const v=y.collectionRef.current;if(!v)return[];const b=Array.from(v.querySelectorAll(`[${f}]`));return Array.from(y.itemMap.values()).sort((_,N)=>b.indexOf(_.ref.current)-b.indexOf(N.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:i,Slot:u,ItemSlot:p},w,r]}var SM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ye=SM.reduce((e,t)=>{const n=$a(`Primitive.${t}`),r=d.forwardRef((s,a)=>{const{asChild:i,...l}=s,c=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Wc(e,t){e&&Or.flushSync(()=>e.dispatchEvent(t))}function Et(e){const t=d.useRef(e);return d.useEffect(()=>{t.current=e}),d.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function NM(e,t=globalThis==null?void 0:globalThis.document){const n=Et(e);d.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var CM="DismissableLayer",Wg="dismissableLayer.update",_M="dismissableLayer.pointerDownOutside",EM="dismissableLayer.focusOutside",Vw,I1=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Js=d.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,onDismiss:l,...c}=e,u=d.useContext(I1),[h,f]=d.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=d.useState({}),w=qe(t,N=>f(N)),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(y),v=h?g.indexOf(h):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,j=v>=x,S=TM(N=>{const C=N.target,E=[...u.branches].some(D=>D.contains(C));!j||E||(s==null||s(N),i==null||i(N),N.defaultPrevented||l==null||l())},m),_=RM(N=>{const C=N.target;[...u.branches].some(D=>D.contains(C))||(a==null||a(N),i==null||i(N),N.defaultPrevented||l==null||l())},m);return NM(N=>{v===u.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},m),d.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Vw=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),qw(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Vw)}},[h,m,n,u]),d.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),qw())},[h,u]),d.useEffect(()=>{const N=()=>p({});return document.addEventListener(Wg,N),()=>document.removeEventListener(Wg,N)},[]),o.jsx(ye.div,{...c,ref:w,style:{pointerEvents:b?j?"auto":"none":void 0,...e.style},onFocusCapture:Z(e.onFocusCapture,_.onFocusCapture),onBlurCapture:Z(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:Z(e.onPointerDownCapture,S.onPointerDownCapture)})});Js.displayName=CM;var kM="DismissableLayerBranch",M1=d.forwardRef((e,t)=>{const n=d.useContext(I1),r=d.useRef(null),s=qe(t,r);return d.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(ye.div,{...e,ref:s})});M1.displayName=kM;function TM(e,t=globalThis==null?void 0:globalThis.document){const n=Et(e),r=d.useRef(!1),s=d.useRef(()=>{});return d.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){D1(_M,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function RM(e,t=globalThis==null?void 0:globalThis.document){const n=Et(e),r=d.useRef(!1);return d.useEffect(()=>{const s=a=>{a.target&&!r.current&&D1(EM,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function qw(){const e=new CustomEvent(Wg);document.dispatchEvent(e)}function D1(e,t,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Wc(s,a):s.dispatchEvent(a)}var PM=Js,AM=M1,en=globalThis!=null&&globalThis.document?d.useLayoutEffect:()=>{},OM="Portal",Wa=d.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[s,a]=d.useState(!1);en(()=>a(!0),[]);const i=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?e1.createPortal(o.jsx(ye.div,{...r,ref:t}),i):null});Wa.displayName=OM;function IM(e,t){return d.useReducer((n,r)=>t[n][r]??n,e)}var $t=e=>{const{present:t,children:n}=e,r=MM(t),s=typeof n=="function"?n({present:r.isPresent}):d.Children.only(n),a=qe(r.ref,DM(s));return typeof n=="function"||r.isPresent?d.cloneElement(s,{ref:a}):null};$t.displayName="Presence";function MM(e){const[t,n]=d.useState(),r=d.useRef(null),s=d.useRef(e),a=d.useRef("none"),i=e?"mounted":"unmounted",[l,c]=IM(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const u=vd(r.current);a.current=l==="mounted"?u:"none"},[l]),en(()=>{const u=r.current,h=s.current;if(h!==e){const m=a.current,p=vd(u);e?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&m!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),en(()=>{if(t){let u;const h=t.ownerDocument.defaultView??window,f=p=>{const g=vd(r.current).includes(CSS.escape(p.animationName));if(p.target===t&&g&&(c("ANIMATION_END"),!s.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",u=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},m=p=>{p.target===t&&(a.current=vd(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{h.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:d.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function vd(e){return(e==null?void 0:e.animationName)||"none"}function DM(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var $M=cf[" useInsertionEffect ".trim().toString()]||en;function rr({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,a,i]=LM({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const h=d.useRef(e!==void 0);d.useEffect(()=>{const f=h.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,r])}const u=d.useCallback(h=>{var f;if(l){const m=FM(h)?h(e):h;m!==e&&((f=i.current)==null||f.call(i,m))}else a(h)},[l,e,a,i]);return[c,u]}function LM({defaultProp:e,onChange:t}){const[n,r]=d.useState(e),s=d.useRef(n),a=d.useRef(t);return $M(()=>{a.current=t},[t]),d.useEffect(()=>{var i;s.current!==n&&((i=a.current)==null||i.call(a,n),s.current=n)},[n,s]),[n,r,a]}function FM(e){return typeof e=="function"}var $1=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),zM="VisuallyHidden",Ef=d.forwardRef((e,t)=>o.jsx(ye.span,{...e,ref:t,style:{...$1,...e.style}}));Ef.displayName=zM;var L1=Ef,Vy="ToastProvider",[qy,UM,BM]=_l("Toast"),[F1]=Nn("Toast",[BM]),[KM,kf]=F1(Vy),z1=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:i}=e,[l,c]=d.useState(null),[u,h]=d.useState(0),f=d.useRef(!1),m=d.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Vy}\`. Expected non-empty \`string\`.`),o.jsx(qy.Provider,{scope:t,children:o.jsx(KM,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:d.useCallback(()=>h(p=>p+1),[]),onToastRemove:d.useCallback(()=>h(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:i})})};z1.displayName=Vy;var U1="ToastViewport",VM=["F8"],Gg="toast.viewportPause",Qg="toast.viewportResume",B1=d.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=VM,label:s="Notifications ({hotkey})",...a}=e,i=kf(U1,n),l=UM(n),c=d.useRef(null),u=d.useRef(null),h=d.useRef(null),f=d.useRef(null),m=qe(t,f,i.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=i.toastCount>0;d.useEffect(()=>{const y=x=>{var b;r.length!==0&&r.every(j=>x[j]||x.code===j)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),d.useEffect(()=>{const y=c.current,x=f.current;if(w&&y&&x){const v=()=>{if(!i.isClosePausedRef.current){const _=new CustomEvent(Gg);x.dispatchEvent(_),i.isClosePausedRef.current=!0}},b=()=>{if(i.isClosePausedRef.current){const _=new CustomEvent(Qg);x.dispatchEvent(_),i.isClosePausedRef.current=!1}},j=_=>{!y.contains(_.relatedTarget)&&b()},S=()=>{y.contains(document.activeElement)||b()};return y.addEventListener("focusin",v),y.addEventListener("focusout",j),y.addEventListener("pointermove",v),y.addEventListener("pointerleave",S),window.addEventListener("blur",v),window.addEventListener("focus",b),()=>{y.removeEventListener("focusin",v),y.removeEventListener("focusout",j),y.removeEventListener("pointermove",v),y.removeEventListener("pointerleave",S),window.removeEventListener("blur",v),window.removeEventListener("focus",b)}}},[w,i.isClosePausedRef]);const g=d.useCallback(({tabbingDirection:y})=>{const v=l().map(b=>{const j=b.ref.current,S=[j,...rD(j)];return y==="forwards"?S:S.reverse()});return(y==="forwards"?v.reverse():v).flat()},[l]);return d.useEffect(()=>{const y=f.current;if(y){const x=v=>{var S,_,N;const b=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!b){const C=document.activeElement,E=v.shiftKey;if(v.target===y&&E){(S=u.current)==null||S.focus();return}const P=g({tabbingDirection:E?"backwards":"forwards"}),G=P.findIndex(Q=>Q===C);ep(P.slice(G+1))?v.preventDefault():E?(_=u.current)==null||_.focus():(N=h.current)==null||N.focus()}};return y.addEventListener("keydown",x),()=>y.removeEventListener("keydown",x)}},[l,g]),o.jsxs(AM,{ref:c,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&o.jsx(Yg,{ref:u,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});ep(y)}}),o.jsx(qy.Slot,{scope:n,children:o.jsx(ye.ol,{tabIndex:-1,...a,ref:m})}),w&&o.jsx(Yg,{ref:h,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});ep(y)}})]})});B1.displayName=U1;var K1="ToastFocusProxy",Yg=d.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,a=kf(K1,n);return o.jsx(Ef,{tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:i=>{var u;const l=i.relatedTarget;!((u=a.viewport)!=null&&u.contains(l))&&r()}})});Yg.displayName=K1;var Eu="Toast",qM="toast.swipeStart",HM="toast.swipeMove",WM="toast.swipeCancel",GM="toast.swipeEnd",V1=d.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:a,...i}=e,[l,c]=rr({prop:r,defaultProp:s??!0,onChange:a,caller:Eu});return o.jsx($t,{present:n||l,children:o.jsx(JM,{open:l,...i,ref:t,onClose:()=>c(!1),onPause:Et(e.onPause),onResume:Et(e.onResume),onSwipeStart:Z(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Z(e.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Z(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Z(e.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});V1.displayName=Eu;var[QM,YM]=F1(Eu,{onClose(){}}),JM=d.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:a,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:p,...w}=e,g=kf(Eu,n),[y,x]=d.useState(null),v=qe(t,Q=>x(Q)),b=d.useRef(null),j=d.useRef(null),S=s||g.duration,_=d.useRef(0),N=d.useRef(S),C=d.useRef(0),{onToastAdd:E,onToastRemove:D}=g,R=Et(()=>{var ce;(y==null?void 0:y.contains(document.activeElement))&&((ce=g.viewport)==null||ce.focus()),i()}),P=d.useCallback(Q=>{!Q||Q===1/0||(window.clearTimeout(C.current),_.current=new Date().getTime(),C.current=window.setTimeout(R,Q))},[R]);d.useEffect(()=>{const Q=g.viewport;if(Q){const ce=()=>{P(N.current),u==null||u()},Y=()=>{const O=new Date().getTime()-_.current;N.current=N.current-O,window.clearTimeout(C.current),c==null||c()};return Q.addEventListener(Gg,Y),Q.addEventListener(Qg,ce),()=>{Q.removeEventListener(Gg,Y),Q.removeEventListener(Qg,ce)}}},[g.viewport,S,c,u,P]),d.useEffect(()=>{a&&!g.isClosePausedRef.current&&P(S)},[a,S,g.isClosePausedRef,P]),d.useEffect(()=>(E(),()=>D()),[E,D]);const G=d.useMemo(()=>y?J1(y):null,[y]);return g.viewport?o.jsxs(o.Fragment,{children:[G&&o.jsx(XM,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:G}),o.jsx(QM,{scope:n,onClose:R,children:Or.createPortal(o.jsx(qy.ItemSlot,{scope:n,children:o.jsx(PM,{asChild:!0,onEscapeKeyDown:Z(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||R(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(ye.li,{tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection,...w,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Z(e.onKeyDown,Q=>{Q.key==="Escape"&&(l==null||l(Q.nativeEvent),Q.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:Z(e.onPointerDown,Q=>{Q.button===0&&(b.current={x:Q.clientX,y:Q.clientY})}),onPointerMove:Z(e.onPointerMove,Q=>{if(!b.current)return;const ce=Q.clientX-b.current.x,Y=Q.clientY-b.current.y,O=!!j.current,T=["left","right"].includes(g.swipeDirection),B=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,$=T?B(0,ce):0,W=T?0:B(0,Y),ae=Q.pointerType==="touch"?10:2,_e={x:$,y:W},ge={originalEvent:Q,delta:_e};O?(j.current=_e,yd(HM,f,ge,{discrete:!1})):Hw(_e,g.swipeDirection,ae)?(j.current=_e,yd(qM,h,ge,{discrete:!1}),Q.target.setPointerCapture(Q.pointerId)):(Math.abs(ce)>ae||Math.abs(Y)>ae)&&(b.current=null)}),onPointerUp:Z(e.onPointerUp,Q=>{const ce=j.current,Y=Q.target;if(Y.hasPointerCapture(Q.pointerId)&&Y.releasePointerCapture(Q.pointerId),j.current=null,b.current=null,ce){const O=Q.currentTarget,T={originalEvent:Q,delta:ce};Hw(ce,g.swipeDirection,g.swipeThreshold)?yd(GM,p,T,{discrete:!0}):yd(WM,m,T,{discrete:!0}),O.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),XM=e=>{const{__scopeToast:t,children:n,...r}=e,s=kf(Eu,t),[a,i]=d.useState(!1),[l,c]=d.useState(!1);return tD(()=>i(!0)),d.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:o.jsx(Wa,{asChild:!0,children:o.jsx(Ef,{...r,children:a&&o.jsxs(o.Fragment,{children:[s.label," ",n]})})})},ZM="ToastTitle",q1=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return o.jsx(ye.div,{...r,ref:t})});q1.displayName=ZM;var eD="ToastDescription",H1=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return o.jsx(ye.div,{...r,ref:t})});H1.displayName=eD;var W1="ToastAction",G1=d.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?o.jsx(Y1,{altText:n,asChild:!0,children:o.jsx(Hy,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${W1}\`. Expected non-empty \`string\`.`),null)});G1.displayName=W1;var Q1="ToastClose",Hy=d.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=YM(Q1,n);return o.jsx(Y1,{asChild:!0,children:o.jsx(ye.button,{type:"button",...r,ref:t,onClick:Z(e.onClick,s.onClose)})})});Hy.displayName=Q1;var Y1=d.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return o.jsx(ye.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function J1(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),nD(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const i=r.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...J1(r))}}),t}function yd(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Wc(s,a):s.dispatchEvent(a)}var Hw=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),a=r>s;return t==="left"||t==="right"?a&&r>n:!a&&s>n};function tD(e=()=>{}){const t=Et(e);en(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function nD(e){return e.nodeType===e.ELEMENT_NODE}function rD(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function ep(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var sD=z1,X1=B1,Z1=V1,eC=q1,tC=H1,nC=G1,rC=Hy;function sC(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=sC(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function oC(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=sC(e))&&(r&&(r+=" "),r+=t);return r}const Ww=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Gw=oC,Ho=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return Gw(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=t,i=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=a==null?void 0:a[u];if(h===null)return null;const m=Ww(h)||Ww(f);return s[u][m]}),l=n&&Object.entries(n).reduce((u,h)=>{let[f,m]=h;return m===void 0||(u[f]=m),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:m,...p}=h;return Object.entries(p).every(w=>{let[g,y]=w;return Array.isArray(y)?y.includes({...a,...l}[g]):{...a,...l}[g]===y})?[...u,f,m]:u},[]);return Gw(e,i,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),aC=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var aD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=d.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:i,...l},c)=>d.createElement("svg",{ref:c,...aD,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:aC("lucide",s),...l},[...i.map(([u,h])=>d.createElement(u,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=(e,t)=>{const n=d.forwardRef(({className:r,...s},a)=>d.createElement(iD,{ref:a,iconNode:t,className:aC(`lucide-${oD(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=Te("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=Te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=Te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=Te("Bitcoin",[["path",{d:"M11.767 19.089c4.924.868 6.14-6.025 1.216-6.894m-1.216 6.894L5.86 18.047m5.908 1.042-.347 1.97m1.563-8.864c4.924.869 6.14-6.025 1.215-6.893m-1.215 6.893-3.94-.694m5.155-6.2L8.29 4.26m5.908 1.042.348-1.97M7.48 20.364l3.126-17.727",key:"yr8idg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=Te("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=Te("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=Te("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=Te("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=Te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=Te("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=Te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=Te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=Te("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=Te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=Te("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=Te("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=Te("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=Te("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=Te("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=Te("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=Te("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=Te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=Te("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=Te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=Te("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=Te("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=Te("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=Te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=Te("FlagOff",[["path",{d:"M8 2c3 0 5 2 8 2s4-1 4-1v11",key:"9rwyz9"}],["path",{d:"M4 22V4",key:"1plyxx"}],["path",{d:"M4 15s1-1 4-1 5 2 8 2",key:"1myooe"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=Te("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=Te("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=Te("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=Te("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=Te("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=Te("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=Te("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=Te("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=Te("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=Te("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=Te("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=Te("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=Te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=Te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=Te("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=Te("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=Te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=Te("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=Te("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=Te("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=Te("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=Te("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=Te("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=Te("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=Te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=Te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=Te("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=Te("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=Te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=Te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=Te("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Wy="-",SD=e=>{const t=CD(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{const l=i.split(Wy);return l[0]===""&&l.length!==1&&l.shift(),gC(l,t)||ND(i)},getConflictingClassGroupIds:(i,l)=>{const c=n[i]||[];return l&&r[i]?[...c,...r[i]]:c}}},gC=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?gC(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const a=e.join(Wy);return(i=t.validators.find(({validator:l})=>l(a)))==null?void 0:i.classGroupId},eb=/^\[(.+)\]$/,ND=e=>{if(eb.test(e)){const t=eb.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},CD=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return ED(Object.entries(e.classGroups),n).forEach(([a,i])=>{sv(i,r,a,t)}),r},sv=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const a=s===""?t:tb(t,s);a.classGroupId=n;return}if(typeof s=="function"){if(_D(s)){sv(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,i])=>{sv(i,tb(t,a),n,r)})})},tb=(e,t)=>{let n=e;return t.split(Wy).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},_D=e=>e.isThemeGetter,ED=(e,t)=>t?e.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([i,l])=>[t+i,l])):a);return[n,s]}):e,kD=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(a,i)=>{n.set(a,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(a){let i=n.get(a);if(i!==void 0)return i;if((i=r.get(a))!==void 0)return s(a,i),i},set(a,i){n.has(a)?n.set(a,i):s(a,i)}}},vC="!",TD=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],a=t.length,i=l=>{const c=[];let u=0,h=0,f;for(let y=0;y<l.length;y++){let x=l[y];if(u===0){if(x===s&&(r||l.slice(y,y+a)===t)){c.push(l.slice(h,y)),h=y+a;continue}if(x==="/"){f=y;continue}}x==="["?u++:x==="]"&&u--}const m=c.length===0?l:l.substring(h),p=m.startsWith(vC),w=p?m.substring(1):m,g=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:w,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:i}):i},RD=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},PD=e=>({cache:kD(e.cacheSize),parseClassName:TD(e),...SD(e)}),AD=/\s+/,OD=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,a=[],i=e.trim().split(AD);let l="";for(let c=i.length-1;c>=0;c-=1){const u=i[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:p}=n(u);let w=!!p,g=r(w?m.substring(0,p):m);if(!g){if(!w){l=u+(l.length>0?" "+l:l);continue}if(g=r(m),!g){l=u+(l.length>0?" "+l:l);continue}w=!1}const y=RD(h).join(":"),x=f?y+vC:y,v=x+g;if(a.includes(v))continue;a.push(v);const b=s(g,w);for(let j=0;j<b.length;++j){const S=b[j];a.push(x+S)}l=u+(l.length>0?" "+l:l)}return l};function ID(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=yC(t))&&(r&&(r+=" "),r+=n);return r}const yC=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=yC(e[r]))&&(n&&(n+=" "),n+=t);return n};function MD(e,...t){let n,r,s,a=i;function i(c){const u=t.reduce((h,f)=>f(h),e());return n=PD(u),r=n.cache.get,s=n.cache.set,a=l,l(c)}function l(c){const u=r(c);if(u)return u;const h=OD(c,n);return s(c,h),h}return function(){return a(ID.apply(null,arguments))}}const It=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},xC=/^\[(?:([a-z-]+):)?(.+)\]$/i,DD=/^\d+\/\d+$/,$D=new Set(["px","full","screen"]),LD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,FD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,zD=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,UD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,BD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ks=e=>Oi(e)||$D.has(e)||DD.test(e),to=e=>El(e,"length",YD),Oi=e=>!!e&&!Number.isNaN(Number(e)),tp=e=>El(e,"number",Oi),ec=e=>!!e&&Number.isInteger(Number(e)),KD=e=>e.endsWith("%")&&Oi(e.slice(0,-1)),Je=e=>xC.test(e),no=e=>LD.test(e),VD=new Set(["length","size","percentage"]),qD=e=>El(e,VD,wC),HD=e=>El(e,"position",wC),WD=new Set(["image","url"]),GD=e=>El(e,WD,XD),QD=e=>El(e,"",JD),tc=()=>!0,El=(e,t,n)=>{const r=xC.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},YD=e=>FD.test(e)&&!zD.test(e),wC=()=>!1,JD=e=>UD.test(e),XD=e=>BD.test(e),ZD=()=>{const e=It("colors"),t=It("spacing"),n=It("blur"),r=It("brightness"),s=It("borderColor"),a=It("borderRadius"),i=It("borderSpacing"),l=It("borderWidth"),c=It("contrast"),u=It("grayscale"),h=It("hueRotate"),f=It("invert"),m=It("gap"),p=It("gradientColorStops"),w=It("gradientColorStopPositions"),g=It("inset"),y=It("margin"),x=It("opacity"),v=It("padding"),b=It("saturate"),j=It("scale"),S=It("sepia"),_=It("skew"),N=It("space"),C=It("translate"),E=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",Je,t],P=()=>[Je,t],G=()=>["",ks,to],Q=()=>["auto",Oi,Je],ce=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],O=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",Je],$=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[Oi,Je];return{cacheSize:500,separator:":",theme:{colors:[tc],spacing:[ks,to],blur:["none","",no,Je],brightness:W(),borderColor:[e],borderRadius:["none","","full",no,Je],borderSpacing:P(),borderWidth:G(),contrast:W(),grayscale:B(),hueRotate:W(),invert:B(),gap:P(),gradientColorStops:[e],gradientColorStopPositions:[KD,to],inset:R(),margin:R(),opacity:W(),padding:P(),saturate:W(),scale:W(),sepia:B(),skew:W(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",Je]}],container:["container"],columns:[{columns:[no]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ce(),Je]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ec,Je]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Je]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",ec,Je]}],"grid-cols":[{"grid-cols":[tc]}],"col-start-end":[{col:["auto",{span:["full",ec,Je]},Je]}],"col-start":[{"col-start":Q()}],"col-end":[{"col-end":Q()}],"grid-rows":[{"grid-rows":[tc]}],"row-start-end":[{row:["auto",{span:[ec,Je]},Je]}],"row-start":[{"row-start":Q()}],"row-end":[{"row-end":Q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Je]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Je]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Je,t]}],"min-w":[{"min-w":[Je,t,"min","max","fit"]}],"max-w":[{"max-w":[Je,t,"none","full","min","max","fit","prose",{screen:[no]},no]}],h:[{h:[Je,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Je,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Je,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Je,t,"auto","min","max","fit"]}],"font-size":[{text:["base",no,to]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",tp]}],"font-family":[{font:[tc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Je]}],"line-clamp":[{"line-clamp":["none",Oi,tp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ks,Je]}],"list-image":[{"list-image":["none",Je]}],"list-style-type":[{list:["none","disc","decimal",Je]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ks,to]}],"underline-offset":[{"underline-offset":["auto",ks,Je]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ce(),HD]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",qD]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},GD]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:Y()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[ks,Je]}],"outline-w":[{outline:[ks,to]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[ks,to]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",no,QD]}],"shadow-color":[{shadow:[tc]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...O(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":O()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",no,Je]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Je]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",Je]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",Je]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[ec,Je]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Je]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Je]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Je]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ks,to,tp]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},e4=MD(ZD);function ee(...e){return e4(oC(e))}const t4=sD,bC=d.forwardRef(({className:e,...t},n)=>o.jsx(X1,{ref:n,className:ee("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));bC.displayName=X1.displayName;const n4=Ho("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),jC=d.forwardRef(({className:e,variant:t,...n},r)=>o.jsx(Z1,{ref:r,className:ee(n4({variant:t}),e),...n}));jC.displayName=Z1.displayName;const r4=d.forwardRef(({className:e,...t},n)=>o.jsx(nC,{ref:n,className:ee("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));r4.displayName=nC.displayName;const SC=d.forwardRef(({className:e,...t},n)=>o.jsx(rC,{ref:n,className:ee("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:o.jsx(On,{className:"h-4 w-4"})}));SC.displayName=rC.displayName;const NC=d.forwardRef(({className:e,...t},n)=>o.jsx(eC,{ref:n,className:ee("text-sm font-semibold",e),...t}));NC.displayName=eC.displayName;const CC=d.forwardRef(({className:e,...t},n)=>o.jsx(tC,{ref:n,className:ee("text-sm opacity-90",e),...t}));CC.displayName=tC.displayName;function s4(){const{toasts:e}=wr();return o.jsxs(t4,{children:[e.map(function({id:t,title:n,description:r,action:s,...a}){return o.jsxs(jC,{...a,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(NC,{children:n}),r&&o.jsx(CC,{children:r})]}),s,o.jsx(SC,{})]},t)}),o.jsx(bC,{})]})}var o4=cf[" useId ".trim().toString()]||(()=>{}),a4=0;function Un(e){const[t,n]=d.useState(o4());return en(()=>{n(r=>r??String(a4++))},[e]),t?`radix-${t}`:""}const i4=["top","right","bottom","left"],zo=Math.min,cr=Math.max,Ph=Math.round,xd=Math.floor,bs=e=>({x:e,y:e}),l4={left:"right",right:"left",bottom:"top",top:"bottom"},c4={start:"end",end:"start"};function ov(e,t,n){return cr(e,zo(t,n))}function Gs(e,t){return typeof e=="function"?e(t):e}function Qs(e){return e.split("-")[0]}function kl(e){return e.split("-")[1]}function Gy(e){return e==="x"?"y":"x"}function Qy(e){return e==="y"?"height":"width"}const u4=new Set(["top","bottom"]);function vs(e){return u4.has(Qs(e))?"y":"x"}function Yy(e){return Gy(vs(e))}function d4(e,t,n){n===void 0&&(n=!1);const r=kl(e),s=Yy(e),a=Qy(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=Ah(i)),[i,Ah(i)]}function h4(e){const t=Ah(e);return[av(e),t,av(t)]}function av(e){return e.replace(/start|end/g,t=>c4[t])}const nb=["left","right"],rb=["right","left"],f4=["top","bottom"],m4=["bottom","top"];function p4(e,t,n){switch(e){case"top":case"bottom":return n?t?rb:nb:t?nb:rb;case"left":case"right":return t?f4:m4;default:return[]}}function g4(e,t,n,r){const s=kl(e);let a=p4(Qs(e),n==="start",r);return s&&(a=a.map(i=>i+"-"+s),t&&(a=a.concat(a.map(av)))),a}function Ah(e){return e.replace(/left|right|bottom|top/g,t=>l4[t])}function v4(e){return{top:0,right:0,bottom:0,left:0,...e}}function _C(e){return typeof e!="number"?v4(e):{top:e,right:e,bottom:e,left:e}}function Oh(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function sb(e,t,n){let{reference:r,floating:s}=e;const a=vs(t),i=Yy(t),l=Qy(i),c=Qs(t),u=a==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[l]/2-s[l]/2;let p;switch(c){case"top":p={x:h,y:r.y-s.height};break;case"bottom":p={x:h,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-s.width,y:f};break;default:p={x:r.x,y:r.y}}switch(kl(t)){case"start":p[i]-=m*(n&&u?-1:1);break;case"end":p[i]+=m*(n&&u?-1:1);break}return p}const y4=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:i}=n,l=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:h,y:f}=sb(u,r,c),m=r,p={},w=0;for(let g=0;g<l.length;g++){const{name:y,fn:x}=l[g],{x:v,y:b,data:j,reset:S}=await x({x:h,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:p,rects:u,platform:i,elements:{reference:e,floating:t}});h=v??h,f=b??f,p={...p,[y]:{...p[y],...j}},S&&w<=50&&(w++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(u=S.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:h,y:f}=sb(u,m,c)),g=-1)}return{x:h,y:f,placement:m,strategy:s,middlewareData:p}};async function Xc(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:a,rects:i,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:p=0}=Gs(t,e),w=_C(p),y=l[m?f==="floating"?"reference":"floating":f],x=Oh(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(y)))==null||n?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),v=f==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,b=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),j=await(a.isElement==null?void 0:a.isElement(b))?await(a.getScale==null?void 0:a.getScale(b))||{x:1,y:1}:{x:1,y:1},S=Oh(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:b,strategy:c}):v);return{top:(x.top-S.top+w.top)/j.y,bottom:(S.bottom-x.bottom+w.bottom)/j.y,left:(x.left-S.left+w.left)/j.x,right:(S.right-x.right+w.right)/j.x}}const x4=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:a,platform:i,elements:l,middlewareData:c}=t,{element:u,padding:h=0}=Gs(e,t)||{};if(u==null)return{};const f=_C(h),m={x:n,y:r},p=Yy(s),w=Qy(p),g=await i.getDimensions(u),y=p==="y",x=y?"top":"left",v=y?"bottom":"right",b=y?"clientHeight":"clientWidth",j=a.reference[w]+a.reference[p]-m[p]-a.floating[w],S=m[p]-a.reference[p],_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let N=_?_[b]:0;(!N||!await(i.isElement==null?void 0:i.isElement(_)))&&(N=l.floating[b]||a.floating[w]);const C=j/2-S/2,E=N/2-g[w]/2-1,D=zo(f[x],E),R=zo(f[v],E),P=D,G=N-g[w]-R,Q=N/2-g[w]/2+C,ce=ov(P,Q,G),Y=!c.arrow&&kl(s)!=null&&Q!==ce&&a.reference[w]/2-(Q<P?D:R)-g[w]/2<0,O=Y?Q<P?Q-P:Q-G:0;return{[p]:m[p]+O,data:{[p]:ce,centerOffset:Q-ce-O,...Y&&{alignmentOffset:O}},reset:Y}}}),w4=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:a,rects:i,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:g=!0,...y}=Gs(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const x=Qs(s),v=vs(l),b=Qs(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=m||(b||!g?[Ah(l)]:h4(l)),_=w!=="none";!m&&_&&S.push(...g4(l,g,w,j));const N=[l,...S],C=await Xc(t,y),E=[];let D=((r=a.flip)==null?void 0:r.overflows)||[];if(h&&E.push(C[x]),f){const Q=d4(s,i,j);E.push(C[Q[0]],C[Q[1]])}if(D=[...D,{placement:s,overflows:E}],!E.every(Q=>Q<=0)){var R,P;const Q=(((R=a.flip)==null?void 0:R.index)||0)+1,ce=N[Q];if(ce&&(!(f==="alignment"?v!==vs(ce):!1)||D.every(T=>vs(T.placement)===v?T.overflows[0]>0:!0)))return{data:{index:Q,overflows:D},reset:{placement:ce}};let Y=(P=D.filter(O=>O.overflows[0]<=0).sort((O,T)=>O.overflows[1]-T.overflows[1])[0])==null?void 0:P.placement;if(!Y)switch(p){case"bestFit":{var G;const O=(G=D.filter(T=>{if(_){const B=vs(T.placement);return B===v||B==="y"}return!0}).map(T=>[T.placement,T.overflows.filter(B=>B>0).reduce((B,$)=>B+$,0)]).sort((T,B)=>T[1]-B[1])[0])==null?void 0:G[0];O&&(Y=O);break}case"initialPlacement":Y=l;break}if(s!==Y)return{reset:{placement:Y}}}return{}}}};function ob(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ab(e){return i4.some(t=>e[t]>=0)}const b4=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=Gs(e,t);switch(r){case"referenceHidden":{const a=await Xc(t,{...s,elementContext:"reference"}),i=ob(a,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:ab(i)}}}case"escaped":{const a=await Xc(t,{...s,altBoundary:!0}),i=ob(a,n.floating);return{data:{escapedOffsets:i,escaped:ab(i)}}}default:return{}}}}},EC=new Set(["left","top"]);async function j4(e,t){const{placement:n,platform:r,elements:s}=e,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=Qs(n),l=kl(n),c=vs(n)==="y",u=EC.has(i)?-1:1,h=a&&c?-1:1,f=Gs(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:w}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof w=="number"&&(p=l==="end"?w*-1:w),c?{x:p*h,y:m*u}:{x:m*u,y:p*h}}const S4=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:a,placement:i,middlewareData:l}=t,c=await j4(t,e);return i===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:i}}}}},N4=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:l={fn:y=>{let{x,y:v}=y;return{x,y:v}}},...c}=Gs(e,t),u={x:n,y:r},h=await Xc(t,c),f=vs(Qs(s)),m=Gy(f);let p=u[m],w=u[f];if(a){const y=m==="y"?"top":"left",x=m==="y"?"bottom":"right",v=p+h[y],b=p-h[x];p=ov(v,p,b)}if(i){const y=f==="y"?"top":"left",x=f==="y"?"bottom":"right",v=w+h[y],b=w-h[x];w=ov(v,w,b)}const g=l.fn({...t,[m]:p,[f]:w});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[m]:a,[f]:i}}}}}},C4=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:a,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Gs(e,t),h={x:n,y:r},f=vs(s),m=Gy(f);let p=h[m],w=h[f];const g=Gs(l,t),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const b=m==="y"?"height":"width",j=a.reference[m]-a.floating[b]+y.mainAxis,S=a.reference[m]+a.reference[b]-y.mainAxis;p<j?p=j:p>S&&(p=S)}if(u){var x,v;const b=m==="y"?"width":"height",j=EC.has(Qs(s)),S=a.reference[f]-a.floating[b]+(j&&((x=i.offset)==null?void 0:x[f])||0)+(j?0:y.crossAxis),_=a.reference[f]+a.reference[b]+(j?0:((v=i.offset)==null?void 0:v[f])||0)-(j?y.crossAxis:0);w<S?w=S:w>_&&(w=_)}return{[m]:p,[f]:w}}}},_4=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:a,platform:i,elements:l}=t,{apply:c=()=>{},...u}=Gs(e,t),h=await Xc(t,u),f=Qs(s),m=kl(s),p=vs(s)==="y",{width:w,height:g}=a.floating;let y,x;f==="top"||f==="bottom"?(y=f,x=m===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(x=f,y=m==="end"?"top":"bottom");const v=g-h.top-h.bottom,b=w-h.left-h.right,j=zo(g-h[y],v),S=zo(w-h[x],b),_=!t.middlewareData.shift;let N=j,C=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(C=b),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(N=v),_&&!m){const D=cr(h.left,0),R=cr(h.right,0),P=cr(h.top,0),G=cr(h.bottom,0);p?C=w-2*(D!==0||R!==0?D+R:cr(h.left,h.right)):N=g-2*(P!==0||G!==0?P+G:cr(h.top,h.bottom))}await c({...t,availableWidth:C,availableHeight:N});const E=await i.getDimensions(l.floating);return w!==E.width||g!==E.height?{reset:{rects:!0}}:{}}}};function Rf(){return typeof window<"u"}function Tl(e){return kC(e)?(e.nodeName||"").toLowerCase():"#document"}function pr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Cs(e){var t;return(t=(kC(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function kC(e){return Rf()?e instanceof Node||e instanceof pr(e).Node:!1}function as(e){return Rf()?e instanceof Element||e instanceof pr(e).Element:!1}function Ns(e){return Rf()?e instanceof HTMLElement||e instanceof pr(e).HTMLElement:!1}function ib(e){return!Rf()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof pr(e).ShadowRoot}const E4=new Set(["inline","contents"]);function Tu(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=is(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!E4.has(s)}const k4=new Set(["table","td","th"]);function T4(e){return k4.has(Tl(e))}const R4=[":popover-open",":modal"];function Pf(e){return R4.some(t=>{try{return e.matches(t)}catch{return!1}})}const P4=["transform","translate","scale","rotate","perspective"],A4=["transform","translate","scale","rotate","perspective","filter"],O4=["paint","layout","strict","content"];function Jy(e){const t=Xy(),n=as(e)?is(e):e;return P4.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||A4.some(r=>(n.willChange||"").includes(r))||O4.some(r=>(n.contain||"").includes(r))}function I4(e){let t=Uo(e);for(;Ns(t)&&!hl(t);){if(Jy(t))return t;if(Pf(t))return null;t=Uo(t)}return null}function Xy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const M4=new Set(["html","body","#document"]);function hl(e){return M4.has(Tl(e))}function is(e){return pr(e).getComputedStyle(e)}function Af(e){return as(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Uo(e){if(Tl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||ib(e)&&e.host||Cs(e);return ib(t)?t.host:t}function TC(e){const t=Uo(e);return hl(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ns(t)&&Tu(t)?t:TC(t)}function Zc(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=TC(e),a=s===((r=e.ownerDocument)==null?void 0:r.body),i=pr(s);if(a){const l=iv(i);return t.concat(i,i.visualViewport||[],Tu(s)?s:[],l&&n?Zc(l):[])}return t.concat(s,Zc(s,[],n))}function iv(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function RC(e){const t=is(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Ns(e),a=s?e.offsetWidth:n,i=s?e.offsetHeight:r,l=Ph(n)!==a||Ph(r)!==i;return l&&(n=a,r=i),{width:n,height:r,$:l}}function Zy(e){return as(e)?e:e.contextElement}function Ii(e){const t=Zy(e);if(!Ns(t))return bs(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:a}=RC(t);let i=(a?Ph(n.width):n.width)/r,l=(a?Ph(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const D4=bs(0);function PC(e){const t=pr(e);return!Xy()||!t.visualViewport?D4:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function $4(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==pr(e)?!1:t}function La(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=Zy(e);let i=bs(1);t&&(r?as(r)&&(i=Ii(r)):i=Ii(e));const l=$4(a,n,r)?PC(a):bs(0);let c=(s.left+l.x)/i.x,u=(s.top+l.y)/i.y,h=s.width/i.x,f=s.height/i.y;if(a){const m=pr(a),p=r&&as(r)?pr(r):r;let w=m,g=iv(w);for(;g&&r&&p!==w;){const y=Ii(g),x=g.getBoundingClientRect(),v=is(g),b=x.left+(g.clientLeft+parseFloat(v.paddingLeft))*y.x,j=x.top+(g.clientTop+parseFloat(v.paddingTop))*y.y;c*=y.x,u*=y.y,h*=y.x,f*=y.y,c+=b,u+=j,w=pr(g),g=iv(w)}}return Oh({width:h,height:f,x:c,y:u})}function Of(e,t){const n=Af(e).scrollLeft;return t?t.left+n:La(Cs(e)).left+n}function AC(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-Of(e,n),s=n.top+t.scrollTop;return{x:r,y:s}}function L4(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const a=s==="fixed",i=Cs(r),l=t?Pf(t.floating):!1;if(r===i||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=bs(1);const h=bs(0),f=Ns(r);if((f||!f&&!a)&&((Tl(r)!=="body"||Tu(i))&&(c=Af(r)),Ns(r))){const p=La(r);u=Ii(r),h.x=p.x+r.clientLeft,h.y=p.y+r.clientTop}const m=i&&!f&&!a?AC(i,c):bs(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+m.x,y:n.y*u.y-c.scrollTop*u.y+h.y+m.y}}function F4(e){return Array.from(e.getClientRects())}function z4(e){const t=Cs(e),n=Af(e),r=e.ownerDocument.body,s=cr(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=cr(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+Of(e);const l=-n.scrollTop;return is(r).direction==="rtl"&&(i+=cr(t.clientWidth,r.clientWidth)-s),{width:s,height:a,x:i,y:l}}const lb=25;function U4(e,t){const n=pr(e),r=Cs(e),s=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,l=0,c=0;if(s){a=s.width,i=s.height;const h=Xy();(!h||h&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}const u=Of(r);if(u<=0){const h=r.ownerDocument,f=h.body,m=getComputedStyle(f),p=h.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,w=Math.abs(r.clientWidth-f.clientWidth-p);w<=lb&&(a-=w)}else u<=lb&&(a+=u);return{width:a,height:i,x:l,y:c}}const B4=new Set(["absolute","fixed"]);function K4(e,t){const n=La(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,a=Ns(e)?Ii(e):bs(1),i=e.clientWidth*a.x,l=e.clientHeight*a.y,c=s*a.x,u=r*a.y;return{width:i,height:l,x:c,y:u}}function cb(e,t,n){let r;if(t==="viewport")r=U4(e,n);else if(t==="document")r=z4(Cs(e));else if(as(t))r=K4(t,n);else{const s=PC(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Oh(r)}function OC(e,t){const n=Uo(e);return n===t||!as(n)||hl(n)?!1:is(n).position==="fixed"||OC(n,t)}function V4(e,t){const n=t.get(e);if(n)return n;let r=Zc(e,[],!1).filter(l=>as(l)&&Tl(l)!=="body"),s=null;const a=is(e).position==="fixed";let i=a?Uo(e):e;for(;as(i)&&!hl(i);){const l=is(i),c=Jy(i);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&B4.has(s.position)||Tu(i)&&!c&&OC(e,i))?r=r.filter(h=>h!==i):s=l,i=Uo(i)}return t.set(e,r),r}function q4(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const i=[...n==="clippingAncestors"?Pf(t)?[]:V4(t,this._c):[].concat(n),r],l=i[0],c=i.reduce((u,h)=>{const f=cb(t,h,s);return u.top=cr(f.top,u.top),u.right=zo(f.right,u.right),u.bottom=zo(f.bottom,u.bottom),u.left=cr(f.left,u.left),u},cb(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function H4(e){const{width:t,height:n}=RC(e);return{width:t,height:n}}function W4(e,t,n){const r=Ns(t),s=Cs(t),a=n==="fixed",i=La(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=bs(0);function u(){c.x=Of(s)}if(r||!r&&!a)if((Tl(t)!=="body"||Tu(s))&&(l=Af(t)),r){const p=La(t,!0,a,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&u();a&&!r&&s&&u();const h=s&&!r&&!a?AC(s,l):bs(0),f=i.left+l.scrollLeft-c.x-h.x,m=i.top+l.scrollTop-c.y-h.y;return{x:f,y:m,width:i.width,height:i.height}}function np(e){return is(e).position==="static"}function ub(e,t){if(!Ns(e)||is(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Cs(e)===n&&(n=n.ownerDocument.body),n}function IC(e,t){const n=pr(e);if(Pf(e))return n;if(!Ns(e)){let s=Uo(e);for(;s&&!hl(s);){if(as(s)&&!np(s))return s;s=Uo(s)}return n}let r=ub(e,t);for(;r&&T4(r)&&np(r);)r=ub(r,t);return r&&hl(r)&&np(r)&&!Jy(r)?n:r||I4(e)||n}const G4=async function(e){const t=this.getOffsetParent||IC,n=this.getDimensions,r=await n(e.floating);return{reference:W4(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Q4(e){return is(e).direction==="rtl"}const Y4={convertOffsetParentRelativeRectToViewportRelativeRect:L4,getDocumentElement:Cs,getClippingRect:q4,getOffsetParent:IC,getElementRects:G4,getClientRects:F4,getDimensions:H4,getScale:Ii,isElement:as,isRTL:Q4};function MC(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function J4(e,t){let n=null,r;const s=Cs(e);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=e.getBoundingClientRect(),{left:h,top:f,width:m,height:p}=u;if(l||t(),!m||!p)return;const w=xd(f),g=xd(s.clientWidth-(h+m)),y=xd(s.clientHeight-(f+p)),x=xd(h),b={rootMargin:-w+"px "+-g+"px "+-y+"px "+-x+"px",threshold:cr(0,zo(1,c))||1};let j=!0;function S(_){const N=_[0].intersectionRatio;if(N!==c){if(!j)return i();N?i(!1,N):r=setTimeout(()=>{i(!1,1e-7)},1e3)}N===1&&!MC(u,e.getBoundingClientRect())&&i(),j=!1}try{n=new IntersectionObserver(S,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(S,b)}n.observe(e)}return i(!0),a}function X4(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Zy(e),h=s||a?[...u?Zc(u):[],...Zc(t)]:[];h.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),a&&x.addEventListener("resize",n)});const f=u&&l?J4(u,n):null;let m=-1,p=null;i&&(p=new ResizeObserver(x=>{let[v]=x;v&&v.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(t)})),n()}),u&&!c&&p.observe(u),p.observe(t));let w,g=c?La(e):null;c&&y();function y(){const x=La(e);g&&!MC(g,x)&&n(),g=x,w=requestAnimationFrame(y)}return n(),()=>{var x;h.forEach(v=>{s&&v.removeEventListener("scroll",n),a&&v.removeEventListener("resize",n)}),f==null||f(),(x=p)==null||x.disconnect(),p=null,c&&cancelAnimationFrame(w)}}const Z4=S4,e$=N4,t$=w4,n$=_4,r$=b4,db=x4,s$=C4,o$=(e,t,n)=>{const r=new Map,s={platform:Y4,...n},a={...s.platform,_c:r};return y4(e,t,{...s,platform:a})};var a$=typeof document<"u",i$=function(){},Zd=a$?d.useLayoutEffect:i$;function Ih(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Ih(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&e.$$typeof)&&!Ih(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function DC(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function hb(e,t){const n=DC(e);return Math.round(t*n)/n}function rp(e){const t=d.useRef(e);return Zd(()=>{t.current=e}),t}function l$(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[h,f]=d.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=d.useState(r);Ih(m,r)||p(r);const[w,g]=d.useState(null),[y,x]=d.useState(null),v=d.useCallback(T=>{T!==_.current&&(_.current=T,g(T))},[]),b=d.useCallback(T=>{T!==N.current&&(N.current=T,x(T))},[]),j=a||w,S=i||y,_=d.useRef(null),N=d.useRef(null),C=d.useRef(h),E=c!=null,D=rp(c),R=rp(s),P=rp(u),G=d.useCallback(()=>{if(!_.current||!N.current)return;const T={placement:t,strategy:n,middleware:m};R.current&&(T.platform=R.current),o$(_.current,N.current,T).then(B=>{const $={...B,isPositioned:P.current!==!1};Q.current&&!Ih(C.current,$)&&(C.current=$,Or.flushSync(()=>{f($)}))})},[m,t,n,R,P]);Zd(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(T=>({...T,isPositioned:!1})))},[u]);const Q=d.useRef(!1);Zd(()=>(Q.current=!0,()=>{Q.current=!1}),[]),Zd(()=>{if(j&&(_.current=j),S&&(N.current=S),j&&S){if(D.current)return D.current(j,S,G);G()}},[j,S,G,D,E]);const ce=d.useMemo(()=>({reference:_,floating:N,setReference:v,setFloating:b}),[v,b]),Y=d.useMemo(()=>({reference:j,floating:S}),[j,S]),O=d.useMemo(()=>{const T={position:n,left:0,top:0};if(!Y.floating)return T;const B=hb(Y.floating,h.x),$=hb(Y.floating,h.y);return l?{...T,transform:"translate("+B+"px, "+$+"px)",...DC(Y.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:$}},[n,l,Y.floating,h.x,h.y]);return d.useMemo(()=>({...h,update:G,refs:ce,elements:Y,floatingStyles:O}),[h,G,ce,Y,O])}const c$=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?db({element:r.current,padding:s}).fn(n):{}:r?db({element:r,padding:s}).fn(n):{}}}},u$=(e,t)=>({...Z4(e),options:[e,t]}),d$=(e,t)=>({...e$(e),options:[e,t]}),h$=(e,t)=>({...s$(e),options:[e,t]}),f$=(e,t)=>({...t$(e),options:[e,t]}),m$=(e,t)=>({...n$(e),options:[e,t]}),p$=(e,t)=>({...r$(e),options:[e,t]}),g$=(e,t)=>({...c$(e),options:[e,t]});var v$="Arrow",$C=d.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...a}=e;return o.jsx(ye.svg,{...a,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});$C.displayName=v$;var y$=$C;function LC(e){const[t,n]=d.useState(void 0);return en(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let i,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=e.offsetWidth,l=e.offsetHeight;n({width:i,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var ex="Popper",[FC,_s]=Nn(ex),[x$,zC]=FC(ex),UC=e=>{const{__scopePopper:t,children:n}=e,[r,s]=d.useState(null);return o.jsx(x$,{scope:t,anchor:r,onAnchorChange:s,children:n})};UC.displayName=ex;var BC="PopperAnchor",KC=d.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,a=zC(BC,n),i=d.useRef(null),l=qe(t,i),c=d.useRef(null);return d.useEffect(()=>{const u=c.current;c.current=(r==null?void 0:r.current)||i.current,u!==c.current&&a.onAnchorChange(c.current)}),r?null:o.jsx(ye.div,{...s,ref:l})});KC.displayName=BC;var tx="PopperContent",[w$,b$]=FC(tx),VC=d.forwardRef((e,t)=>{var fe,ue,$e,oe,Be,Me;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:w,...g}=e,y=zC(tx,n),[x,v]=d.useState(null),b=qe(t,Ue=>v(Ue)),[j,S]=d.useState(null),_=LC(j),N=(_==null?void 0:_.width)??0,C=(_==null?void 0:_.height)??0,E=r+(a!=="center"?"-"+a:""),D=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},R=Array.isArray(u)?u:[u],P=R.length>0,G={padding:D,boundary:R.filter(S$),altBoundary:P},{refs:Q,floatingStyles:ce,placement:Y,isPositioned:O,middlewareData:T}=l$({strategy:"fixed",placement:E,whileElementsMounted:(...Ue)=>X4(...Ue,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[u$({mainAxis:s+C,alignmentAxis:i}),c&&d$({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?h$():void 0,...G}),c&&f$({...G}),m$({...G,apply:({elements:Ue,rects:Oe,availableWidth:He,availableHeight:dt})=>{const{width:nt,height:mt}=Oe.reference,Qt=Ue.floating.style;Qt.setProperty("--radix-popper-available-width",`${He}px`),Qt.setProperty("--radix-popper-available-height",`${dt}px`),Qt.setProperty("--radix-popper-anchor-width",`${nt}px`),Qt.setProperty("--radix-popper-anchor-height",`${mt}px`)}}),j&&g$({element:j,padding:l}),N$({arrowWidth:N,arrowHeight:C}),m&&p$({strategy:"referenceHidden",...G})]}),[B,$]=WC(Y),W=Et(w);en(()=>{O&&(W==null||W())},[O,W]);const ae=(fe=T.arrow)==null?void 0:fe.x,_e=(ue=T.arrow)==null?void 0:ue.y,ge=(($e=T.arrow)==null?void 0:$e.centerOffset)!==0,[De,Ee]=d.useState();return en(()=>{x&&Ee(window.getComputedStyle(x).zIndex)},[x]),o.jsx("div",{ref:Q.setFloating,"data-radix-popper-content-wrapper":"",style:{...ce,transform:O?ce.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:De,"--radix-popper-transform-origin":[(oe=T.transformOrigin)==null?void 0:oe.x,(Be=T.transformOrigin)==null?void 0:Be.y].join(" "),...((Me=T.hide)==null?void 0:Me.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(w$,{scope:n,placedSide:B,onArrowChange:S,arrowX:ae,arrowY:_e,shouldHideArrow:ge,children:o.jsx(ye.div,{"data-side":B,"data-align":$,...g,ref:b,style:{...g.style,animation:O?void 0:"none"}})})})});VC.displayName=tx;var qC="PopperArrow",j$={top:"bottom",right:"left",bottom:"top",left:"right"},HC=d.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,a=b$(qC,r),i=j$[a.placedSide];return o.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:o.jsx(y$,{...s,ref:n,style:{...s.style,display:"block"}})})});HC.displayName=qC;function S$(e){return e!==null}var N$=e=>({name:"transformOrigin",options:e,fn(t){var y,x,v;const{placement:n,rects:r,middlewareData:s}=t,i=((y=s.arrow)==null?void 0:y.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[u,h]=WC(n),f={start:"0%",center:"50%",end:"100%"}[h],m=(((x=s.arrow)==null?void 0:x.x)??0)+l/2,p=(((v=s.arrow)==null?void 0:v.y)??0)+c/2;let w="",g="";return u==="bottom"?(w=i?f:`${m}px`,g=`${-c}px`):u==="top"?(w=i?f:`${m}px`,g=`${r.floating.height+c}px`):u==="right"?(w=`${-c}px`,g=i?f:`${p}px`):u==="left"&&(w=`${r.floating.width+c}px`,g=i?f:`${p}px`),{data:{x:w,y:g}}}});function WC(e){const[t,n="center"]=e.split("-");return[t,n]}var Ru=UC,Rl=KC,Pu=VC,Au=HC,[If]=Nn("Tooltip",[_s]),Mf=_s(),GC="TooltipProvider",C$=700,lv="tooltip.open",[_$,nx]=If(GC),QC=e=>{const{__scopeTooltip:t,delayDuration:n=C$,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=e,i=d.useRef(!0),l=d.useRef(!1),c=d.useRef(0);return d.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),o.jsx(_$,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:d.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:d.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:d.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:a})};QC.displayName=GC;var eu="Tooltip",[E$,Ou]=If(eu),YC=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s,onOpenChange:a,disableHoverableContent:i,delayDuration:l}=e,c=nx(eu,e.__scopeTooltip),u=Mf(t),[h,f]=d.useState(null),m=Un(),p=d.useRef(0),w=i??c.disableHoverableContent,g=l??c.delayDuration,y=d.useRef(!1),[x,v]=rr({prop:r,defaultProp:s??!1,onChange:N=>{N?(c.onOpen(),document.dispatchEvent(new CustomEvent(lv))):c.onClose(),a==null||a(N)},caller:eu}),b=d.useMemo(()=>x?y.current?"delayed-open":"instant-open":"closed",[x]),j=d.useCallback(()=>{window.clearTimeout(p.current),p.current=0,y.current=!1,v(!0)},[v]),S=d.useCallback(()=>{window.clearTimeout(p.current),p.current=0,v(!1)},[v]),_=d.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{y.current=!0,v(!0),p.current=0},g)},[g,v]);return d.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),o.jsx(Ru,{...u,children:o.jsx(E$,{scope:t,contentId:m,open:x,stateAttribute:b,trigger:h,onTriggerChange:f,onTriggerEnter:d.useCallback(()=>{c.isOpenDelayedRef.current?_():j()},[c.isOpenDelayedRef,_,j]),onTriggerLeave:d.useCallback(()=>{w?S():(window.clearTimeout(p.current),p.current=0)},[S,w]),onOpen:j,onClose:S,disableHoverableContent:w,children:n})})};YC.displayName=eu;var cv="TooltipTrigger",JC=d.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Ou(cv,n),a=nx(cv,n),i=Mf(n),l=d.useRef(null),c=qe(t,l,s.onTriggerChange),u=d.useRef(!1),h=d.useRef(!1),f=d.useCallback(()=>u.current=!1,[]);return d.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),o.jsx(Rl,{asChild:!0,...i,children:o.jsx(ye.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Z(e.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:Z(e.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:Z(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Z(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:Z(e.onBlur,s.onClose),onClick:Z(e.onClick,s.onClose)})})});JC.displayName=cv;var rx="TooltipPortal",[k$,T$]=If(rx,{forceMount:void 0}),XC=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:s}=e,a=Ou(rx,t);return o.jsx(k$,{scope:t,forceMount:n,children:o.jsx($t,{present:n||a.open,children:o.jsx(Wa,{asChild:!0,container:s,children:r})})})};XC.displayName=rx;var fl="TooltipContent",ZC=d.forwardRef((e,t)=>{const n=T$(fl,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=e,i=Ou(fl,e.__scopeTooltip);return o.jsx($t,{present:r||i.open,children:i.disableHoverableContent?o.jsx(e_,{side:s,...a,ref:t}):o.jsx(R$,{side:s,...a,ref:t})})}),R$=d.forwardRef((e,t)=>{const n=Ou(fl,e.__scopeTooltip),r=nx(fl,e.__scopeTooltip),s=d.useRef(null),a=qe(t,s),[i,l]=d.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:f}=r,m=d.useCallback(()=>{l(null),f(!1)},[f]),p=d.useCallback((w,g)=>{const y=w.currentTarget,x={x:w.clientX,y:w.clientY},v=M$(x,y.getBoundingClientRect()),b=D$(x,v),j=$$(g.getBoundingClientRect()),S=F$([...b,...j]);l(S),f(!0)},[f]);return d.useEffect(()=>()=>m(),[m]),d.useEffect(()=>{if(c&&h){const w=y=>p(y,h),g=y=>p(y,c);return c.addEventListener("pointerleave",w),h.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",w),h.removeEventListener("pointerleave",g)}}},[c,h,p,m]),d.useEffect(()=>{if(i){const w=g=>{const y=g.target,x={x:g.clientX,y:g.clientY},v=(c==null?void 0:c.contains(y))||(h==null?void 0:h.contains(y)),b=!L$(x,i);v?m():b&&(m(),u())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[c,h,i,u,m]),o.jsx(e_,{...e,ref:a})}),[P$,A$]=If(eu,{isInside:!1}),O$=O1("TooltipContent"),e_=d.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:i,...l}=e,c=Ou(fl,n),u=Mf(n),{onClose:h}=c;return d.useEffect(()=>(document.addEventListener(lv,h),()=>document.removeEventListener(lv,h)),[h]),d.useEffect(()=>{if(c.trigger){const f=m=>{const p=m.target;p!=null&&p.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),o.jsx(Js,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:o.jsxs(Pu,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(O$,{children:r}),o.jsx(P$,{scope:n,isInside:!0,children:o.jsx(L1,{id:c.contentId,role:"tooltip",children:s||r})})]})})});ZC.displayName=fl;var t_="TooltipArrow",I$=d.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Mf(n);return A$(t_,n).isInside?null:o.jsx(Au,{...s,...r,ref:t})});I$.displayName=t_;function M$(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function D$(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function $$(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function L$(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const l=t[a],c=t[i],u=l.x,h=l.y,f=c.x,m=c.y;h>r!=m>r&&n<(f-u)*(r-h)/(m-h)+u&&(s=!s)}return s}function F$(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),z$(t)}function z$(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const a=n[n.length-1],i=n[n.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var U$=QC,B$=YC,K$=JC,V$=XC,n_=ZC;const r_=U$,q$=B$,H$=K$,s_=d.forwardRef(({className:e,sideOffset:t=4,...n},r)=>o.jsx(V$,{children:o.jsx(n_,{ref:r,sideOffset:t,className:ee("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n})}));s_.displayName=n_.displayName;const jt=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:ee("rounded-xl border bg-card text-card-foreground shadow",e),...t}));jt.displayName="Card";const zs=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:ee("flex flex-col space-y-1.5 p-6",e),...t}));zs.displayName="CardHeader";const Us=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:ee("font-semibold leading-none tracking-tight",e),...t}));Us.displayName="CardTitle";const tu=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:ee("text-sm text-muted-foreground",e),...t}));tu.displayName="CardDescription";const on=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:ee("p-6 pt-0",e),...t}));on.displayName="CardContent";const sx=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:ee("flex items-center p-6 pt-0",e),...t}));sx.displayName="CardFooter";var W$=Symbol.for("react.lazy"),Mh=cf[" use ".trim().toString()];function G$(e){return typeof e=="object"&&e!==null&&"then"in e}function o_(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===W$&&"_payload"in e&&G$(e._payload)}function a_(e){const t=Q$(e),n=d.forwardRef((r,s)=>{let{children:a,...i}=r;o_(a)&&typeof Mh=="function"&&(a=Mh(a._payload));const l=d.Children.toArray(a),c=l.find(J$);if(c){const u=c.props.children,h=l.map(f=>f===c?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:f);return o.jsx(t,{...i,ref:s,children:d.isValidElement(u)?d.cloneElement(u,void 0,h):null})}return o.jsx(t,{...i,ref:s,children:a})});return n.displayName=`${e}.Slot`,n}var Pl=a_("Slot");function Q$(e){const t=d.forwardRef((n,r)=>{let{children:s,...a}=n;if(o_(s)&&typeof Mh=="function"&&(s=Mh(s._payload)),d.isValidElement(s)){const i=Z$(s),l=X$(a,s.props);return s.type!==d.Fragment&&(l.ref=r?Cl(r,i):i),d.cloneElement(s,l)}return d.Children.count(s)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Y$=Symbol("radix.slottable");function J$(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Y$}function X$(e,t){const n={...t};for(const r in t){const s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}function Z$(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const ox=Ho("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),q=d.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},a)=>{const i=r?Pl:"button";return o.jsx(i,{className:ee(ox({variant:t,size:n,className:e})),ref:a,...s})});q.displayName="Button";const e3=Ho("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Dh=d.forwardRef(({className:e,variant:t,...n},r)=>o.jsx("div",{ref:r,role:"alert",className:ee(e3({variant:t}),e),...n}));Dh.displayName="Alert";const i_=d.forwardRef(({className:e,...t},n)=>o.jsx("h5",{ref:n,className:ee("mb-1 font-medium leading-none tracking-tight",e),...t}));i_.displayName="AlertTitle";const $h=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:ee("text-sm [&_p]:leading-relaxed",e),...t}));$h.displayName="AlertDescription";class t3 extends d.Component{constructor(t){super(t),this.handleReload=()=>{window.location.reload()},this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t,errorInfo:null}}componentDidCatch(t,n){console.group(" React Error Boundary Caught Error"),console.error("Error:",t),console.error("Error Info:",n),console.error("Component Stack:",n.componentStack),console.error("Error Stack:",t.stack),console.groupEnd(),this.setState({error:t,errorInfo:n}),typeof window<"u"&&window.reportError&&window.reportError(t)}render(){return this.state.hasError?o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-background p-4",children:o.jsxs(jt,{className:"w-full max-w-2xl border-border bg-card",children:[o.jsxs(zs,{className:"text-center",children:[o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("div",{className:"rounded-full bg-destructive/10 dark:bg-destructive/20 p-3",children:o.jsx(ws,{className:"h-12 w-12 text-destructive"})})}),o.jsx(Us,{className:"text-3xl font-bold text-foreground",children:"Something went wrong"}),o.jsx(tu,{className:"text-base mt-2 text-muted-foreground",children:"The application encountered an unexpected error"})]}),o.jsxs(on,{className:"space-y-4",children:[this.state.error&&o.jsxs(Dh,{variant:"destructive",className:"border-destructive/50 bg-destructive/10",children:[o.jsx(ws,{className:"h-4 w-4"}),o.jsx(i_,{className:"text-destructive-foreground",children:"Error Message"}),o.jsx($h,{className:"font-mono text-sm mt-2 text-destructive-foreground/90",children:this.state.error.message})]}),this.state.errorInfo&&o.jsxs("details",{className:"group",children:[o.jsx("summary",{className:"cursor-pointer list-none",children:o.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50 dark:bg-muted/30 rounded-lg hover:bg-muted/70 dark:hover:bg-muted/50 transition-colors border border-border",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(lD,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{className:"font-medium text-sm text-foreground",children:"Technical Details"})]}),o.jsx("span",{className:"text-xs text-muted-foreground group-open:hidden",children:"Click to expand"})]})}),o.jsx("div",{className:"mt-2 p-4 bg-muted/30 dark:bg-muted/20 rounded-lg border border-border",children:o.jsx("div",{className:"text-xs font-mono text-muted-foreground whitespace-pre-wrap break-words",children:this.state.errorInfo.componentStack})})]})]}),o.jsxs(sx,{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[o.jsx(q,{onClick:this.handleReset,variant:"outline",className:"w-full sm:w-auto",children:"Try Again"}),o.jsxs(q,{onClick:this.handleReload,className:"w-full sm:w-auto",children:[o.jsx(pn,{className:"w-4 h-4 mr-2"}),"Reload Page"]}),o.jsx(kn,{href:"/",children:o.jsxs(q,{variant:"ghost",className:"w-full sm:w-auto",children:[o.jsx(pC,{className:"w-4 h-4 mr-2"}),"Go Home"]})})]}),o.jsx("div",{className:"px-6 pb-6",children:o.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"If this problem persists, check the browser console for more details."})})]})}):this.props.children}}const l_=d.createContext(void 0);function n3({children:e}){const[t,n]=d.useState(new Map),r=d.useCallback(u=>{n(h=>{const f=new Map(h);return f.set(u.id,{...u,startTime:Date.now()}),f})},[]),s=d.useCallback((u,h,f)=>{n(m=>{const p=new Map(m),w=p.get(u);return w&&p.set(u,{...w,completed:h,currentDate:f}),p})},[]),a=d.useCallback(u=>{n(h=>{const f=new Map(h),m=f.get(u);return m&&(m.abortController.abort(),f.delete(u)),f})},[]),i=d.useCallback(u=>{n(h=>{const f=new Map(h);return f.delete(u),f})},[]),l=d.useCallback(u=>t.get(u),[t]),c=t.size>0;return o.jsx(l_.Provider,{value:{activeAnalyses:t,startAnalysis:r,updateProgress:s,stopAnalysis:a,completeAnalysis:i,getAnalysisById:l,hasActiveAnalyses:c},children:e})}function c_(){const e=d.useContext(l_);if(!e)throw new Error("useGlobalAnalysis must be used within GlobalAnalysisProvider");return e}const An=d.forwardRef(({className:e,type:t,...n},r)=>o.jsx("input",{type:t,className:ee("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));An.displayName="Input";const r3=Ho("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function he({className:e,variant:t,...n}){return o.jsx("div",{className:ee(r3({variant:t}),e),...n})}var sp="focusScope.autoFocusOnMount",op="focusScope.autoFocusOnUnmount",fb={bubbles:!1,cancelable:!0},s3="FocusScope",Iu=d.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...i}=e,[l,c]=d.useState(null),u=Et(s),h=Et(a),f=d.useRef(null),m=qe(t,g=>c(g)),p=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(r){let g=function(b){if(p.paused||!l)return;const j=b.target;l.contains(j)?f.current=j:oo(f.current,{select:!0})},y=function(b){if(p.paused||!l)return;const j=b.relatedTarget;j!==null&&(l.contains(j)||oo(f.current,{select:!0}))},x=function(b){if(document.activeElement===document.body)for(const S of b)S.removedNodes.length>0&&oo(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const v=new MutationObserver(x);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),v.disconnect()}}},[r,l,p.paused]),d.useEffect(()=>{if(l){pb.add(p);const g=document.activeElement;if(!l.contains(g)){const x=new CustomEvent(sp,fb);l.addEventListener(sp,u),l.dispatchEvent(x),x.defaultPrevented||(o3(u3(u_(l)),{select:!0}),document.activeElement===g&&oo(l))}return()=>{l.removeEventListener(sp,u),setTimeout(()=>{const x=new CustomEvent(op,fb);l.addEventListener(op,h),l.dispatchEvent(x),x.defaultPrevented||oo(g??document.body,{select:!0}),l.removeEventListener(op,h),pb.remove(p)},0)}}},[l,u,h,p]);const w=d.useCallback(g=>{if(!n&&!r||p.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,x=document.activeElement;if(y&&x){const v=g.currentTarget,[b,j]=a3(v);b&&j?!g.shiftKey&&x===j?(g.preventDefault(),n&&oo(b,{select:!0})):g.shiftKey&&x===b&&(g.preventDefault(),n&&oo(j,{select:!0})):x===v&&g.preventDefault()}},[n,r,p.paused]);return o.jsx(ye.div,{tabIndex:-1,...i,ref:m,onKeyDown:w})});Iu.displayName=s3;function o3(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(oo(r,{select:t}),document.activeElement!==n)return}function a3(e){const t=u_(e),n=mb(t,e),r=mb(t.reverse(),e);return[n,r]}function u_(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function mb(e,t){for(const n of e)if(!i3(n,{upTo:t}))return n}function i3(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function l3(e){return e instanceof HTMLInputElement&&"select"in e}function oo(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&l3(e)&&t&&e.select()}}var pb=c3();function c3(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=gb(e,t),e.unshift(t)},remove(t){var n;e=gb(e,t),(n=e[0])==null||n.resume()}}}function gb(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function u3(e){return e.filter(t=>t.tagName!=="A")}var ap=0;function Df(){d.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??vb()),document.body.insertAdjacentElement("beforeend",e[1]??vb()),ap++,()=>{ap===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),ap--}},[])}function vb(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var uv=function(e,t){return uv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},uv(e,t)};function d_(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");uv(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Pr=function(){return Pr=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Pr.apply(this,arguments)};function Go(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function h_(e,t,n,r){var s=arguments.length,a=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(s<3?i(a):s>3?i(t,n,a):i(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a}function f_(e,t){return function(n,r){t(n,r,e)}}function m_(e,t,n,r,s,a){function i(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var l=r.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,h=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),f,m=!1,p=n.length-1;p>=0;p--){var w={};for(var g in r)w[g]=g==="access"?{}:r[g];for(var g in r.access)w.access[g]=r.access[g];w.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(i(x||null))};var y=(0,n[p])(l==="accessor"?{get:h.get,set:h.set}:h[c],w);if(l==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(f=i(y.get))&&(h.get=f),(f=i(y.set))&&(h.set=f),(f=i(y.init))&&s.unshift(f)}else(f=i(y))&&(l==="field"?s.unshift(f):h[c]=f)}u&&Object.defineProperty(u,r.name,h),m=!0}function p_(e,t,n){for(var r=arguments.length>2,s=0;s<t.length;s++)n=r?t[s].call(e,n):t[s].call(e);return r?n:void 0}function g_(e){return typeof e=="symbol"?e:"".concat(e)}function v_(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function y_(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function ke(e,t,n,r){function s(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(h){try{u(r.next(h))}catch(f){i(f)}}function c(h){try{u(r.throw(h))}catch(f){i(f)}}function u(h){h.done?a(h.value):s(h.value).then(l,c)}u((r=r.apply(e,t||[])).next())})}function x_(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=l(0),i.throw=l(1),i.return=l(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(h){return c([u,h])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(n=0)),n;)try{if(r=1,s&&(a=u[0]&2?s.return:u[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,u[1])).done)return a;switch(s=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(h){u=[6,h],s=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var $f=Object.create?(function(e,t,n,r){r===void 0&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]});function w_(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&$f(t,e,n)}function Lh(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ax(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],i;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(l){i={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a}function b_(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ax(arguments[t]));return e}function j_(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),s=0,t=0;t<n;t++)for(var a=arguments[t],i=0,l=a.length;i<l;i++,s++)r[s]=a[i];return r}function ix(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function ml(e){return this instanceof ml?(this.v=e,this):new ml(e)}function S_(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(p){return function(w){return Promise.resolve(w).then(p,f)}}function l(p,w){r[p]&&(s[p]=function(g){return new Promise(function(y,x){a.push([p,g,y,x])>1||c(p,g)})},w&&(s[p]=w(s[p])))}function c(p,w){try{u(r[p](w))}catch(g){m(a[0][3],g)}}function u(p){p.value instanceof ml?Promise.resolve(p.value.v).then(h,f):m(a[0][2],p)}function h(p){c("next",p)}function f(p){c("throw",p)}function m(p,w){p(w),a.shift(),a.length&&c(a[0][0],a[0][1])}}function N_(e){var t,n;return t={},r("next"),r("throw",function(s){throw s}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(s,a){t[s]=e[s]?function(i){return(n=!n)?{value:ml(e[s](i)),done:!1}:a?a(i):i}:a}}function C_(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Lh=="function"?Lh(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(i){return new Promise(function(l,c){i=e[a](i),s(l,c,i.done,i.value)})}}function s(a,i,l,c){Promise.resolve(c).then(function(u){a({value:u,done:l})},i)}}function __(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var d3=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},dv=function(e){return dv=Object.getOwnPropertyNames||function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[n.length]=r);return n},dv(e)};function E_(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=dv(e),r=0;r<n.length;r++)n[r]!=="default"&&$f(t,e,n[r]);return d3(t,e),t}function k_(e){return e&&e.__esModule?e:{default:e}}function T_(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function R_(e,t,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,n):s?s.value=n:t.set(e,n),n}function P_(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function A_(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var h3=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function O_(e){function t(a){e.error=e.hasError?new h3(a,e.error,"An error was suppressed during disposal."):a,e.hasError=!0}var n,r=0;function s(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(s);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(s,function(i){return t(i),s()})}else r|=1}catch(i){t(i)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}function I_(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,s,a,i){return r?t?".jsx":".js":s&&(!a||!i)?n:s+a+"."+i.toLowerCase()+"js"}):e}const f3={__extends:d_,__assign:Pr,__rest:Go,__decorate:h_,__param:f_,__esDecorate:m_,__runInitializers:p_,__propKey:g_,__setFunctionName:v_,__metadata:y_,__awaiter:ke,__generator:x_,__createBinding:$f,__exportStar:w_,__values:Lh,__read:ax,__spread:b_,__spreadArrays:j_,__spreadArray:ix,__await:ml,__asyncGenerator:S_,__asyncDelegator:N_,__asyncValues:C_,__makeTemplateObject:__,__importStar:E_,__importDefault:k_,__classPrivateFieldGet:T_,__classPrivateFieldSet:R_,__classPrivateFieldIn:P_,__addDisposableResource:A_,__disposeResources:O_,__rewriteRelativeImportExtension:I_},m3=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:A_,get __assign(){return Pr},__asyncDelegator:N_,__asyncGenerator:S_,__asyncValues:C_,__await:ml,__awaiter:ke,__classPrivateFieldGet:T_,__classPrivateFieldIn:P_,__classPrivateFieldSet:R_,__createBinding:$f,__decorate:h_,__disposeResources:O_,__esDecorate:m_,__exportStar:w_,__extends:d_,__generator:x_,__importDefault:k_,__importStar:E_,__makeTemplateObject:__,__metadata:y_,__param:f_,__propKey:g_,__read:ax,__rest:Go,__rewriteRelativeImportExtension:I_,__runInitializers:p_,__setFunctionName:v_,__spread:b_,__spreadArray:ix,__spreadArrays:j_,__values:Lh,default:f3},Symbol.toStringTag,{value:"Module"}));var eh="right-scroll-bar-position",th="width-before-scroll-bar",p3="with-scroll-bars-hidden",g3="--removed-body-scroll-bar-size";function ip(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function v3(e,t){var n=d.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var y3=typeof window<"u"?d.useLayoutEffect:d.useEffect,yb=new WeakMap;function x3(e,t){var n=v3(null,function(r){return e.forEach(function(s){return ip(s,r)})});return y3(function(){var r=yb.get(n);if(r){var s=new Set(r),a=new Set(e),i=n.current;s.forEach(function(l){a.has(l)||ip(l,null)}),a.forEach(function(l){s.has(l)||ip(l,i)})}yb.set(n,e)},[e]),n}function w3(e){return e}function b3(e,t){t===void 0&&(t=w3);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var i=t(a,r);return n.push(i),function(){n=n.filter(function(l){return l!==i})}},assignSyncMedium:function(a){for(r=!0;n.length;){var i=n;n=[],i.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var i=[];if(n.length){var l=n;n=[],l.forEach(a),i=n}var c=function(){var h=i;i=[],h.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){i.push(h),u()},filter:function(h){return i=i.filter(h),n}}}};return s}function j3(e){e===void 0&&(e={});var t=b3(null);return t.options=Pr({async:!0,ssr:!1},e),t}var M_=function(e){var t=e.sideCar,n=Go(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return d.createElement(r,Pr({},n))};M_.isSideCarExport=!0;function S3(e,t){return e.useMedium(t),M_}var D_=j3(),lp=function(){},Lf=d.forwardRef(function(e,t){var n=d.useRef(null),r=d.useState({onScrollCapture:lp,onWheelCapture:lp,onTouchMoveCapture:lp}),s=r[0],a=r[1],i=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,h=e.enabled,f=e.shards,m=e.sideCar,p=e.noRelative,w=e.noIsolation,g=e.inert,y=e.allowPinchZoom,x=e.as,v=x===void 0?"div":x,b=e.gapMode,j=Go(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=m,_=x3([n,t]),N=Pr(Pr({},j),s);return d.createElement(d.Fragment,null,h&&d.createElement(S,{sideCar:D_,removeScrollBar:u,shards:f,noRelative:p,noIsolation:w,inert:g,setCallbacks:a,allowPinchZoom:!!y,lockRef:n,gapMode:b}),i?d.cloneElement(d.Children.only(l),Pr(Pr({},N),{ref:_})):d.createElement(v,Pr({},N,{className:c,ref:_}),l))});Lf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Lf.classNames={fullWidth:th,zeroRight:eh};var N3=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function C3(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=N3();return t&&e.setAttribute("nonce",t),e}function _3(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function E3(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var k3=function(){var e=0,t=null;return{add:function(n){e==0&&(t=C3())&&(_3(t,n),E3(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},T3=function(){var e=k3();return function(t,n){d.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},$_=function(){var e=T3(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},R3={left:0,top:0,right:0,gap:0},cp=function(e){return parseInt(e||"",10)||0},P3=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[cp(n),cp(r),cp(s)]},A3=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return R3;var t=P3(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},O3=$_(),Mi="data-scroll-locked",I3=function(e,t,n,r){var s=e.left,a=e.top,i=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(p3,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Mi,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(eh,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(th,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(eh," .").concat(eh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(th," .").concat(th,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Mi,`] {
    `).concat(g3,": ").concat(l,`px;
  }
`)},xb=function(){var e=parseInt(document.body.getAttribute(Mi)||"0",10);return isFinite(e)?e:0},M3=function(){d.useEffect(function(){return document.body.setAttribute(Mi,(xb()+1).toString()),function(){var e=xb()-1;e<=0?document.body.removeAttribute(Mi):document.body.setAttribute(Mi,e.toString())}},[])},D3=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;M3();var a=d.useMemo(function(){return A3(s)},[s]);return d.createElement(O3,{styles:I3(a,!t,s,n?"":"!important")})},hv=!1;if(typeof window<"u")try{var wd=Object.defineProperty({},"passive",{get:function(){return hv=!0,!0}});window.addEventListener("test",wd,wd),window.removeEventListener("test",wd,wd)}catch{hv=!1}var ei=hv?{passive:!1}:!1,$3=function(e){return e.tagName==="TEXTAREA"},L_=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!$3(e)&&n[t]==="visible")},L3=function(e){return L_(e,"overflowY")},F3=function(e){return L_(e,"overflowX")},wb=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=F_(e,r);if(s){var a=z_(e,r),i=a[1],l=a[2];if(i>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},z3=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},U3=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},F_=function(e,t){return e==="v"?L3(t):F3(t)},z_=function(e,t){return e==="v"?z3(t):U3(t)},B3=function(e,t){return e==="h"&&t==="rtl"?-1:1},K3=function(e,t,n,r,s){var a=B3(e,window.getComputedStyle(t).direction),i=a*r,l=n.target,c=t.contains(l),u=!1,h=i>0,f=0,m=0;do{if(!l)break;var p=z_(e,l),w=p[0],g=p[1],y=p[2],x=g-y-a*w;(w||x)&&F_(e,l)&&(f+=x,m+=w);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(h&&Math.abs(f)<1||!h&&Math.abs(m)<1)&&(u=!0),u},bd=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},bb=function(e){return[e.deltaX,e.deltaY]},jb=function(e){return e&&"current"in e?e.current:e},V3=function(e,t){return e[0]===t[0]&&e[1]===t[1]},q3=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},H3=0,ti=[];function W3(e){var t=d.useRef([]),n=d.useRef([0,0]),r=d.useRef(),s=d.useState(H3++)[0],a=d.useState($_)[0],i=d.useRef(e);d.useEffect(function(){i.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=ix([e.lockRef.current],(e.shards||[]).map(jb),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=d.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!i.current.allowPinchZoom;var x=bd(g),v=n.current,b="deltaX"in g?g.deltaX:v[0]-x[0],j="deltaY"in g?g.deltaY:v[1]-x[1],S,_=g.target,N=Math.abs(b)>Math.abs(j)?"h":"v";if("touches"in g&&N==="h"&&_.type==="range")return!1;var C=wb(N,_);if(!C)return!0;if(C?S=N:(S=N==="v"?"h":"v",C=wb(N,_)),!C)return!1;if(!r.current&&"changedTouches"in g&&(b||j)&&(r.current=S),!S)return!0;var E=r.current||S;return K3(E,y,g,E==="h"?b:j)},[]),c=d.useCallback(function(g){var y=g;if(!(!ti.length||ti[ti.length-1]!==a)){var x="deltaY"in y?bb(y):bd(y),v=t.current.filter(function(S){return S.name===y.type&&(S.target===y.target||y.target===S.shadowParent)&&V3(S.delta,x)})[0];if(v&&v.should){y.cancelable&&y.preventDefault();return}if(!v){var b=(i.current.shards||[]).map(jb).filter(Boolean).filter(function(S){return S.contains(y.target)}),j=b.length>0?l(y,b[0]):!i.current.noIsolation;j&&y.cancelable&&y.preventDefault()}}},[]),u=d.useCallback(function(g,y,x,v){var b={name:g,delta:y,target:x,should:v,shadowParent:G3(x)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(j){return j!==b})},1)},[]),h=d.useCallback(function(g){n.current=bd(g),r.current=void 0},[]),f=d.useCallback(function(g){u(g.type,bb(g),g.target,l(g,e.lockRef.current))},[]),m=d.useCallback(function(g){u(g.type,bd(g),g.target,l(g,e.lockRef.current))},[]);d.useEffect(function(){return ti.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,ei),document.addEventListener("touchmove",c,ei),document.addEventListener("touchstart",h,ei),function(){ti=ti.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,ei),document.removeEventListener("touchmove",c,ei),document.removeEventListener("touchstart",h,ei)}},[]);var p=e.removeScrollBar,w=e.inert;return d.createElement(d.Fragment,null,w?d.createElement(a,{styles:q3(s)}):null,p?d.createElement(D3,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function G3(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Q3=S3(D_,W3);var Mu=d.forwardRef(function(e,t){return d.createElement(Lf,Pr({},e,{ref:t,sideCar:Q3}))});Mu.classNames=Lf.classNames;var Y3=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ni=new WeakMap,jd=new WeakMap,Sd={},up=0,U_=function(e){return e&&(e.host||U_(e.parentNode))},J3=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=U_(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},X3=function(e,t,n,r){var s=J3(t,Array.isArray(e)?e:[e]);Sd[n]||(Sd[n]=new WeakMap);var a=Sd[n],i=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))h(m);else try{var p=m.getAttribute(r),w=p!==null&&p!=="false",g=(ni.get(m)||0)+1,y=(a.get(m)||0)+1;ni.set(m,g),a.set(m,y),i.push(m),g===1&&w&&jd.set(m,!0),y===1&&m.setAttribute(n,"true"),w||m.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return h(t),l.clear(),up++,function(){i.forEach(function(f){var m=ni.get(f)-1,p=a.get(f)-1;ni.set(f,m),a.set(f,p),m||(jd.has(f)||f.removeAttribute(r),jd.delete(f)),p||f.removeAttribute(n)}),up--,up||(ni=new WeakMap,ni=new WeakMap,jd=new WeakMap,Sd={})}},Ff=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=Y3(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),X3(r,s,n,"aria-hidden")):function(){return null}},zf="Dialog",[B_,K_]=Nn(zf),[Z3,us]=B_(zf),V_=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:i=!0}=e,l=d.useRef(null),c=d.useRef(null),[u,h]=rr({prop:r,defaultProp:s??!1,onChange:a,caller:zf});return o.jsx(Z3,{scope:t,triggerRef:l,contentRef:c,contentId:Un(),titleId:Un(),descriptionId:Un(),open:u,onOpenChange:h,onOpenToggle:d.useCallback(()=>h(f=>!f),[h]),modal:i,children:n})};V_.displayName=zf;var q_="DialogTrigger",H_=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=us(q_,n),a=qe(t,s.triggerRef);return o.jsx(ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":ux(s.open),...r,ref:a,onClick:Z(e.onClick,s.onOpenToggle)})});H_.displayName=q_;var lx="DialogPortal",[e5,W_]=B_(lx,{forceMount:void 0}),G_=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,a=us(lx,t);return o.jsx(e5,{scope:t,forceMount:n,children:d.Children.map(r,i=>o.jsx($t,{present:n||a.open,children:o.jsx(Wa,{asChild:!0,container:s,children:i})}))})};G_.displayName=lx;var Fh="DialogOverlay",Q_=d.forwardRef((e,t)=>{const n=W_(Fh,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=us(Fh,e.__scopeDialog);return a.modal?o.jsx($t,{present:r||a.open,children:o.jsx(n5,{...s,ref:t})}):null});Q_.displayName=Fh;var t5=$a("DialogOverlay.RemoveScroll"),n5=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=us(Fh,n);return o.jsx(Mu,{as:t5,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(ye.div,{"data-state":ux(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Fa="DialogContent",Y_=d.forwardRef((e,t)=>{const n=W_(Fa,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=us(Fa,e.__scopeDialog);return o.jsx($t,{present:r||a.open,children:a.modal?o.jsx(r5,{...s,ref:t}):o.jsx(s5,{...s,ref:t})})});Y_.displayName=Fa;var r5=d.forwardRef((e,t)=>{const n=us(Fa,e.__scopeDialog),r=d.useRef(null),s=qe(t,n.contentRef,r);return d.useEffect(()=>{const a=r.current;if(a)return Ff(a)},[]),o.jsx(J_,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Z(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:Z(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&a.preventDefault()}),onFocusOutside:Z(e.onFocusOutside,a=>a.preventDefault())})}),s5=d.forwardRef((e,t)=>{const n=us(Fa,e.__scopeDialog),r=d.useRef(!1),s=d.useRef(!1);return o.jsx(J_,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),J_=d.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...i}=e,l=us(Fa,n),c=d.useRef(null),u=qe(t,c);return Df(),o.jsxs(o.Fragment,{children:[o.jsx(Iu,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(Js,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":ux(l.open),...i,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(a5,{titleId:l.titleId}),o.jsx(l5,{contentRef:c,descriptionId:l.descriptionId})]})]})}),cx="DialogTitle",X_=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=us(cx,n);return o.jsx(ye.h2,{id:s.titleId,...r,ref:t})});X_.displayName=cx;var Z_="DialogDescription",eE=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=us(Z_,n);return o.jsx(ye.p,{id:s.descriptionId,...r,ref:t})});eE.displayName=Z_;var tE="DialogClose",nE=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=us(tE,n);return o.jsx(ye.button,{type:"button",...r,ref:t,onClick:Z(e.onClick,()=>s.onOpenChange(!1))})});nE.displayName=tE;function ux(e){return e?"open":"closed"}var rE="DialogTitleWarning",[o5,sE]=vM(rE,{contentName:Fa,titleName:cx,docsSlug:"dialog"}),a5=({titleId:e})=>{const t=sE(rE),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return d.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},i5="DialogDescriptionWarning",l5=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${sE(i5).contentName}}.`;return d.useEffect(()=>{var a;const s=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},dx=V_,oE=H_,hx=G_,Du=Q_,$u=Y_,Lu=X_,Fu=eE,Uf=nE;const Zt=dx,fx=oE,c5=hx,aE=d.forwardRef(({className:e,...t},n)=>o.jsx(Du,{ref:n,className:ee("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));aE.displayName=Du.displayName;const Vt=d.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(c5,{children:[o.jsx(aE,{}),o.jsxs($u,{ref:r,className:ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,o.jsxs(Uf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(On,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Vt.displayName=$u.displayName;const qt=({className:e,...t})=>o.jsx("div",{className:ee("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});qt.displayName="DialogHeader";const Xr=({className:e,...t})=>o.jsx("div",{className:ee("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Xr.displayName="DialogFooter";const Ht=d.forwardRef(({className:e,...t},n)=>o.jsx(Lu,{ref:n,className:ee("text-lg font-semibold leading-none tracking-tight",e),...t}));Ht.displayName=Lu.displayName;const Pn=d.forwardRef(({className:e,...t},n)=>o.jsx(Fu,{ref:n,className:ee("text-sm text-muted-foreground",e),...t}));Pn.displayName=Fu.displayName;var u5=d.createContext(void 0);function Al(e){const t=d.useContext(u5);return e||t||"ltr"}var dp="rovingFocusGroup.onEntryFocus",d5={bubbles:!1,cancelable:!0},zu="RovingFocusGroup",[fv,iE,h5]=_l(zu),[f5,Bf]=Nn(zu,[h5]),[m5,p5]=f5(zu),lE=d.forwardRef((e,t)=>o.jsx(fv.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(fv.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(g5,{...e,ref:t})})}));lE.displayName=zu;var g5=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=e,m=d.useRef(null),p=qe(t,m),w=Al(a),[g,y]=rr({prop:i,defaultProp:l??null,onChange:c,caller:zu}),[x,v]=d.useState(!1),b=Et(u),j=iE(n),S=d.useRef(!1),[_,N]=d.useState(0);return d.useEffect(()=>{const C=m.current;if(C)return C.addEventListener(dp,b),()=>C.removeEventListener(dp,b)},[b]),o.jsx(m5,{scope:n,orientation:r,dir:w,loop:s,currentTabStopId:g,onItemFocus:d.useCallback(C=>y(C),[y]),onItemShiftTab:d.useCallback(()=>v(!0),[]),onFocusableItemAdd:d.useCallback(()=>N(C=>C+1),[]),onFocusableItemRemove:d.useCallback(()=>N(C=>C-1),[]),children:o.jsx(ye.div,{tabIndex:x||_===0?-1:0,"data-orientation":r,...f,ref:p,style:{outline:"none",...e.style},onMouseDown:Z(e.onMouseDown,()=>{S.current=!0}),onFocus:Z(e.onFocus,C=>{const E=!S.current;if(C.target===C.currentTarget&&E&&!x){const D=new CustomEvent(dp,d5);if(C.currentTarget.dispatchEvent(D),!D.defaultPrevented){const R=j().filter(Y=>Y.focusable),P=R.find(Y=>Y.active),G=R.find(Y=>Y.id===g),ce=[P,G,...R].filter(Boolean).map(Y=>Y.ref.current);dE(ce,h)}}S.current=!1}),onBlur:Z(e.onBlur,()=>v(!1))})})}),cE="RovingFocusGroupItem",uE=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:i,...l}=e,c=Un(),u=a||c,h=p5(cE,n),f=h.currentTabStopId===u,m=iE(n),{onFocusableItemAdd:p,onFocusableItemRemove:w,currentTabStopId:g}=h;return d.useEffect(()=>{if(r)return p(),()=>w()},[r,p,w]),o.jsx(fv.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:o.jsx(ye.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...l,ref:t,onMouseDown:Z(e.onMouseDown,y=>{r?h.onItemFocus(u):y.preventDefault()}),onFocus:Z(e.onFocus,()=>h.onItemFocus(u)),onKeyDown:Z(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){h.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const x=x5(y,h.orientation,h.dir);if(x!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let b=m().filter(j=>j.focusable).map(j=>j.ref.current);if(x==="last")b.reverse();else if(x==="prev"||x==="next"){x==="prev"&&b.reverse();const j=b.indexOf(y.currentTarget);b=h.loop?w5(b,j+1):b.slice(j+1)}setTimeout(()=>dE(b))}}),children:typeof i=="function"?i({isCurrentTabStop:f,hasTabStop:g!=null}):i})})});uE.displayName=cE;var v5={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function y5(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function x5(e,t,n){const r=y5(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return v5[r]}function dE(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function w5(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var hE=lE,fE=uE,mv=["Enter"," "],b5=["ArrowDown","PageUp","Home"],mE=["ArrowUp","PageDown","End"],j5=[...b5,...mE],S5={ltr:[...mv,"ArrowRight"],rtl:[...mv,"ArrowLeft"]},N5={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Uu="Menu",[nu,C5,_5]=_l(Uu),[Ga,pE]=Nn(Uu,[_5,_s,Bf]),Kf=_s(),gE=Bf(),[E5,Qa]=Ga(Uu),[k5,Bu]=Ga(Uu),vE=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:a,modal:i=!0}=e,l=Kf(t),[c,u]=d.useState(null),h=d.useRef(!1),f=Et(a),m=Al(s);return d.useEffect(()=>{const p=()=>{h.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>h.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),o.jsx(Ru,{...l,children:o.jsx(E5,{scope:t,open:n,onOpenChange:f,content:c,onContentChange:u,children:o.jsx(k5,{scope:t,onClose:d.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:h,dir:m,modal:i,children:r})})})};vE.displayName=Uu;var T5="MenuAnchor",mx=d.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=Kf(n);return o.jsx(Rl,{...s,...r,ref:t})});mx.displayName=T5;var px="MenuPortal",[R5,yE]=Ga(px,{forceMount:void 0}),xE=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,a=Qa(px,t);return o.jsx(R5,{scope:t,forceMount:n,children:o.jsx($t,{present:n||a.open,children:o.jsx(Wa,{asChild:!0,container:s,children:r})})})};xE.displayName=px;var Mr="MenuContent",[P5,gx]=Ga(Mr),wE=d.forwardRef((e,t)=>{const n=yE(Mr,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,a=Qa(Mr,e.__scopeMenu),i=Bu(Mr,e.__scopeMenu);return o.jsx(nu.Provider,{scope:e.__scopeMenu,children:o.jsx($t,{present:r||a.open,children:o.jsx(nu.Slot,{scope:e.__scopeMenu,children:i.modal?o.jsx(A5,{...s,ref:t}):o.jsx(O5,{...s,ref:t})})})})}),A5=d.forwardRef((e,t)=>{const n=Qa(Mr,e.__scopeMenu),r=d.useRef(null),s=qe(t,r);return d.useEffect(()=>{const a=r.current;if(a)return Ff(a)},[]),o.jsx(vx,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Z(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),O5=d.forwardRef((e,t)=>{const n=Qa(Mr,e.__scopeMenu);return o.jsx(vx,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),I5=$a("MenuContent.ScrollLock"),vx=d.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:p,disableOutsideScroll:w,...g}=e,y=Qa(Mr,n),x=Bu(Mr,n),v=Kf(n),b=gE(n),j=C5(n),[S,_]=d.useState(null),N=d.useRef(null),C=qe(t,N,y.onContentChange),E=d.useRef(0),D=d.useRef(""),R=d.useRef(0),P=d.useRef(null),G=d.useRef("right"),Q=d.useRef(0),ce=w?Mu:d.Fragment,Y=w?{as:I5,allowPinchZoom:!0}:void 0,O=B=>{var fe,ue;const $=D.current+B,W=j().filter($e=>!$e.disabled),ae=document.activeElement,_e=(fe=W.find($e=>$e.ref.current===ae))==null?void 0:fe.textValue,ge=W.map($e=>$e.textValue),De=H5(ge,$,_e),Ee=(ue=W.find($e=>$e.textValue===De))==null?void 0:ue.ref.current;(function $e(oe){D.current=oe,window.clearTimeout(E.current),oe!==""&&(E.current=window.setTimeout(()=>$e(""),1e3))})($),Ee&&setTimeout(()=>Ee.focus())};d.useEffect(()=>()=>window.clearTimeout(E.current),[]),Df();const T=d.useCallback(B=>{var W,ae;return G.current===((W=P.current)==null?void 0:W.side)&&G5(B,(ae=P.current)==null?void 0:ae.area)},[]);return o.jsx(P5,{scope:n,searchRef:D,onItemEnter:d.useCallback(B=>{T(B)&&B.preventDefault()},[T]),onItemLeave:d.useCallback(B=>{var $;T(B)||(($=N.current)==null||$.focus(),_(null))},[T]),onTriggerLeave:d.useCallback(B=>{T(B)&&B.preventDefault()},[T]),pointerGraceTimerRef:R,onPointerGraceIntentChange:d.useCallback(B=>{P.current=B},[]),children:o.jsx(ce,{...Y,children:o.jsx(Iu,{asChild:!0,trapped:s,onMountAutoFocus:Z(a,B=>{var $;B.preventDefault(),($=N.current)==null||$.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:o.jsx(Js,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:p,children:o.jsx(hE,{asChild:!0,...b,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:_,onEntryFocus:Z(c,B=>{x.isUsingKeyboardRef.current||B.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(Pu,{role:"menu","aria-orientation":"vertical","data-state":DE(y.open),"data-radix-menu-content":"",dir:x.dir,...v,...g,ref:C,style:{outline:"none",...g.style},onKeyDown:Z(g.onKeyDown,B=>{const W=B.target.closest("[data-radix-menu-content]")===B.currentTarget,ae=B.ctrlKey||B.altKey||B.metaKey,_e=B.key.length===1;W&&(B.key==="Tab"&&B.preventDefault(),!ae&&_e&&O(B.key));const ge=N.current;if(B.target!==ge||!j5.includes(B.key))return;B.preventDefault();const Ee=j().filter(fe=>!fe.disabled).map(fe=>fe.ref.current);mE.includes(B.key)&&Ee.reverse(),V5(Ee)}),onBlur:Z(e.onBlur,B=>{B.currentTarget.contains(B.target)||(window.clearTimeout(E.current),D.current="")}),onPointerMove:Z(e.onPointerMove,ru(B=>{const $=B.target,W=Q.current!==B.clientX;if(B.currentTarget.contains($)&&W){const ae=B.clientX>Q.current?"right":"left";G.current=ae,Q.current=B.clientX}}))})})})})})})});wE.displayName=Mr;var M5="MenuGroup",yx=d.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(ye.div,{role:"group",...r,ref:t})});yx.displayName=M5;var D5="MenuLabel",bE=d.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(ye.div,{...r,ref:t})});bE.displayName=D5;var zh="MenuItem",Sb="menu.itemSelect",Vf=d.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,a=d.useRef(null),i=Bu(zh,e.__scopeMenu),l=gx(zh,e.__scopeMenu),c=qe(t,a),u=d.useRef(!1),h=()=>{const f=a.current;if(!n&&f){const m=new CustomEvent(Sb,{bubbles:!0,cancelable:!0});f.addEventListener(Sb,p=>r==null?void 0:r(p),{once:!0}),Wc(f,m),m.defaultPrevented?u.current=!1:i.onClose()}};return o.jsx(jE,{...s,ref:c,disabled:n,onClick:Z(e.onClick,h),onPointerDown:f=>{var m;(m=e.onPointerDown)==null||m.call(e,f),u.current=!0},onPointerUp:Z(e.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:Z(e.onKeyDown,f=>{const m=l.searchRef.current!=="";n||m&&f.key===" "||mv.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Vf.displayName=zh;var jE=d.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...a}=e,i=gx(zh,n),l=gE(n),c=d.useRef(null),u=qe(t,c),[h,f]=d.useState(!1),[m,p]=d.useState("");return d.useEffect(()=>{const w=c.current;w&&p((w.textContent??"").trim())},[a.children]),o.jsx(nu.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:o.jsx(fE,{asChild:!0,...l,focusable:!r,children:o.jsx(ye.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:u,onPointerMove:Z(e.onPointerMove,ru(w=>{r?i.onItemLeave(w):(i.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Z(e.onPointerLeave,ru(w=>i.onItemLeave(w))),onFocus:Z(e.onFocus,()=>f(!0)),onBlur:Z(e.onBlur,()=>f(!1))})})})}),$5="MenuCheckboxItem",SE=d.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return o.jsx(kE,{scope:e.__scopeMenu,checked:n,children:o.jsx(Vf,{role:"menuitemcheckbox","aria-checked":Uh(n)?"mixed":n,...s,ref:t,"data-state":wx(n),onSelect:Z(s.onSelect,()=>r==null?void 0:r(Uh(n)?!0:!n),{checkForDefaultPrevented:!1})})})});SE.displayName=$5;var NE="MenuRadioGroup",[L5,F5]=Ga(NE,{value:void 0,onValueChange:()=>{}}),CE=d.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,a=Et(r);return o.jsx(L5,{scope:e.__scopeMenu,value:n,onValueChange:a,children:o.jsx(yx,{...s,ref:t})})});CE.displayName=NE;var _E="MenuRadioItem",EE=d.forwardRef((e,t)=>{const{value:n,...r}=e,s=F5(_E,e.__scopeMenu),a=n===s.value;return o.jsx(kE,{scope:e.__scopeMenu,checked:a,children:o.jsx(Vf,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":wx(a),onSelect:Z(r.onSelect,()=>{var i;return(i=s.onValueChange)==null?void 0:i.call(s,n)},{checkForDefaultPrevented:!1})})})});EE.displayName=_E;var xx="MenuItemIndicator",[kE,z5]=Ga(xx,{checked:!1}),TE=d.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,a=z5(xx,n);return o.jsx($t,{present:r||Uh(a.checked)||a.checked===!0,children:o.jsx(ye.span,{...s,ref:t,"data-state":wx(a.checked)})})});TE.displayName=xx;var U5="MenuSeparator",RE=d.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(ye.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});RE.displayName=U5;var B5="MenuArrow",PE=d.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=Kf(n);return o.jsx(Au,{...s,...r,ref:t})});PE.displayName=B5;var K5="MenuSub",[bK,AE]=Ga(K5),cc="MenuSubTrigger",OE=d.forwardRef((e,t)=>{const n=Qa(cc,e.__scopeMenu),r=Bu(cc,e.__scopeMenu),s=AE(cc,e.__scopeMenu),a=gx(cc,e.__scopeMenu),i=d.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:e.__scopeMenu},h=d.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return d.useEffect(()=>h,[h]),d.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),o.jsx(mx,{asChild:!0,...u,children:o.jsx(jE,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":DE(n.open),...e,ref:Cl(t,s.onTriggerChange),onClick:f=>{var m;(m=e.onClick)==null||m.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Z(e.onPointerMove,ru(f=>{a.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:Z(e.onPointerLeave,ru(f=>{var p,w;h();const m=(p=n.content)==null?void 0:p.getBoundingClientRect();if(m){const g=(w=n.content)==null?void 0:w.dataset.side,y=g==="right",x=y?-5:5,v=m[y?"left":"right"],b=m[y?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+x,y:f.clientY},{x:v,y:m.top},{x:b,y:m.top},{x:b,y:m.bottom},{x:v,y:m.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Z(e.onKeyDown,f=>{var p;const m=a.searchRef.current!=="";e.disabled||m&&f.key===" "||S5[r.dir].includes(f.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),f.preventDefault())})})})});OE.displayName=cc;var IE="MenuSubContent",ME=d.forwardRef((e,t)=>{const n=yE(Mr,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,a=Qa(Mr,e.__scopeMenu),i=Bu(Mr,e.__scopeMenu),l=AE(IE,e.__scopeMenu),c=d.useRef(null),u=qe(t,c);return o.jsx(nu.Provider,{scope:e.__scopeMenu,children:o.jsx($t,{present:r||a.open,children:o.jsx(nu.Slot,{scope:e.__scopeMenu,children:o.jsx(vx,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var f;i.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:Z(e.onFocusOutside,h=>{h.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Z(e.onEscapeKeyDown,h=>{i.onClose(),h.preventDefault()}),onKeyDown:Z(e.onKeyDown,h=>{var p;const f=h.currentTarget.contains(h.target),m=N5[i.dir].includes(h.key);f&&m&&(a.onOpenChange(!1),(p=l.trigger)==null||p.focus(),h.preventDefault())})})})})})});ME.displayName=IE;function DE(e){return e?"open":"closed"}function Uh(e){return e==="indeterminate"}function wx(e){return Uh(e)?"indeterminate":e?"checked":"unchecked"}function V5(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function q5(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function H5(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=q5(e,Math.max(a,0));s.length===1&&(i=i.filter(u=>u!==n));const c=i.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function W5(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const l=t[a],c=t[i],u=l.x,h=l.y,f=c.x,m=c.y;h>r!=m>r&&n<(f-u)*(r-h)/(m-h)+u&&(s=!s)}return s}function G5(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return W5(n,t)}function ru(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Q5=vE,Y5=mx,J5=xE,X5=wE,Z5=yx,eL=bE,tL=Vf,nL=SE,rL=CE,sL=EE,oL=TE,aL=RE,iL=PE,lL=OE,cL=ME,qf="DropdownMenu",[uL]=Nn(qf,[pE]),Vn=pE(),[dL,$E]=uL(qf),LE=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:a,onOpenChange:i,modal:l=!0}=e,c=Vn(t),u=d.useRef(null),[h,f]=rr({prop:s,defaultProp:a??!1,onChange:i,caller:qf});return o.jsx(dL,{scope:t,triggerId:Un(),triggerRef:u,contentId:Un(),open:h,onOpenChange:f,onOpenToggle:d.useCallback(()=>f(m=>!m),[f]),modal:l,children:o.jsx(Q5,{...c,open:h,onOpenChange:f,dir:r,modal:l,children:n})})};LE.displayName=qf;var FE="DropdownMenuTrigger",zE=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,a=$E(FE,n),i=Vn(n);return o.jsx(Y5,{asChild:!0,...i,children:o.jsx(ye.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Cl(t,a.triggerRef),onPointerDown:Z(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:Z(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});zE.displayName=FE;var hL="DropdownMenuPortal",UE=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Vn(t);return o.jsx(J5,{...r,...n})};UE.displayName=hL;var BE="DropdownMenuContent",KE=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=$E(BE,n),a=Vn(n),i=d.useRef(!1);return o.jsx(X5,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...r,ref:t,onCloseAutoFocus:Z(e.onCloseAutoFocus,l=>{var c;i.current||(c=s.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:Z(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,h=c.button===2||u;(!s.modal||h)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});KE.displayName=BE;var fL="DropdownMenuGroup",mL=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Vn(n);return o.jsx(Z5,{...s,...r,ref:t})});mL.displayName=fL;var pL="DropdownMenuLabel",VE=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Vn(n);return o.jsx(eL,{...s,...r,ref:t})});VE.displayName=pL;var gL="DropdownMenuItem",qE=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Vn(n);return o.jsx(tL,{...s,...r,ref:t})});qE.displayName=gL;var vL="DropdownMenuCheckboxItem",HE=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Vn(n);return o.jsx(nL,{...s,...r,ref:t})});HE.displayName=vL;var yL="DropdownMenuRadioGroup",xL=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Vn(n);return o.jsx(rL,{...s,...r,ref:t})});xL.displayName=yL;var wL="DropdownMenuRadioItem",WE=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Vn(n);return o.jsx(sL,{...s,...r,ref:t})});WE.displayName=wL;var bL="DropdownMenuItemIndicator",GE=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Vn(n);return o.jsx(oL,{...s,...r,ref:t})});GE.displayName=bL;var jL="DropdownMenuSeparator",QE=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Vn(n);return o.jsx(aL,{...s,...r,ref:t})});QE.displayName=jL;var SL="DropdownMenuArrow",NL=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Vn(n);return o.jsx(iL,{...s,...r,ref:t})});NL.displayName=SL;var CL="DropdownMenuSubTrigger",YE=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Vn(n);return o.jsx(lL,{...s,...r,ref:t})});YE.displayName=CL;var _L="DropdownMenuSubContent",JE=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Vn(n);return o.jsx(cL,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});JE.displayName=_L;var EL=LE,kL=zE,TL=UE,XE=KE,ZE=VE,ek=qE,tk=HE,nk=WE,rk=GE,sk=QE,ok=YE,ak=JE;function Ku(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var RL=["color"],PL=d.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Ku(e,RL);return d.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),d.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),AL=["color"],OL=d.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Ku(e,AL);return d.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),d.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),IL=["color"],ML=d.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Ku(e,IL);return d.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),d.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),DL=["color"],$L=d.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Ku(e,DL);return d.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),d.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))}),LL=["color"],FL=d.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,s=Ku(e,LL);return d.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),d.createElement("path",{d:"M8 2H13.5C13.7761 2 14 2.22386 14 2.5V12.5C14 12.7761 13.7761 13 13.5 13H8V2ZM7 2H1.5C1.22386 2 1 2.22386 1 2.5V12.5C1 12.7761 1.22386 13 1.5 13H7V2ZM0 2.5C0 1.67157 0.671573 1 1.5 1H13.5C14.3284 1 15 1.67157 15 2.5V12.5C15 13.3284 14.3284 14 13.5 14H1.5C0.671573 14 0 13.3284 0 12.5V2.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});const Ol=EL,Il=kL,zL=d.forwardRef(({className:e,inset:t,children:n,...r},s)=>o.jsxs(ok,{ref:s,className:ee("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[n,o.jsx(OL,{className:"ml-auto"})]}));zL.displayName=ok.displayName;const UL=d.forwardRef(({className:e,...t},n)=>o.jsx(ak,{ref:n,className:ee("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));UL.displayName=ak.displayName;const Ya=d.forwardRef(({className:e,sideOffset:t=4,...n},r)=>o.jsx(TL,{children:o.jsx(XE,{ref:r,sideOffset:t,className:ee("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})}));Ya.displayName=XE.displayName;const nr=d.forwardRef(({className:e,inset:t,...n},r)=>o.jsx(ek,{ref:r,className:ee("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",t&&"pl-8",e),...n}));nr.displayName=ek.displayName;const BL=d.forwardRef(({className:e,children:t,checked:n,...r},s)=>o.jsxs(tk,{ref:s,className:ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(rk,{children:o.jsx(PL,{className:"h-4 w-4"})})}),t]}));BL.displayName=tk.displayName;const KL=d.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(nk,{ref:r,className:ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(rk,{children:o.jsx($L,{className:"h-2 w-2 fill-current"})})}),t]}));KL.displayName=nk.displayName;const VL=d.forwardRef(({className:e,inset:t,...n},r)=>o.jsx(ZE,{ref:r,className:ee("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));VL.displayName=ZE.displayName;const bx=d.forwardRef(({className:e,...t},n)=>o.jsx(sk,{ref:n,className:ee("-mx-1 my-1 h-px bg-muted",e),...t}));bx.displayName=sk.displayName;const Ea=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{className:"relative w-full overflow-auto",children:o.jsx("table",{ref:n,className:ee("w-full caption-bottom text-sm",e),...t})}));Ea.displayName="Table";const ka=d.forwardRef(({className:e,...t},n)=>o.jsx("thead",{ref:n,className:ee("[&_tr]:border-b",e),...t}));ka.displayName="TableHeader";const Ta=d.forwardRef(({className:e,...t},n)=>o.jsx("tbody",{ref:n,className:ee("[&_tr:last-child]:border-0",e),...t}));Ta.displayName="TableBody";const qL=d.forwardRef(({className:e,...t},n)=>o.jsx("tfoot",{ref:n,className:ee("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));qL.displayName="TableFooter";const ur=d.forwardRef(({className:e,...t},n)=>o.jsx("tr",{ref:n,className:ee("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));ur.displayName="TableRow";const yt=d.forwardRef(({className:e,...t},n)=>o.jsx("th",{ref:n,className:ee("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));yt.displayName="TableHead";const xt=d.forwardRef(({className:e,...t},n)=>o.jsx("td",{ref:n,className:ee("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));xt.displayName="TableCell";const HL=d.forwardRef(({className:e,...t},n)=>o.jsx("caption",{ref:n,className:ee("mt-4 text-sm text-muted-foreground",e),...t}));HL.displayName="TableCaption";function jx(e){const t=d.useRef({value:e,previous:e});return d.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Hf="Checkbox",[WL]=Nn(Hf),[GL,Sx]=WL(Hf);function QL(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:a,form:i,name:l,onCheckedChange:c,required:u,value:h="on",internal_do_not_use_render:f}=e,[m,p]=rr({prop:n,defaultProp:s??!1,onChange:c,caller:Hf}),[w,g]=d.useState(null),[y,x]=d.useState(null),v=d.useRef(!1),b=w?!!i||!!w.closest("form"):!0,j={checked:m,disabled:a,setChecked:p,control:w,setControl:g,name:l,form:i,value:h,hasConsumerStoppedPropagationRef:v,required:u,defaultChecked:Do(s)?!1:s,isFormControl:b,bubbleInput:y,setBubbleInput:x};return o.jsx(GL,{scope:t,...j,children:YL(f)?f(j):r})}var ik="CheckboxTrigger",lk=d.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:a,value:i,disabled:l,checked:c,required:u,setControl:h,setChecked:f,hasConsumerStoppedPropagationRef:m,isFormControl:p,bubbleInput:w}=Sx(ik,e),g=qe(s,h),y=d.useRef(c);return d.useEffect(()=>{const x=a==null?void 0:a.form;if(x){const v=()=>f(y.current);return x.addEventListener("reset",v),()=>x.removeEventListener("reset",v)}},[a,f]),o.jsx(ye.button,{type:"button",role:"checkbox","aria-checked":Do(c)?"mixed":c,"aria-required":u,"data-state":fk(c),"data-disabled":l?"":void 0,disabled:l,value:i,...r,ref:g,onKeyDown:Z(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:Z(n,x=>{f(v=>Do(v)?!0:!v),w&&p&&(m.current=x.isPropagationStopped(),m.current||x.stopPropagation())})})});lk.displayName=ik;var Nx=d.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:i,disabled:l,value:c,onCheckedChange:u,form:h,...f}=e;return o.jsx(QL,{__scopeCheckbox:n,checked:s,defaultChecked:a,disabled:l,required:i,onCheckedChange:u,name:r,form:h,value:c,internal_do_not_use_render:({isFormControl:m})=>o.jsxs(o.Fragment,{children:[o.jsx(lk,{...f,ref:t,__scopeCheckbox:n}),m&&o.jsx(hk,{__scopeCheckbox:n})]})})});Nx.displayName=Hf;var ck="CheckboxIndicator",uk=d.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,a=Sx(ck,n);return o.jsx($t,{present:r||Do(a.checked)||a.checked===!0,children:o.jsx(ye.span,{"data-state":fk(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});uk.displayName=ck;var dk="CheckboxBubbleInput",hk=d.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:i,required:l,disabled:c,name:u,value:h,form:f,bubbleInput:m,setBubbleInput:p}=Sx(dk,e),w=qe(n,p),g=jx(a),y=LC(r);d.useEffect(()=>{const v=m;if(!v)return;const b=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(b,"checked").set,_=!s.current;if(g!==a&&S){const N=new Event("click",{bubbles:_});v.indeterminate=Do(a),S.call(v,Do(a)?!1:a),v.dispatchEvent(N)}},[m,g,a,s]);const x=d.useRef(Do(a)?!1:a);return o.jsx(ye.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??x.current,required:l,disabled:c,name:u,value:h,form:f,...t,tabIndex:-1,ref:w,style:{...t.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});hk.displayName=dk;function YL(e){return typeof e=="function"}function Do(e){return e==="indeterminate"}function fk(e){return Do(e)?"indeterminate":e?"checked":"unchecked"}const Zr=d.forwardRef(({className:e,...t},n)=>o.jsx(Nx,{ref:n,className:ee("peer h-4 w-4 shrink-0 rounded-sm border border-input ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:o.jsx(uk,{className:ee("flex items-center justify-center text-current"),children:o.jsx(Ai,{className:"h-4 w-4"})})}));Zr.displayName=Nx.displayName;function pv(e,[t,n]){return Math.min(n,Math.max(t,e))}var JL=[" ","Enter","ArrowUp","ArrowDown"],XL=[" ","Enter"],za="Select",[Wf,Gf,ZL]=_l(za),[Ml]=Nn(za,[ZL,_s]),Qf=_s(),[eF,Qo]=Ml(za),[tF,nF]=Ml(za),mk=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:a,value:i,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:m,required:p,form:w}=e,g=Qf(t),[y,x]=d.useState(null),[v,b]=d.useState(null),[j,S]=d.useState(!1),_=Al(u),[N,C]=rr({prop:r,defaultProp:s??!1,onChange:a,caller:za}),[E,D]=rr({prop:i,defaultProp:l,onChange:c,caller:za}),R=d.useRef(null),P=y?w||!!y.closest("form"):!0,[G,Q]=d.useState(new Set),ce=Array.from(G).map(Y=>Y.props.value).join(";");return o.jsx(Ru,{...g,children:o.jsxs(eF,{required:p,scope:t,trigger:y,onTriggerChange:x,valueNode:v,onValueNodeChange:b,valueNodeHasChildren:j,onValueNodeHasChildrenChange:S,contentId:Un(),value:E,onValueChange:D,open:N,onOpenChange:C,dir:_,triggerPointerDownPosRef:R,disabled:m,children:[o.jsx(Wf.Provider,{scope:t,children:o.jsx(tF,{scope:e.__scopeSelect,onNativeOptionAdd:d.useCallback(Y=>{Q(O=>new Set(O).add(Y))},[]),onNativeOptionRemove:d.useCallback(Y=>{Q(O=>{const T=new Set(O);return T.delete(Y),T})},[]),children:n})}),P?o.jsxs(Lk,{"aria-hidden":!0,required:p,tabIndex:-1,name:h,autoComplete:f,value:E,onChange:Y=>D(Y.target.value),disabled:m,form:w,children:[E===void 0?o.jsx("option",{value:""}):null,Array.from(G)]},ce):null]})})};mk.displayName=za;var pk="SelectTrigger",gk=d.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,a=Qf(n),i=Qo(pk,n),l=i.disabled||r,c=qe(t,i.onTriggerChange),u=Gf(n),h=d.useRef("touch"),[f,m,p]=zk(g=>{const y=u().filter(b=>!b.disabled),x=y.find(b=>b.value===i.value),v=Uk(y,g,x);v!==void 0&&i.onValueChange(v.value)}),w=g=>{l||(i.onOpenChange(!0),p()),g&&(i.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return o.jsx(Rl,{asChild:!0,...a,children:o.jsx(ye.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Fk(i.value)?"":void 0,...s,ref:c,onClick:Z(s.onClick,g=>{g.currentTarget.focus(),h.current!=="mouse"&&w(g)}),onPointerDown:Z(s.onPointerDown,g=>{h.current=g.pointerType;const y=g.target;y.hasPointerCapture(g.pointerId)&&y.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(w(g),g.preventDefault())}),onKeyDown:Z(s.onKeyDown,g=>{const y=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&m(g.key),!(y&&g.key===" ")&&JL.includes(g.key)&&(w(),g.preventDefault())})})})});gk.displayName=pk;var vk="SelectValue",yk=d.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:i="",...l}=e,c=Qo(vk,n),{onValueNodeHasChildrenChange:u}=c,h=a!==void 0,f=qe(t,c.onValueNodeChange);return en(()=>{u(h)},[u,h]),o.jsx(ye.span,{...l,ref:f,style:{pointerEvents:"none"},children:Fk(c.value)?o.jsx(o.Fragment,{children:i}):a})});yk.displayName=vk;var rF="SelectIcon",xk=d.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return o.jsx(ye.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});xk.displayName=rF;var sF="SelectPortal",wk=e=>o.jsx(Wa,{asChild:!0,...e});wk.displayName=sF;var Ua="SelectContent",bk=d.forwardRef((e,t)=>{const n=Qo(Ua,e.__scopeSelect),[r,s]=d.useState();if(en(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?Or.createPortal(o.jsx(jk,{scope:e.__scopeSelect,children:o.jsx(Wf.Slot,{scope:e.__scopeSelect,children:o.jsx("div",{children:e.children})})}),a):null}return o.jsx(Sk,{...e,ref:t})});bk.displayName=Ua;var qr=10,[jk,Yo]=Ml(Ua),oF="SelectContentImpl",aF=$a("SelectContent.RemoveScroll"),Sk=d.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:i,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:w,hideWhenDetached:g,avoidCollisions:y,...x}=e,v=Qo(Ua,n),[b,j]=d.useState(null),[S,_]=d.useState(null),N=qe(t,fe=>j(fe)),[C,E]=d.useState(null),[D,R]=d.useState(null),P=Gf(n),[G,Q]=d.useState(!1),ce=d.useRef(!1);d.useEffect(()=>{if(b)return Ff(b)},[b]),Df();const Y=d.useCallback(fe=>{const[ue,...$e]=P().map(Me=>Me.ref.current),[oe]=$e.slice(-1),Be=document.activeElement;for(const Me of fe)if(Me===Be||(Me==null||Me.scrollIntoView({block:"nearest"}),Me===ue&&S&&(S.scrollTop=0),Me===oe&&S&&(S.scrollTop=S.scrollHeight),Me==null||Me.focus(),document.activeElement!==Be))return},[P,S]),O=d.useCallback(()=>Y([C,b]),[Y,C,b]);d.useEffect(()=>{G&&O()},[G,O]);const{onOpenChange:T,triggerPointerDownPosRef:B}=v;d.useEffect(()=>{if(b){let fe={x:0,y:0};const ue=oe=>{var Be,Me;fe={x:Math.abs(Math.round(oe.pageX)-(((Be=B.current)==null?void 0:Be.x)??0)),y:Math.abs(Math.round(oe.pageY)-(((Me=B.current)==null?void 0:Me.y)??0))}},$e=oe=>{fe.x<=10&&fe.y<=10?oe.preventDefault():b.contains(oe.target)||T(!1),document.removeEventListener("pointermove",ue),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",ue),document.addEventListener("pointerup",$e,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ue),document.removeEventListener("pointerup",$e,{capture:!0})}}},[b,T,B]),d.useEffect(()=>{const fe=()=>T(!1);return window.addEventListener("blur",fe),window.addEventListener("resize",fe),()=>{window.removeEventListener("blur",fe),window.removeEventListener("resize",fe)}},[T]);const[$,W]=zk(fe=>{const ue=P().filter(Be=>!Be.disabled),$e=ue.find(Be=>Be.ref.current===document.activeElement),oe=Uk(ue,fe,$e);oe&&setTimeout(()=>oe.ref.current.focus())}),ae=d.useCallback((fe,ue,$e)=>{const oe=!ce.current&&!$e;(v.value!==void 0&&v.value===ue||oe)&&(E(fe),oe&&(ce.current=!0))},[v.value]),_e=d.useCallback(()=>b==null?void 0:b.focus(),[b]),ge=d.useCallback((fe,ue,$e)=>{const oe=!ce.current&&!$e;(v.value!==void 0&&v.value===ue||oe)&&R(fe)},[v.value]),De=r==="popper"?gv:Nk,Ee=De===gv?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:w,hideWhenDetached:g,avoidCollisions:y}:{};return o.jsx(jk,{scope:n,content:b,viewport:S,onViewportChange:_,itemRefCallback:ae,selectedItem:C,onItemLeave:_e,itemTextRefCallback:ge,focusSelectedItem:O,selectedItemText:D,position:r,isPositioned:G,searchRef:$,children:o.jsx(Mu,{as:aF,allowPinchZoom:!0,children:o.jsx(Iu,{asChild:!0,trapped:v.open,onMountAutoFocus:fe=>{fe.preventDefault()},onUnmountAutoFocus:Z(s,fe=>{var ue;(ue=v.trigger)==null||ue.focus({preventScroll:!0}),fe.preventDefault()}),children:o.jsx(Js,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:fe=>fe.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:o.jsx(De,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:fe=>fe.preventDefault(),...x,...Ee,onPlaced:()=>Q(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Z(x.onKeyDown,fe=>{const ue=fe.ctrlKey||fe.altKey||fe.metaKey;if(fe.key==="Tab"&&fe.preventDefault(),!ue&&fe.key.length===1&&W(fe.key),["ArrowUp","ArrowDown","Home","End"].includes(fe.key)){let oe=P().filter(Be=>!Be.disabled).map(Be=>Be.ref.current);if(["ArrowUp","End"].includes(fe.key)&&(oe=oe.slice().reverse()),["ArrowUp","ArrowDown"].includes(fe.key)){const Be=fe.target,Me=oe.indexOf(Be);oe=oe.slice(Me+1)}setTimeout(()=>Y(oe)),fe.preventDefault()}})})})})})})});Sk.displayName=oF;var iF="SelectItemAlignedPosition",Nk=d.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,a=Qo(Ua,n),i=Yo(Ua,n),[l,c]=d.useState(null),[u,h]=d.useState(null),f=qe(t,N=>h(N)),m=Gf(n),p=d.useRef(!1),w=d.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:x,focusSelectedItem:v}=i,b=d.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&g&&y&&x){const N=a.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),E=a.valueNode.getBoundingClientRect(),D=x.getBoundingClientRect();if(a.dir!=="rtl"){const Be=D.left-C.left,Me=E.left-Be,Ue=N.left-Me,Oe=N.width+Ue,He=Math.max(Oe,C.width),dt=window.innerWidth-qr,nt=pv(Me,[qr,Math.max(qr,dt-He)]);l.style.minWidth=Oe+"px",l.style.left=nt+"px"}else{const Be=C.right-D.right,Me=window.innerWidth-E.right-Be,Ue=window.innerWidth-N.right-Me,Oe=N.width+Ue,He=Math.max(Oe,C.width),dt=window.innerWidth-qr,nt=pv(Me,[qr,Math.max(qr,dt-He)]);l.style.minWidth=Oe+"px",l.style.right=nt+"px"}const R=m(),P=window.innerHeight-qr*2,G=g.scrollHeight,Q=window.getComputedStyle(u),ce=parseInt(Q.borderTopWidth,10),Y=parseInt(Q.paddingTop,10),O=parseInt(Q.borderBottomWidth,10),T=parseInt(Q.paddingBottom,10),B=ce+Y+G+T+O,$=Math.min(y.offsetHeight*5,B),W=window.getComputedStyle(g),ae=parseInt(W.paddingTop,10),_e=parseInt(W.paddingBottom,10),ge=N.top+N.height/2-qr,De=P-ge,Ee=y.offsetHeight/2,fe=y.offsetTop+Ee,ue=ce+Y+fe,$e=B-ue;if(ue<=ge){const Be=R.length>0&&y===R[R.length-1].ref.current;l.style.bottom="0px";const Me=u.clientHeight-g.offsetTop-g.offsetHeight,Ue=Math.max(De,Ee+(Be?_e:0)+Me+O),Oe=ue+Ue;l.style.height=Oe+"px"}else{const Be=R.length>0&&y===R[0].ref.current;l.style.top="0px";const Ue=Math.max(ge,ce+g.offsetTop+(Be?ae:0)+Ee)+$e;l.style.height=Ue+"px",g.scrollTop=ue-ge+g.offsetTop}l.style.margin=`${qr}px 0`,l.style.minHeight=$+"px",l.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[m,a.trigger,a.valueNode,l,u,g,y,x,a.dir,r]);en(()=>b(),[b]);const[j,S]=d.useState();en(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const _=d.useCallback(N=>{N&&w.current===!0&&(b(),v==null||v(),w.current=!1)},[b,v]);return o.jsx(cF,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:_,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:o.jsx(ye.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Nk.displayName=iF;var lF="SelectPopperPosition",gv=d.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=qr,...a}=e,i=Qf(n);return o.jsx(Pu,{...i,...a,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});gv.displayName=lF;var[cF,Cx]=Ml(Ua,{}),vv="SelectViewport",Ck=d.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,a=Yo(vv,n),i=Cx(vv,n),l=qe(t,a.onViewportChange),c=d.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(Wf.Slot,{scope:n,children:o.jsx(ye.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Z(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=i;if(m!=null&&m.current&&f){const p=Math.abs(c.current-h.scrollTop);if(p>0){const w=window.innerHeight-qr*2,g=parseFloat(f.style.minHeight),y=parseFloat(f.style.height),x=Math.max(g,y);if(x<w){const v=x+p,b=Math.min(w,v),j=v-b;f.style.height=b+"px",f.style.bottom==="0px"&&(h.scrollTop=j>0?j:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});Ck.displayName=vv;var _k="SelectGroup",[uF,dF]=Ml(_k),hF=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Un();return o.jsx(uF,{scope:n,id:s,children:o.jsx(ye.div,{role:"group","aria-labelledby":s,...r,ref:t})})});hF.displayName=_k;var Ek="SelectLabel",kk=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=dF(Ek,n);return o.jsx(ye.div,{id:s.id,...r,ref:t})});kk.displayName=Ek;var Bh="SelectItem",[fF,Tk]=Ml(Bh),Rk=d.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...i}=e,l=Qo(Bh,n),c=Yo(Bh,n),u=l.value===r,[h,f]=d.useState(a??""),[m,p]=d.useState(!1),w=qe(t,v=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,v,r,s)}),g=Un(),y=d.useRef("touch"),x=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(fF,{scope:n,value:r,disabled:s,textId:g,isSelected:u,onItemTextChange:d.useCallback(v=>{f(b=>b||((v==null?void 0:v.textContent)??"").trim())},[]),children:o.jsx(Wf.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:o.jsx(ye.div,{role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:w,onFocus:Z(i.onFocus,()=>p(!0)),onBlur:Z(i.onBlur,()=>p(!1)),onClick:Z(i.onClick,()=>{y.current!=="mouse"&&x()}),onPointerUp:Z(i.onPointerUp,()=>{y.current==="mouse"&&x()}),onPointerDown:Z(i.onPointerDown,v=>{y.current=v.pointerType}),onPointerMove:Z(i.onPointerMove,v=>{var b;y.current=v.pointerType,s?(b=c.onItemLeave)==null||b.call(c):y.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Z(i.onPointerLeave,v=>{var b;v.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:Z(i.onKeyDown,v=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&v.key===" "||(XL.includes(v.key)&&x(),v.key===" "&&v.preventDefault())})})})})});Rk.displayName=Bh;var uc="SelectItemText",Pk=d.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...a}=e,i=Qo(uc,n),l=Yo(uc,n),c=Tk(uc,n),u=nF(uc,n),[h,f]=d.useState(null),m=qe(t,x=>f(x),c.onItemTextChange,x=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,x,c.value,c.disabled)}),p=h==null?void 0:h.textContent,w=d.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:y}=u;return en(()=>(g(w),()=>y(w)),[g,y,w]),o.jsxs(o.Fragment,{children:[o.jsx(ye.span,{id:c.textId,...a,ref:m}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Or.createPortal(a.children,i.valueNode):null]})});Pk.displayName=uc;var Ak="SelectItemIndicator",Ok=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return Tk(Ak,n).isSelected?o.jsx(ye.span,{"aria-hidden":!0,...r,ref:t}):null});Ok.displayName=Ak;var yv="SelectScrollUpButton",Ik=d.forwardRef((e,t)=>{const n=Yo(yv,e.__scopeSelect),r=Cx(yv,e.__scopeSelect),[s,a]=d.useState(!1),i=qe(t,r.onScrollButtonChange);return en(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(Dk,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Ik.displayName=yv;var xv="SelectScrollDownButton",Mk=d.forwardRef((e,t)=>{const n=Yo(xv,e.__scopeSelect),r=Cx(xv,e.__scopeSelect),[s,a]=d.useState(!1),i=qe(t,r.onScrollButtonChange);return en(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;a(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(Dk,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Mk.displayName=xv;var Dk=d.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,a=Yo("SelectScrollButton",n),i=d.useRef(null),l=Gf(n),c=d.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return d.useEffect(()=>()=>c(),[c]),en(()=>{var h;const u=l().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),o.jsx(ye.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:Z(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:Z(s.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:Z(s.onPointerLeave,()=>{c()})})}),mF="SelectSeparator",$k=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return o.jsx(ye.div,{"aria-hidden":!0,...r,ref:t})});$k.displayName=mF;var wv="SelectArrow",pF=d.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Qf(n),a=Qo(wv,n),i=Yo(wv,n);return a.open&&i.position==="popper"?o.jsx(Au,{...s,...r,ref:t}):null});pF.displayName=wv;var gF="SelectBubbleInput",Lk=d.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=d.useRef(null),a=qe(r,s),i=jx(t);return d.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&h){const f=new Event("change",{bubbles:!0});h.call(l,t),l.dispatchEvent(f)}},[i,t]),o.jsx(ye.select,{...n,style:{...$1,...n.style},ref:a,defaultValue:t})});Lk.displayName=gF;function Fk(e){return e===""||e===void 0}function zk(e){const t=Et(e),n=d.useRef(""),r=d.useRef(0),s=d.useCallback(i=>{const l=n.current+i;t(l),(function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))})(l)},[t]),a=d.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return d.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function Uk(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=vF(e,Math.max(a,0));s.length===1&&(i=i.filter(u=>u!==n));const c=i.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function vF(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var yF=mk,Bk=gk,xF=yk,wF=xk,bF=wk,Kk=bk,jF=Ck,Vk=kk,qk=Rk,SF=Pk,NF=Ok,Hk=Ik,Wk=Mk,Gk=$k;const pl=yF,gl=xF,Ba=d.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(Bk,{ref:r,className:ee("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,o.jsx(wF,{asChild:!0,children:o.jsx(Wo,{className:"h-4 w-4 opacity-50"})})]}));Ba.displayName=Bk.displayName;const Qk=d.forwardRef(({className:e,...t},n)=>o.jsx(Hk,{ref:n,className:ee("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(cD,{className:"h-4 w-4"})}));Qk.displayName=Hk.displayName;const Yk=d.forwardRef(({className:e,...t},n)=>o.jsx(Wk,{ref:n,className:ee("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(Wo,{className:"h-4 w-4"})}));Yk.displayName=Wk.displayName;const Ka=d.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>o.jsx(bF,{children:o.jsxs(Kk,{ref:s,className:ee("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[o.jsx(Qk,{}),o.jsx(jF,{className:ee("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),o.jsx(Yk,{})]})}));Ka.displayName=Kk.displayName;const CF=d.forwardRef(({className:e,...t},n)=>o.jsx(Vk,{ref:n,className:ee("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));CF.displayName=Vk.displayName;const nn=d.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(qk,{ref:r,className:ee("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(NF,{children:o.jsx(Ai,{className:"h-4 w-4"})})}),o.jsx(SF,{children:t})]}));nn.displayName=qk.displayName;const _F=d.forwardRef(({className:e,...t},n)=>o.jsx(Gk,{ref:n,className:ee("-mx-1 my-1 h-px bg-muted",e),...t}));_F.displayName=Gk.displayName;function _x(e,t){if(!(t!=null&&t.entitiesByCategory))return"miscellaneous";for(const[n,r]of Object.entries(t.entitiesByCategory)){const s=a=>{for(const i of a)if(i.name===e||i.children&&Array.isArray(i.children)&&s(i.children))return!0;return!1};if(s(r))return n}return"miscellaneous"}function Jk(e){switch(e.toLowerCase()){case"countries":case"country":return fD;case"companies":case"company":return lC;case"people":case"person":return nv;case"digital-assets":case"crypto":case"cryptocurrency":return Qc;case"bitcoin-orgs":case"regulatory":case"organization":return Yw;case"protocols":case"protocol":return mD;case"topics":case"topic":return lr;case"currencies":case"currency":return Qc;case"crime":return Yw;case"events":return Mo;case"miscellaneous":case"other":return rs;default:return rs}}function vl(e){switch(e.toLowerCase()){case"countries":case"country":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"companies":case"company":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"people":case"person":return"bg-green-500/20 text-green-400 border-green-500/30";case"digital-assets":case"crypto":case"cryptocurrency":return"bg-orange-500/20 text-orange-400 border-orange-500/30";case"bitcoin-orgs":case"regulatory":case"organization":return"bg-indigo-500/20 text-indigo-400 border-indigo-500/30";case"protocols":case"protocol":return"bg-cyan-500/20 text-cyan-400 border-cyan-500/30";case"topics":case"topic":return"bg-pink-500/20 text-pink-400 border-pink-500/30";case"currencies":case"currency":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"crime":return"bg-red-500/20 text-red-400 border-red-500/30";case"events":return"bg-teal-500/20 text-teal-400 border-teal-500/30";case"miscellaneous":case"other":return"bg-gray-500/20 text-gray-400 border-gray-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}}function Kh({analyses:e,isLoading:t=!1,selectedDates:n=new Set,onDateSelect:r,onDateDeselect:s,onRowClick:a,onTagClick:i,emptyMessage:l="No analyses found",showCheckbox:c=!0,pageSize:u=50,currentPage:h=1,totalCount:f=0,catalogData:m,onPageChange:p,onPageSizeChange:w,onSelectAll:g,selectAllMatching:y=!1,pageSizeOptions:x=[50,200,500],showPagination:v=!0,showSelectAll:b=!0,bulkActions:j,showBulkActions:S=!0}){var D;const _=R=>{n.has(R)?s==null||s(R):r==null||r(R)},N=e.length>0&&e.every(R=>n.has(R.date)),C=Math.ceil(f/u),E=()=>{g?g():N||y?e.forEach(R=>{n.has(R.date)&&(s==null||s(R.date))}):e.forEach(R=>{n.has(R.date)||r==null||r(R.date)})};return t?o.jsx("div",{className:"rounded-md border",children:o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsxs("div",{className:"text-center",children:[o.jsx(et,{className:"w-8 h-8 animate-spin text-muted-foreground mx-auto mb-3"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading results..."})]})})}):e.length===0?o.jsx("div",{className:"rounded-md border",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx(rs,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3"}),o.jsx("p",{className:"text-muted-foreground",children:l})]})}):o.jsxs("div",{className:"space-y-4",children:[f>0&&(b||w)&&o.jsxs("div",{className:"flex items-center justify-between mb-2 pb-2",children:[b&&c&&o.jsx("div",{className:"flex items-center space-x-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Zr,{checked:N||y,onCheckedChange:E,"data-testid":"checkbox-select-all"}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"Select All"})]})}),w&&o.jsx("div",{className:"flex items-center space-x-3",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Per page:"}),o.jsxs(pl,{value:u.toString(),onValueChange:R=>{w(Number(R))},children:[o.jsx(Ba,{className:"w-20 h-8",children:o.jsx(gl,{})}),o.jsx(Ka,{children:x.map(R=>o.jsx(nn,{value:R.toString(),children:R},R))})]})]})})]}),S&&(n.size>0||y)&&j&&o.jsx("div",{className:"mb-4 p-4 bg-muted/50 border border-border rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Ai,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm font-medium text-foreground",children:y?`${f.toLocaleString()} selected`:`${n.size} selected`}),j.showSelectAllLink&&!y&&N&&f>e.length&&o.jsxs(q,{variant:"link",size:"sm",onClick:j.onSelectAllMatching,className:"text-muted-foreground hover:text-foreground h-auto p-0",children:["Select all ",f.toLocaleString()]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[(D=j.actions)==null?void 0:D.map((R,P)=>o.jsxs(q,{variant:R.variant||"outline",size:R.size||"sm",disabled:R.disabled,onClick:async()=>{const G=y?e.map(Q=>Q.date):Array.from(n);await R.onClick(G)},children:[R.icon,R.label]},P)),j.customActions,j.onClearSelection&&o.jsx(q,{variant:"ghost",size:"sm",onClick:j.onClearSelection,className:"text-muted-foreground hover:text-foreground",children:o.jsx(On,{className:"w-4 h-4"})})]})]})}),o.jsx("div",{className:"rounded-md border",children:o.jsxs(Ea,{children:[o.jsx(ka,{children:o.jsxs(ur,{children:[c&&o.jsx(yt,{className:"w-12",children:o.jsx("span",{className:"sr-only",children:"Select"})}),o.jsx(yt,{className:"w-36",children:"Date"}),o.jsx(yt,{children:"Summary"}),o.jsx(yt,{className:"w-32",children:"Tags"})]})}),o.jsx(Ta,{children:e.map(R=>{const P=n.has(R.date);return o.jsxs(ur,{"data-state":P?"selected":void 0,className:`cursor-pointer transition-colors ${P?"bg-blue-500/10 hover:bg-blue-500/15":"hover:bg-sidebar-accent"}`,onClick:()=>a==null?void 0:a(R.date),children:[c&&o.jsx(xt,{onClick:G=>G.stopPropagation(),children:o.jsx(Zr,{checked:P,onCheckedChange:()=>_(R.date)})}),o.jsx(xt,{className:"font-medium text-sm whitespace-nowrap",children:(()=>{const G=new Date(R.date),Q=G.getDate(),ce=G.toLocaleDateString("en-US",{month:"short"}),Y=G.getFullYear();return`${Q} ${ce} ${Y}`})()}),o.jsx(xt,{children:o.jsx("p",{className:"text-sm text-foreground/90",children:R.summary})}),o.jsx(xt,{children:R.tags_version2&&R.tags_version2.length>0?o.jsxs("div",{className:"flex flex-wrap gap-1",children:[R.tags_version2.slice(0,3).map((G,Q)=>{const ce=_x(G,m),Y=Jk(ce);return o.jsxs(he,{variant:"outline",className:`${vl(ce)} text-xs px-1.5 py-0.5 flex items-center space-x-1 ${i?"cursor-pointer hover:opacity-80 transition-opacity":""}`,title:G,onClick:i?O=>{O.stopPropagation(),i(G)}:void 0,children:[o.jsx(Y,{className:"w-2.5 h-2.5"}),o.jsx("span",{className:"truncate max-w-[60px]",children:G})]},`${G}-${Q}`)}),R.tags_version2.length>3&&o.jsxs(he,{variant:"secondary",className:"text-xs",children:["+",R.tags_version2.length-3]})]}):o.jsx("span",{className:"text-xs text-muted-foreground",children:""})})]},R.date)})})]})}),v&&f>0&&C>0&&o.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(h-1)*u+1,"-",Math.min(h*u,f).toLocaleString()," of ",f.toLocaleString()]}),p&&o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(q,{variant:"outline",size:"sm",onClick:()=>p(Math.max(1,h-1)),disabled:h===1,"data-testid":"button-prev-page",children:"Previous"}),o.jsx(q,{variant:"outline",size:"sm",onClick:()=>p(Math.min(C,h+1)),disabled:h===C,"data-testid":"button-next-page",children:"Next"})]})]})]})}var Xk={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Nb=Ce.createContext&&Ce.createContext(Xk),EF=["attr","size","title"];function kF(e,t){if(e==null)return{};var n=TF(e,t),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function TF(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Vh(){return Vh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vh.apply(this,arguments)}function Cb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function qh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Cb(Object(n),!0).forEach(function(r){RF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function RF(e,t,n){return t=PF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PF(e){var t=AF(e,"string");return typeof t=="symbol"?t:t+""}function AF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zk(e){return e&&e.map((t,n)=>Ce.createElement(t.tag,qh({key:n},t.attr),Zk(t.child)))}function eT(e){return t=>Ce.createElement(OF,Vh({attr:qh({},e.attr)},t),Zk(e.child))}function OF(e){var t=n=>{var{attr:r,size:s,title:a}=e,i=kF(e,EF),l=s||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),Ce.createElement("svg",Vh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,i,{className:c,style:qh(qh({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&Ce.createElement("title",null,a),e.children)};return Nb!==void 0?Ce.createElement(Nb.Consumer,null,n=>t(n)):t(Xk)}function Zo(e){return eT({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"},child:[]}]})(e)}function Ex(e){return eT({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729zm-9.022 12.6081a4.4755 4.4755 0 0 1-2.8764-1.0408l.1419-.0804 4.7783-2.7582a.7948.7948 0 0 0 .3927-.6813v-6.7369l2.02 1.1686a.071.071 0 0 1 .038.052v5.5826a4.504 4.504 0 0 1-4.4945 4.4944zm-9.6607-4.1254a4.4708 4.4708 0 0 1-.5346-3.0137l.142.0852 4.783 2.7582a.7712.7712 0 0 0 .7806 0l5.8428-3.3685v2.3324a.0804.0804 0 0 1-.0332.0615L9.74 19.9502a4.4992 4.4992 0 0 1-6.1408-1.6464zM2.3408 7.8956a4.485 4.485 0 0 1 2.3655-1.9728V11.6a.7664.7664 0 0 0 .3879.6765l5.8144 3.3543-2.0201 1.1685a.0757.0757 0 0 1-.071 0l-4.8303-2.7865A4.504 4.504 0 0 1 2.3408 7.872zm16.5963 3.8558L13.1038 8.364 15.1192 7.2a.0757.0757 0 0 1 .071 0l4.8303 2.7913a4.4944 4.4944 0 0 1-.6765 8.1042v-5.6772a.79.79 0 0 0-.407-.667zm2.0107-3.0231l-.142-.0852-4.7735-2.7818a.7759.7759 0 0 0-.7854 0L9.409 9.2297V6.8974a.0662.0662 0 0 1 .0284-.0615l4.8303-2.7866a4.4992 4.4992 0 0 1 6.6802 4.66zM8.3065 12.863l-2.02-1.1638a.0804.0804 0 0 1-.038-.0567V6.0742a4.4992 4.4992 0 0 1 7.3757-3.4537l-.142.0805L8.704 5.459a.7948.7948 0 0 0-.3927.6813zm1.0976-2.3654l2.602-1.4998 2.6069 1.4998v2.9994l-2.5974 1.4997-2.6067-1.4997Z"},child:[]}]})(e)}const IF=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class kx extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class MF extends kx{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class _b extends kx{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Eb extends kx{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var bv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(bv||(bv={}));class DF{constructor(t,{headers:n={},customFetch:r,region:s=bv.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=IF(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return ke(this,arguments,void 0,function*(n,r={}){var s;let a,i;try{const{headers:l,method:c,body:u,signal:h,timeout:f}=r;let m={},{region:p}=r;p||(p=this.region);const w=new URL(`${this.url}/${n}`);p&&p!=="any"&&(m["x-region"]=p,w.searchParams.set("forceFunctionRegion",p));let g;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(m["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(m["Content-Type"]="application/json",g=JSON.stringify(u)):g=u;let y=h;f&&(i=new AbortController,a=setTimeout(()=>i.abort(),f),h?(y=i.signal,h.addEventListener("abort",()=>i.abort())):y=i.signal);const x=yield this.fetch(w.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:g,signal:y}).catch(S=>{throw new MF(S)}),v=x.headers.get("x-relay-error");if(v&&v==="true")throw new _b(x);if(!x.ok)throw new Eb(x);let b=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),j;return b==="application/json"?j=yield x.json():b==="application/octet-stream"||b==="application/pdf"?j=yield x.blob():b==="text/event-stream"?j=x:b==="multipart/form-data"?j=yield x.formData():j=yield x.text(),{data:j,error:null,response:x}}catch(l){return{data:null,error:l,response:l instanceof Eb||l instanceof _b?l.context:void 0}}finally{a&&clearTimeout(a)}})}}var Fn={};const Dl=OP(m3);var Nd={},Cd={},_d={},Ed={},kd={},Td={},kb;function tT(){if(kb)return Td;kb=1,Object.defineProperty(Td,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Td.default=e,Td}var Tb;function nT(){if(Tb)return kd;Tb=1,Object.defineProperty(kd,"__esModule",{value:!0});const t=Dl.__importDefault(tT());class n{constructor(s){var a,i;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(a=s.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=s.signal,this.isMaybeSingle=(i=s.isMaybeSingle)!==null&&i!==void 0?i:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,a){return this.headers=new Headers(this.headers),this.headers.set(s,a),this}then(s,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let l=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,h,f,m;let p=null,w=null,g=null,y=c.status,x=c.statusText;if(c.ok){if(this.method!=="HEAD"){const S=await c.text();S===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?w=S:w=JSON.parse(S))}const b=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),j=(f=c.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");b&&j&&j.length>1&&(g=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(p={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,g=null,y=406,x="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const b=await c.text();try{p=JSON.parse(b),Array.isArray(p)&&c.status===404&&(w=[],p=null,y=200,x="OK")}catch{c.status===404&&b===""?(y=204,x="No Content"):p={message:b}}if(p&&this.isMaybeSingle&&(!((m=p==null?void 0:p.details)===null||m===void 0)&&m.includes("0 rows"))&&(p=null,y=200,x="OK"),p&&this.shouldThrowOnError)throw new t.default(p)}return{error:p,data:w,count:g,status:y,statusText:x}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,h,f,m,p,w;let g="";const y=c==null?void 0:c.cause;if(y){const x=(u=y==null?void 0:y.message)!==null&&u!==void 0?u:"",v=(h=y==null?void 0:y.code)!==null&&h!==void 0?h:"";g=`${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"FetchError"}: ${c==null?void 0:c.message}`,g+=`

Caused by: ${(m=y==null?void 0:y.name)!==null&&m!==void 0?m:"Error"}: ${x}`,v&&(g+=` (${v})`),y!=null&&y.stack&&(g+=`
${y.stack}`)}else g=(p=c==null?void 0:c.stack)!==null&&p!==void 0?p:"";return{error:{message:`${(w=c==null?void 0:c.name)!==null&&w!==void 0?w:"FetchError"}: ${c==null?void 0:c.message}`,details:g,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(s,a)}returns(){return this}overrideTypes(){return this}}return kd.default=n,kd}var Rb;function rT(){if(Rb)return Ed;Rb=1,Object.defineProperty(Ed,"__esModule",{value:!0});const t=Dl.__importDefault(nT());class n extends t.default{select(s){let a=!1;const i=(s??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:a=!0,nullsFirst:i,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${s}.${a?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:a,referencedTable:i=a}={}){const l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,a,{foreignTable:i,referencedTable:l=i}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(u,`${a-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:a=!1,settings:i=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var h;const f=[s?"analyze":null,a?"verbose":null,i?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Ed.default=n,Ed}var Pb;function Tx(){if(Pb)return _d;Pb=1,Object.defineProperty(_d,"__esModule",{value:!0});const t=Dl.__importDefault(rT()),n=new RegExp("[,()]");class r extends t.default{eq(a,i){return this.url.searchParams.append(a,`eq.${i}`),this}neq(a,i){return this.url.searchParams.append(a,`neq.${i}`),this}gt(a,i){return this.url.searchParams.append(a,`gt.${i}`),this}gte(a,i){return this.url.searchParams.append(a,`gte.${i}`),this}lt(a,i){return this.url.searchParams.append(a,`lt.${i}`),this}lte(a,i){return this.url.searchParams.append(a,`lte.${i}`),this}like(a,i){return this.url.searchParams.append(a,`like.${i}`),this}likeAllOf(a,i){return this.url.searchParams.append(a,`like(all).{${i.join(",")}}`),this}likeAnyOf(a,i){return this.url.searchParams.append(a,`like(any).{${i.join(",")}}`),this}ilike(a,i){return this.url.searchParams.append(a,`ilike.${i}`),this}ilikeAllOf(a,i){return this.url.searchParams.append(a,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(a,i){return this.url.searchParams.append(a,`ilike(any).{${i.join(",")}}`),this}is(a,i){return this.url.searchParams.append(a,`is.${i}`),this}in(a,i){const l=Array.from(new Set(i)).map(c=>typeof c=="string"&&n.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(a,`in.(${l})`),this}contains(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cs.{${i.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(i)}`),this}containedBy(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cd.{${i.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(i)}`),this}rangeGt(a,i){return this.url.searchParams.append(a,`sr.${i}`),this}rangeGte(a,i){return this.url.searchParams.append(a,`nxl.${i}`),this}rangeLt(a,i){return this.url.searchParams.append(a,`sl.${i}`),this}rangeLte(a,i){return this.url.searchParams.append(a,`nxr.${i}`),this}rangeAdjacent(a,i){return this.url.searchParams.append(a,`adj.${i}`),this}overlaps(a,i){return typeof i=="string"?this.url.searchParams.append(a,`ov.${i}`):this.url.searchParams.append(a,`ov.{${i.join(",")}}`),this}textSearch(a,i,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(a,`${u}fts${h}.${i}`),this}match(a){return Object.entries(a).forEach(([i,l])=>{this.url.searchParams.append(i,`eq.${l}`)}),this}not(a,i,l){return this.url.searchParams.append(a,`not.${i}.${l}`),this}or(a,{foreignTable:i,referencedTable:l=i}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${a})`),this}filter(a,i,l){return this.url.searchParams.append(a,`${i}.${l}`),this}}return _d.default=r,_d}var Ab;function sT(){if(Ab)return Cd;Ab=1,Object.defineProperty(Cd,"__esModule",{value:!0});const t=Dl.__importDefault(Tx());class n{constructor(s,{headers:a={},schema:i,fetch:l}){this.url=s,this.headers=new Headers(a),this.schema=i,this.fetch=l}select(s,a){const{head:i=!1,count:l}=a??{},c=i?"HEAD":"GET";let u=!1;const h=(s??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",h),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:a,defaultToNull:i=!0}={}){var l;const c="POST";if(a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const u=s.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(u.length>0){const h=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:a,ignoreDuplicates:i=!1,count:l,defaultToNull:c=!0}={}){var u;const h="POST";if(this.headers.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const f=s.reduce((m,p)=>m.concat(Object.keys(p)),[]);if(f.length>0){const m=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(s,{count:a}={}){var i;const l="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:s}={}){var a;const i="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Cd.default=n,Cd}var Ob;function $F(){if(Ob)return Nd;Ob=1,Object.defineProperty(Nd,"__esModule",{value:!0});const e=Dl,t=e.__importDefault(sT()),n=e.__importDefault(Tx());class r{constructor(a,{headers:i={},schema:l,fetch:c}={}){this.url=a,this.headers=new Headers(i),this.schemaName=l,this.fetch=c}from(a){const i=new URL(`${this.url}/${a}`);return new t.default(i,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new r(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,i={},{head:l=!1,get:c=!1,count:u}={}){var h;let f;const m=new URL(`${this.url}/rpc/${a}`);let p;l||c?(f=l?"HEAD":"GET",Object.entries(i).filter(([g,y])=>y!==void 0).map(([g,y])=>[g,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([g,y])=>{m.searchParams.append(g,y)})):(f="POST",p=i);const w=new Headers(this.headers);return u&&w.set("Prefer",`count=${u}`),new n.default({method:f,url:m,headers:w,schema:this.schemaName,body:p,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return Nd.default=r,Nd}Object.defineProperty(Fn,"__esModule",{value:!0});var oT=Fn.PostgrestError=pT=Fn.PostgrestBuilder=fT=Fn.PostgrestTransformBuilder=dT=Fn.PostgrestFilterBuilder=cT=Fn.PostgrestQueryBuilder=iT=Fn.PostgrestClient=void 0;const $l=Dl,aT=$l.__importDefault($F());var iT=Fn.PostgrestClient=aT.default;const lT=$l.__importDefault(sT());var cT=Fn.PostgrestQueryBuilder=lT.default;const uT=$l.__importDefault(Tx());var dT=Fn.PostgrestFilterBuilder=uT.default;const hT=$l.__importDefault(rT());var fT=Fn.PostgrestTransformBuilder=hT.default;const mT=$l.__importDefault(nT());var pT=Fn.PostgrestBuilder=mT.default;const gT=$l.__importDefault(tT());oT=Fn.PostgrestError=gT.default;var vT=Fn.default={PostgrestClient:aT.default,PostgrestQueryBuilder:lT.default,PostgrestFilterBuilder:uT.default,PostgrestTransformBuilder:hT.default,PostgrestBuilder:mT.default,PostgrestError:gT.default};const LF=zj({__proto__:null,get PostgrestBuilder(){return pT},get PostgrestClient(){return iT},get PostgrestError(){return oT},get PostgrestFilterBuilder(){return dT},get PostgrestQueryBuilder(){return cT},get PostgrestTransformBuilder(){return fT},default:vT},[Fn]),{PostgrestClient:FF,PostgrestQueryBuilder:jK,PostgrestFilterBuilder:SK,PostgrestTransformBuilder:NK,PostgrestBuilder:CK,PostgrestError:_K}=vT||LF;class zF{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const UF="2.83.0",BF=`realtime-js/${UF}`,yT="1.0.0",KF="2.0.0",Ib=yT,jv=1e4,VF=1e3,qF=100;var oa;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(oa||(oa={}));var ln;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ln||(ln={}));var Cr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Cr||(Cr={}));var Sv;(function(e){e.websocket="websocket"})(Sv||(Sv={}));var aa;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(aa||(aa={}));class HF{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(t,n){if(this._isArrayBuffer(t.payload))return n(this._binaryEncodePush(t));if(t.event===this.BROADCAST&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodePush(t){var n,r;const{event:s,topic:a,payload:i}=t,l=(n=t.ref)!==null&&n!==void 0?n:"",c=(r=t.join_ref)!==null&&r!==void 0?r:"",u=this.META_LENGTH+c.length+l.length+a.length+s.length,h=new ArrayBuffer(this.HEADER_LENGTH+u);let f=new DataView(h),m=0;f.setUint8(m++,this.KINDS.push),f.setUint8(m++,c.length),f.setUint8(m++,l.length),f.setUint8(m++,a.length),f.setUint8(m++,s.length),Array.from(c,w=>f.setUint8(m++,w.charCodeAt(0))),Array.from(l,w=>f.setUint8(m++,w.charCodeAt(0))),Array.from(a,w=>f.setUint8(m++,w.charCodeAt(0))),Array.from(s,w=>f.setUint8(m++,w.charCodeAt(0)));var p=new Uint8Array(h.byteLength+i.byteLength);return p.set(new Uint8Array(h),0),p.set(new Uint8Array(i),h.byteLength),p.buffer}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r,s,a;const i=t.topic,l=(n=t.ref)!==null&&n!==void 0?n:"",c=(r=t.join_ref)!==null&&r!==void 0?r:"",u=t.payload.event,h=(a=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&a!==void 0?a:new ArrayBuffer(0),f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+i.length+u.length,m=new ArrayBuffer(this.HEADER_LENGTH+f);let p=new DataView(m),w=0;p.setUint8(w++,this.KINDS.userBroadcastPush),p.setUint8(w++,c.length),p.setUint8(w++,l.length),p.setUint8(w++,i.length),p.setUint8(w++,u.length),p.setUint8(w++,this.BINARY_ENCODING),Array.from(c,y=>p.setUint8(w++,y.charCodeAt(0))),Array.from(l,y=>p.setUint8(w++,y.charCodeAt(0))),Array.from(i,y=>p.setUint8(w++,y.charCodeAt(0))),Array.from(u,y=>p.setUint8(w++,y.charCodeAt(0)));var g=new Uint8Array(m.byteLength+h.byteLength);return g.set(new Uint8Array(m),0),g.set(new Uint8Array(h),m.byteLength),g.buffer}_encodeJsonUserBroadcastPush(t){var n,r,s,a;const i=t.topic,l=(n=t.ref)!==null&&n!==void 0?n:"",c=(r=t.join_ref)!==null&&r!==void 0?r:"",u=t.payload.event,h=(a=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&a!==void 0?a:{},m=new TextEncoder().encode(JSON.stringify(h)).buffer,p=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+i.length+u.length,w=new ArrayBuffer(this.HEADER_LENGTH+p);let g=new DataView(w),y=0;g.setUint8(y++,this.KINDS.userBroadcastPush),g.setUint8(y++,c.length),g.setUint8(y++,l.length),g.setUint8(y++,i.length),g.setUint8(y++,u.length),g.setUint8(y++,this.JSON_ENCODING),Array.from(c,v=>g.setUint8(y++,v.charCodeAt(0))),Array.from(l,v=>g.setUint8(y++,v.charCodeAt(0))),Array.from(i,v=>g.setUint8(y++,v.charCodeAt(0))),Array.from(u,v=>g.setUint8(y++,v.charCodeAt(0)));var x=new Uint8Array(w.byteLength+m.byteLength);return x.set(new Uint8Array(w),0),x.set(new Uint8Array(m),w.byteLength),x.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[s,a,i,l,c]=r;return n({join_ref:s,ref:a,topic:i,event:l,payload:c})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.push:return this._decodePush(t,n,s);case this.KINDS.reply:return this._decodeReply(t,n,s);case this.KINDS.broadcast:return this._decodeBroadcast(t,n,s);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,s)}}_decodePush(t,n,r){const s=n.getUint8(1),a=n.getUint8(2),i=n.getUint8(3);let l=this.HEADER_LENGTH+this.META_LENGTH-1;const c=r.decode(t.slice(l,l+s));l=l+s;const u=r.decode(t.slice(l,l+a));l=l+a;const h=r.decode(t.slice(l,l+i));l=l+i;const f=JSON.parse(r.decode(t.slice(l,t.byteLength)));return{join_ref:c,ref:null,topic:u,event:h,payload:f}}_decodeReply(t,n,r){const s=n.getUint8(1),a=n.getUint8(2),i=n.getUint8(3),l=n.getUint8(4);let c=this.HEADER_LENGTH+this.META_LENGTH;const u=r.decode(t.slice(c,c+s));c=c+s;const h=r.decode(t.slice(c,c+a));c=c+a;const f=r.decode(t.slice(c,c+i));c=c+i;const m=r.decode(t.slice(c,c+l));c=c+l;const p=JSON.parse(r.decode(t.slice(c,t.byteLength))),w={status:m,response:p};return{join_ref:u,ref:h,topic:f,event:Cr.reply,payload:w}}_decodeBroadcast(t,n,r){const s=n.getUint8(1),a=n.getUint8(2);let i=this.HEADER_LENGTH+2;const l=r.decode(t.slice(i,i+s));i=i+s;const c=r.decode(t.slice(i,i+a));i=i+a;const u=JSON.parse(r.decode(t.slice(i,t.byteLength)));return{join_ref:null,ref:null,topic:l,event:c,payload:u}}_decodeUserBroadcast(t,n,r){const s=n.getUint8(1),a=n.getUint8(2),i=n.getUint8(3),l=n.getUint8(4);let c=this.HEADER_LENGTH+4;const u=r.decode(t.slice(c,c+s));c=c+s;const h=r.decode(t.slice(c,c+a));c=c+a;const f=r.decode(t.slice(c,c+i));c=c+i;const m=t.slice(c,t.byteLength),p=l===this.JSON_ENCODING?JSON.parse(r.decode(m)):m,w={type:this.BROADCAST,event:h,payload:p};return i>0&&(w.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST,payload:w}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}}class xT{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Pt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Pt||(Pt={}));const Mb=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((a,i)=>(a[i]=WF(i,e,t,s),a),{}):{}},WF=(e,t,n,r)=>{const s=t.find(l=>l.name===e),a=s==null?void 0:s.type,i=n[e];return a&&!r.includes(a)?wT(a,i):Nv(i)},wT=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return JF(t,n)}switch(e){case Pt.bool:return GF(t);case Pt.float4:case Pt.float8:case Pt.int2:case Pt.int4:case Pt.int8:case Pt.numeric:case Pt.oid:return QF(t);case Pt.json:case Pt.jsonb:return YF(t);case Pt.timestamp:return XF(t);case Pt.abstime:case Pt.date:case Pt.daterange:case Pt.int4range:case Pt.int8range:case Pt.money:case Pt.reltime:case Pt.text:case Pt.time:case Pt.timestamptz:case Pt.timetz:case Pt.tsrange:case Pt.tstzrange:return Nv(t);default:return Nv(t)}},Nv=e=>e,GF=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},QF=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},YF=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},JF=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let a;const i=e.slice(1,n);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(l=>wT(t,l))}return e},XF=e=>typeof e=="string"?e.replace(" ","T"):e,bT=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class hp{constructor(t,n,r={},s=jv){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Db;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Db||(Db={}));class Sc{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Sc.syncState(this.state,s,a,i),this.pendingDiffs.forEach(c=>{this.state=Sc.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Sc.syncDiff(this.state,s,a,i),l())}),this.onJoin((s,a,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:i})}),this.onLeave((s,a,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const a=this.cloneDeep(t),i=this.transformState(n),l={},c={};return this.map(a,(u,h)=>{i[u]||(c[u]=h)}),this.map(i,(u,h)=>{const f=a[u];if(f){const m=h.map(y=>y.presence_ref),p=f.map(y=>y.presence_ref),w=h.filter(y=>p.indexOf(y.presence_ref)<0),g=f.filter(y=>m.indexOf(y.presence_ref)<0);w.length>0&&(l[u]=w),g.length>0&&(c[u]=g)}else l[u]=h}),this.syncDiff(a,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:a,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const h=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),h.length>0){const f=t[l].map(p=>p.presence_ref),m=h.filter(p=>f.indexOf(p.presence_ref)<0);t[l].unshift(...m)}r(l,h,c)}),this.map(i,(l,c)=>{let u=t[l];if(!u)return;const h=c.map(f=>f.presence_ref);u=u.filter(f=>h.indexOf(f.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $b;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})($b||($b={}));var Nc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Nc||(Nc={}));var Ps;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ps||(Ps={}));class Rx{constructor(t,n={config:{}},r){var s,a;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=ln.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new hp(this,Cr.join,this.params,this.timeout),this.rejoinTimer=new xT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ln.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ln.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ln.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ln.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ln.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Cr.reply,{},(i,l)=>{this._trigger(this._replyEventName(l),i)}),this.presence=new Sc(this),this.broadcastEndpointURL=bT(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ln.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],h=!!this.bindings[Nc.PRESENCE]&&this.bindings[Nc.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,f={},m={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(Ps.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(Ps.CLOSED)),this.updateJoinPayload(Object.assign({config:m},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var w;if(this.socket.setAuth(),p===void 0){t==null||t(Ps.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,y=(w=g==null?void 0:g.length)!==null&&w!==void 0?w:0,x=[];for(let v=0;v<y;v++){const b=g[v],{filter:{event:j,schema:S,table:_,filter:N}}=b,C=p&&p[v];if(C&&C.event===j&&C.schema===S&&C.table===_&&C.filter===N)x.push(Object.assign(Object.assign({},b),{id:C.id}));else{this.unsubscribe(),this.state=ln.errored,t==null||t(Ps.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Ps.SUBSCRIBED);return}}).receive("error",p=>{this.state=ln.errored,t==null||t(Ps.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ps.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===ln.joined&&t===Nc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var s;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const i={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,i,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:i}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ln.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Cr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new hp(this,Cr.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ln.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),i=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),i}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new hp(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>qF){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,a;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:h}=Cr;if(r&&[l,c,u,h].indexOf(i)>=0&&r!==this._joinRef())return;let m=this._onMessage(i,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var w,g,y;return((w=p.filter)===null||w===void 0?void 0:w.event)==="*"||((y=(g=p.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===i}).map(p=>p.callback(m,r)):(a=this.bindings[i])===null||a===void 0||a.filter(p=>{var w,g,y,x,v,b;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const j=p.id,S=(w=p.filter)===null||w===void 0?void 0:w.event;return j&&((g=n.ids)===null||g===void 0?void 0:g.includes(j))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const j=(v=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return j==="*"||j===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof m=="object"&&"ids"in m){const w=m.data,{schema:g,table:y,commit_timestamp:x,type:v,errors:b}=w;m=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:x,eventType:v,new:{},old:{},errors:b}),this._getPayloadRecords(w))}p.callback(m,r)})}_isClosed(){return this.state===ln.closed}_isJoined(){return this.state===ln.joined}_isJoining(){return this.state===ln.joining}_isLeaving(){return this.state===ln.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&Rx.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Cr.close,{},t)}_onError(t){this._on(Cr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ln.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Mb(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Mb(t.columns,t.old_record)),n}}const fp=()=>{},Rd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ZF=[1e3,2e3,5e3,1e4],e6=1e4,t6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class n6{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=jv,this.transport=null,this.heartbeatIntervalMs=Rd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=fp,this.ref=0,this.reconnectTimer=null,this.vsn=Ib,this.logger=fp,this.conn=null,this.sendBuffer=[],this.serializer=new HF,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Sv.websocket}`,this.httpEndpoint=bT(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=zF.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case oa.connecting:return aa.Connecting;case oa.open:return aa.Open;case oa.closing:return aa.Closing;default:return aa.Closed}}isConnected(){return this.connectionState()===aa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===r);if(s)return s;{const a=new Rx(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:r,payload:s,ref:a}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(VF,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Rd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:a,ref:i}=n,l=i?`(${i})`:"",c=a.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,a,i)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===oa.open||this.conn.readyState===oa.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Cr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([t6],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:BF};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Cr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new xT(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Rd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,a,i,l,c,u,h,f,m,p;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:jv,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Rd.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(i=t==null?void 0:t.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:fp,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Ib,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:(w=>ZF[w-1]||e6),this.vsn){case yT:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:((w,g)=>g(JSON.stringify(w))),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:((w,g)=>g(JSON.parse(w)));break;case KF:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Px extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Bt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class r6 extends Px{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Cv extends Px{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const Ax=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),s6=()=>Response,_v=e=>{if(Array.isArray(e))return e.map(n=>_v(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=_v(r)}),t},o6=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},mp=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},a6=(e,t,n)=>ke(void 0,void 0,void 0,function*(){const r=yield s6();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const a=e.status||500,i=(s==null?void 0:s.statusCode)||a+"";t(new r6(mp(s),a,i))}).catch(s=>{t(new Cv(mp(s),s))}):t(new Cv(mp(e),e))}),i6=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(o6(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function Vu(e,t,n,r,s,a){return ke(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(n,i6(t,r,s,a)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>a6(c,l,r))})})}function su(e,t,n,r){return ke(this,void 0,void 0,function*(){return Vu(e,"GET",t,n,r)})}function Wr(e,t,n,r,s){return ke(this,void 0,void 0,function*(){return Vu(e,"POST",t,r,s,n)})}function Ev(e,t,n,r,s){return ke(this,void 0,void 0,function*(){return Vu(e,"PUT",t,r,s,n)})}function l6(e,t,n,r){return ke(this,void 0,void 0,function*(){return Vu(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Ox(e,t,n,r,s){return ke(this,void 0,void 0,function*(){return Vu(e,"DELETE",t,r,s,n)})}class c6{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return ke(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Bt(t))return{data:null,error:t};throw t}})}}var jT;class u6{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[jT]="BlobDownloadBuilder",this.promise=null}asStream(){return new c6(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ke(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Bt(t))return{data:null,error:t};throw t}})}}jT=Symbol.toStringTag;const d6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Lb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class h6{constructor(t,n={},r,s){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=Ax(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,s){return ke(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},Lb),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",i.cacheControl),c&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(c))):(a=r,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!i.duplex&&(i.duplex="half")),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),h=this._getFinalPath(u),f=yield(t=="PUT"?Ev:Wr)(this.fetch,`${this.url}/object/${h}`,a,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Bt(a))return{data:null,error:a};throw a}})}upload(t,n,r){return ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return ke(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),i=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:Lb.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const f=yield Ev(this.fetch,l.toString(),c,{headers:h});return{data:{path:a,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Bt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return ke(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const a=yield Wr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),i=new URL(this.url+a.url),l=i.searchParams.get("token");if(!l)throw new Px("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Bt(r))return{data:null,error:r};throw r}})}update(t,n,r){return ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return ke(this,void 0,void 0,function*(){try{return{data:yield Wr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}copy(t,n,r){return ke(this,void 0,void 0,function*(){try{return{data:{path:(yield Wr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return ke(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),a=yield Wr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return ke(this,void 0,void 0,function*(){try{const s=yield Wr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}download(t,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=a?`?${a}`:"",l=this._getFinalPath(t),c=()=>su(this.fetch,`${this.url}/${s}/${l}${i}`,{headers:this.headers,noResolveJson:!0});return new u6(c,this.shouldThrowOnError)}info(t){return ke(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield su(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:_v(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Bt(r))return{data:null,error:r};throw r}})}exists(t){return ke(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield l6(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Bt(r)&&r instanceof Cv){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&s.push(a);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return ke(this,void 0,void 0,function*(){try{return{data:yield Ox(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}list(t,n,r){return ke(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},d6),n),{prefix:t||""});return{data:yield Wr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}listV2(t,n){return ke(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Wr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Bt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const ST="2.83.0",NT={"X-Client-Info":`storage-js/${ST}`};class f6{constructor(t,n={},r,s){this.shouldThrowOnError=!1;const a=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},NT),n),this.fetch=Ax(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return ke(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield su(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}getBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:yield su(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}createBucket(t){return ke(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Wr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Bt(s))return{data:null,error:s};throw s}})}updateBucket(t,n){return ke(this,void 0,void 0,function*(){try{return{data:yield Ev(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Bt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:yield Wr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:yield Ox(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class m6{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},NT),n),this.fetch=Ax(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:yield Wr(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}listBuckets(t){return ke(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),s=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield su(this.fetch,s,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:yield Ox(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}}const Ix={"X-Client-Info":`storage-js/${ST}`,"Content-Type":"application/json"};class CT extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function dr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class pp extends CT{constructor(t,n,r){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class p6 extends CT{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var Fb;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Fb||(Fb={}));const Mx=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),g6=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},zb=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),v6=(e,t,n)=>ke(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const s=e.status||500,a=e;if(typeof a.json=="function")a.json().then(i=>{const l=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||s+"";t(new pp(zb(i),s,l))}).catch(()=>{const i=s+"",l=a.statusText||`HTTP ${s} error`;t(new pp(l,s,i))});else{const i=s+"",l=a.statusText||`HTTP ${s} error`;t(new pp(l,s,i))}}else t(new p6(zb(e),e))}),y6=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return r?(g6(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),n)):s};function x6(e,t,n,r,s,a){return ke(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(n,y6(t,r,s,a)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>i(c)).catch(c=>v6(c,l,r))})})}function hr(e,t,n,r,s){return ke(this,void 0,void 0,function*(){return x6(e,"POST",t,r,s,n)})}class w6{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ix),n),this.fetch=Mx(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return ke(this,void 0,void 0,function*(){try{return{data:(yield hr(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}getIndex(t,n){return ke(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}listIndexes(t){return ke(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return ke(this,void 0,void 0,function*(){try{return{data:(yield hr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(dr(r))return{data:null,error:r};throw r}})}}class b6{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ix),n),this.fetch=Mx(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return ke(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield hr(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}getVectors(t){return ke(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}listVectors(t){return ke(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield hr(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}queryVectors(t){return ke(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}deleteVectors(t){return ke(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield hr(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}}class j6{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ix),n),this.fetch=Mx(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:(yield hr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}getBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}listBuckets(){return ke(this,arguments,void 0,function*(t={}){try{return{data:yield hr(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:(yield hr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dr(n))return{data:null,error:n};throw n}})}}class S6 extends j6{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new N6(this.url,this.headers,t,this.fetch)}}class N6 extends w6{constructor(t,n,r,s){super(t,n,s),this.vectorBucketName=r}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ke(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ke(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ke(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ke(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new C6(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class C6 extends b6{constructor(t,n,r,s,a){super(t,n,a),this.vectorBucketName=r,this.indexName=s}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ke(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ke(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ke(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ke(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ke(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class _6 extends f6{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new h6(this.url,this.headers,t,this.fetch)}get vectors(){return new S6(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new m6(this.url+"/iceberg",this.headers,this.fetch)}}const E6="2.83.0";let dc="";typeof Deno<"u"?dc="deno":typeof document<"u"?dc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?dc="react-native":dc="node";const k6={"X-Client-Info":`supabase-js-${dc}/${E6}`},T6={headers:k6},R6={schema:"public"},P6={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},A6={},O6=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),I6=()=>Headers,M6=(e,t,n)=>{const r=O6(n),s=I6();return async(a,i)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(a,Object.assign(Object.assign({},i),{headers:u}))}};function D6(e){return e.endsWith("/")?e:e+"/"}function $6(e,t){var n,r;const{db:s,auth:a,realtime:i,global:l}=e,{db:c,auth:u,realtime:h,global:f}=t,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},h),i),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function L6(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(D6(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const _T="2.83.0",ui=30*1e3,kv=3,gp=kv*ui,F6="http://localhost:9999",z6="supabase.auth.token",U6={"X-Client-Info":`gotrue-js/${_T}`},Tv="X-Supabase-Api-Version",ET={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},B6=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,K6=600*1e3;class ou extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Re(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class V6 extends ou{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function q6(e){return Re(e)&&e.name==="AuthApiError"}class ia extends ou{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Jo extends ou{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class or extends Jo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function H6(e){return Re(e)&&e.name==="AuthSessionMissingError"}class ri extends Jo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Pd extends Jo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ad extends Jo{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function W6(e){return Re(e)&&e.name==="AuthImplicitGrantRedirectError"}class Ub extends Jo{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Rv extends Jo{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function vp(e){return Re(e)&&e.name==="AuthRetryableFetchError"}class Bb extends Jo{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Pv extends Jo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Hh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Kb=` 	
\r=`.split(""),G6=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Kb.length;t+=1)e[Kb[t].charCodeAt(0)]=-2;for(let t=0;t<Hh.length;t+=1)e[Hh[t].charCodeAt(0)]=t;return e})();function Vb(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Hh[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Hh[r]),t.queuedBits-=6}}function kT(e,t,n){const r=G6[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function qb(e){const t=[],n=i=>{t.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=i=>{J6(i,r,n)};for(let i=0;i<e.length;i+=1)kT(e.charCodeAt(i),s,a);return t.join("")}function Q6(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Y6(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Q6(r,t)}}function J6(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Di(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)kT(e.charCodeAt(s),n,r);return new Uint8Array(t)}function X6(e){const t=[];return Y6(e,n=>t.push(n)),new Uint8Array(t)}function pa(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Vb(s,n,r)),Vb(null,n,r),t.join("")}function Z6(e){return Math.round(Date.now()/1e3)+e}function ez(){return Symbol("auth-callback")}const yn=()=>typeof window<"u"&&typeof document<"u",ea={tested:!1,writable:!1},TT=()=>{if(!yn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ea.tested)return ea.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ea.tested=!0,ea.writable=!0}catch{ea.tested=!0,ea.writable=!1}return ea.writable};function tz(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const RT=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),nz=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",di=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ta=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ro=async(e,t)=>{await e.removeItem(t)};class Yf{constructor(){this.promise=new Yf.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Yf.promiseConstructor=Promise;function yp(e){const t=e.split(".");if(t.length!==3)throw new Pv("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!B6.test(t[r]))throw new Pv("JWT not in base64url format");return{header:JSON.parse(qb(t[0])),payload:JSON.parse(qb(t[1])),signature:Di(t[2]),raw:{header:t[0],payload:t[1]}}}async function rz(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function sz(e,t){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await e(a);if(!t(a,null,i)){r(i);return}}catch(i){if(!t(a,i)){s(i);return}}})()})}function oz(e){return("0"+e.toString(16)).substr(-2)}function az(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,oz).join("")}async function iz(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function lz(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await iz(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function si(e,t,n=!1){const r=az();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await di(e,`${t}-code-verifier`,s);const a=await lz(r);return[a,r===a?"plain":"s256"]}const cz=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function uz(e){const t=e.headers.get(Tv);if(!t||!t.match(cz))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function dz(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function hz(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const fz=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function oi(e){if(!fz.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function xp(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function mz(e,t){return new Proxy(e,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,s)}})}function Hb(e){return JSON.parse(JSON.stringify(e))}const sa=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),pz=[502,503,504];async function Wb(e){var t;if(!nz(e))throw new Rv(sa(e),0);if(pz.includes(e.status))throw new Rv(sa(e),e.status);let n;try{n=await e.json()}catch(a){throw new ia(sa(a),a)}let r;const s=uz(e);if(s&&s.getTime()>=ET["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Bb(sa(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new or}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new Bb(sa(n),e.status,n.weak_password.reasons);throw new V6(sa(n),e.status||500,r)}const gz=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ve(e,t,n,r){var s;const a=Object.assign({},r==null?void 0:r.headers);a[Tv]||(a[Tv]=ET["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const i=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await vz(e,t,n+l,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function vz(e,t,n,r,s,a){const i=gz(t,r,s,a);let l;try{l=await e(n,Object.assign({},i))}catch(c){throw console.error(c),new Rv(sa(c),0)}if(l.ok||await Wb(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Wb(c)}}function Vr(e){var t;let n=null;wz(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Z6(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Gb(e){const t=Vr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ho(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function yz(e){return{data:e,error:null}}function xz(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=e,i=Go(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function Qb(e){return e}function wz(e){return e.access_token&&e.refresh_token&&e.expires_in}const wp=["global","local","others"];class bz{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=RT(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=wp[0]){if(wp.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${wp.join(", ")}`);try{return await Ve(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ho})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Go(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:xz,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Re(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ve(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ho})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,a,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await Ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Qb});if(h.error)throw h.error;const f=await h.json(),m=(i=h.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(w=>{const g=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(w.split(";")[1].split("=")[1]);u[`${y}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Re(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){oi(t);try{return await Ve(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ho})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){oi(t);try{return await Ve(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:ho})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){oi(t);try{return await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:ho})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){oi(t.userId);try{const{data:n,error:r}=await Ve(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _deleteFactor(t){oi(t.userId),oi(t.id);try{return{data:await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,a,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await Ve(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Qb});if(h.error)throw h.error;const f=await h.json(),m=(i=h.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(w=>{const g=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(w.split(";")[1].split("=")[1]);u[`${y}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Re(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Ve(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Ve(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await Ve(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await Ve(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Ve(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}}function Yb(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const ai={debug:!!(globalThis&&TT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class PT extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class jz extends PT{}async function Sz(e,t,n){ai.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),ai.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){ai.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{ai.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw ai.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new jz(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ai.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Nz(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function AT(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Cz(e){return parseInt(e,16)}function _z(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function Ez(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:a=new Date,nonce:i,notBefore:l,requestId:c,resources:u,scheme:h,uri:f,version:m}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=AT(e.address),w=h?`${h}://${r}`:r,g=e.statement?`${e.statement}
`:"",y=`${w} wants you to sign in with your Ethereum account:
${p}

${g}`;let x=`URI: ${f}
Version: ${m}
Chain ID: ${n}${i?`
Nonce: ${i}`:""}
Issued At: ${a.toISOString()}`;if(s&&(x+=`
Expiration Time: ${s.toISOString()}`),l&&(x+=`
Not Before: ${l.toISOString()}`),c&&(x+=`
Request ID: ${c}`),u){let v=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);v+=`
- ${b}`}x+=v}return`${y}
${x}`}class sn extends Error{constructor({message:t,code:n,cause:r,name:s}){var a;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=s??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class Wh extends sn{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function kz({error:e,options:t}){var n,r,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new sn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new sn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new sn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new sn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new sn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new sn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new sn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new sn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(OT(i)){if(a.rp.id!==i)return new sn({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new sn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new sn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new sn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new sn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Tz({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new sn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new sn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(OT(r)){if(n.rpId!==r)return new sn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new sn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new sn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new sn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Rz{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Pz=new Rz;function Az(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=Go(e,["challenge","user","excludeCredentials"]),a=Di(t).buffer,i=Object.assign(Object.assign({},n),{id:Di(n.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:a,user:i});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Di(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function Oz(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=Go(e,["challenge","allowCredentials"]),s=Di(t).buffer,a=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let i=0;i<n.length;i++){const l=n[i];a.allowCredentials[i]=Object.assign(Object.assign({},l),{id:Di(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function Iz(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:pa(new Uint8Array(e.response.attestationObject)),clientDataJSON:pa(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Mz(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:pa(new Uint8Array(s.authenticatorData)),clientDataJSON:pa(new Uint8Array(s.clientDataJSON)),signature:pa(new Uint8Array(s.signature)),userHandle:s.userHandle?pa(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function OT(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Jb(){var e,t;return!!(yn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Dz(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Wh("Browser returned unexpected credential type",t)}:{data:null,error:new Wh("Empty credential response",t)}}catch(t){return{data:null,error:kz({error:t,options:e})}}}async function $z(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Wh("Browser returned unexpected credential type",t)}:{data:null,error:new Wh("Empty credential response",t)}}catch(t){return{data:null,error:Tz({error:t,options:e})}}}const Lz={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Fz={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Gh(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const a in s){const i=s[a];if(i!==void 0)if(Array.isArray(i))r[a]=i;else if(n(i))r[a]=i;else if(t(i)){const l=r[a];t(l)?r[a]=Gh(l,i):r[a]=Gh(i)}else r[a]=i}return r}function zz(e,t){return Gh(Lz,e,t||{})}function Uz(e,t){return Gh(Fz,e,t||{})}class Bz{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},a){try{const{data:i,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!i)return{data:null,error:l};const c=s??Pz.createNewAbortSignal();if(i.webauthn.type==="create"){const{user:u}=i.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(i.webauthn.type){case"create":{const u=zz(i.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:h,error:f}=await Dz({publicKey:u,signal:c});return h?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}case"request":{const u=Uz(i.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:h,error:f}=await $z(Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:u,signal:c}));return h?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}}}catch(i){return Re(i)?{data:null,error:i}:{data:null,error:new ia("Unexpected error in challenge",i)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new ou("rpId is required for WebAuthn authentication")};try{if(!Jb())return{data:null,error:new ia("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:a});if(!i)return{data:null,error:l};const{webauthn:c}=i;return this._verify({factorId:t,challengeId:i.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(i){return Re(i)?{data:null,error:i}:{data:null,error:new ia("Unexpected error in authenticate",i)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new ou("rpId is required for WebAuthn registration")};try{if(!Jb())return{data:null,error:new ia("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this._enroll({friendlyName:t});if(!i)return await this.client.mfa.listFactors().then(h=>{var f;return(f=h.data)===null||f===void 0?void 0:f.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:a});return c?this._verify({factorId:i.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(i){return Re(i)?{data:null,error:i}:{data:null,error:new ia("Unexpected error in register",i)}}}}Nz();const Kz={url:F6,storageKey:z6,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:U6,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Xb(e,t,n){return await n()}const ii={};class au{get jwks(){var t,n;return(n=(t=ii[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){ii[this.storageKey]=Object.assign(Object.assign({},ii[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=ii[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ii[this.storageKey]=Object.assign(Object.assign({},ii[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},Kz),t);if(this.storageKey=a.storageKey,this.instanceID=(n=au.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,au.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&yn()){const i=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(i),this.logDebugMessages&&console.trace(i)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new bz({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=RT(a.fetch),this.lock=a.lock||Xb,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:yn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Sz:this.lock=Xb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Bz(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:TT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Yb(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Yb(this.memoryStorage)),yn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${_T}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(yn()&&(n=tz(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),yn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),W6(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Re(n)?this._returnResult({error:n}):this._returnResult({error:new ia("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const a=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Vr}),{data:i,error:l}=a;if(l||!i)return this._returnResult({data:{user:null,session:null},error:l});const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(Re(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var n,r,s;try{let a;if("email"in t){const{email:h,password:f,options:m}=t;let p=null,w=null;this.flowType==="pkce"&&([p,w]=await si(this.storage,this.storageKey)),a=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:h,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:w},xform:Vr})}else if("phone"in t){const{phone:h,password:f,options:m}=t;a=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Vr})}else throw new Pd("You must provide either an email or phone number and a password");const{data:i,error:l}=a;if(l||!i)return this._returnResult({data:{user:null,session:null},error:l});const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(Re(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:i,options:l}=t;n=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Gb})}else if("phone"in t){const{phone:a,password:i,options:l}=t;n=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Gb})}else throw new Pd("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const a=new ri;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,a,i,l,c,u,h,f,m;let p,w;if("message"in t)p=t.message,w=t.signature;else{const{chain:g,wallet:y,statement:x,options:v}=t;let b;if(yn())if(typeof y=="object")b=y;else{const E=window;if("ethereum"in E&&typeof E.ethereum=="object"&&"request"in E.ethereum&&typeof E.ethereum.request=="function")b=E.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=y}const j=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href),S=await b.request({method:"eth_requestAccounts"}).then(E=>E).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const _=AT(S[0]);let N=(r=v==null?void 0:v.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!N){const E=await b.request({method:"eth_chainId"});N=Cz(E)}const C={domain:j.host,address:_,statement:x,uri:j.href,version:"1",chainId:N,nonce:(s=v==null?void 0:v.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(i=(a=v==null?void 0:v.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(l=v==null?void 0:v.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=v==null?void 0:v.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=v==null?void 0:v.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=v==null?void 0:v.signInWithEthereum)===null||h===void 0?void 0:h.resources};p=Ez(C),w=await b.request({method:"personal_sign",params:[_z(p),_]})}try{const{data:g,error:y}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:w},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Vr});if(y)throw y;if(!g||!g.session||!g.user){const x=new ri;return this._returnResult({data:{user:null,session:null},error:x})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:y})}catch(g){if(Re(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var n,r,s,a,i,l,c,u,h,f,m,p;let w,g;if("message"in t)w=t.message,g=t.signature;else{const{chain:y,wallet:x,statement:v,options:b}=t;let j;if(yn())if(typeof x=="object")j=x;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))j=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=x}const S=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const _=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),v?{statement:v}:null));let N;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")N=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)N=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)w=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),g=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${S.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(h=b==null?void 0:b.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const _=await j.signMessage(new TextEncoder().encode(w),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=_}}try{const{data:y,error:x}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:pa(g)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Vr});if(x)throw x;if(!y||!y.session||!y.user){const v=new ri;return this._returnResult({data:{user:null,session:null},error:v})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:x})}catch(y){if(Re(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async _exchangeCodeForSession(t){const n=await ta(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:a,error:i}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Vr});if(await ro(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!a||!a.session||!a.user){const l=new ri;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:i})}catch(a){if(Re(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:a,nonce:i}=t,l=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Vr}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const h=new ri;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,s,a,i;try{if("email"in t){const{email:l,options:c}=t;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await si(this.storage,this.storageKey));const{error:f}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:h}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new Pd("You must provide either an email or phone number.")}catch(l){if(Re(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var n,r;try{let s,a;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:l}=await Ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Vr});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(Re(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var n,r,s,a,i;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await si(this.storage,this.storageKey));const u=await Ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:yz});return!((a=u.data)===null||a===void 0)&&a.url&&yn()&&!(!((i=t.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(Re(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new or;const{error:s}=await Ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(Re(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:a}=t,{error:i}=await Ve(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:i})}else if("phone"in t){const{phone:r,type:s,options:a}=t,{data:i,error:l}=await Ve(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l})}throw new Pd("You must provide either an email or phone number and a type")}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await ta(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<gp:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const i=await ta(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=xp()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const i={value:this.suppressGetSessionWarning};t.user=mz(t.user,i),i.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ho}):await this._useSession(async n=>{var r,s,a;const{data:i,error:l}=n;if(l)throw l;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new or}:await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:ho})})}catch(n){if(Re(n))return H6(n)&&(await this._removeSession(),await ro(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new or;const i=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await si(this.storage,this.storageKey));const{data:u,error:h}=await Ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:ho});if(h)throw h;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),this._returnResult({data:{user:i.user},error:null})})}catch(r){if(Re(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new or;const n=Date.now()/1e3;let r=n,s=!0,a=null;const{payload:i}=yp(t.access_token);if(i.exp&&(r=i.exp,s=r<=n),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(Re(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:i,error:l}=n;if(l)throw l;t=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new or;const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!yn())throw new Ad("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ad(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Ub("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ad("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ub("No code detected.");const{data:v,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:i,expires_in:l,expires_at:c,token_type:u}=t;if(!a||!l||!i||!u)throw new Ad("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(l);let m=h+f;c&&(m=parseInt(c));const p=m-h;p*1e3<=ui&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const w=m-f;h-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,m,h):h-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,m,h);const{data:g,error:y}=await this._getUser(a);if(y)throw y;const x={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:m,refresh_token:i,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:t.type},error:null})}catch(r){if(Re(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await ta(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({error:a});const i=(r=s.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(q6(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await ro(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=ez(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await si(this.storage,this.storageKey,!0));try{return await Ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(Re(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var i,l,c,u,h;const{data:f,error:m}=a;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ve(this.fetch,"GET",p,{headers:this.headers,jwt:(h=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return yn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Re(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:a}}=n;if(s)throw s;const{options:i,provider:l,token:c,access_token:u,nonce:h}=t,f=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:Vr}),{data:m,error:p}=f;return p?this._returnResult({data:{user:null,session:null},error:p}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new ri}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:p}))}catch(s){if(Re(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:a,error:i}=n;if(i)throw i;return await Ve(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await sz(async s=>(s>0&&await rz(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Vr})),(s,a)=>{const i=200*Math.pow(2,s);return a&&vp(a)&&Date.now()+i-r<ui})}catch(r){if(this._debug(n,"error",r),Re(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),yn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await ta(this.storage,this.storageKey);if(s&&this.userStorage){let i=await ta(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await di(this.userStorage,this.storageKey+"-user",i)),s.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:xp()}else if(s&&!s.user&&!s.user){const i=await ta(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await ro(this.storage,this.storageKey+"-user"),await di(this.storage,this.storageKey,s)):s.user=xp()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<gp;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${gp}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),vp(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(s.access_token);!l&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(r,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new or;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Yf;const{data:a,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!a.session)throw new or;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),Re(a)){const i={data:null,error:a};return vp(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await di(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const a=Hb(s);await di(this.storage,this.storageKey,a)}else{const s=Hb(n);await di(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await ro(this.storage,this.storageKey),await ro(this.storage,this.storageKey+"-code-verifier"),await ro(this.storage,this.storageKey+"-user"),this.userStorage&&await ro(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&yn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ui);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/ui);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ui}ms, refresh threshold is ${kv} ticks`),s<=kv&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof PT)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!yn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,i]=await si(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?this._returnResult({data:null,error:a}):await Ve(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:a,error:i}=n;if(i)return this._returnResult({data:null,error:i});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await Ve(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const i=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Iz(t.webauthn.credential_response):Mz(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await Ve(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:i,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const i=await Ve(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(i.error)return i;const{data:l}=i;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Az(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Oz(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=yp(r.access_token);let i=null;a.aal&&(i=a.aal);let l=i;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=a.amr||[];return{data:{currentLevel:i,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await Ve(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new or})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new or});const i=await Ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&yn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new or});const i=await Ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&yn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await Ve(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new or})})}catch(t){if(Re(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await Ve(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new or})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+K6>s)return r;const{data:a,error:i}=await Ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,r=a.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:p,error:w}=await this.getSession();if(w||!p.session)return this._returnResult({data:null,error:w});r=p.session.access_token}const{header:s,payload:a,signature:i,raw:{header:l,payload:c}}=yp(r);n!=null&&n.allowExpired||dz(a.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:a,header:s,signature:i},error:null}}const h=hz(s.alg),f=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,i,X6(`${l}.${c}`)))throw new Pv("Invalid JWT signature");return{data:{claims:a,header:s,signature:i},error:null}}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}}au.nextInstanceID={};const Vz=au;class qz extends Vz{constructor(t){super(t)}}class Hz{constructor(t,n,r){var s,a,i;this.supabaseUrl=t,this.supabaseKey=n;const l=L6(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:R6,realtime:A6,auth:Object.assign(Object.assign({},P6),{storageKey:c}),global:T6},h=$6(r??{},u);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=h.auth)!==null&&i!==void 0?i:{},this.headers,h.global.fetch),this.fetch=M6(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new FF(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new _6(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new DF(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:a,storageKey:i,flowType:l,lock:c,debug:u,throwOnError:h},f,m){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new qz({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),f),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:a,flowType:l,lock:c,debug:u,throwOnError:h,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new n6(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const IT=(e,t,n)=>new Hz(e,t,n);function Wz(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Wz()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Gz={SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0ZmJwdm9obm1tY3ZocmJxYXlxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyODM3NTksImV4cCI6MjA3ODg1OTc1OX0.tc76cHxWVy8bR_mWOvPkfDpBl365HyWRh7-bK1fwz8U",SUPABASE_URL:"https://gtfbpvohnmmcvhrbqayq.supabase.co"},$i=Gz,Zb=$i.VITE_SUPABASE_URL??$i.SUPABASE_URL??$i.PUBLIC_SUPABASE_URL,ej=$i.VITE_SUPABASE_ANON_KEY??$i.SUPABASE_ANON_KEY??$i.PUBLIC_SUPABASE_ANON_KEY,Ye=Zb&&ej?IT(Zb,ej,{auth:{persistSession:!1}}):null;var Qz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Jf=Qz.reduce((e,t)=>{const n=a_(`Primitive.${t}`),r=d.forwardRef((s,a)=>{const{asChild:i,...l}=s,c=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),Yz="Label",MT=d.forwardRef((e,t)=>o.jsx(Jf.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));MT.displayName=Yz;var DT=MT;const Jz=Ho("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),es=d.forwardRef(({className:e,...t},n)=>o.jsx(DT,{ref:n,className:ee(Jz(),e),...t}));es.displayName=DT.displayName;const Dx=[{key:"bitcoin",name:"Bitcoin",emoji:"",children:[{key:"1.1",name:"Bitcoin (BTC) - The Currency"},{key:"1.2",name:"Bitcoin Technology",children:[{key:"1.2.1",name:"Core Implementations"},{key:"1.2.2",name:"Major Upgrades"},{key:"1.2.3",name:"Bitcoin Improvement Proposals (BIPs)"},{key:"1.2.4",name:"Transaction Features"},{key:"1.2.5",name:"Layer 2 & Scaling"},{key:"1.2.6",name:"Mining & Consensus"}]},{key:"1.3",name:"Bitcoin Forks"},{key:"1.4",name:"Bitcoin Companies & Services"}]},{key:"money-economics",name:"Money & Economics",emoji:"",children:[{key:"2.1",name:"Other Cryptocurrencies"},{key:"2.2",name:"Stablecoins"},{key:"2.3",name:"DeFi Tokens"},{key:"2.4",name:"Metaverse & Gaming"},{key:"2.5",name:"Fiat Currencies"},{key:"2.6",name:"Commodities"},{key:"2.7",name:"Central Banks"},{key:"2.8",name:"Prices & Values"}]},{key:"technology",name:"Technology Concepts",emoji:"",children:[{key:"3.1",name:"Blockchain & Core Concepts"},{key:"3.2",name:"DeFi & Web3 Concepts"},{key:"3.3",name:"Security & Privacy"},{key:"3.4",name:"Wallets & Storage"},{key:"3.5",name:"Technical Standards"}]},{key:"organizations",name:"Organizations & Companies",emoji:"",children:[{key:"4.1",name:"Exchanges",children:[{key:"4.1.1",name:"Major Centralized Exchanges"},{key:"4.1.2",name:"Decentralized Exchanges (DEX)"},{key:"4.1.3",name:"Defunct Exchanges"}]},{key:"4.2",name:"Financial Institutions",children:[{key:"4.2.1",name:"Investment Banks"},{key:"4.2.2",name:"Commercial Banks"},{key:"4.2.3",name:"Asset Managers"},{key:"4.2.4",name:"Stock Exchanges"}]},{key:"4.3",name:"Mining Operations",children:[{key:"4.3.1",name:"Public Mining Companies"},{key:"4.3.2",name:"Mining Hardware Manufacturers"},{key:"4.3.3",name:"Mining Pools"}]},{key:"4.4",name:"Payment & Infrastructure",children:[{key:"4.4.1",name:"Payment Processors"},{key:"4.4.2",name:"Custody & Wallets"},{key:"4.4.3",name:"Blockchain Infrastructure"},{key:"4.4.4",name:"Stablecoin Issuers"}]},{key:"4.5",name:"DeFi Platforms"},{key:"4.6",name:"NFT Marketplaces"},{key:"4.7",name:"Technology Companies",children:[{key:"4.7.1",name:"Big Tech"},{key:"4.7.2",name:"Social Media & Communication"},{key:"4.7.3",name:"Fintech & Payments"},{key:"4.7.4",name:"E-commerce & Retail"},{key:"4.7.5",name:"Corporate Bitcoin Holders"}]},{key:"4.8",name:"Media & Analytics"},{key:"4.9",name:"Development & Research"},{key:"4.10",name:"Other Organizations"}]},{key:"people",name:"People",emoji:"",children:[{key:"5.1",name:"Crypto & Tech Figures"},{key:"5.2",name:"Government Officials"},{key:"5.3",name:"Investors & Analysts"},{key:"5.4",name:"Controversial & Famous Figures"}]},{key:"regulation-law",name:"Regulation & Government",emoji:"",children:[{key:"6.1",name:"Regulatory Bodies"},{key:"6.2",name:"Laws & Frameworks"},{key:"6.3",name:"Government Initiatives"}]},{key:"markets-geography",name:"Geography & Markets",emoji:"",children:[{key:"7.1",name:"Countries & Regions"},{key:"7.2",name:"Cities & Special Locations"}]},{key:"education-community",name:"Education & Community",emoji:"",children:[{key:"8.1",name:"Development Organizations"},{key:"8.2",name:"Community Forums & Platforms"},{key:"8.3",name:"Research & Academia"}]},{key:"crime-security",name:"Crime & Security",emoji:"",children:[{key:"9.1",name:"Dark Web & Criminal Marketplaces"},{key:"9.2",name:"Major Crimes & Scams",children:[{key:"9.2.1",name:"Ponzi Schemes"},{key:"9.2.2",name:"Major Hacks"},{key:"9.2.3",name:"Fraud Cases"}]},{key:"9.3",name:"Law Enforcement Actions"},{key:"9.4",name:"Security Concepts"}]},{key:"topics",name:"Topics & Themes",emoji:"",children:[{key:"10.1",name:"Market Topics",children:[{key:"10.1.1",name:"Price & Valuation"},{key:"10.1.2",name:"Market Cycles"},{key:"10.1.3",name:"Trading Activity"}]},{key:"10.2",name:"Regulatory Topics"},{key:"10.3",name:"Adoption & Integration",children:[{key:"10.3.1",name:"Institutional Adoption"},{key:"10.3.2",name:"Retail Adoption"},{key:"10.3.3",name:"Government Adoption"}]},{key:"10.4",name:"Technology Topics"},{key:"10.5",name:"Mining Topics"},{key:"10.6",name:"Macroeconomic Topics"}]},{key:"miscellaneous",name:"Miscellaneous",emoji:"",children:[{key:"11.1",name:"Uncategorized"}]}],Xz={1:"bitcoin",2:"money-economics",3:"technology",4:"organizations",5:"people",6:"regulation-law",7:"markets-geography",8:"education-community",9:"crime-security",10:"topics",11:"miscellaneous"},$x={},$T={};function LT(e){for(const t of e)$x[t.key]=t.name,t.key.includes(".")||($T[t.key]={name:t.name,emoji:t.emoji}),t.children&&LT(t.children)}LT(Dx);function bp(e){if(e)return $x[e]||e}function Zz(e,t){if(e&&e.length>0){const r=e[0].split(".")[0];return Xz[r]||t}return t}function FT(e){return $T[e]||{name:$x[e]||e}}const jp=Dx.map(e=>({key:e.key,name:e.name,emoji:e.emoji||""}));function e8(e){const t=Dx.find(s=>s.key===e);if(!t)return[];const n=[];function r(s,a=[]){if(s&&s.children)for(const i of s.children){const l=[...a,i.key];n.push({key:i.key,name:i.name,path:l}),i.children&&r(i,l)}}return r(t),n}function zT({open:e,onOpenChange:t,tag:n,onConfirm:r,isLoading:s=!1}){const[a,i]=d.useState(""),[l,c]=d.useState(""),[u,h]=d.useState([]),[f,m]=d.useState([]),{data:p}=ot({queryKey:["tag-details",n==null?void 0:n.name,n==null?void 0:n.category],queryFn:async()=>{if(!n)return null;const v=await fetch(`/api/tags-manager/details?tagName=${encodeURIComponent(n.name)}&category=${encodeURIComponent(n.category)}`);return v.ok?await v.json():null},enabled:!!n&&e,staleTime:0});if(d.useEffect(()=>{if(n){i(n.name),c(n.category);const v=(p==null?void 0:p.subcategoryPath)||n.subcategoryPath||[];h(Array.isArray(v)?v:[])}},[n,p]),d.useEffect(()=>{if(l){const v=e8(l);m(v),n!=null&&n.subcategoryPath&&n.subcategoryPath.length>0&&l!==n.category?h([]):l===(n==null?void 0:n.category)&&(n!=null&&n.subcategoryPath)&&h(n.subcategoryPath)}else m([]),h([])},[l,n]),!n)return null;const w=()=>{const v={};a.trim()&&a!==n.name&&(v.newName=a.trim()),l&&l!==n.category&&(v.newCategory=l),u.length>0?v.newSubcategoryPath=u:l&&l!==n.category&&(v.newSubcategoryPath=[]),Object.keys(v).length>0&&r(v)},g=a.trim()&&a!==n.name||l&&l!==n.category||u.length>0&&JSON.stringify(u)!==JSON.stringify(n.subcategoryPath||[]),y=jp.find(v=>v.key===n.category),x=jp.find(v=>v.key===l);return o.jsx(Zt,{open:e,onOpenChange:t,children:o.jsxs(Vt,{className:"sm:max-w-[550px] max-h-[90vh] overflow-y-auto",children:[o.jsxs(qt,{children:[o.jsxs(Ht,{className:"flex items-center gap-2",children:[o.jsx(vD,{className:"w-5 h-5 text-blue-500"}),"Edit Tag"]}),o.jsx(Pn,{children:"Update the name, category, or subcategory path for this tag."})]}),o.jsxs("div",{className:"py-4 space-y-4",children:[o.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Current Tag:"}),o.jsx("span",{className:"font-semibold text-slate-900",children:n.name})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsxs(he,{variant:"outline",className:"text-xs",children:[y==null?void 0:y.emoji," ",(y==null?void 0:y.name)||n.category]}),n.subcategoryPath&&n.subcategoryPath.length>0&&o.jsx(he,{variant:"secondary",className:"text-xs",children:n.subcategoryPath.map(v=>bp(v)).filter(Boolean).join(" > ")||n.subcategoryPath.join(" > ")}),o.jsxs(he,{variant:"secondary",className:"text-xs",children:[n.count," occurrences"]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(es,{htmlFor:"tag-name",children:"Tag Name"}),o.jsx(An,{id:"tag-name",value:a,onChange:v=>i(v.target.value),placeholder:"Enter tag name",disabled:s,autoFocus:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(es,{htmlFor:"category",children:"Category"}),o.jsxs(pl,{value:l,onValueChange:c,disabled:s,children:[o.jsx(Ba,{id:"category",children:o.jsx(gl,{placeholder:"Select category",children:x&&o.jsxs("span",{children:[x.emoji," ",x.name]})})}),o.jsx(Ka,{children:jp.map(v=>o.jsxs(nn,{value:v.key,children:[v.emoji," ",v.name]},v.key))})]})]}),l&&f.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(es,{htmlFor:"subcategory",children:"Subcategory Path (Optional)"}),o.jsxs(pl,{value:u.join(" > ")||"none",onValueChange:v=>{if(v==="none")h([]);else{const b=f.find(j=>j.path.join(" > ")===v||j.key===v);b&&h(b.path)}},disabled:s,children:[o.jsx(Ba,{id:"subcategory",children:o.jsx(gl,{placeholder:"Select subcategory (optional)",children:u.length>0?u.map(v=>bp(v)).filter(Boolean).join(" > ")||u.join(" > "):"None (root of category)"})}),o.jsxs(Ka,{children:[o.jsx(nn,{value:"none",children:"None (root of category)"}),f.map(v=>o.jsx(nn,{value:v.path.join(" > "),children:v.path.map(b=>bp(b)).filter(Boolean).join(" > ")||v.path.join(" > ")},v.path.join(" > ")))]})]}),o.jsx("p",{className:"text-xs text-slate-500",children:'Leave as "None" to place the tag at the root of the selected category.'})]}),o.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:o.jsxs("p",{className:"text-sm text-blue-900",children:["This will update ",n.count," analyses with the new tag information."]})})]}),o.jsxs(Xr,{children:[o.jsx(q,{variant:"outline",onClick:()=>t(!1),disabled:s,children:"Cancel"}),o.jsx(q,{onClick:w,disabled:s||!g,children:s?o.jsxs(o.Fragment,{children:[o.jsx(et,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):"Update Tag"})]})]})})}function UT({open:e,onOpenChange:t,tag:n,onConfirm:r,isLoading:s=!1}){return n?o.jsx(Zt,{open:e,onOpenChange:t,children:o.jsxs(Vt,{className:"sm:max-w-[450px]",children:[o.jsxs(qt,{children:[o.jsxs(Ht,{className:"flex items-center gap-2",children:[o.jsx(ws,{className:"w-5 h-5 text-red-500"}),"Delete Tag"]}),o.jsx(Pn,{children:"This action will permanently remove this tag from all analyses. This cannot be undone."})]}),o.jsxs("div",{className:"py-4 space-y-4",children:[o.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(ku,{className:"w-4 h-4 text-slate-500"}),o.jsx("span",{className:"font-semibold text-slate-900",children:n.name})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(he,{variant:"outline",className:"text-xs",children:n.category}),o.jsxs(he,{variant:"secondary",className:"text-xs",children:[n.count," occurrences"]})]})]}),o.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:o.jsxs("p",{className:"text-sm text-red-900",children:[o.jsx("strong",{children:"Warning:"})," This will remove the tag from ",n.count," analyses. This action cannot be undone."]})})]}),o.jsxs(Xr,{children:[o.jsx(q,{variant:"outline",onClick:()=>t(!1),disabled:s,children:"Cancel"}),o.jsx(q,{onClick:r,disabled:s,variant:"destructive",children:s?"Deleting...":"Delete Tag"})]})]})}):null}const Sp=768;function t8(){const[e,t]=d.useState(void 0);return d.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Sp-1}px)`),r=()=>{t(window.innerWidth<Sp)};return n.addEventListener("change",r),t(window.innerWidth<Sp),()=>n.removeEventListener("change",r)},[]),!!e}var n8="Separator",tj="horizontal",r8=["horizontal","vertical"],BT=d.forwardRef((e,t)=>{const{decorative:n,orientation:r=tj,...s}=e,a=s8(r)?r:tj,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return o.jsx(Jf.div,{"data-orientation":a,...l,...s,ref:t})});BT.displayName=n8;function s8(e){return r8.includes(e)}var KT=BT;const VT=d.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},s)=>o.jsx(KT,{ref:s,decorative:n,orientation:t,className:ee("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));VT.displayName=KT.displayName;const o8=dx,a8=hx,qT=d.forwardRef(({className:e,...t},n)=>o.jsx(Du,{className:ee("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));qT.displayName=Du.displayName;const i8=Ho("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),HT=d.forwardRef(({side:e="right",className:t,children:n,...r},s)=>o.jsxs(a8,{children:[o.jsx(qT,{}),o.jsxs($u,{ref:s,className:ee(i8({side:e}),t),...r,children:[o.jsxs(Uf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[o.jsx(ML,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]}),n]})]}));HT.displayName=$u.displayName;const WT=({className:e,...t})=>o.jsx("div",{className:ee("flex flex-col space-y-2 text-center sm:text-left",e),...t});WT.displayName="SheetHeader";const GT=d.forwardRef(({className:e,...t},n)=>o.jsx(Lu,{ref:n,className:ee("text-lg font-semibold text-foreground",e),...t}));GT.displayName=Lu.displayName;const QT=d.forwardRef(({className:e,...t},n)=>o.jsx(Fu,{ref:n,className:ee("text-sm text-muted-foreground",e),...t}));QT.displayName=Fu.displayName;function iu({className:e,...t}){return o.jsx("div",{className:ee("animate-pulse rounded-md bg-primary/10",e),...t})}const l8="sidebar_state",c8=3600*24*7,u8="16rem",d8="18rem",h8="3rem",f8="b",YT=d.createContext(null);function Xf(){const e=d.useContext(YT);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const Zf=d.forwardRef(({defaultOpen:e=!0,open:t,onOpenChange:n,className:r,style:s,children:a,...i},l)=>{const c=t8(),[u,h]=d.useState(!1),[f,m]=d.useState(e),p=t??f,w=d.useCallback(v=>{const b=typeof v=="function"?v(p):v;n?n(b):m(b),document.cookie=`${l8}=${b}; path=/; max-age=${c8}`},[n,p]),g=d.useCallback(()=>c?h(v=>!v):w(v=>!v),[c,w,h]);d.useEffect(()=>{const v=b=>{b.key===f8&&(b.metaKey||b.ctrlKey)&&(b.preventDefault(),g())};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[g]);const y=p?"expanded":"collapsed",x=d.useMemo(()=>({state:y,open:p,setOpen:w,isMobile:c,openMobile:u,setOpenMobile:h,toggleSidebar:g}),[y,p,w,c,u,h,g]);return o.jsx(YT.Provider,{value:x,children:o.jsx(r_,{delayDuration:0,children:o.jsx("div",{style:{"--sidebar-width":u8,"--sidebar-width-icon":h8,...s},className:ee("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:l,...i,children:a})})})});Zf.displayName="SidebarProvider";const Lx=d.forwardRef(({side:e="left",variant:t="sidebar",collapsible:n="offcanvas",className:r,children:s,...a},i)=>{const{isMobile:l,state:c,openMobile:u,setOpenMobile:h}=Xf();return n==="none"?o.jsx("div",{className:ee("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:i,...a,children:s}):l?o.jsx(o8,{open:u,onOpenChange:h,...a,children:o.jsxs(HT,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":d8},side:e,children:[o.jsxs(WT,{className:"sr-only",children:[o.jsx(GT,{children:"Sidebar"}),o.jsx(QT,{children:"Displays the mobile sidebar."})]}),o.jsx("div",{className:"flex h-full w-full flex-col",children:s})]})}):o.jsxs("div",{ref:i,className:"group peer hidden text-sidebar-foreground md:block","data-state":c,"data-collapsible":c==="collapsed"?n:"","data-variant":t,"data-side":e,children:[o.jsx("div",{className:ee("relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),o.jsx("div",{className:ee("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",e==="left"?"left-4 sm:left-6 lg:left-8 group-data-[collapsible=offcanvas]:-left-[calc(var(--sidebar-width)+1rem)] sm:group-data-[collapsible=offcanvas]:-left-[calc(var(--sidebar-width)+1.5rem)] lg:group-data-[collapsible=offcanvas]:-left-[calc(var(--sidebar-width)+2rem)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]",r),...a,children:o.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:s})})]})});Lx.displayName="Sidebar";const m8=d.forwardRef(({className:e,onClick:t,...n},r)=>{const{toggleSidebar:s}=Xf();return o.jsxs(q,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:ee("h-7 w-7",e),onClick:a=>{t==null||t(a),s()},...n,children:[o.jsx(FL,{}),o.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});m8.displayName="SidebarTrigger";const JT=d.forwardRef(({className:e,...t},n)=>{const{toggleSidebar:r}=Xf();return o.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:ee("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})});JT.displayName="SidebarRail";const p8=d.forwardRef(({className:e,...t},n)=>o.jsx("main",{ref:n,className:ee("relative flex w-full flex-1 flex-col bg-background","md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t}));p8.displayName="SidebarInset";const XT=d.forwardRef(({className:e,...t},n)=>o.jsx(An,{ref:n,"data-sidebar":"input",className:ee("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t}));XT.displayName="SidebarInput";const Fx=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,"data-sidebar":"header",className:ee("flex flex-col gap-2 p-2",e),...t}));Fx.displayName="SidebarHeader";const g8=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,"data-sidebar":"footer",className:ee("flex flex-col gap-2 p-2",e),...t}));g8.displayName="SidebarFooter";const v8=d.forwardRef(({className:e,...t},n)=>o.jsx(VT,{ref:n,"data-sidebar":"separator",className:ee("mx-2 w-auto bg-sidebar-border",e),...t}));v8.displayName="SidebarSeparator";const zx=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,"data-sidebar":"content",className:ee("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));zx.displayName="SidebarContent";const la=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,"data-sidebar":"group",className:ee("relative flex w-full min-w-0 flex-col p-2",e),...t}));la.displayName="SidebarGroup";const Ni=d.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const s=t?Pl:"div";return o.jsx(s,{ref:r,"data-sidebar":"group-label",className:ee("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...n})});Ni.displayName="SidebarGroupLabel";const y8=d.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const s=t?Pl:"button";return o.jsx(s,{ref:r,"data-sidebar":"group-action",className:ee("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...n})});y8.displayName="SidebarGroupAction";const ca=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,"data-sidebar":"group-content",className:ee("w-full text-sm",e),...t}));ca.displayName="SidebarGroupContent";const Ci=d.forwardRef(({className:e,...t},n)=>o.jsx("ul",{ref:n,"data-sidebar":"menu",className:ee("flex w-full min-w-0 flex-col gap-1",e),...t}));Ci.displayName="SidebarMenu";const ua=d.forwardRef(({className:e,...t},n)=>o.jsx("li",{ref:n,"data-sidebar":"menu-item",className:ee("group/menu-item relative",e),...t}));ua.displayName="SidebarMenuItem";const x8=Ho("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),fo=d.forwardRef(({asChild:e=!1,isActive:t=!1,variant:n="default",size:r="default",tooltip:s,className:a,...i},l)=>{const c=e?Pl:"button",{isMobile:u,state:h}=Xf(),f=o.jsx(c,{ref:l,"data-sidebar":"menu-button","data-size":r,"data-active":t,className:ee(x8({variant:n,size:r}),a),...i});return s?(typeof s=="string"&&(s={children:s}),o.jsxs(q$,{children:[o.jsx(H$,{asChild:!0,children:f}),o.jsx(s_,{side:"right",align:"center",hidden:h!=="collapsed"||u,...s})]})):f});fo.displayName="SidebarMenuButton";const w8=d.forwardRef(({className:e,asChild:t=!1,showOnHover:n=!1,...r},s)=>{const a=t?Pl:"button";return o.jsx(a,{ref:s,"data-sidebar":"menu-action",className:ee("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...r})});w8.displayName="SidebarMenuAction";const hc=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:ee("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t}));hc.displayName="SidebarMenuBadge";const b8=d.forwardRef(({className:e,showIcon:t=!1,...n},r)=>{const s=d.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return o.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:ee("flex h-8 items-center gap-2 rounded-md px-2",e),...n,children:[t&&o.jsx(iu,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),o.jsx(iu,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":s}})]})});b8.displayName="SidebarMenuSkeleton";const Ux=d.forwardRef(({className:e,...t},n)=>o.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:ee("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-input px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t}));Ux.displayName="SidebarMenuSub";const Bx=d.forwardRef(({...e},t)=>o.jsx("li",{ref:t,...e}));Bx.displayName="SidebarMenuSubItem";const j8=d.forwardRef(({asChild:e=!1,size:t="md",isActive:n,className:r,...s},a)=>{const i=e?Pl:"a";return o.jsx(i,{ref:a,"data-sidebar":"menu-sub-button","data-size":t,"data-active":n,className:ee("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...s})});j8.displayName="SidebarMenuSubButton";var em="Collapsible",[S8]=Nn(em),[N8,Kx]=S8(em),ZT=d.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:a,onOpenChange:i,...l}=e,[c,u]=rr({prop:r,defaultProp:s??!1,onChange:i,caller:em});return o.jsx(N8,{scope:n,disabled:a,contentId:Un(),open:c,onOpenToggle:d.useCallback(()=>u(h=>!h),[u]),children:o.jsx(ye.div,{"data-state":qx(c),"data-disabled":a?"":void 0,...l,ref:t})})});ZT.displayName=em;var e2="CollapsibleTrigger",t2=d.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,s=Kx(e2,n);return o.jsx(ye.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":qx(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:t,onClick:Z(e.onClick,s.onOpenToggle)})});t2.displayName=e2;var Vx="CollapsibleContent",n2=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Kx(Vx,e.__scopeCollapsible);return o.jsx($t,{present:n||s.open,children:({present:a})=>o.jsx(C8,{...r,ref:t,present:a})})});n2.displayName=Vx;var C8=d.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:s,...a}=e,i=Kx(Vx,n),[l,c]=d.useState(r),u=d.useRef(null),h=qe(t,u),f=d.useRef(0),m=f.current,p=d.useRef(0),w=p.current,g=i.open||l,y=d.useRef(g),x=d.useRef(void 0);return d.useEffect(()=>{const v=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(v)},[]),en(()=>{const v=u.current;if(v){x.current=x.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const b=v.getBoundingClientRect();f.current=b.height,p.current=b.width,y.current||(v.style.transitionDuration=x.current.transitionDuration,v.style.animationName=x.current.animationName),c(r)}},[i.open,r]),o.jsx(ye.div,{"data-state":qx(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!g,...a,ref:h,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...e.style},children:g&&s})});function qx(e){return e?"open":"closed"}var _8=ZT;const tm=_8,nm=t2,rm=n2;function r2({catalogData:e,selectedEntities:t,showUntagged:n,searchQuery:r,onEntitySelect:s,onUntaggedToggle:a,onSearchChange:i,onCategoryToggle:l,mode:c="sidebar",showCategories:u=!0,showOverview:h=!0,qualityCheckItems:f,selectedQualityCheck:m,onQualityCheckSelect:p,veriBadgeItems:w,selectedVeriBadge:g,onVeriBadgeSelect:y}){const x=d.useMemo(()=>e?{categories:Object.entries(e.entitiesByCategory).map(([S,_])=>({key:S,label:FT(S).name,total:_.reduce((N,C)=>N+(C.count||0),0),nodes:_})),untaggedCount:e.untaggedCount}:null,[e]);if(!x)return null;const v=(j,S)=>{var D;const _=j.category||S,N=`${_}::${j.name}`,C=Array.isArray(j.children)&&j.children.length>0;return j.isTag||!C?o.jsx(ua,{children:o.jsxs(fo,{onClick:()=>s(N),isActive:t.has(N),className:"data-[active=true]:bg-white data-[active=true]:text-black",tooltip:`${j.count||0} analyses`,children:[o.jsx("span",{className:"truncate",children:j.name}),o.jsx(hc,{children:j.count||0})]})},N):o.jsx(ua,{children:o.jsxs(tm,{className:"group/collapsible [&[data-state=open]>button>svg:first-child]:rotate-90",defaultOpen:!1,children:[o.jsx(nm,{asChild:!0,children:o.jsxs(fo,{className:"justify-start gap-2",children:[o.jsx(ul,{className:"h-3 w-3 transition-transform"}),o.jsx("span",{className:"truncate",children:j.name})]})}),o.jsx(rm,{children:o.jsx(Ux,{children:(D=j.children)==null?void 0:D.map((R,P)=>o.jsx(Bx,{children:v(R,_)},`${N}-${P}`))})})]})},`${N}-parent`)},b=c==="inline";return o.jsxs(Lx,{collapsible:b?"none":void 0,className:b?"rounded-xl bg-sidebar/40":void 0,children:[o.jsx(Fx,{className:"pt-0",children:o.jsx(la,{className:"py-0 px-2",children:o.jsxs(ca,{className:"relative",children:[o.jsx(es,{htmlFor:"sidebar-search",className:"sr-only",children:"Search"}),o.jsx(Yc,{className:"pointer-events-none absolute left-2 top-1/2 size-4 -translate-y-1/2 select-none opacity-50"}),o.jsx(XT,{id:"sidebar-search",placeholder:"Search",value:r,onChange:j=>i(j.target.value),className:"pl-8 pr-8"}),r&&o.jsxs("button",{type:"button",onClick:()=>i(""),className:"absolute right-2 top-1/2 -translate-y-1/2 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[o.jsx(On,{className:"size-4"}),o.jsx("span",{className:"sr-only",children:"Clear search"})]})]})})}),o.jsxs(zx,{children:[h&&o.jsxs(la,{children:[o.jsx(Ni,{children:"Overview"}),o.jsx(ca,{children:o.jsx(Ci,{children:o.jsx(ua,{children:o.jsxs(fo,{onClick:()=>{a(),l==null||l("untagged")},isActive:n,tooltip:`${x.untaggedCount} untagged analyses`,children:["Untagged",o.jsx(hc,{children:x.untaggedCount})]})})})})]}),f&&f.length>0&&o.jsxs(la,{children:[o.jsx(Ni,{children:"Quality Check"}),o.jsx(ca,{children:o.jsx(Ci,{children:f.map(j=>o.jsx(ua,{children:o.jsxs(fo,{onClick:()=>p==null?void 0:p(j.id),isActive:m===j.id,className:"data-[active=true]:bg-white data-[active=true]:text-black",tooltip:j.isLoading?"Loading...":`${j.count} entries`,children:[o.jsxs("span",{className:"flex items-center gap-2 truncate",children:[j.isLoading?o.jsx(et,{className:"h-3.5 w-3.5 text-muted-foreground shrink-0 animate-spin"}):j.hasIssues?o.jsx(ws,{className:"h-3.5 w-3.5 text-orange-500 shrink-0"}):o.jsx(Xn,{className:"h-3.5 w-3.5 text-green-500 shrink-0"}),o.jsx("span",{className:"truncate",children:j.label})]}),!j.isLoading&&j.hasIssues&&o.jsx(hc,{className:"bg-orange-100 text-orange-700",children:j.count})]})},j.id))})})]}),w&&w.length>0&&o.jsxs(la,{children:[o.jsx(Ni,{children:"VeriBadge"}),o.jsx(ca,{children:o.jsx(Ci,{children:w.map(j=>o.jsx(ua,{children:o.jsxs(fo,{onClick:()=>y==null?void 0:y(j.id),isActive:g===j.id,className:"data-[active=true]:bg-white data-[active=true]:text-black",tooltip:j.isLoading?"Loading...":`${j.count} entries`,children:[o.jsx("span",{className:"flex items-center gap-2 truncate",children:j.isLoading?o.jsx(et,{className:"h-3.5 w-3.5 text-muted-foreground shrink-0 animate-spin"}):o.jsx("span",{className:"truncate",children:j.label})}),!j.isLoading&&o.jsx(hc,{className:"bg-muted text-muted-foreground",children:j.count})]})},j.id))})})]}),u&&x.categories.map(j=>j.total===0?null:o.jsxs(la,{children:[o.jsx(Ni,{children:j.label}),o.jsx(ca,{children:o.jsx(Ci,{children:j.nodes.map(S=>v(S,j.key))})})]},j.key))]}),!b&&o.jsx(JT,{})]})}const E8=[50,200,500];function nj(){const{toast:e}=wr(),[,t]=_u(),[n,r]=d.useState("keywords"),[s,a]=d.useState(50),[i,l]=d.useState(new Set),[c,u]=d.useState(!1),[h,f]=d.useState(new Set),[m,p]=d.useState(1),[w,g]=d.useState(!1),[y,x]=d.useState(""),[v,b]=d.useState(""),[j,S]=d.useState(!1),[_,N]=d.useState(""),[C,E]=d.useState(!1),[D,R]=d.useState(!1),[P,G]=d.useState(null);d.useEffect(()=>{const z=setTimeout(()=>{b(y),p(1)},300);return()=>clearTimeout(z)},[y]);const[Q,ce]=d.useState(!1),[Y,O]=d.useState(!1),[T,B]=d.useState(!1),[$,W]=d.useState(""),[ae,_e]=d.useState("crypto"),[ge,De]=d.useState(!1),[Ee,fe]=d.useState(!1),{data:ue,error:$e}=ot({queryKey:["tags-catalog-v2"],queryFn:async()=>{var Se;const z=await fetch("/api/tags/catalog-v2");if(!z.ok){const Ne=await z.text();throw console.error("Catalog v2 API error:",z.status,Ne),new Error(`Failed to fetch catalog: ${z.statusText}`)}const ne=await z.json();return console.log("Catalog v2 data received:",{tagCount:((Se=ne.tags)==null?void 0:Se.length)||0,taggedCount:ne.taggedCount}),ne},retry:1}),{data:oe,refetch:Be}=ot({queryKey:["tags-filter-tree"],queryFn:async()=>{const z=await fetch("/api/tags/filter-tree");if(!z.ok)throw new Error("Failed to fetch filter tree");return z.json()},staleTime:0,refetchOnMount:!0}),{data:Me}=ot({queryKey:["tags-hierarchy"],queryFn:async()=>{const z=await fetch("/api/tags/hierarchy");if(!z.ok)throw new Error("Failed to fetch hierarchy");return z.json()},staleTime:1e3*60*60,enabled:!oe}),Ue=oe||Me,Oe=d.useMemo(()=>{if(!(Ue!=null&&Ue.categories))return null;const z={};return Ue.categories.forEach(ne=>{const Se=ne.category,Ne=re=>{const de=[];let xe=re.totalTags||0;return re.subcategories&&Object.keys(re.subcategories).length>0&&Object.values(re.subcategories).forEach(pe=>{const pt=Ne(pe);pt&&de.push(pt)}),re.tags&&Array.isArray(re.tags)&&re.tags.forEach(pe=>{de.push({name:pe.name,category:Se,count:pe.usageCount||0,isTag:!0})}),de.sort((pe,pt)=>pe.isTag&&!pt.isTag?1:!pe.isTag&&pt.isTag?-1:pe.name.localeCompare(pt.name)),de.length===0?null:{category:Se,name:re.name,count:xe,isParent:!0,children:de}},F=[];ne.tags&&Array.isArray(ne.tags)&&ne.tags.forEach(re=>{F.push({name:re.name,category:Se,count:re.usageCount||0,isTag:!0})}),ne.subcategories&&Object.values(ne.subcategories).forEach(re=>{const de=Ne(re);de&&F.push(de)}),F.sort((re,de)=>re.isTag&&!de.isTag?1:!re.isTag&&de.isTag?-1:re.name.localeCompare(de.name)),F.length>0&&(z[Se]=F)}),{entitiesByCategory:z,taggedCount:(ue==null?void 0:ue.taggedCount)||0,untaggedCount:(ue==null?void 0:ue.untaggedCount)||0,totalAnalyses:(ue==null?void 0:ue.totalAnalyses)||0}},[ue,Ue]),{data:He,isLoading:dt,refetch:nt}=ot({queryKey:["supabase-tags-analyses",Array.from(i).sort().join(","),c,v,m,s],refetchOnMount:!0,refetchOnWindowFocus:!1,queryFn:async()=>{var st,bt;if(!Ye)throw new Error("Supabase not configured");let z=Ye.from("historical_news_analyses").select("date, summary, tags_version2, tier_used, is_manual_override",{count:"exact"});c||i.size>0,v&&(z=z.ilike("summary",`%${v}%`)),z=z.order("date",{ascending:!1});let ne=[],Se=null;const Ne=c||i.size>0;if(Ne){let Ze=[],gt=0;const ve=1e3;for(;;){const{data:ze,error:kt}=await z.range(gt,gt+ve-1);if(kt)throw kt;if(!ze||ze.length===0||(Ze=Ze.concat(ze),ze.length<ve))break;gt+=ve}ne=Ze,Se=Ze.length}else{const Ze=(m-1)*s,gt=Ze+s-1;z=z.range(Ze,gt);const{data:ve,error:ze,count:kt}=await z;if(ze)throw ze;ne=ve||[],Se=kt}console.log(" Analyses Query Result:",JSON.stringify({analysesCount:ne==null?void 0:ne.length,totalCount:Se,showUntagged:c,selectedEntitiesCount:i.size,needsClientSideFiltering:Ne,firstAnalysisDate:(st=ne==null?void 0:ne[0])==null?void 0:st.date,firstAnalysisTags:(bt=ne==null?void 0:ne[0])==null?void 0:bt.tags_version2},null,2));let F=ne||[];c&&(F=F.filter(Ze=>!Ze.tags_version2||Ze.tags_version2.length===0)),i.size>0&&!c&&(F=F.filter(Ze=>!Ze.tags_version2||!Array.isArray(Ze.tags_version2)?!1:Array.from(i).some(gt=>{const[ve,ze]=gt.split("::");return Ze.tags_version2.includes(ze)})));const re=(m-1)*s,de=re+s,xe=F.slice(re,de),pe=Ne?F.length:Se||F.length,pt=Math.ceil(pe/s);return console.log(" Received:",xe.length,"analyses, filtered total:",pe),{analyses:xe,pagination:{currentPage:m,pageSize:s,totalCount:pe,totalPages:pt}}}}),mt=Oe?Object.entries(Oe.entitiesByCategory).map(([z,ne])=>({category:z,entities:ne.sort((Se,Ne)=>Ne.count-Se.count),totalCount:ne.reduce((Se,Ne)=>Se+Ne.count,0)})).sort((z,ne)=>ne.totalCount-z.totalCount):[];Oe&&mt.length>0&&console.log(" Available categories:",mt.map(z=>z.category));const wt=["bitcoin","money-economics","technology","organizations","people","regulation-law","markets-geography","education-community","crime-security","topics","miscellaneous"];let Ot=n==="keywords"?(mt||[]).filter(({category:z})=>wt.includes(z)):(mt||[]).filter(({category:z})=>z.toLowerCase()==="topics");Array.isArray(Ot)||(Ot=[]),Ot.length===0&&mt&&mt.length>0&&(console.warn(" Filtering removed all categories, showing all categories instead"),Ot=mt),Oe&&(console.log(" Filtered categories:",Ot.map(z=>z.category),"viewMode:",n),console.log(" All categories:",mt.map(z=>({cat:z.category,count:z.entities.length}))));const Fe=(He==null?void 0:He.analyses)||[];He!=null&&He.pagination.totalPages;const Ct=(He==null?void 0:He.pagination.totalCount)||0,L=z=>_x(z,Oe),I=()=>{if(w){g(!1),f(new Set);return}const z=Fe.length>0&&Fe.every(ne=>h.has(ne.date));f(z?ne=>{const Se=new Set(ne);return Fe.forEach(Ne=>Se.delete(Ne.date)),Se}:ne=>{const Se=new Set(ne);return Fe.forEach(Ne=>Se.add(Ne.date)),Se})},U=async()=>{if(!Ye)throw new Error("Supabase not configured");let z=Ye.from("historical_news_analyses").select("date, tags_version2, summary");v&&(z=z.ilike("summary",`%${v}%`));const{data:ne,error:Se}=await z;if(Se)throw Se;let Ne=ne||[];return c&&(Ne=Ne.filter(F=>!F.tags_version2||F.tags_version2.length===0)),i.size>0&&!c&&(Ne=Ne.filter(F=>!F.tags_version2||!Array.isArray(F.tags_version2)?!1:Array.from(i).some(re=>{const[de,xe]=re.split("::");return F.tags_version2.includes(xe)}))),Ne.map(F=>F.date)},V=at({mutationFn:async({dates:z,tag:ne})=>Tr("POST","/api/tags/bulk-add",{dates:z,tag:ne}),onSuccess:(z,ne)=>{X.invalidateQueries({queryKey:["supabase-tags-catalog"]}),X.invalidateQueries({queryKey:["supabase-tags-analyses"]}),e({title:"Tags Added",description:`Successfully added tag to ${ne.dates.length} analyses`}),ce(!1),W(""),f(new Set),g(!1)},onError:z=>{e({title:"Error",description:z.message,variant:"destructive"})}}),J=at({mutationFn:async({dates:z,tag:ne})=>Tr("POST","/api/tags/bulk-remove",{dates:z,tag:ne}),onSuccess:(z,ne)=>{X.invalidateQueries({queryKey:["supabase-tags-catalog"]}),X.invalidateQueries({queryKey:["supabase-tags-analyses"]}),X.invalidateQueries({queryKey:["supabase-tags-selected-summaries"]}),e({title:"Tag Removed",description:`Successfully removed tag from ${ne.dates.length} analyses`})},onError:z=>{e({title:"Error",description:z.message,variant:"destructive"})}}),ie=at({mutationFn:async({tagName:z,oldCategory:ne,newName:Se,newCategory:Ne,newSubcategoryPath:F})=>{const re=await fetch("/api/tags-manager/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tagName:z,oldCategory:ne,newName:Se,newCategory:Ne,newSubcategoryPath:F})});if(!re.ok){let de="Failed to update tag";try{de=(await re.json()).error||de}catch{de=`Error ${re.status}: ${re.statusText||"Unknown error"}`}throw new Error(de)}return await re.json()},onSuccess:async z=>{e({title:"Tag Updated",description:`Tag has been updated in ${z.updated} analyses`}),await X.invalidateQueries({queryKey:["supabase-tags-catalog"]}),await X.invalidateQueries({queryKey:["tags-catalog-v2"]}),await X.invalidateQueries({queryKey:["tags-filter-tree"]}),await X.invalidateQueries({queryKey:["supabase-tags-analyses"]}),E(!1),G(null)},onError:z=>{e({title:"Update Failed",description:z.message,variant:"destructive"})}}),Pe=at({mutationFn:async({tagName:z,category:ne})=>{const Se=await fetch("/api/tags-manager/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tagName:z,category:ne})});if(!Se.ok){let Ne="Failed to delete tag";try{Ne=(await Se.json()).error||Ne}catch{Ne=`Error ${Se.status}: ${Se.statusText||"Unknown error"}`}throw new Error(Ne)}return await Se.json()},onSuccess:async z=>{e({title:"Tag Deleted",description:`Tag has been deleted from ${z.updated} analyses`}),await X.invalidateQueries({queryKey:["supabase-tags-catalog"]}),await X.invalidateQueries({queryKey:["tags-catalog-v2"]}),await X.invalidateQueries({queryKey:["tags-filter-tree"]}),await X.invalidateQueries({queryKey:["tags-hierarchy"]}),await X.invalidateQueries({queryKey:["supabase-tags-analyses"]}),await X.refetchQueries({queryKey:["tags-filter-tree"]}),R(!1),G(null)},onError:z=>{e({title:"Delete Failed",description:z.message,variant:"destructive"})}});at({mutationFn:async()=>{const z=await fetch("/api/tags/flush-cache",{method:"POST"});if(!z.ok)throw new Error("Failed to flush cache");return await z.json()},onSuccess:async()=>{e({title:"Cache Flushed",description:"Tag cache has been cleared successfully"}),await X.invalidateQueries({queryKey:["tags-catalog-v2"]}),await X.invalidateQueries({queryKey:["tags-filter-tree"]}),await X.invalidateQueries({queryKey:["tags-hierarchy"]}),await X.refetchQueries({queryKey:["tags-catalog-v2"]}),await X.refetchQueries({queryKey:["tags-filter-tree"]})},onError:z=>{e({title:"Cache Flush Failed",description:z.message,variant:"destructive"})}});const Ae=async()=>{if(!$.trim()){e({title:"Error",description:"Please enter a tag name",variant:"destructive"});return}try{let z;w?z=await U():z=Array.from(h),V.mutate({dates:z,tag:{name:$.trim(),category:ae}})}catch{e({title:"Error",description:"Failed to prepare bulk operation",variant:"destructive"})}},{data:Ge=[],isLoading:Xe}=ot({queryKey:["supabase-tags-selected-summaries",Array.from(h).sort(),w,v,c],queryFn:async()=>{if(!Ye)throw new Error("Supabase not configured");let z;if(w)try{z=await U()}catch{return[]}else{if(h.size===0)return[];z=Array.from(h)}const{data:ne,error:Se}=await Ye.from("historical_news_analyses").select("tags_version2").in("date",z);if(Se)throw Se;const Ne=new Map;return ne==null||ne.forEach(F=>{F.tags_version2&&Array.isArray(F.tags_version2)&&F.tags_version2.forEach(re=>{const de=L(re),xe=`${de}::${re}`;Ne.has(xe)||Ne.set(xe,{name:re,category:de})})}),Array.from(Ne.values())},enabled:(Y||T)&&(h.size>0||w)}),rt=async z=>{try{let ne;w?ne=await U():ne=Array.from(h),J.mutate({dates:ne,tag:z})}catch{e({title:"Error",description:"Failed to prepare bulk operation",variant:"destructive"})}},tn=async()=>{try{let z;if(w){e({title:"Too many items",description:"Cannot copy more than 50 items at once. Please refine your selection.",variant:"destructive"});return}if(h.size>0){if(h.size>50){e({title:"Too many items",description:"Cannot copy more than 50 items at once.",variant:"destructive"});return}z=Array.from(h)}else z=Fe.map(Ne=>Ne.date);let ne=Fe.filter(Ne=>z.includes(Ne.date));if(ne.length<z.length){if(!Ye)throw new Error("Supabase not configured");const{data:Ne,error:F}=await Ye.from("historical_news_analyses").select("date, summary, tags").in("date",z);if(F)throw F;ne=Ne||[]}if(ne.length===0){e({title:"Nothing to Copy",description:"No analyses selected",variant:"destructive"});return}const Se=ne.map(Ne=>`${new Date(Ne.date).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"2-digit"})} - ${Ne.summary}`).join(`
`);N(Se),S(!0)}catch(z){console.error("Copy to clipboard error:",z),e({title:"Copy Failed",description:z instanceof Error?z.message:"Failed to prepare text for copying",variant:"destructive"})}};return Fe.length>0&&Fe.every(z=>h.has(z.date)),o.jsx(Zf,{className:"w-full",children:o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row",children:[o.jsx("div",{className:"lg:w-72 shrink-0",children:o.jsx(r2,{catalogData:Oe,selectedEntities:i,showUntagged:c,searchQuery:y,mode:"inline",showOverview:!1,onEntitySelect:z=>{const ne=new Set(i);ne.has(z)?ne.delete(z):ne.add(z),l(ne),u(!1),p(1)},onUntaggedToggle:()=>{u(!c),l(new Set),p(1)},onSearchChange:z=>{x(z),p(1)}})}),o.jsxs("div",{className:"flex-1 space-y-4",children:[o.jsx("div",{className:"space-y-6",children:o.jsxs(jt,{className:"pt-0 px-6 pb-6 border-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("h2",{className:"text-lg font-semibold text-foreground",children:c?"Untagged Analyses":"Bitcoinpedia"}),o.jsxs(he,{variant:"secondary",className:"font-normal",children:[Ct.toLocaleString()," result",Ct!==1?"s":""]})]}),Ct>0&&o.jsxs(q,{variant:"outline",size:"sm",onClick:tn,disabled:w||h.size>50,className:"flex items-center space-x-2","data-testid":"button-copy-txt",children:[o.jsx(dC,{className:"w-4 h-4"}),o.jsx("span",{children:"Copy TXT"})]})]}),o.jsx(Kh,{analyses:Fe,isLoading:dt,selectedDates:h,onDateSelect:z=>{f(ne=>new Set(ne).add(z))},onDateDeselect:z=>{f(ne=>{const Se=new Set(ne);return Se.delete(z),Se})},onRowClick:z=>t(`/day/${z}`),onTagClick:z=>x(z),emptyMessage:c?"No untagged analyses found":i.size>0?"No analyses match the selected entities":v?"No analyses match your search":"No tagged analyses found",showCheckbox:!0,pageSize:s,currentPage:m,totalCount:Ct,catalogData:Oe,onPageChange:z=>p(z),onPageSizeChange:z=>{a(z),p(1)},onSelectAll:I,selectAllMatching:w,pageSizeOptions:E8,showPagination:!0,showSelectAll:!0,showBulkActions:!0,bulkActions:{showSelectAllLink:!0,onSelectAllMatching:()=>g(!0),onClearSelection:()=>{f(new Set),g(!1)},customActions:o.jsxs(o.Fragment,{children:[o.jsxs(Ol,{children:[o.jsx(Il,{asChild:!0,children:o.jsxs(q,{variant:"outline",size:"sm",disabled:ge,title:"Re-analyze (R)",children:[o.jsx(pn,{className:`w-4 h-4 mr-2 ${ge?"animate-spin":""}`}),"Re-analyze",o.jsx(Wo,{className:"w-4 h-4 ml-2"})]})}),o.jsxs(Ya,{align:"end",children:[o.jsxs(nr,{onClick:async()=>{De(!0);const z=w?Fe.map(ne=>ne.date):Array.from(h);for(const ne of z)try{await fetch(`/api/analysis/date/${ne}`,{method:"POST"})}catch(Se){console.error(`Failed to analyze ${ne}:`,Se)}De(!1),X.invalidateQueries({queryKey:["analyses"]}),e({title:"Re-analysis complete",description:`Analyzed ${z.length} date(s)`})},disabled:ge,children:[o.jsx(pn,{className:"w-4 h-4 mr-2"}),"Analyse Days"]}),o.jsxs(nr,{onClick:async()=>{De(!0);const z=w?Fe.map(ne=>ne.date):Array.from(h);for(const ne of z)try{await fetch(`/api/analysis/date/${ne}/redo-summary`,{method:"POST"})}catch(Se){console.error(`Failed to redo summary for ${ne}:`,Se)}De(!1),X.invalidateQueries({queryKey:["analyses"]}),e({title:"Summaries updated",description:`Redid summaries for ${z.length} date(s)`})},disabled:ge,children:[o.jsx(Ss,{className:"w-4 h-4 mr-2"}),"Redo Summaries"]})]})]}),o.jsxs(q,{variant:"outline",size:"sm",disabled:Ee,onClick:async()=>{fe(!0);try{await fetch("/api/tags/categorize/start",{method:"POST"}),e({title:"Auto Tagging started",description:"AI is categorizing tags in the background"})}catch{e({title:"Error",description:"Failed to start auto tagging",variant:"destructive"})}fe(!1)},children:[Ee?o.jsx(et,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(Ex,{className:"w-4 h-4 mr-2"}),"Auto Tagging"]}),o.jsxs(q,{variant:"outline",size:"sm",onClick:()=>B(!0),children:[o.jsx(Jc,{className:"w-4 h-4 mr-2"}),"Manage Tags"]})]})}})]})}),o.jsx(Zt,{open:j,onOpenChange:S,children:o.jsxs(Vt,{className:"max-w-2xl",children:[o.jsxs(qt,{children:[o.jsx(Ht,{children:"Copy Analyses to Clipboard"}),o.jsx(Pn,{children:"The text below has been selected for you. Press Ctrl+C or Cmd+C to copy."})]}),o.jsx("div",{className:"mt-4",children:o.jsx("textarea",{readOnly:!0,value:_,className:"w-full h-64 p-2 border rounded bg-slate-50 text-sm text-slate-800",onFocus:z=>z.target.select(),autoFocus:!0,"data-testid":"textarea-copy"})}),o.jsx("div",{className:"flex justify-end pt-4",children:o.jsx(q,{onClick:()=>S(!1),variant:"outline","data-testid":"button-close-copy-dialog",children:"Close"})})]})}),o.jsx(Zt,{open:Q,onOpenChange:ce,children:o.jsxs(Vt,{children:[o.jsx(qt,{children:o.jsxs(Ht,{children:["Add Tag to ",w?Ct:h.size," Analyses"]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-slate-700 mb-1 block",children:"Tag Name"}),o.jsx(An,{placeholder:"Enter tag name",value:$,onChange:z=>W(z.target.value),"data-testid":"input-bulk-tag-name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-slate-700 mb-1 block",children:"Category"}),o.jsxs("select",{value:ae,onChange:z=>_e(z.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-md","data-testid":"select-bulk-category",children:[o.jsx("option",{value:"crypto",children:"Cryptocurrency"}),o.jsx("option",{value:"company",children:"Company"}),o.jsx("option",{value:"person",children:"Person"}),o.jsx("option",{value:"country",children:"Country"}),o.jsx("option",{value:"organization",children:"Organization"}),o.jsx("option",{value:"protocol",children:"Protocol"}),o.jsx("option",{value:"topic",children:"Topic"})]})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(q,{variant:"outline",onClick:()=>ce(!1),"data-testid":"button-cancel-bulk-add",children:"Cancel"}),o.jsx(q,{onClick:Ae,disabled:V.isPending,"data-testid":"button-confirm-bulk-add",children:V.isPending?"Adding...":"Add Tag"})]})]})]})}),o.jsx(Zt,{open:Y,onOpenChange:O,children:o.jsxs(Vt,{className:"max-w-2xl",children:[o.jsx(qt,{children:o.jsxs(Ht,{children:["Remove Tags from ",w?Ct:h.size," Analyses"]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-slate-600",children:"Click on any tag below to remove it from all selected analyses:"}),Xe?o.jsx("div",{className:"text-center py-8 text-slate-500",children:"Loading tags..."}):Ge.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(rs,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),o.jsx("p",{className:"text-slate-500",children:"No tags found in selected analyses"})]}):o.jsx("div",{className:"max-h-96 overflow-y-auto",children:o.jsx("div",{className:"flex flex-wrap gap-2",children:Ge.map(z=>o.jsxs(he,{variant:"outline",className:`${vl(z.category)} cursor-pointer hover:opacity-70 transition-opacity px-3 py-2`,onClick:()=>rt(z),"data-testid":`badge-remove-${z.category}-${z.name}`,children:[o.jsx("span",{className:"font-medium",children:z.name}),o.jsxs("span",{className:"ml-2 text-xs opacity-60",children:["(",z.category,")"]}),o.jsx(On,{className:"w-3 h-3 ml-2"})]},`${z.category}::${z.name}`))})}),o.jsx("div",{className:"flex justify-end space-x-2 pt-2 border-t",children:o.jsx(q,{variant:"outline",onClick:()=>O(!1),"data-testid":"button-cancel-bulk-remove",children:"Close"})})]})]})}),o.jsx(Zt,{open:T,onOpenChange:B,children:o.jsxs(Vt,{className:"max-w-2xl",children:[o.jsxs(qt,{children:[o.jsxs(Ht,{className:"flex items-center gap-2",children:[o.jsx(Jc,{className:"w-5 h-5"}),"Manage Tags for ",w?Ct.toLocaleString():h.size," Analyses"]}),o.jsx(Pn,{children:"View, add, or remove tags from all selected analyses"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg border",children:[o.jsxs("h4",{className:"text-sm font-medium mb-3 flex items-center gap-2",children:[o.jsx(Fo,{className:"w-4 h-4"}),"Add New Tag"]}),o.jsxs("div",{className:"flex items-end gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"Tag Name"}),o.jsx(An,{placeholder:"Enter tag name",value:$,onChange:z=>W(z.target.value),className:"h-9"})]}),o.jsxs("div",{className:"w-40",children:[o.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"Category"}),o.jsxs(pl,{value:ae,onValueChange:_e,children:[o.jsx(Ba,{className:"h-9",children:o.jsx(gl,{})}),o.jsxs(Ka,{children:[o.jsx(nn,{value:"crypto",children:"Cryptocurrency"}),o.jsx(nn,{value:"company",children:"Company"}),o.jsx(nn,{value:"person",children:"Person"}),o.jsx(nn,{value:"country",children:"Country"}),o.jsx(nn,{value:"organization",children:"Organization"}),o.jsx(nn,{value:"protocol",children:"Protocol"}),o.jsx(nn,{value:"topic",children:"Topic"})]})]})]}),o.jsx(q,{size:"sm",onClick:()=>{$.trim()&&(Ae(),B(!1))},disabled:!$.trim()||V.isPending,className:"h-9",children:V.isPending?o.jsx(et,{className:"w-4 h-4 animate-spin"}):o.jsx(Fo,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-medium mb-3 flex items-center gap-2",children:[o.jsx(rs,{className:"w-4 h-4"}),"Existing Tags",o.jsx(he,{variant:"secondary",className:"font-normal ml-1",children:Ge.length})]}),Xe?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(et,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading tags..."]}):Ge.length===0?o.jsxs("div",{className:"text-center py-8 border border-dashed rounded-lg",children:[o.jsx(rs,{className:"w-10 h-10 text-muted-foreground/30 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"No tags found in selected analyses"})]}):o.jsx("div",{className:"max-h-64 overflow-y-auto border rounded-lg p-3",children:o.jsx("div",{className:"flex flex-wrap gap-2",children:Ge.map(z=>o.jsxs(he,{variant:"outline",className:`${vl(z.category)} group cursor-pointer hover:opacity-80 transition-all px-3 py-1.5`,onClick:()=>rt(z),children:[o.jsx("span",{className:"font-medium",children:z.name}),o.jsxs("span",{className:"ml-1.5 text-xs opacity-60",children:["(",z.category,")"]}),o.jsx(On,{className:"w-3 h-3 ml-2 opacity-0 group-hover:opacity-100 transition-opacity"})]},`manage-${z.category}::${z.name}`))})}),o.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Click on a tag to remove it from all selected analyses"})]}),o.jsx("div",{className:"flex justify-end pt-2 border-t",children:o.jsx(q,{variant:"outline",onClick:()=>B(!1),children:"Done"})})]})]})}),o.jsx(zT,{open:C,onOpenChange:E,tag:P,onConfirm:z=>{P&&ie.mutate({tagName:P.name,oldCategory:P.category,newName:z.newName,newCategory:z.newCategory,newSubcategoryPath:z.newSubcategoryPath})},isLoading:ie.isPending}),o.jsx(UT,{open:D,onOpenChange:R,tag:P,onConfirm:async()=>{if(P)try{const z=await fetch(`/api/tags-manager/find-categories?tagName=${encodeURIComponent(P.name)}`);if(z.ok){const ne=await z.json();if(ne.categories&&ne.categories.length>0){const Se=ne.categories.map(re=>fetch("/api/tags-manager/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tagName:P.name,category:re.category})})),Ne=await Promise.all(Se);if(Ne.every(re=>re.ok)){const de=(await Promise.all(Ne.map(xe=>xe.json().then(pe=>pe.updated||0)))).reduce((xe,pe)=>xe+pe,0);e({title:"Tag Deleted",description:`Tag has been deleted from ${de} analyses across ${ne.categories.length} category(ies)`}),await X.invalidateQueries({queryKey:["supabase-tags-catalog"]}),await X.invalidateQueries({queryKey:["tags-catalog-v2"]}),await X.invalidateQueries({queryKey:["supabase-tags-analyses"]}),R(!1),G(null)}else throw new Error("Some deletions failed")}else console.warn(`No categories found for "${P.name}", using provided category: ${P.category}`),Pe.mutate({tagName:P.name,category:P.category})}else console.warn(`Failed to find categories for "${P.name}", using provided category: ${P.category}`),Pe.mutate({tagName:P.name,category:P.category})}catch(z){console.error(`Error finding categories for "${P.name}":`,z),Pe.mutate({tagName:P.name,category:P.category})}},isLoading:Pe.isPending})]})]})})})}var s2="AlertDialog",[k8]=Nn(s2,[K_]),Xs=K_(),o2=e=>{const{__scopeAlertDialog:t,...n}=e,r=Xs(t);return o.jsx(dx,{...r,...n,modal:!0})};o2.displayName=s2;var T8="AlertDialogTrigger",R8=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Xs(n);return o.jsx(oE,{...s,...r,ref:t})});R8.displayName=T8;var P8="AlertDialogPortal",a2=e=>{const{__scopeAlertDialog:t,...n}=e,r=Xs(t);return o.jsx(hx,{...r,...n})};a2.displayName=P8;var A8="AlertDialogOverlay",i2=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Xs(n);return o.jsx(Du,{...s,...r,ref:t})});i2.displayName=A8;var Li="AlertDialogContent",[O8,I8]=k8(Li),M8=O1("AlertDialogContent"),l2=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...s}=e,a=Xs(n),i=d.useRef(null),l=qe(t,i),c=d.useRef(null);return o.jsx(o5,{contentName:Li,titleName:c2,docsSlug:"alert-dialog",children:o.jsx(O8,{scope:n,cancelRef:c,children:o.jsxs($u,{role:"alertdialog",...a,...s,ref:l,onOpenAutoFocus:Z(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[o.jsx(M8,{children:r}),o.jsx($8,{contentRef:i})]})})})});l2.displayName=Li;var c2="AlertDialogTitle",u2=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Xs(n);return o.jsx(Lu,{...s,...r,ref:t})});u2.displayName=c2;var d2="AlertDialogDescription",h2=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Xs(n);return o.jsx(Fu,{...s,...r,ref:t})});h2.displayName=d2;var D8="AlertDialogAction",f2=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Xs(n);return o.jsx(Uf,{...s,...r,ref:t})});f2.displayName=D8;var m2="AlertDialogCancel",p2=d.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:s}=I8(m2,n),a=Xs(n),i=qe(t,s);return o.jsx(Uf,{...a,...r,ref:i})});p2.displayName=m2;var $8=({contentRef:e})=>{const t=`\`${Li}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Li}\` by passing a \`${d2}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Li}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return d.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},L8=o2,F8=a2,g2=i2,v2=l2,y2=f2,x2=p2,w2=u2,b2=h2;const Hx=L8,z8=F8,j2=d.forwardRef(({className:e,...t},n)=>o.jsx(g2,{className:ee("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));j2.displayName=g2.displayName;const sm=d.forwardRef(({className:e,...t},n)=>o.jsxs(z8,{children:[o.jsx(j2,{}),o.jsx(v2,{ref:n,className:ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));sm.displayName=v2.displayName;const om=({className:e,...t})=>o.jsx("div",{className:ee("flex flex-col space-y-2 text-center sm:text-left",e),...t});om.displayName="AlertDialogHeader";const am=({className:e,...t})=>o.jsx("div",{className:ee("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});am.displayName="AlertDialogFooter";const im=d.forwardRef(({className:e,...t},n)=>o.jsx(w2,{ref:n,className:ee("text-lg font-semibold",e),...t}));im.displayName=w2.displayName;const lm=d.forwardRef(({className:e,...t},n)=>o.jsx(b2,{ref:n,className:ee("text-sm text-muted-foreground",e),...t}));lm.displayName=b2.displayName;const cm=d.forwardRef(({className:e,...t},n)=>o.jsx(y2,{ref:n,className:ee(ox(),e),...t}));cm.displayName=y2.displayName;const um=d.forwardRef(({className:e,...t},n)=>o.jsx(x2,{ref:n,className:ee(ox({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));um.displayName=x2.displayName;const lu=d.forwardRef(({className:e,...t},n)=>o.jsx("textarea",{className:ee("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));lu.displayName="Textarea";function U8({date:e,isFlagged:t,flagReason:n,type:r,entryId:s,className:a}){const[i,l]=d.useState(!1),[c,u]=d.useState(n||""),[h,f]=d.useState(!1),{toast:m}=wr(),p=Ce.useRef(!1),w=async(x,v)=>{if(h||p.current){console.log("Flag operation already in progress, skipping");return}p.current=!0,f(!0),console.log(`Flag operation starting for ${e}: ${x?"flagging":"unflagging"}`);try{const b=r==="analysis"?`/api/analysis/flag/${e}`:`/api/manual-entries/flag/${s}`;if(!(await fetch(b,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isFlagged:x,flagReason:x?v:null})})).ok)throw new Error("Failed to update flag");await X.invalidateQueries({queryKey:["/api/analysis"]}),await X.invalidateQueries({queryKey:["/api/manual-entries"]}),await X.invalidateQueries({queryKey:[`/api/analysis/date/${e}`]});const S=new Date(e).getFullYear();await X.invalidateQueries({queryKey:[`/api/analysis/year/${S}`]}),await X.invalidateQueries({queryKey:[`/api/analysis/filter?startDate=${S}-01-01&endDate=${S}-12-31`]});const N=(new Date(e).getMonth()+1).toString().padStart(2,"0");await X.invalidateQueries({queryKey:[`/api/analysis/month/${S}/${N}`]}),m({description:x?"Day flagged for attention":"Flag removed"}),l(!1)}catch{m({variant:"destructive",description:"Failed to update flag"})}finally{f(!1),p.current=!1}},g=()=>{w(!0,c)},y=()=>{w(!1)};return o.jsxs(Zt,{open:i,onOpenChange:l,children:[o.jsx(fx,{asChild:!0,children:o.jsx(q,{variant:"ghost",size:"sm",className:`p-1 h-6 w-6 hover:bg-slate-100 transition-colors ${a||""}`,disabled:h,onClick:x=>x.stopPropagation(),title:t?`Flagged: ${n}`:"Flag for attention",children:t?o.jsx(hD,{className:"h-4 w-4 text-red-500 fill-red-500"}):o.jsx(dD,{className:"h-4 w-4 text-gray-400 hover:text-red-500"})})}),o.jsxs(Vt,{className:"sm:max-w-[425px]","aria-describedby":"flag-description",children:[o.jsx(qt,{children:o.jsx(Ht,{children:t?"Update Flag":"Flag for Attention"})}),o.jsx("div",{id:"flag-description",className:"sr-only",children:"Dialog to flag or unflag a day for attention with optional notes"}),o.jsxs("div",{className:"grid gap-4 py-4",children:[o.jsxs("div",{className:"grid gap-2",children:[o.jsxs(es,{htmlFor:"reason",children:["What needs attention about ",e,"?"]}),o.jsx(lu,{id:"reason",placeholder:"e.g., Low quality analysis, missing key events, factual errors...",value:c,onChange:x=>u(x.target.value),onKeyDown:x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),x.stopPropagation())},disabled:h,rows:3})]}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[t&&o.jsx(q,{variant:"outline",onClick:y,disabled:h,children:"Remove Flag"}),o.jsx(q,{onClick:g,disabled:h||!c.trim()&&!t,children:t?"Update Flag":"Flag Day"})]})]})]})]})}const Np="bitcoin-news-ai-provider";function S2(){const[e,t]=d.useState(()=>{if(typeof window<"u"){const r=localStorage.getItem(Np);if(r&&["openai"].includes(r))return r}return"openai"}),n=r=>{t(r),typeof window<"u"&&localStorage.setItem(Np,r)};return d.useEffect(()=>{if(typeof window<"u"){const r=localStorage.getItem(Np);r&&["openai"].includes(r)&&r!==e&&t(r)}},[e]),{aiProvider:e,setAiProvider:n}}function B8(){const{year:e,month:t}=Cf(),{toast:n}=wr(),[r,s]=d.useState(new Set),{aiProvider:a}=S2(),{startAnalysis:i,updateProgress:l,completeAnalysis:c,getAnalysisById:u}=c_();if(!e||!t)return o.jsxs("div",{className:"p-6 text-center",children:[o.jsx("h1",{className:"text-xl font-semibold text-red-600",children:"Invalid Route"}),o.jsx("p",{className:"text-slate-600",children:"Year and month parameters are required."}),o.jsx(kn,{href:"/",children:o.jsx(q,{className:"mt-4",children:"Return Home"})})]});const h=parseInt(e),f=parseInt(t);if(isNaN(h)||isNaN(f)||f<1||f>12)return o.jsxs("div",{className:"p-6 text-center",children:[o.jsx("h1",{className:"text-xl font-semibold text-red-600",children:"Invalid Date"}),o.jsx("p",{className:"text-slate-600",children:"Please provide valid year and month values."}),o.jsx(kn,{href:"/",children:o.jsx(q,{className:"mt-4",children:"Return Home"})})]});const m=`month-${e}-${t}`,p=u(m),[w,g]=d.useState(new Set),[y,x]=d.useState(0),[v,b]=d.useState(new Map),[j,S]=d.useState(!1),[_,N]=d.useState(new Set),[C,E]=d.useState(null),[D,R]=d.useState(!1),[P,G]=d.useState(null),[Q,ce]=d.useState(new Set),[Y,O]=d.useState(!1),{data:T,isLoading:B}=ot({queryKey:[`supabase-month-view-${e}-${t}`],queryFn:async()=>{if(!Ye)throw new Error("Supabase not configured");const L=new Date(h,f,0).getDate(),I=`${e}-${t.toString().padStart(2,"0")}-01`,U=`${e}-${t.toString().padStart(2,"0")}-${L.toString().padStart(2,"0")}`,{data:V,error:J}=await Ye.from("historical_news_analyses").select("date, summary, is_manual_override, confidence_score, is_flagged, flag_reason, tiered_articles, analyzed_articles").gte("date",I).lte("date",U).order("date",{ascending:!0});if(J)throw J;const ie=(V==null?void 0:V.length)||0,Pe=L>0?Math.round(ie/L*100):0,Ae=[{month:f,analyzedDays:ie,totalDays:L,percentage:Pe}];return{progress:{totalDays:L,analyzedDays:ie,percentage:Pe},analyses:(V==null?void 0:V.map(Ge=>({date:Ge.date,summary:Ge.summary,hasManualEntry:Ge.is_manual_override,confidenceScore:parseFloat(Ge.confidence_score||"0"),isFlagged:Ge.is_flagged,flagReason:Ge.flag_reason,tieredArticles:Ge.tiered_articles,analyzedArticles:Ge.analyzed_articles,isManualOverride:Ge.is_manual_override})))||[],monthlyBreakdown:Ae}}});at({mutationFn:async L=>{const I=await fetch("/api/analysis/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:L,aiProvider:a,newsProvider:localStorage.getItem("newsProvider")||"exa"})});if(!I.ok)throw new Error(`Failed to analyze: ${I.statusText}`);return I.json()},onSuccess:L=>{const I=L.analysisDate||"Unknown date",U=new Date(I).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});n({title:"Analysis completed",description:`Bitcoin news analysis for ${U} has been generated successfully.`}),X.invalidateQueries({queryKey:[`supabase-month-view-${e}-${t}`]}),X.invalidateQueries({queryKey:[`supabase-year-${e}`]}),X.invalidateQueries({queryKey:["supabase-stats"]})},onError:L=>{n({title:"Analysis failed",description:L.message||"Failed to analyze Bitcoin news for this date.",variant:"destructive"})}});const $=(L,I)=>{const U=new Set(r);I?U.add(L):U.delete(L),s(U)},W=()=>{r.size===Ue(parseInt(e),parseInt(t)).length?s(new Set):s(new Set(Ue(parseInt(e),parseInt(t))))},ae=at({mutationFn:async L=>{const I=L.map(U=>fetch(`/api/analysis/date/${U}`,{method:"DELETE"}));await Promise.all(I)},onSuccess:()=>{n({title:"Success",description:"Selected analyses deleted successfully."}),s(new Set),X.invalidateQueries({queryKey:[`supabase-month-view-${e}-${t}`]}),X.invalidateQueries({queryKey:[`supabase-year-${e}`]}),X.invalidateQueries({queryKey:["supabase-stats"]})},onError:()=>{n({title:"Error",description:"Failed to delete some analyses.",variant:"destructive"})}}),_e=at({mutationFn:async L=>{const I=L.map(U=>fetch("/api/analysis/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:U,forceReanalysis:!0})}));await Promise.all(I)},onSuccess:()=>{n({title:"Success",description:"Selected analyses recreated successfully."}),s(new Set),X.invalidateQueries({queryKey:[`supabase-month-view-${e}-${t}`]}),X.invalidateQueries({queryKey:[`supabase-year-${e}`]}),X.invalidateQueries({queryKey:["supabase-stats"]})},onError:()=>{n({title:"Error",description:"Failed to recreate some analyses.",variant:"destructive"})}}),ge=()=>{const L=parseInt(t),I=parseInt(e);return L===1?{year:I-1,month:12}:{year:I,month:L-1}},De=()=>{const L=parseInt(t),I=parseInt(e);return L===12?{year:I+1,month:1}:{year:I,month:L+1}},Ee=async(L,I,U)=>{var V,J,ie,Pe,Ae,Ge;try{const Xe=await fetch("/api/analysis/batch-analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dates:L,concurrency:2,aiProvider:a,newsProvider:localStorage.getItem("newsProvider")||"exa"}),signal:I.signal});if(!Xe.ok)throw new Error(`Batch analysis failed: ${Xe.statusText}`);const rt=(V=Xe.body)==null?void 0:V.getReader();if(!rt)throw new Error("Response body is not readable");const tn=new TextDecoder;let z=0;const ne=new Set;let Se="";for(;;){if(I.signal.aborted){rt.cancel();break}const{done:Ne,value:F}=await rt.read();if(Ne)break;const re=tn.decode(F,{stream:!0});Se+=re;const de=Se.split(`
`);Se=de.pop()||"";for(const xe of de)try{if(!xe||xe.trim().length===0)continue;console.log(" Parsing JSON line:",xe.substring(0,100)+(xe.length>100?"...":""));const pe=JSON.parse(xe);if(!pe||typeof pe!="object")continue;if(pe.completed===!0)return console.log(" Batch analysis complete:",pe.summary),g(new Set),((J=pe.results)==null?void 0:J.length)||z;typeof pe.completed=="number"&&pe.completed>=0&&(z=pe.completed,console.log(` Progress update: ${z} completed`),pe.analyzingDates&&Array.isArray(pe.analyzingDates)?(console.log(` Currently analyzing: ${pe.analyzingDates.join(", ")}`),g(new Set(pe.analyzingDates))):(ie=pe.lastResult)!=null&&ie.date&&(ne.delete(pe.lastResult.date),console.log(` Completed: ${pe.lastResult.date}`),g(new Set(ne))),console.log(` Calling onProgress(${z}, ${(Pe=pe.lastResult)==null?void 0:Pe.date})`),U(z,(Ae=pe.lastResult)==null?void 0:Ae.date),z>0&&z%3===0&&(X.invalidateQueries({queryKey:[`supabase-month-view-${e}-${t}`]}),X.invalidateQueries({queryKey:[`supabase-year-${e}`]}),X.invalidateQueries({queryKey:["supabase-stats"]})))}catch(pe){console.error(" JSON parse error:",pe),console.error(" Failed line:",xe)}}if(Se.trim())try{const Ne=JSON.parse(Se.trim());Ne&&typeof Ne=="object"&&typeof Ne.completed=="number"&&U(Ne.completed,(Ge=Ne.lastResult)==null?void 0:Ge.date)}catch(Ne){console.warn("Failed to parse final buffer:",Ne)}return z}catch(Xe){if(Xe.name==="AbortError")throw Xe;return console.warn("Streaming batch failed, falling back to traditional method:",Xe),fe(L,I,U)}},fe=async(L,I,U)=>{let ie=0;for(let Pe=0;Pe<L.length&&!I.signal.aborted;Pe+=2){const Ae=L.slice(Pe,Pe+2);g(Xe=>new Set([...Xe,...Ae]));const Ge=Ae.map(async Xe=>{try{if(!(await fetch("/api/analysis/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:Xe,aiProvider:a,newsProvider:localStorage.getItem("newsProvider")||"exa"}),signal:I.signal})).ok)throw new Error(`Failed to analyze ${Xe}`);return{date:Xe,success:!0}}catch(rt){if(rt.name==="AbortError")throw rt;return console.error(`Failed to analyze ${Xe}:`,rt),{date:Xe,success:!1,error:rt}}finally{g(rt=>{const tn=new Set(rt);return tn.delete(Xe),tn})}});try{const Xe=await Promise.allSettled(Ge);ie+=Xe.length,U(ie),Pe+2<L.length&&await new Promise(rt=>setTimeout(rt,100))}catch(Xe){if(Xe.name==="AbortError")break}}return ie},ue=async()=>{const L=r.size>0?Array.from(r):Ue(parseInt(e),parseInt(t)).filter(V=>!He(V));if(L.length===0){const V=r.size>0?"No selected dates need analysis.":"All days in this month are already analyzed.";n({title:"No work needed",description:V});return}const I=new AbortController,U=r.size>0?"selected dates":`${Ot[parseInt(t)-1]} ${e}`;i({id:m,type:"month",label:`Analyze ${U}`,completed:0,total:L.length,year:parseInt(e),month:parseInt(t),abortController:I}),g(new Set);try{const V=await Ee(L,I,(J,ie)=>{l(m,J,ie),x(Pe=>Pe+1)});if(!I.signal.aborted){const J=r.size>0?"selected dates":"days";n({title:" Fast batch analysis complete",description:`Successfully analyzed ${V} ${J} using streaming concurrency (3x faster).`}),r.size>0&&s(new Set)}}catch(V){V.name!=="AbortError"&&n({title:"Error",description:"Bulk analysis failed.",variant:"destructive"})}finally{c(m),g(new Set),X.invalidateQueries({queryKey:[`supabase-month-view-${e}-${t}`]}),X.invalidateQueries({queryKey:[`supabase-year-${e}`]}),X.invalidateQueries({queryKey:["supabase-stats"]})}},$e=()=>{g(new Set)},oe=async()=>{try{(await(await Tr("POST",`/api/conflicts/analyze-month/${e}/${t}`)).json()).success&&n({title:"Cleanup started",description:`Analyzing ${e}-${t} for duplicate events...`})}catch{n({variant:"destructive",title:"Error",description:"Failed to start cleanup analysis"})}},Be=async(L,I)=>{if(console.log(` [Individual Day] Clicked ${L}, isAnalyzed: ${I}`),I)console.log(` [Individual Day] Navigating to analyzed day: ${L}`),window.location.href=`/day/${L}?from=month`;else{console.log(` [Individual Day] Starting analysis for ${L}`),g(U=>{const V=new Set([...U,L]);return console.log(" [Individual Day] Updated analyzing dates:",Array.from(V)),V});try{if((await fetch(`/api/analysis/date/${L}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({forceReanalysis:!1,aiProvider:"openai",newsProvider:localStorage.getItem("newsProvider")||"exa"})})).ok)await X.invalidateQueries({queryKey:[`/api/analysis/year/${e}`]}),await X.refetchQueries({queryKey:[`/api/analysis/year/${e}`]}),n({title:"Success",description:`Analysis completed for ${Oe(L)}`});else throw new Error("Analysis failed")}catch(U){console.error("Individual day analysis error:",U),n({title:"Error",description:`Failed to analyze ${Oe(L)}`,variant:"destructive"})}finally{console.log(` [Individual Day] Completed analysis for ${L}`),g(U=>{const V=new Set(U);return V.delete(L),console.log(` [Individual Day] Removed ${L} from analyzing dates:`,Array.from(V)),V})}}},Me=L=>L<=2010?{icon:bD,text:"Early Era",color:"text-green-500"}:L<=2013?{icon:tv,text:"First Bubble",color:"text-blue-500"}:L<=2015?{icon:ws,text:"Mt. Gox Crisis",color:"text-red-500"}:L<=2017?{icon:Qc,text:"Altcoin Era",color:"text-yellow-500"}:L<=2020?{icon:wD,text:"Crypto Winter",color:"text-cyan-500"}:L<=2022?{icon:lC,text:"Institutional",color:"text-indigo-500"}:L<=2023?{icon:xD,text:"DeFi/NFT",color:"text-purple-500"}:{icon:Rr,text:"ETF Era",color:"text-amber-500"},Ue=(L,I)=>{const U=[],V=new Date(L,I,0).getDate();for(let J=1;J<=V;J++){const ie=`${L}-${String(I).padStart(2,"0")}-${String(J).padStart(2,"0")}`;U.push(ie)}return U},Oe=L=>new Date(L).getDate().toString(),He=L=>!(T!=null&&T.analyses)||!Array.isArray(T.analyses)?null:T.analyses.find(I=>(I==null?void 0:I.date)===L)||null,dt=async()=>{if(!(T!=null&&T.analyses)||T.analyses.length===0){n({title:"No data to check",description:"No analyses available for quality checking.",variant:"destructive"});return}const L=`${e}-${String(f).padStart(2,"0")}`,I=T.analyses.filter(U=>U.date.startsWith(L));if(I.length===0){n({title:"No data for this month",description:`No analyses available for ${e}-${String(f).padStart(2,"0")}.`,variant:"destructive"});return}S(!0),b(new Map),N(new Set),E(null);try{console.log(` Quality check: Filtering to ${I.length} analyses for ${L}`);const U=await fetch("/api/analysis/check-quality",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({analyses:I.map(Ae=>({analysisDate:Ae.date,summary:Ae.summary,tieredArticles:Ae.tieredArticles,analyzedArticles:Ae.analyzedArticles}))})});if(!U.ok)throw new Error(`Quality check failed: ${U.statusText}`);const V=await U.json(),J=new Map;for(const[Ae,Ge]of Object.entries(V.qualityIssues))J.set(Ae,Ge);b(J),N(new Set(V.affectedDates)),E(V);const ie=V.totalIssues,Pe=V.affectedDates.length;n({title:"Quality check complete",description:`Found ${ie} issues across ${Pe} dates.`,variant:ie>0?"destructive":"default"})}catch(U){console.error("Quality check error:",U),n({title:"Quality check failed",description:U.message||"Failed to check summary quality.",variant:"destructive"})}finally{S(!1)}},nt=L=>v.get(L)||[],mt=async()=>{if(!(T!=null&&T.analyses)||T.analyses.length===0){n({title:"No data to verify",description:"No analyses available for Google verification.",variant:"destructive"});return}const L=parseInt(e);if(L>=2009&&L<=2012){O(!0);return}await Qt()},Qt=async()=>{if(!(T!=null&&T.analyses)||T.analyses.length===0){n({title:"No data to verify",description:"No analyses available for Google verification.",variant:"destructive"});return}R(!0);const L=r.size>0,I=`${e}-${t==null?void 0:t.padStart(2,"0")}`;try{let U=T.analyses;L?(U=T.analyses.filter(ie=>r.has(ie.date)),console.log(` Google Check: Using selected dates (${U.length} selected)`)):(U=T.analyses.filter(ie=>ie.date.startsWith(I)),console.log(` Google Check: Filtering to ${U.length} analyses for ${I}`));const V=await fetch("/api/analysis/google-check-month",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({analyses:U.map(ie=>({analysisDate:ie.date,summary:ie.summary}))})});if(!V.ok)throw new Error("Failed to verify summaries with Google");const J=await V.json();console.log(` Google Check completed: ${J.validDays} valid, ${J.incorrectDays} incorrect, ${J.cannotVerifyDays} cannot verify`),G(J),ce(new Set(J.affectedDates)),n({title:"Google verification completed",description:`${J.validDays} valid, ${J.incorrectDays} incorrect, ${J.cannotVerifyDays} cannot verify`})}catch(U){console.error("Google verification error:",U),n({title:"Google verification failed",description:U.message||"Failed to verify summaries with Google.",variant:"destructive"})}finally{R(!1)}},wt=L=>{var I,U;return(U=(I=P==null?void 0:P.results)==null?void 0:I[L])==null?void 0:U.assessment};if(B)return o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-8 bg-slate-200 rounded w-64 mb-4"}),o.jsx("div",{className:"h-4 bg-slate-200 rounded w-96"})]})});if(!T)return o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-slate-500",children:"No data available for this year."})});const Ot=["January","February","March","April","May","June","July","August","September","October","November","December"],Fe=T.monthlyBreakdown[parseInt(t)-1],Ct=Ot[parseInt(t)-1];return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(kn,{href:"/",children:o.jsxs(q,{variant:"outline",size:"sm",children:[o.jsx(ci,{className:"w-4 h-4 mr-2"}),"Back to Timeline"]})}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(kn,{href:`/month/${ge().year}/${ge().month}`,children:o.jsx(q,{variant:"outline",size:"sm",children:o.jsx(Xg,{className:"w-4 h-4"})})}),o.jsx(kn,{href:`/month/${De().year}/${De().month}`,children:o.jsx(q,{variant:"outline",size:"sm",children:o.jsx(ul,{className:"w-4 h-4"})})})]}),o.jsx("div",{children:o.jsxs("h1",{className:"text-2xl font-bold text-slate-900",children:[Ct," ",e]})})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[p?o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(et,{className:"w-4 h-4 animate-spin text-blue-600"}),o.jsxs("div",{className:"text-sm",children:[o.jsxs("span",{className:"font-medium text-slate-900",children:[(p==null?void 0:p.completed)||0,"/",(p==null?void 0:p.total)||0]}),w.size>0&&o.jsxs("span",{className:"text-slate-600 ml-2",children:["Analyzing ",w.size," date",w.size!==1?"s":""]})]})]}),o.jsxs(q,{variant:"outline",size:"sm",onClick:$e,children:[o.jsx(jD,{className:"w-4 h-4 mr-2"}),"Stop"]})]}):o.jsxs(o.Fragment,{children:[o.jsxs(q,{variant:"default",size:"sm",onClick:ue,disabled:!T||(Fe==null?void 0:Fe.totalDays)===(Fe==null?void 0:Fe.analyzedDays),"data-testid":"button-analyze-month",children:[o.jsx(yD,{className:"w-4 h-4 mr-2"}),r.size>0?"Analyze Selected":"Analyze Month"]}),o.jsxs(q,{variant:"outline",size:"sm",onClick:oe,disabled:!T||(Fe==null?void 0:Fe.analyzedDays)===0,"data-testid":"button-time-to-clean",children:[o.jsx(lr,{className:"w-4 h-4 mr-2"}),"Time to Clean"]})]}),T&&T.analyses&&T.analyses.length>0&&o.jsx(q,{variant:"outline",size:"sm",onClick:dt,disabled:j,children:j?o.jsxs(o.Fragment,{children:[o.jsx(et,{className:"w-4 h-4 mr-2 animate-spin"}),"Checking Quality..."]}):o.jsxs(o.Fragment,{children:[o.jsx(ws,{className:"w-4 h-4 mr-2"}),"Check Quality"]})}),T&&T.analyses&&T.analyses.length>0&&o.jsx(q,{variant:"outline",size:"sm",onClick:mt,disabled:D,children:D?o.jsxs(o.Fragment,{children:[o.jsx(et,{className:"w-4 h-4 mr-2 animate-spin"}),"Google Checking..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Zo,{className:"w-4 h-4 mr-2"}),"Google Check"]})}),r.size>0&&o.jsxs(o.Fragment,{children:[o.jsxs(q,{variant:"destructive",size:"sm",onClick:()=>ae.mutate(Array.from(r)),disabled:ae.isPending,children:[o.jsx(ku,{className:"w-4 h-4 mr-2"}),"Delete Selected (",r.size,")"]}),o.jsxs(q,{variant:"outline",size:"sm",onClick:()=>_e.mutate(Array.from(r)),disabled:_e.isPending,children:[o.jsx(pn,{className:"w-4 h-4 mr-2"}),"Recreate Selected (",r.size,")"]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsx(jt,{children:o.jsx(on,{className:"p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Total Days"}),o.jsx("p",{className:"text-2xl font-bold text-slate-900",children:(Fe==null?void 0:Fe.totalDays)||0})]}),o.jsx(Mo,{className:"w-8 h-8 text-blue-600"})]})})}),o.jsx(jt,{children:o.jsx(on,{className:"p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Analyzed"}),o.jsx("p",{className:"text-2xl font-bold text-slate-900",children:(Fe==null?void 0:Fe.analyzedDays)||0})]}),o.jsx(Xn,{className:"w-8 h-8 text-emerald-600"})]})})}),o.jsx(jt,{children:o.jsx(on,{className:"p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Progress"}),o.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[(Fe==null?void 0:Fe.percentage)||0,"%"]})]}),o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx("span",{className:"text-blue-600 text-sm font-bold",children:"%"})})]})})})]}),(()=>{const L=Me(parseInt(e)),I=L.icon;return o.jsx(jt,{className:"bg-gradient-to-r from-slate-50 to-slate-100 border-slate-200",children:o.jsx(on,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(I,{className:`w-6 h-6 ${L.color}`}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-slate-900",children:L.text}),o.jsxs("p",{className:"text-sm text-slate-600",children:["Bitcoin Historical Period for ",e]})]})]})})})})(),o.jsxs(jt,{children:[o.jsx(zs,{children:o.jsx(Us,{children:"Monthly Analysis"})}),o.jsx(on,{children:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center p-3 border-b border-slate-200 bg-slate-50 rounded-t-lg",children:[o.jsx(Zr,{checked:r.size===Ue(parseInt(e),parseInt(t)).length,onCheckedChange:W,className:"mr-3"}),o.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Select All (",r.size," selected)"]})]}),Ue(parseInt(e),parseInt(t)).map(L=>{var Pe;const I=He(L),U=!!I,V=w.has(L),J=_.has(L),ie=wt(L);return o.jsxs("div",{className:`flex items-center p-3 border rounded-lg transition-colors ${V?"border-amber-300 bg-amber-50":J?"border-red-300 bg-red-50":"border-slate-200 hover:bg-slate-50"}`,children:[o.jsx(Zr,{checked:r.has(L),onCheckedChange:Ae=>$(L,Ae),className:"mr-3",onClick:Ae=>Ae.stopPropagation(),disabled:V}),o.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[o.jsxs("div",{className:`flex items-center space-x-4 flex-1 cursor-pointer ${V?"pointer-events-none":""}`,onClick:()=>Be(L,U),children:[o.jsx("div",{className:"w-16 text-sm font-medium text-slate-900",children:Oe(L)}),o.jsx("div",{className:"flex-1",children:V?o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(et,{className:"w-4 h-4 animate-spin text-amber-600"}),o.jsx("p",{className:"text-sm text-amber-700 font-medium",children:"Analyzing Bitcoin news..."}),o.jsxs("div",{className:"flex space-x-1",children:[o.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-pulse"}),o.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),o.jsx("div",{className:"w-2 h-2 bg-amber-400 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})]}):U?o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm text-slate-900 font-medium leading-relaxed break-words",children:(I==null?void 0:I.summary)||"No summary available"}),o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-2 flex-wrap",children:[(I==null?void 0:I.isManualOverride)&&o.jsxs(he,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800",children:[o.jsx(nv,{className:"w-3 h-3 mr-1"}),"Manual Import"]}),o.jsxs(he,{variant:"secondary",className:"text-xs",children:[Math.round(parseFloat(((Pe=I==null?void 0:I.confidenceScore)==null?void 0:Pe.toString())||"0")),"% confidence"]}),(I==null?void 0:I.summary)&&o.jsxs(o.Fragment,{children:[I.summary.length<100&&o.jsxs(he,{variant:"destructive",className:"text-xs",children:["Too Short (",I.summary.length,")"]}),I.summary.length>110&&o.jsxs(he,{variant:"destructive",className:"text-xs",children:["Too Long (",I.summary.length,")"]}),/\.{2,}/.test(I.summary)&&o.jsx(he,{variant:"secondary",className:"text-xs bg-orange-100 text-orange-800",children:"Dots"})]}),(I==null?void 0:I.hasManualEntry)&&o.jsxs(he,{variant:"outline",className:"text-xs",children:[o.jsx(nv,{className:"w-3 h-3 mr-1"}),"Manual"]}),ie==="Valid"&&o.jsxs(he,{variant:"default",className:"text-xs bg-green-100 text-green-800",children:[o.jsx(Zo,{className:"w-3 h-3 mr-1"}),"Google "]}),ie==="Incorrect"&&o.jsxs(he,{variant:"destructive",className:"text-xs",children:[o.jsx(Zo,{className:"w-3 h-3 mr-1"}),"Google "]}),ie==="Cannot Verify"&&o.jsxs(he,{variant:"secondary",className:"text-xs bg-yellow-100 text-yellow-800",children:[o.jsx(Zo,{className:"w-3 h-3 mr-1"}),"Google ?"]})]})})]}):o.jsx("p",{className:"text-sm text-slate-500 italic",children:"No analysis available"})})]}),U&&o.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[o.jsx(U8,{date:L,isFlagged:(I==null?void 0:I.isFlagged)||!1,flagReason:I==null?void 0:I.flagReason,type:"analysis"}),o.jsx(kn,{href:`/day/${L}?from=month`,children:o.jsx(q,{variant:"ghost",size:"sm",className:"p-1 h-6 w-6 hover:bg-orange-100 hover:text-orange-600",title:"View day details",children:o.jsx(Tf,{className:"w-3 h-3"})})})]})]})]},L)})]})})]}),C&&C.totalIssues>0&&o.jsxs(jt,{className:"border-red-200 bg-red-50",children:[o.jsx(zs,{children:o.jsxs(Us,{className:"text-red-800 flex items-center",children:[o.jsx(ws,{className:"w-5 h-5 mr-2"}),"Quality Issues Found (",C.totalIssues,")"]})}),o.jsx(on,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-7 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:C.summary.tooShort}),o.jsx("div",{className:"text-sm text-red-600",children:"Too Short"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:C.summary.tooLong}),o.jsx("div",{className:"text-sm text-red-600",children:"Too Long"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:C.summary.excessiveDots}),o.jsx("div",{className:"text-sm text-red-600",children:"Excessive Dots"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:C.summary.genericFallback}),o.jsx("div",{className:"text-sm text-red-600",children:"Generic Fallback"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-orange-600",children:C.summary.duplicateSummaries||0}),o.jsx("div",{className:"text-sm text-orange-600",children:"Duplicates"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:C.summary.similarSummaries||0}),o.jsx("div",{className:"text-sm text-yellow-600",children:"Similar"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:C.summary.invalidLinks||0}),o.jsx("div",{className:"text-sm text-red-600",children:"Invalid Links"})]})]}),o.jsxs("div",{className:"space-y-4",children:[C.summary.tooShort>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-red-800",children:[" Too Short (",C.summary.tooShort," dates):"]}),o.jsx("div",{className:"space-y-2",children:Array.from(_).map(L=>{var J;const I=nt(L),U=He(L),V=I.filter(ie=>ie.type==="TOO_SHORT");return V.length===0?null:o.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("span",{className:"font-medium text-slate-900",children:["Feb ",Oe(L)]}),o.jsx("span",{className:"text-xs text-red-600",children:(J=V[0])==null?void 0:J.message})]}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:['"',(U==null?void 0:U.summary)||"No summary",'"']})]},`short-${L}`)}).filter(Boolean)})]}),C.summary.tooLong>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-red-800",children:[" Too Long (",C.summary.tooLong," dates):"]}),o.jsx("div",{className:"space-y-2",children:Array.from(_).map(L=>{var J;const I=nt(L),U=He(L),V=I.filter(ie=>ie.type==="TOO_LONG");return V.length===0?null:o.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("span",{className:"font-medium text-slate-900",children:["Feb ",Oe(L)]}),o.jsx("span",{className:"text-xs text-red-600",children:(J=V[0])==null?void 0:J.message})]}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:['"',(U==null?void 0:U.summary)||"No summary",'"']})]},`long-${L}`)}).filter(Boolean)})]}),C.summary.excessiveDots>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-orange-800",children:[" Excessive Dots (",C.summary.excessiveDots," dates):"]}),o.jsx("div",{className:"space-y-2",children:Array.from(_).map(L=>{var J;const I=nt(L),U=He(L),V=I.filter(ie=>ie.type==="EXCESSIVE_DOTS");return V.length===0?null:o.jsxs("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("span",{className:"font-medium text-slate-900",children:["Feb ",Oe(L)]}),o.jsx("span",{className:"text-xs text-orange-600",children:(J=V[0])==null?void 0:J.message})]}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:['"',(U==null?void 0:U.summary)||"No summary",'"']})]},`dots-${L}`)}).filter(Boolean)})]}),C.summary.genericFallback>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-orange-800",children:[" Generic Fallback (",C.summary.genericFallback," dates):"]}),o.jsx("div",{className:"space-y-2",children:Array.from(_).map(L=>{var J;const I=nt(L),U=He(L),V=I.filter(ie=>ie.type==="GENERIC_FALLBACK");return V.length===0?null:o.jsxs("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("span",{className:"font-medium text-slate-900",children:["Feb ",Oe(L)]}),o.jsx("span",{className:"text-xs text-orange-600",children:(J=V[0])==null?void 0:J.message})]}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:['"',(U==null?void 0:U.summary)||"No summary",'"']})]},`generic-${L}`)}).filter(Boolean)})]}),C.summary.repeatedWords>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-yellow-800",children:[" Repeated Words (",C.summary.repeatedWords," dates):"]}),o.jsx("div",{className:"space-y-2",children:Array.from(_).map(L=>{var J;const I=nt(L),U=He(L),V=I.filter(ie=>ie.type==="REPEATED_WORDS");return V.length===0?null:o.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("span",{className:"font-medium text-slate-900",children:["Feb ",Oe(L)]}),o.jsx("span",{className:"text-xs text-yellow-600",children:(J=V[0])==null?void 0:J.message})]}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:['"',(U==null?void 0:U.summary)||"No summary",'"']})]},`repeated-${L}`)}).filter(Boolean)})]}),C.summary.placeholderText>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-red-800",children:[" Placeholder Text (",C.summary.placeholderText," dates):"]}),o.jsx("div",{className:"space-y-2",children:Array.from(_).map(L=>{var J;const I=nt(L),U=He(L),V=I.filter(ie=>ie.type==="PLACEHOLDER_TEXT");return V.length===0?null:o.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("span",{className:"font-medium text-slate-900",children:["Feb ",Oe(L)]}),o.jsx("span",{className:"text-xs text-red-600",children:(J=V[0])==null?void 0:J.message})]}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:['"',(U==null?void 0:U.summary)||"No summary",'"']})]},`placeholder-${L}`)}).filter(Boolean)})]}),C.summary.duplicateSummaries>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-orange-800",children:[" Duplicate Summaries (",C.summary.duplicateSummaries," dates):"]}),o.jsx("div",{className:"space-y-2",children:Array.from(_).map(L=>{var J;const I=nt(L),U=He(L),V=I.filter(ie=>ie.type==="DUPLICATE_SUMMARY");return V.length===0?null:o.jsxs("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("span",{className:"font-medium text-slate-900",children:["Feb ",Oe(L)]}),o.jsx("span",{className:"text-xs text-orange-600",children:(J=V[0])==null?void 0:J.message})]}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:['"',(U==null?void 0:U.summary)||"No summary",'"']})]},`duplicate-${L}`)}).filter(Boolean)})]}),C.summary.similarSummaries>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-yellow-800",children:[" Similar Summaries (",C.summary.similarSummaries," dates):"]}),o.jsx("div",{className:"space-y-2",children:Array.from(_).map(L=>{var J;const I=nt(L),U=He(L),V=I.filter(ie=>ie.type==="SIMILAR_SUMMARY");return V.length===0?null:o.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("span",{className:"font-medium text-slate-900",children:["Feb ",Oe(L)]}),o.jsx("span",{className:"text-xs text-yellow-600",children:(J=V[0])==null?void 0:J.message})]}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:['"',(U==null?void 0:U.summary)||"No summary",'"']})]},`similar-${L}`)}).filter(Boolean)})]}),C.summary.invalidLinks>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-red-800",children:[" Invalid Links (",C.summary.invalidLinks," dates):"]}),o.jsx("div",{className:"space-y-2",children:Array.from(_).map(L=>{var J,ie,Pe;const I=nt(L),U=He(L),V=I.filter(Ae=>Ae.type==="INVALID_LINKS");return V.length===0?null:o.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("span",{className:"font-medium text-slate-900",children:["Feb ",Oe(L)]}),o.jsx("span",{className:"text-xs text-red-600",children:(J=V[0])==null?void 0:J.message})]}),o.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:['"',(U==null?void 0:U.summary)||"No summary",'"']}),((Pe=(ie=V[0])==null?void 0:ie.details)==null?void 0:Pe.invalidUrls)&&o.jsxs("div",{className:"mt-2 space-y-1",children:[o.jsx("div",{className:"text-xs font-medium text-red-700",children:"Invalid URLs:"}),V[0].details.invalidUrls.map((Ae,Ge)=>o.jsx("div",{className:"text-xs text-red-600 break-all bg-red-100 p-2 rounded",children:Ae},Ge))]})]},`invalid-links-${L}`)}).filter(Boolean)})]})]})]})})]}),C&&C.totalIssues===0&&o.jsx(jt,{className:"border-green-200 bg-green-50",children:o.jsx(on,{className:"p-4",children:o.jsxs("div",{className:"flex items-center text-green-800",children:[o.jsx(Xn,{className:"w-5 h-5 mr-2"}),o.jsx("span",{className:"font-medium",children:"All summaries passed quality checks!"})]})})}),P&&o.jsxs(jt,{className:"border-blue-200 bg-blue-50",children:[o.jsx(zs,{children:o.jsxs(Us,{className:"text-blue-800 flex items-center",children:[o.jsx(Zo,{className:"w-5 h-5 mr-2"}),"Google Verification Results"]})}),o.jsx(on,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:P.validDays}),o.jsx("div",{className:"text-sm text-green-600",children:"Valid"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:P.incorrectDays}),o.jsx("div",{className:"text-sm text-red-600",children:"Incorrect"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:P.cannotVerifyDays}),o.jsx("div",{className:"text-sm text-yellow-600",children:"Cannot Verify"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:P.totalDays}),o.jsx("div",{className:"text-sm text-blue-600",children:"Total"})]})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Accuracy Score"}),o.jsxs("span",{className:"text-lg font-bold text-blue-800",children:[Math.round(P.validDays/P.totalDays*100),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 h-2 rounded-full",style:{width:`${P.validDays/P.totalDays*100}%`}})})]}),P.incorrectDays>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-red-800",children:[" Incorrect Summaries (",P.incorrectDays," dates):"]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(Q).filter(L=>wt(L)==="Incorrect").map(L=>o.jsx(kn,{href:`/day/${L}`,children:o.jsx(he,{variant:"destructive",className:"cursor-pointer hover:bg-red-600",children:L})},L))})]}),P.cannotVerifyDays>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-yellow-800",children:[" Cannot Verify (",P.cannotVerifyDays," dates):"]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(Q).filter(L=>wt(L)==="Cannot Verify").map(L=>o.jsx(kn,{href:`/day/${L}`,children:o.jsx(he,{variant:"secondary",className:"cursor-pointer hover:bg-gray-300",children:L})},L))})]}),P.validDays>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"font-semibold text-green-800",children:[" Valid Summaries (",P.validDays," dates):"]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(P.results).filter(L=>wt(L)==="Valid").map(L=>o.jsx(kn,{href:`/day/${L}`,children:o.jsx(he,{variant:"secondary",className:"bg-green-100 text-green-800 cursor-pointer hover:bg-green-200",children:L})},L))})]})]})})]}),o.jsx(Hx,{open:Y,onOpenChange:O,children:o.jsxs(sm,{children:[o.jsxs(om,{children:[o.jsxs(im,{className:"flex items-center",children:[o.jsx(Zo,{className:"w-5 h-5 mr-2 text-blue-600"}),"Google Check Warning"]}),o.jsxs(lm,{className:"space-y-3",children:[o.jsxs("div",{children:["You're about to verify Bitcoin news summaries from ",o.jsx("strong",{children:e}),", which is in Bitcoin's early era (2009-2012)."]}),o.jsxs("div",{className:"text-amber-600 font-medium",children:[" ",o.jsx("strong",{children:"Please note:"})," Google's search results for Bitcoin-related news from ",e," may be limited or incomplete, as Bitcoin was relatively unknown during this period."]}),o.jsx("div",{children:"The verification results for this early period may not be as reliable as for more recent years. Do you want to continue anyway?"})]})]}),o.jsxs(am,{children:[o.jsx(um,{children:"Cancel"}),o.jsxs(cm,{onClick:()=>{O(!1),Qt()},className:"bg-blue-600 hover:bg-blue-700",children:[o.jsx(Zo,{className:"w-4 h-4 mr-2"}),"Continue Google Check"]})]})]})})]})}const K8=Array.from({length:16},(e,t)=>2009+t),V8=["January","February","March","April","May","June","July","August","September","October","November","December"],q8={January:1,February:2,March:3,April:4,May:5,June:6,July:7,August:8,September:9,October:10,November:11,December:12};function H8(){const{toast:e}=wr(),[,t]=_u(),[n,r]=d.useState(null),[s,a]=d.useState(null),[i,l]=d.useState(null),[c,u]=d.useState(1),[h,f]=d.useState(50),[m,p]=d.useState(new Set),[w,g]=d.useState(!1),[y,x]=d.useState(!1),[v,b]=d.useState(!1),j=d.useMemo(()=>{if(!n||!s)return null;const R=q8[s],P=`${n}-${String(R).padStart(2,"0")}-01`,G=new Date(n,R,0).getDate(),Q=`${n}-${String(R).padStart(2,"0")}-${String(G).padStart(2,"0")}`;return{startDate:P,endDate:Q}},[n,s]),{data:S,isLoading:_}=ot({queryKey:["monthly-analyses",n,s,c,h],queryFn:async()=>{if(!Ye||!j)return{analyses:[],pagination:{totalCount:0,totalPages:0}};const{startDate:R,endDate:P}=j,{count:G}=await Ye.from("historical_news_analyses").select("*",{count:"exact",head:!0}).gte("date",R).lte("date",P),Q=G||0,ce=Math.ceil(Q/h),{data:Y,error:O}=await Ye.from("historical_news_analyses").select("date, summary, tags_version2, tier_used, is_manual_override").gte("date",R).lte("date",P).order("date",{ascending:!1}).range((c-1)*h,c*h-1);if(O)throw O;return{analyses:(Y||[]).map(T=>({date:T.date,summary:T.summary,tags_version2:T.tags_version2||null,tier:T.tier_used||void 0,url:void 0,source_url:void 0,isManualOverride:T.is_manual_override||!1})),pagination:{totalCount:Q,totalPages:ce}}},enabled:!!j}),N=(S==null?void 0:S.analyses)||[],C=(S==null?void 0:S.pagination.totalCount)||0;S!=null&&S.pagination.totalPages,N.length>0&&N.every(R=>m.has(R.date));const E=(R,P)=>{r(R),a(P),l(R),u(1),p(new Set)},D=R=>{p(P=>{const G=new Set(P);return G.has(R)?G.delete(R):G.add(R),G})};return o.jsx(Zf,{className:"w-full",children:o.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row",children:[o.jsx("div",{className:"lg:w-72 shrink-0",children:o.jsxs(Lx,{collapsible:"none",className:"rounded-xl bg-sidebar/40",children:[o.jsx(Fx,{className:"pt-0"}),o.jsx(zx,{children:o.jsxs(la,{children:[o.jsx(Ni,{children:"Years"}),o.jsx(ca,{children:o.jsx(Ci,{children:K8.map(R=>o.jsx(ua,{children:o.jsxs(tm,{className:"group/collapsible [&[data-state=open]>button>svg:first-child]:rotate-90",open:i===R,onOpenChange:P=>l(P?R:null),children:[o.jsx(nm,{asChild:!0,children:o.jsxs(fo,{className:"justify-start gap-2",children:[o.jsx(ul,{className:"h-3 w-3 transition-transform"}),o.jsx("span",{children:R})]})}),o.jsx(rm,{children:o.jsx(Ux,{children:V8.map(P=>{const G=n===R&&s===P;return o.jsx(Bx,{children:o.jsx(fo,{isActive:G,className:"w-full justify-start text-xs h-7 data-[active=true]:bg-white data-[active=true]:text-black",onClick:()=>E(R,P),children:P})},P)})})})]})},R))})})]})})]})}),o.jsx("div",{className:"flex-1 space-y-4",children:o.jsxs(jt,{className:"pt-0 px-6 pb-6 border-0",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("h2",{className:"text-lg font-semibold text-foreground",children:n&&s?`${s} ${n}`:"Select a month"}),C>0&&o.jsxs(he,{variant:"secondary",className:"font-normal",children:[C.toLocaleString()," result",C!==1?"s":""]})]})}),!n||!s?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-muted-foreground",children:"Select a year and month from the sidebar to view analyses"})}):o.jsx(o.Fragment,{children:o.jsx(Kh,{analyses:N,isLoading:_,selectedDates:m,onDateSelect:D,onDateDeselect:D,onRowClick:R=>{t(`/day/${R}?from=monthly`)},emptyMessage:`No analyses found for ${s} ${n}`,showCheckbox:!0,pageSize:h,currentPage:c,totalCount:C,onPageChange:R=>u(R),onPageSizeChange:R=>{f(R),u(1)},pageSizeOptions:[50,200,500],showPagination:!0,showSelectAll:!1,showBulkActions:!0,bulkActions:{showSelectAllLink:!1,onClearSelection:()=>{p(new Set)},customActions:o.jsxs(o.Fragment,{children:[o.jsxs(Ol,{children:[o.jsx(Il,{asChild:!0,children:o.jsxs(q,{variant:"outline",size:"sm",disabled:w,title:"Re-analyze",children:[o.jsx(pn,{className:`w-4 h-4 mr-2 ${w?"animate-spin":""}`}),"Re-analyze",o.jsx(Wo,{className:"w-4 h-4 ml-2"})]})}),o.jsxs(Ya,{align:"end",children:[o.jsxs(nr,{onClick:async()=>{g(!0);const R=Array.from(m);for(const P of R)try{await fetch(`/api/analysis/date/${P}`,{method:"POST"})}catch(G){console.error(`Failed to analyze ${P}:`,G)}g(!1),X.invalidateQueries({queryKey:["monthly-analyses"]}),e({title:"Re-analysis complete",description:`Analyzed ${R.length} date(s)`})},disabled:w,children:[o.jsx(pn,{className:"w-4 h-4 mr-2"}),"Analyse Days"]}),o.jsxs(nr,{onClick:async()=>{g(!0);const R=Array.from(m);for(const P of R)try{await fetch(`/api/analysis/date/${P}/redo-summary`,{method:"POST"})}catch(G){console.error(`Failed to redo summary for ${P}:`,G)}g(!1),X.invalidateQueries({queryKey:["monthly-analyses"]}),e({title:"Summaries updated",description:`Redid summaries for ${R.length} date(s)`})},disabled:w,children:[o.jsx(Ss,{className:"w-4 h-4 mr-2"}),"Redo Summaries"]})]})]}),o.jsxs(q,{variant:"outline",size:"sm",disabled:y,onClick:async()=>{x(!0);try{await fetch("/api/tags/categorize/start",{method:"POST"}),e({title:"Auto Tagging started",description:"AI is categorizing tags in the background"})}catch{e({title:"Error",description:"Failed to start auto tagging",variant:"destructive"})}x(!1)},children:[y?o.jsx(et,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(Ex,{className:"w-4 h-4 mr-2"}),"Auto Tagging"]}),o.jsxs(q,{variant:"outline",size:"sm",onClick:()=>b(!0),children:[o.jsx(Jc,{className:"w-4 h-4 mr-2"}),"Manage Tags"]})]})}})})]})})]})})}var dm="Tabs",[W8]=Nn(dm,[Bf]),N2=Bf(),[G8,Wx]=W8(dm),C2=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:i="horizontal",dir:l,activationMode:c="automatic",...u}=e,h=Al(l),[f,m]=rr({prop:r,onChange:s,defaultProp:a??"",caller:dm});return o.jsx(G8,{scope:n,baseId:Un(),value:f,onValueChange:m,orientation:i,dir:h,activationMode:c,children:o.jsx(ye.div,{dir:h,"data-orientation":i,...u,ref:t})})});C2.displayName=dm;var _2="TabsList",E2=d.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,a=Wx(_2,n),i=N2(n);return o.jsx(hE,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:r,children:o.jsx(ye.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:t})})});E2.displayName=_2;var k2="TabsTrigger",T2=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=e,i=Wx(k2,n),l=N2(n),c=A2(i.baseId,r),u=O2(i.baseId,r),h=r===i.value;return o.jsx(fE,{asChild:!0,...l,focusable:!s,active:h,children:o.jsx(ye.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...a,ref:t,onMouseDown:Z(e.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?i.onValueChange(r):f.preventDefault()}),onKeyDown:Z(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&i.onValueChange(r)}),onFocus:Z(e.onFocus,()=>{const f=i.activationMode!=="manual";!h&&!s&&f&&i.onValueChange(r)})})})});T2.displayName=k2;var R2="TabsContent",P2=d.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...i}=e,l=Wx(R2,n),c=A2(l.baseId,r),u=O2(l.baseId,r),h=r===l.value,f=d.useRef(h);return d.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),o.jsx($t,{present:s||h,children:({present:m})=>o.jsx(ye.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:m&&a})})});P2.displayName=R2;function A2(e,t){return`${e}-trigger-${t}`}function O2(e,t){return`${e}-content-${t}`}var Q8=C2,I2=E2,M2=T2,D2=P2;const hm=Q8,qu=d.forwardRef(({className:e,...t},n)=>o.jsx(I2,{ref:n,className:ee("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));qu.displayName=I2.displayName;const gr=d.forwardRef(({className:e,...t},n)=>o.jsx(M2,{ref:n,className:ee("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));gr.displayName=M2.displayName;const ss=d.forwardRef(({className:e,...t},n)=>o.jsx(D2,{ref:n,className:ee("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));ss.displayName=D2.displayName;var Cp,fm="HoverCard",[$2]=Nn(fm,[_s]),mm=_s(),[Y8,Gx]=$2(fm),L2=e=>{const{__scopeHoverCard:t,children:n,open:r,defaultOpen:s,onOpenChange:a,openDelay:i=700,closeDelay:l=300}=e,c=mm(t),u=d.useRef(0),h=d.useRef(0),f=d.useRef(!1),m=d.useRef(!1),[p,w]=rr({prop:r,defaultProp:s??!1,onChange:a,caller:fm}),g=d.useCallback(()=>{clearTimeout(h.current),u.current=window.setTimeout(()=>w(!0),i)},[i,w]),y=d.useCallback(()=>{clearTimeout(u.current),!f.current&&!m.current&&(h.current=window.setTimeout(()=>w(!1),l))},[l,w]),x=d.useCallback(()=>w(!1),[w]);return d.useEffect(()=>()=>{clearTimeout(u.current),clearTimeout(h.current)},[]),o.jsx(Y8,{scope:t,open:p,onOpenChange:w,onOpen:g,onClose:y,onDismiss:x,hasSelectionRef:f,isPointerDownOnContentRef:m,children:o.jsx(Ru,{...c,children:n})})};L2.displayName=fm;var F2="HoverCardTrigger",z2=d.forwardRef((e,t)=>{const{__scopeHoverCard:n,...r}=e,s=Gx(F2,n),a=mm(n);return o.jsx(Rl,{asChild:!0,...a,children:o.jsx(ye.a,{"data-state":s.open?"open":"closed",...r,ref:t,onPointerEnter:Z(e.onPointerEnter,Yh(s.onOpen)),onPointerLeave:Z(e.onPointerLeave,Yh(s.onClose)),onFocus:Z(e.onFocus,s.onOpen),onBlur:Z(e.onBlur,s.onClose),onTouchStart:Z(e.onTouchStart,i=>i.preventDefault())})})});z2.displayName=F2;var J8="HoverCardPortal",[EK,X8]=$2(J8,{forceMount:void 0}),Qh="HoverCardContent",U2=d.forwardRef((e,t)=>{const n=X8(Qh,e.__scopeHoverCard),{forceMount:r=n.forceMount,...s}=e,a=Gx(Qh,e.__scopeHoverCard);return o.jsx($t,{present:r||a.open,children:o.jsx(Z8,{"data-state":a.open?"open":"closed",...s,onPointerEnter:Z(e.onPointerEnter,Yh(a.onOpen)),onPointerLeave:Z(e.onPointerLeave,Yh(a.onClose)),ref:t})})});U2.displayName=Qh;var Z8=d.forwardRef((e,t)=>{const{__scopeHoverCard:n,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,...l}=e,c=Gx(Qh,n),u=mm(n),h=d.useRef(null),f=qe(t,h),[m,p]=d.useState(!1);return d.useEffect(()=>{if(m){const w=document.body;return Cp=w.style.userSelect||w.style.webkitUserSelect,w.style.userSelect="none",w.style.webkitUserSelect="none",()=>{w.style.userSelect=Cp,w.style.webkitUserSelect=Cp}}},[m]),d.useEffect(()=>{if(h.current){const w=()=>{p(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var y;((y=document.getSelection())==null?void 0:y.toString())!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",w),()=>{document.removeEventListener("pointerup",w),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),d.useEffect(()=>{h.current&&nU(h.current).forEach(g=>g.setAttribute("tabindex","-1"))}),o.jsx(Js,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:i,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:Z(a,w=>{w.preventDefault()}),onDismiss:c.onDismiss,children:o.jsx(Pu,{...u,...l,onPointerDown:Z(l.onPointerDown,w=>{w.currentTarget.contains(w.target)&&p(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:f,style:{...l.style,userSelect:m?"text":void 0,WebkitUserSelect:m?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),eU="HoverCardArrow",tU=d.forwardRef((e,t)=>{const{__scopeHoverCard:n,...r}=e,s=mm(n);return o.jsx(Au,{...s,...r,ref:t})});tU.displayName=eU;function Yh(e){return t=>t.pointerType==="touch"?void 0:e()}function nU(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)t.push(n.currentNode);return t}var rU=L2,sU=z2,B2=U2;const oU=rU,aU=sU,K2=d.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},s)=>o.jsx(B2,{ref:s,align:t,sideOffset:n,className:ee("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]",e),...r}));K2.displayName=B2.displayName;function V2({badge:e,className:t}){if(!e)return null;const r={Manual:{icon:Ss,className:"bg-blue-100 text-blue-800 border-blue-300",label:"Manual"},Orphan:{icon:Ws,className:"bg-orange-100 text-orange-800 border-orange-300",label:"Orphan"},Verified:{icon:Xn,className:"bg-green-100 text-green-800 border-green-300",label:"Verified"},"Not Available":{icon:uC,className:"bg-gray-100 text-gray-800 border-gray-300",label:"Not Available"}}[e];if(!r)return null;const s=r.icon;return o.jsxs(he,{variant:"outline",className:`${r.className} text-xs px-1.5 py-0.5 inline-flex items-center space-x-1 w-fit ${t||""}`,title:`Verification Status: ${r.label}`,children:[o.jsx(s,{className:"w-2.5 h-2.5"}),o.jsx("span",{children:r.label})]})}function iU({open:e,onOpenChange:t,date:n,selectionMode:r,tieredArticles:s,geminiSelectedIds:a=[],perplexitySelectedIds:i=[],intersectionIds:l=[],openaiSuggestedId:c,onConfirm:u}){var S,_;const[h,f]=d.useState(r==="multiple"&&c||null),[m,p]=d.useState(!1),{toast:w}=wr(),y=(N=>!N||s.bitcoin.some(C=>C.id===N)?"bitcoin":s.crypto.some(C=>C.id===N)?"crypto":s.macro.some(C=>C.id===N)?"macro":"bitcoin")(c||h);d.useEffect(()=>{var N,C,E;e&&console.log(" [ArticleSelectionDialog] Dialog opened with:",{selectionMode:r,tieredArticles:{bitcoin:((N=s.bitcoin)==null?void 0:N.length)||0,crypto:((C=s.crypto)==null?void 0:C.length)||0,macro:((E=s.macro)==null?void 0:E.length)||0},geminiSelectedIds:a.length,perplexitySelectedIds:i.length,intersectionIds:l.length,intersectionIdsSample:l.slice(0,3),openaiSuggestedId:c,selectedArticleId:h})},[e,r,s,a,i,l,c,h]);const x=async()=>{if(!h){w({variant:"destructive",description:"Please select an article first"});return}p(!0);try{await u(h),t(!1),w({description:"Article selected successfully. Generating summary..."})}catch(N){w({variant:"destructive",description:`Failed to confirm selection: ${N.message}`})}finally{p(!1)}},v=N=>{const C=a.includes(N),E=i.includes(N),D=l.includes(N);return{isGemini:C,isPerplexity:E,isIntersection:D,isOpenAISuggested:N===c,isSelected:N===h}},b=(N,C)=>{const E=v(N.id),D={bitcoin:"border-orange-500/30 bg-orange-950/20",crypto:"border-blue-500/30 bg-blue-950/20",macro:"border-purple-500/30 bg-purple-950/20"},R=E.isOpenAISuggested?"border-2 border-yellow-500 ring-2 ring-yellow-500/50":E.isSelected?"border-2 border-green-500 ring-2 ring-green-500/50":E.isIntersection?"border-2 border-green-400/50":"border border-border";return o.jsx(jt,{className:`group cursor-pointer transition-all duration-200 hover:scale-[1.02] hover:shadow-lg ${E.isSelected?"ring-2 ring-green-500/50 shadow-lg shadow-green-500/20":"hover:ring-1 hover:ring-border"} ${R} ${D[C]} bg-muted/50 backdrop-blur-sm`,onClick:()=>{(r==="orphan"||E.isIntersection)&&f(N.id)},children:o.jsx(on,{className:"p-5",children:o.jsx("div",{className:"flex items-start justify-between gap-4",children:o.jsxs("div",{className:"flex-1 space-y-3",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[E.isSelected&&o.jsx("div",{className:"flex-shrink-0 mt-1",children:o.jsx("div",{className:"p-1.5 rounded-full bg-green-500/20 border border-green-500/50",children:o.jsx(Xn,{className:"w-4 h-4 text-green-400"})})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:`font-semibold leading-tight mb-2 ${E.isSelected?"text-green-300":"text-foreground"}`,children:N.title}),N.summary&&o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed line-clamp-3 mb-3",children:N.summary})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[E.isGemini&&o.jsxs(he,{variant:"outline",className:"bg-blue-500/10 text-blue-300 border-blue-500/30 text-xs font-medium px-2 py-1",children:[o.jsx(iC,{className:"w-3 h-3 mr-1"}),"Gemini"]}),E.isPerplexity&&o.jsxs(he,{variant:"outline",className:"bg-purple-500/10 text-purple-300 border-purple-500/30 text-xs font-medium px-2 py-1",children:[o.jsx(rv,{className:"w-3 h-3 mr-1"}),"Perplexity"]}),E.isIntersection&&o.jsxs(he,{variant:"outline",className:"bg-green-500/10 text-green-300 border-green-500/30 text-xs font-medium px-2 py-1",children:[o.jsx(Xn,{className:"w-3 h-3 mr-1"}),"Both Agreed"]}),E.isOpenAISuggested&&o.jsxs(he,{variant:"outline",className:"bg-yellow-500/10 text-yellow-300 border-yellow-500/30 text-xs font-medium px-2 py-1",children:[o.jsx(Rr,{className:"w-3 h-3 mr-1 fill-yellow-300/20"}),"OpenAI Suggested"]})]}),N.url&&o.jsxs("a",{href:N.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-xs text-blue-400 hover:text-blue-300 transition-colors font-medium mt-2",onClick:P=>P.stopPropagation(),children:[o.jsx(Tf,{className:"w-3 h-3 mr-1.5"}),"View Full Article",o.jsx(Gc,{className:"w-3 h-3 ml-1"})]})]})})})},N.id)},j=(N,C)=>{if(!C||C.length===0)return o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:o.jsx("p",{children:"No articles found in this tier"})});let E=C;return r==="multiple"&&(E=C.filter(D=>l.includes(D.id)||l.some(P=>D.url&&(P===D.url||D.url.includes(P)||P.includes(D.url)))),console.log(`   [${N}] Filtered ${E.length} articles from ${C.length} total (intersection: ${l.length})`)),E.length===0?o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:o.jsx("p",{children:"No matching articles in this tier"})}):o.jsx("div",{className:"space-y-4",children:E.map(D=>b(D,N))})};return o.jsx(Zt,{open:e,onOpenChange:t,children:o.jsxs(Vt,{className:"max-w-5xl max-h-[90vh] flex flex-col bg-background border-border text-foreground shadow-2xl",children:[o.jsx(qt,{className:"space-y-4 pb-4 border-b border-border",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-violet-500/20 to-purple-500/20 border border-violet-500/30",children:o.jsx(Ss,{className:"w-5 h-5 text-violet-300"})}),o.jsxs(Ht,{className:"text-2xl font-bold text-foreground",children:["Select Article for ",new Date(n).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),o.jsx(Pn,{className:"text-muted-foreground text-base leading-relaxed",children:r==="multiple"?o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(lr,{className:"w-4 h-4 mt-1 text-yellow-400 flex-shrink-0"}),o.jsxs("span",{children:["Multiple articles were approved by both ",o.jsx("span",{className:"font-semibold text-blue-300",children:"Gemini"})," and ",o.jsx("span",{className:"font-semibold text-purple-300",children:"Perplexity"}),".",o.jsx("span",{className:"font-semibold text-yellow-300",children:" OpenAI"})," has suggested one, but you can choose a different one."]})]}):o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Ws,{className:"w-4 h-4 mt-1 text-orange-400 flex-shrink-0"}),o.jsx("span",{children:"No articles were approved by both AIs. Please manually select an article to summarize."})]})})]}),o.jsx("div",{className:"flex-shrink-0",children:o.jsx(V2,{badge:r==="orphan"?"Orphan":"Verified"})})]})}),o.jsxs(hm,{defaultValue:y,className:"w-full mt-6",children:[o.jsxs(qu,{className:"grid w-full grid-cols-3 bg-muted/50 border border-border rounded-lg p-1",children:[o.jsx(gr,{value:"bitcoin",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-orange-500/20 data-[state=active]:to-orange-600/20 data-[state=active]:text-orange-300 data-[state=active]:border-orange-500/30 data-[state=active]:shadow-lg transition-all rounded-md border border-transparent",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(rv,{className:"w-4 h-4"}),o.jsx("span",{className:"font-semibold",children:"Bitcoin"}),o.jsx(he,{variant:"secondary",className:"ml-1 bg-orange-500/20 text-orange-300 border-orange-500/30 text-xs",children:s.bitcoin.length}),y==="bitcoin"&&o.jsx(Rr,{className:"w-4 h-4 text-orange-400 fill-orange-400/30"})]})}),o.jsx(gr,{value:"crypto",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-500/20 data-[state=active]:to-blue-600/20 data-[state=active]:text-blue-300 data-[state=active]:border-blue-500/30 data-[state=active]:shadow-lg transition-all rounded-md border border-transparent",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(lr,{className:"w-4 h-4"}),o.jsx("span",{className:"font-semibold",children:"Crypto"}),o.jsx(he,{variant:"secondary",className:"ml-1 bg-blue-500/20 text-blue-300 border-blue-500/30 text-xs",children:s.crypto.length}),y==="crypto"&&o.jsx(Rr,{className:"w-4 h-4 text-blue-400 fill-blue-400/30"})]})}),o.jsx(gr,{value:"macro",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-500/20 data-[state=active]:to-purple-600/20 data-[state=active]:text-purple-300 data-[state=active]:border-purple-500/30 data-[state=active]:shadow-lg transition-all rounded-md border border-transparent",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ss,{className:"w-4 h-4"}),o.jsx("span",{className:"font-semibold",children:"Macro"}),o.jsx(he,{variant:"secondary",className:"ml-1 bg-purple-500/20 text-purple-300 border-purple-500/30 text-xs",children:s.macro.length}),y==="macro"&&o.jsx(Rr,{className:"w-4 h-4 text-purple-400 fill-purple-400/30"})]})})]}),o.jsxs("div",{className:"mt-4 flex-1 overflow-y-auto pr-2 min-h-0",children:[o.jsx(ss,{value:"bitcoin",className:"mt-0",children:j("bitcoin",s.bitcoin)}),o.jsx(ss,{value:"crypto",className:"mt-0",children:j("crypto",s.crypto)}),o.jsx(ss,{value:"macro",className:"mt-0",children:j("macro",s.macro)})]})]}),o.jsx(Xr,{className:"border-t border-border pt-6 mt-6",children:o.jsxs("div",{className:"flex items-center justify-between w-full gap-4",children:[o.jsx("div",{className:"flex items-center gap-3 text-sm",children:h?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"p-1.5 rounded-full bg-green-500/20 border border-green-500/30",children:o.jsx(Xn,{className:"w-4 h-4 text-green-400"})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-muted-foreground text-xs",children:"Selected Article:"}),o.jsxs("span",{className:"text-foreground font-medium",children:[(S=s.bitcoin.concat(s.crypto,s.macro).find(N=>N.id===h))==null?void 0:S.title.substring(0,60),(_=s.bitcoin.concat(s.crypto,s.macro).find(N=>N.id===h))!=null&&_.title.length&&s.bitcoin.concat(s.crypto,s.macro).find(N=>N.id===h).title.length>60?"...":""]})]})]}):o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[o.jsx(Ws,{className:"w-4 h-4"}),o.jsx("span",{children:"Please select an article to continue"})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(q,{variant:"outline",onClick:()=>t(!1),disabled:m,className:"border-border text-muted-foreground hover:bg-muted/50 hover:border-muted-foreground/50 transition-all",children:"Cancel"}),o.jsx(q,{onClick:x,disabled:!h||m,className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white shadow-lg shadow-green-500/20 hover:shadow-green-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:m?o.jsxs(o.Fragment,{children:[o.jsx(et,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating Summary..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Xn,{className:"w-4 h-4 mr-2"}),"Confirm Selection"]})})]})]})})]})})}function lU(){const e=Nl(),t=at({mutationFn:async()=>{const n=await fetch("/api/health/refresh",{method:"POST",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()},onSuccess:n=>{e.setQueryData(["health-status"],n)}});return{triggerHealthCheck:t.mutateAsync,isLoading:t.isPending,error:t.error}}function cU(){var Xe,rt,tn,z,ne,Se,Ne,F,re,de,xe,pe,pt,st,bt,Ze,gt,ve,ze,kt,Mn,br,Hn,sr,zr,Ur,Ul,Zs,Bl,Kl,Ju,Vl,ql,A,H,K,te,Ie,we,Qe,_t,ut,Lt,Cn,Ft,Rt,vn,it,vt;const{date:e}=Cf(),{toast:t}=wr(),[n,r]=Ce.useState(!1),[s,a]=Ce.useState(""),[i,l]=Ce.useState(!1),[c,u]=Ce.useState(!1),[h,f]=Ce.useState(null),[m,p]=Ce.useState(!1),[w,g]=Ce.useState(!1),[y,x]=Ce.useState(""),[v,b]=Ce.useState(0),j=10,[S,_]=Ce.useState(1),[N,C]=Ce.useState(!1),[E,D]=Ce.useState(null),[R,P]=Ce.useState(""),{triggerHealthCheck:G}=lU(),{aiProvider:Q}=S2(),Y=new URLSearchParams(window.location.search).get("from")||"month",{data:O,isLoading:T}=ot({queryKey:[`supabase-date-${e}`],queryFn:async()=>{if(!Ye||!e)throw new Error("Supabase not configured or date missing");const{data:M,error:me}=await Ye.from("historical_news_analyses").select("*").eq("date",e).single();if(me&&me.code!=="PGRST116")throw me;if(!M)return{analysis:{id:"",date:e,summary:"",topArticleId:"",reasoning:"",confidenceScore:"0",aiProvider:"unknown",isManualOverride:!1,isFlagged:!1,tagsVersion2:[],articleTags:{totalArticles:0,topSources:[],duplicatesFound:0,sourcesUsed:[],totalFetched:0}},manualEntries:[],tieredArticles:{bitcoin:[],crypto:[],macro:[]},winningTier:null,meta:{hasLegacyData:!1,hasTieredData:!1,dataVersion:"v2-tiered"}};const{data:We}=await Ye.from("manual_news_entries").select("*").eq("date",e),Le=M.tiered_articles||{bitcoin:[],crypto:[],macro:[]},ht=!!(Le.bitcoin&&Le.bitcoin.length>0||Le.crypto&&Le.crypto.length>0||Le.macro&&Le.macro.length>0);return{analysis:{id:M.id,date:M.date,summary:M.summary,topArticleId:M.top_article_id||"",reasoning:M.reasoning||"",confidenceScore:M.confidence_score||"0",aiProvider:M.ai_provider||"unknown",isManualOverride:M.is_manual_override||!1,isFlagged:!1,veriBadge:M.veri_badge,tagsVersion2:M.tags_version2||[],articleTags:{totalArticles:M.total_articles_fetched||0,topSources:[],duplicatesFound:0,sourcesUsed:[],totalFetched:M.total_articles_fetched||0}},manualEntries:(We==null?void 0:We.map(zt=>({id:zt.id,title:zt.title||"",summary:zt.summary||"",description:zt.description||""})))||[],tieredArticles:Le,analyzedArticles:M.analyzed_articles||[],winningTier:M.tier_used||M.winning_tier||null,meta:{hasLegacyData:!ht&&M.analyzed_articles&&M.analyzed_articles.length>0,hasTieredData:ht,dataVersion:ht?"v2-tiered":"v1-legacy"}}}}),{data:B}=ot({queryKey:["all-tags"],queryFn:async()=>{if(!Ye)return[];const{data:M,error:me}=await Ye.from("tags").select("name, category, subcategory_path").order("name");if(me)throw me;return M||[]},staleTime:300*1e3}),$=Ce.useMemo(()=>{if(!B||!y.trim())return B||[];const M=y.toLowerCase();return B.filter(me=>me.name.toLowerCase().includes(M))},[B,y]),W=at({mutationFn:async()=>{e&&hM(e);try{await G()}catch(We){console.warn("Health check failed before analysis:",We)}const M=await fetch(`/api/analysis/date/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({forceReanalysis:!0,aiProvider:Q,newsProvider:localStorage.getItem("newsProvider")||"exa"})});if(!M.ok){const We=await M.text();throw console.error("Analysis failed:",We),new Error(`Failed to analyze: ${M.statusText}`)}const me=await M.json();return console.log("Analysis response:",{hasRequiresSelection:!!me.requiresSelection,requiresSelection:me.requiresSelection,selectionMode:me.selectionMode,hasTieredArticles:!!me.tieredArticles}),me},onSuccess:M=>{var We,Le,ht,zt,Br,Xa;if(console.log(" [DayAnalysis] Analysis response received:",{hasRequiresSelection:!!(M!=null&&M.requiresSelection),requiresSelection:M==null?void 0:M.requiresSelection,selectionMode:M==null?void 0:M.selectionMode,hasTieredArticles:!!(M!=null&&M.tieredArticles),tieredArticlesKeys:M!=null&&M.tieredArticles?Object.keys(M.tieredArticles):[],fullData:M}),M!=null&&M.requiresSelection){console.log(" [DayAnalysis] User selection required - opening dialog"),console.log("   Selection data:",{mode:M.selectionMode,geminiCount:((We=M.geminiSelectedIds)==null?void 0:We.length)||0,perplexityCount:((Le=M.perplexitySelectedIds)==null?void 0:Le.length)||0,intersectionCount:((ht=M.intersectionIds)==null?void 0:ht.length)||0,openaiSuggested:M.openaiSuggestedId,tieredArticles:M.tieredArticles?{bitcoin:((zt=M.tieredArticles.bitcoin)==null?void 0:zt.length)||0,crypto:((Br=M.tieredArticles.crypto)==null?void 0:Br.length)||0,macro:((Xa=M.tieredArticles.macro)==null?void 0:Xa.length)||0}:null}),console.log("   Full selection data:",JSON.stringify(M,null,2)),D(M),C(!0),console.log("   State updated: selectionDialogOpen = true, selectionData set"),ge(!1);return}console.log(" [DayAnalysis] No selection required - continuing with normal flow"),X.refetchQueries({queryKey:[`supabase-date-${e}`]});const me=e==null?void 0:e.substring(0,4);me&&X.invalidateQueries({queryKey:[`supabase-year-${me}`]}),X.invalidateQueries({queryKey:["/api/analysis/stats"]}),u(!0),l(!1),ge(!1),De.current=null,M!=null&&M.aisDidntAgree?t({title:" AIs Didn't Agree",description:"Gemini and Perplexity couldn't agree on any articles for this date. News articles were still saved and are available for manual review.",variant:"default",duration:8e3}):t({title:"Analysis Complete",description:`Bitcoin news analysis for ${new Date(e).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})} has been updated successfully.`})},onError:M=>{ge(!1),De.current=null,t({title:"Analysis Failed",description:M.message||"Failed to analyze the news for this date.",variant:"destructive"})}}),ae=at({mutationFn:async()=>{const M=await fetch(`/api/analysis/date/${e}/redo-summary`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!M.ok)throw new Error(`Failed to regenerate summary: ${M.statusText}`);return M.json()},onSuccess:()=>{X.refetchQueries({queryKey:[`supabase-date-${e}`]});const M=e==null?void 0:e.substring(0,4);M&&X.invalidateQueries({queryKey:[`supabase-year-${M}`]}),X.invalidateQueries({queryKey:["/api/analysis/stats"]}),l(!1),t({title:"Summary Regenerated",description:"Summary has been regenerated successfully from the existing article."})},onError:M=>{t({title:"Regeneration Failed",description:M.message||"Failed to regenerate summary.",variant:"destructive"})}});at({mutationFn:async()=>{var me;if(!((me=O==null?void 0:O.analysis)!=null&&me.summary))throw new Error("No summary available to verify");$e({status:null,isLoading:!0});const M=await fetch("/api/analysis/google-verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:e,summary:O.analysis.summary})});if(!M.ok)throw new Error(`Verification failed: ${M.statusText}`);return M.json()},onSuccess:M=>{$e({status:M.assessment,isLoading:!1}),t({title:"Google Verification Complete",description:`Summary was assessed as: ${M.assessment}`,variant:M.assessment==="Valid"?"default":"destructive"})},onError:M=>{$e({status:null,isLoading:!1}),t({title:"Verification Failed",description:M.message||"Failed to verify summary with Google.",variant:"destructive"})}});const[_e,ge]=Ce.useState(!1),De=Ce.useRef(null),[Ee,fe]=Ce.useState(null),[ue,$e]=Ce.useState({status:null,isLoading:!1}),oe=()=>{if(_e||W.isPending){console.log("Analysis already in progress, ignoring click");return}const M=`ANALYSE_DAY_${Date.now()}`;console.log(` [${M}] Analyse Day triggered for date: ${e}`),console.log(` [${M}] Trigger context: analyse day button click`),console.log(` [${M}] Current URL: ${window.location.href}`),console.log(` [${M}] Timestamp: ${new Date().toISOString()}`),ge(!0),W.mutate()},Be=()=>{if(ae.isPending){console.log("Summary regeneration already in progress, ignoring click");return}ae.mutate()},Me=()=>{if(_e||W.isPending){console.log("Analysis already in progress, ignoring click");return}const M=`INITIAL_ANALYSIS_${Date.now()}`;console.log(` [${M}] Initial analysis triggered for date: ${e}`),console.log(` [${M}] Trigger context: initial analyse button click`),console.log(` [${M}] Current URL: ${window.location.href}`),console.log(` [${M}] Timestamp: ${new Date().toISOString()}`),ge(!0),W.mutate()},Ue=at({mutationFn:async()=>{const M=await fetch(`/api/analysis/date/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({summary:s||(O==null?void 0:O.analysis.summary),reasoning:O==null?void 0:O.analysis.reasoning})});if(!M.ok)throw new Error(`Failed to save: ${M.statusText}`);return M.json()},onSuccess:()=>{X.invalidateQueries({queryKey:[`supabase-date-${e}`]});const M=e==null?void 0:e.substring(0,4);M&&X.invalidateQueries({queryKey:[`supabase-year-${M}`]}),X.invalidateQueries({queryKey:["/api/analysis/stats"]}),r(!1),l(!1),u(!1),a(""),t({title:"Changes Saved",description:"Your modifications have been saved successfully."})},onError:M=>{t({title:"Save Failed",description:M.message||"Failed to save changes.",variant:"destructive"})}}),Oe=at({mutationFn:async M=>{var Le;if(!((Le=O==null?void 0:O.analysis)!=null&&Le.tagsVersion2))throw new Error("No tags to remove");const me=O.analysis.tagsVersion2.filter(ht=>ht!==M),We=await fetch(`/api/analysis/date/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({summary:O.analysis.summary,reasoning:O.analysis.reasoning,tags_version2:me})});if(!We.ok)throw new Error(`Failed to remove tag: ${We.statusText}`);return We.json()},onSuccess:()=>{X.invalidateQueries({queryKey:[`supabase-date-${e}`]});const M=e==null?void 0:e.substring(0,4);M&&X.invalidateQueries({queryKey:[`supabase-year-${M}`]}),X.invalidateQueries({queryKey:["/api/analysis/stats"]}),t({title:"Tag Removed",description:"Tag has been removed from this analysis."})},onError:M=>{t({title:"Remove Failed",description:M.message||"Failed to remove tag.",variant:"destructive"})}}),He=at({mutationFn:async M=>{var ht;const me=((ht=O==null?void 0:O.analysis)==null?void 0:ht.tagsVersion2)||[];if(me.includes(M))throw new Error("Tag already exists");const We=[...me,M],Le=await fetch(`/api/analysis/date/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({summary:O==null?void 0:O.analysis.summary,tags_version2:We})});if(!Le.ok)throw new Error(`Failed to add tag: ${Le.statusText}`);return Le.json()},onSuccess:()=>{X.invalidateQueries({queryKey:[`supabase-date-${e}`]}),t({title:"Tag Added",description:"New tag has been added from highlighted text."})},onError:M=>{M.message!=="Tag already exists"&&t({title:"Add Failed",description:M.message||"Failed to add tag.",variant:"destructive"})}}),dt=()=>{if(!m)return;const M=window.getSelection(),me=M==null?void 0:M.toString().trim();me&&me.length>0&&me.length<100&&(He.mutate(me),M==null||M.removeAllRanges())},nt=at({mutationFn:async M=>(fe(M),(await Tr("PUT",`/api/analysis/date/${e}/select-article`,{articleId:M})).json()),onSuccess:M=>{X.invalidateQueries({queryKey:[`/api/analysis/date/${e}`]});const me=e==null?void 0:e.substring(0,4);me&&X.invalidateQueries({queryKey:[`/api/analysis/year/${me}`]}),X.invalidateQueries({queryKey:["/api/analysis/stats"]}),X.refetchQueries({queryKey:[`supabase-date-${e}`]}),a(""),l(!1),r(!1),fe(null),t({title:"Article Selected",description:"New summary generated successfully from the selected article."})},onError:M=>{fe(null),t({title:"Selection Failed",description:M.message||"Failed to select article and generate new summary.",variant:"destructive"})}}),mt=M=>{Ee||nt.isPending||nt.mutate(M)};Ce.useEffect(()=>{var M;(M=O==null?void 0:O.analysis)!=null&&M.summary&&!s&&!n&&a(O.analysis.summary)},[(Xe=O==null?void 0:O.analysis)==null?void 0:Xe.summary,s,n]);const Qt=()=>{n?(r(!1),a((O==null?void 0:O.analysis.summary)||""),l(!1)):(r(!0),a((O==null?void 0:O.analysis.summary)||""))},wt=M=>{a(M),l(M!==(O==null?void 0:O.analysis.summary))},Ot=async()=>{if(!e)return;const M=new Date(e);M.setDate(M.getDate()-1);const me=M.toISOString().split("T")[0];await X.prefetchQuery({queryKey:[`supabase-date-${me}`],staleTime:300*1e3}),window.location.href=`/day/${me}?from=${Y}`},Fe=async()=>{if(!e)return;const M=new Date(e);M.setDate(M.getDate()+1);const me=M.toISOString().split("T")[0];await X.prefetchQuery({queryKey:[`supabase-date-${me}`],staleTime:300*1e3}),window.location.href=`/day/${me}?from=${Y}`};Ce.useEffect(()=>{const M=me=>{if(me.ctrlKey||me.metaKey)return;const We=document.activeElement;if(!(We&&(We.tagName==="INPUT"||We.tagName==="TEXTAREA"||We.getAttribute("contenteditable")==="true"||We.closest('[role="dialog"]')!==null)))switch(me.key.toLowerCase()){case"s":me.preventDefault(),Ue.mutate();break;case"r":if(me.preventDefault(),!W.isPending&&!_e){const ht=`KEYBOARD_R_${Date.now()}`;console.log(` [${ht}] Keyboard 'R' analysis triggered for date: ${e}`),console.log(` [${ht}] Trigger context: keyboard shortcut`),console.log(` [${ht}] Current URL: ${window.location.href}`),console.log(` [${ht}] Timestamp: ${new Date().toISOString()}`),ge(!0),W.mutate()}break;case"arrowleft":me.preventDefault(),Ot();break;case"arrowright":me.preventDefault(),Fe();break}};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[]);const Ct=(O==null?void 0:O.analyzedArticles)||[],L=O==null?void 0:O.tieredArticles,I=((rt=O==null?void 0:O.meta)==null?void 0:rt.hasTieredData)||!1,V=Ce.useMemo(()=>{var me,We,Le,ht;const M=(me=O==null?void 0:O.analysis)==null?void 0:me.topArticleId;return!M||!L?(O==null?void 0:O.winningTier)||null:(We=L.bitcoin)!=null&&We.some(zt=>zt.id===M)?"bitcoin":(Le=L.crypto)!=null&&Le.some(zt=>zt.id===M)?"crypto":(ht=L.macro)!=null&&ht.some(zt=>zt.id===M)?"macro":(O==null?void 0:O.winningTier)||null},[(tn=O==null?void 0:O.analysis)==null?void 0:tn.topArticleId,L,O==null?void 0:O.winningTier]);Ce.useEffect(()=>{I&&V?R!==V&&P(V):!I&&R!=="legacy"&&P("legacy")},[I,V,(z=O==null?void 0:O.analysis)==null?void 0:z.id]);const ie=(!(O!=null&&O.analysis.topArticleId)||!L?null:[...L.bitcoin||[],...L.crypto||[],...L.macro||[]].find(me=>me.id===(O==null?void 0:O.analysis.topArticleId)))||Ct.find(M=>M.id===(O==null?void 0:O.analysis.topArticleId))||Ct[0];Ct.filter(M=>M.id!==((ie==null?void 0:ie.id)||(O==null?void 0:O.analysis.topArticleId)));const Pe=M=>{switch(M){case"bitcoin":return{icon:Jg,label:"Bitcoin",color:"bg-orange-500/20 text-orange-300 border-orange-500/30",accentColor:"text-orange-400",rowColor:"hover:bg-orange-50/50",selectedColor:"bg-orange-100 border-orange-300"};case"crypto":return{icon:Qc,label:"Crypto/Web3",color:"bg-blue-500/20 text-blue-300 border-blue-500/30",accentColor:"text-blue-400",rowColor:"hover:bg-blue-50/50",selectedColor:"bg-blue-100 border-blue-300"};case"macro":return{icon:Xw,label:"Macro/Financial",color:"bg-green-500/20 text-green-300 border-green-500/30",accentColor:"text-green-400",rowColor:"hover:bg-green-50/50",selectedColor:"bg-green-100 border-green-300"};default:return{icon:Ss,label:"Articles",color:"bg-muted/50 text-muted-foreground border-border",accentColor:"text-muted-foreground",rowColor:"hover:bg-accent/50",selectedColor:"bg-accent border-border"}}},Ae=(M,me)=>{if(!M||M.length===0){const Le=Pe(me).icon;return o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(Le,{className:"w-12 h-12 mx-auto mb-3 text-muted-foreground"}),o.jsxs("p",{children:["No ",Pe(me).label.toLowerCase()," articles found for this date"]})]})}const We=Pe(me);return o.jsx("div",{className:"rounded-lg border border-border overflow-hidden",children:o.jsxs(Ea,{children:[o.jsx(ka,{className:"bg-muted/50",children:o.jsxs(ur,{className:"border-b border-border hover:bg-accent/50",children:[o.jsx(yt,{className:"w-12 text-muted-foreground"}),o.jsx(yt,{className:"font-semibold text-foreground",children:"Title"}),o.jsx(yt,{className:"font-semibold text-foreground",children:"Source"}),o.jsx(yt,{className:"font-semibold text-foreground",children:"Relevance"}),o.jsx(yt,{className:"font-semibold w-24 text-right text-foreground",children:"Link"})]})}),o.jsx(Ta,{children:M.map(Le=>{const ht=(O==null?void 0:O.analysis.topArticleId)===Le.id;return o.jsxs(ur,{className:`group border-b border-border/50 hover:bg-accent/50 ${ht?me==="bitcoin"?"bg-orange-950/30 hover:bg-orange-950/40":me==="crypto"?"bg-blue-950/30 hover:bg-blue-950/40":"bg-green-950/30 hover:bg-green-950/40":""} transition-colors`,children:[o.jsx(xt,{className:"w-12 text-foreground",children:Ee===Le.id?o.jsx("div",{className:"flex items-center",children:o.jsx(pn,{className:`w-4 h-4 animate-spin ${We.accentColor}`})}):ht?o.jsxs(he,{className:`${We.color} border`,variant:"outline",children:[o.jsx(Rr,{className:"w-3 h-3 mr-1 fill-current"}),"Selected"]}):o.jsxs(he,{className:`${We.color} border cursor-pointer opacity-0 group-hover:opacity-100 transition-opacity hover:scale-105 ${nt.isPending?"pointer-events-none opacity-50":""}`,variant:"outline",onClick:()=>!nt.isPending&&mt(Le.id),title:"Select this article",children:[o.jsx(Rr,{className:"w-3 h-3 mr-1"}),"Select"]})}),o.jsx(xt,{className:"text-foreground p-4",children:o.jsxs(oU,{children:[o.jsx(aU,{asChild:!0,children:o.jsxs("div",{className:"space-y-1 w-full h-full cursor-pointer -m-4 p-4",children:[o.jsx("a",{href:Le.url,target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-foreground hover:text-foreground transition-colors line-clamp-2 block",onClick:zt=>zt.stopPropagation(),children:Le.title}),Le.summary&&o.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mt-1",children:Le.summary})]})}),o.jsx(K2,{className:"w-80 bg-accent border-border",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"font-semibold text-accent-foreground leading-relaxed",children:Le.title}),Le.summary&&o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:Le.summary})]})})]})}),o.jsx(xt,{className:"text-muted-foreground",children:o.jsx("span",{className:"text-xs",children:new URL(Le.url).hostname})}),o.jsx(xt,{className:"text-foreground",children:Le.score?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex-1 bg-muted rounded-full h-2 max-w-[60px]",children:o.jsx("div",{className:`h-2 rounded-full ${me==="bitcoin"?"bg-orange-500":me==="crypto"?"bg-blue-500":"bg-green-500"}`,style:{width:`${Le.score*100}%`}})}),o.jsxs("span",{className:`text-xs font-medium ${We.accentColor}`,children:[(Le.score*100).toFixed(0),"%"]})]}):o.jsx("span",{className:"text-xs text-muted-foreground",children:"N/A"})}),o.jsx(xt,{className:"text-right text-foreground",children:o.jsx(q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-accent",asChild:!0,children:o.jsx("a",{href:Le.url,target:"_blank",rel:"noopener noreferrer",title:"Open article",children:o.jsx(Tf,{className:"w-4 h-4 text-muted-foreground hover:text-foreground"})})})})]},Le.id)})})]})})};if(!e)return o.jsxs("div",{className:"space-y-6",children:[o.jsx(iu,{className:"h-16 w-full"}),o.jsx(iu,{className:"h-64 w-full"})]});const Ge=!T&&O&&(!O.analysis.id||O.analysis.id==="");return T?o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs(q,{variant:"outline",size:"sm",onClick:()=>window.history.back(),children:[o.jsx(ci,{className:"w-4 h-4 mr-2"}),"Back"]}),o.jsx("div",{children:o.jsx("h1",{className:"text-xl font-bold text-foreground",children:new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})})]})}),o.jsx(jt,{className:"relative bg-black/90 border-border",children:o.jsx(on,{className:"p-6",children:o.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:o.jsxs("div",{className:"text-center",children:[o.jsx(et,{className:"w-8 h-8 animate-spin text-white mx-auto mb-3"}),o.jsx("p",{className:"text-white/80 font-medium",children:"Loading analysis..."})]})})})})]}):Ge?o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs(q,{variant:"outline",size:"sm",onClick:()=>window.history.back(),children:[o.jsx(ci,{className:"w-4 h-4 mr-2"}),"Back"]}),o.jsx("div",{children:o.jsx("h1",{className:"text-xl font-bold text-foreground",children:new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})})]})}),o.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:o.jsx(q,{size:"lg",onClick:Me,disabled:W.isPending||_e,className:"px-8 py-6 text-lg",children:W.isPending||_e?o.jsxs(o.Fragment,{children:[o.jsx(pn,{className:"w-5 h-5 mr-2 animate-spin"}),"Analysing..."]}):o.jsxs(o.Fragment,{children:[o.jsx(iC,{className:"w-5 h-5 mr-2"}),"Analyse Day"]})})})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs(q,{variant:"outline",size:"sm",onClick:()=>window.history.back(),children:[o.jsx(ci,{className:"w-4 h-4 mr-2"}),"Back"]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("h1",{className:"text-xl font-bold text-foreground",children:new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),i||c?o.jsx(he,{variant:"outline",className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",children:"Unsaved changes"}):o.jsx(he,{variant:"outline",className:"bg-green-500/20 text-green-400 border-green-500/30",children:"All Saved"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(q,{variant:"outline",size:"sm",onClick:Ot,title:"Previous Day ()",children:o.jsx(ci,{className:"w-4 h-4"})}),o.jsx(q,{variant:"outline",size:"sm",onClick:Fe,title:"Next Day ()",children:o.jsx(Gc,{className:"w-4 h-4"})}),o.jsx("div",{className:"w-px h-6 bg-border"}),o.jsxs(Ol,{children:[o.jsx(Il,{asChild:!0,children:o.jsxs(q,{variant:"outline",size:"sm",disabled:W.isPending||ae.isPending||_e,title:"Re-analyze (R)",children:[o.jsx(pn,{className:`w-4 h-4 mr-2 ${W.isPending||ae.isPending?"animate-spin":""}`}),"Re-analyze",o.jsx(Wo,{className:"w-4 h-4 ml-2"})]})}),o.jsxs(Ya,{align:"end",children:[o.jsxs(nr,{onClick:oe,disabled:W.isPending||_e,children:[o.jsx(pn,{className:"w-4 h-4 mr-2"}),"Analyse Day"]}),o.jsxs(nr,{onClick:Be,disabled:ae.isPending||!((ne=O==null?void 0:O.analysis)!=null&&ne.topArticleId)||((Se=O==null?void 0:O.analysis)==null?void 0:Se.topArticleId)==="none",children:[o.jsx(Ss,{className:"w-4 h-4 mr-2"}),"Redo Summary"]})]})]})]})]}),T||!(O!=null&&O.analysis)?o.jsx(jt,{className:"relative bg-black/90 border-border",children:o.jsx(on,{className:"p-6",children:o.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:o.jsxs("div",{className:"text-center",children:[o.jsx(et,{className:"w-8 h-8 animate-spin text-white mx-auto mb-3"}),o.jsx("p",{className:"text-white/80 font-medium",children:"Loading analysis..."})]})})})}):o.jsx(jt,{className:"relative bg-background border-border",children:o.jsxs(on,{className:"p-6",children:[(W.isPending||ae.isPending)&&o.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm rounded-lg flex items-center justify-center z-10",children:o.jsxs("div",{className:"text-center",children:[o.jsx(pn,{className:"w-8 h-8 animate-spin text-white mx-auto mb-3"}),o.jsx("p",{className:"text-foreground font-medium",children:W.isPending?"Regenerating AI Analysis...":"Regenerating Summary..."}),o.jsx("p",{className:"text-muted-foreground text-sm",children:"This may take a few moments"})]})}),o.jsxs("div",{className:"grid grid-cols-2 gap-6 items-start",children:[o.jsxs("div",{className:"relative pr-6 border-r border-border",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:O.analysis.isManualOverride?"Manual Entry":"Summary"}),O.analysis.summary&&o.jsxs(he,{variant:"secondary",className:`font-normal ${(n?s==null?void 0:s.length:(Ne=O.analysis.summary)==null?void 0:Ne.length)<100||(n?s==null?void 0:s.length:(F=O.analysis.summary)==null?void 0:F.length)>110?"!bg-red-500/20 !text-red-400 border-red-500/30":""}`,children:[((n?s==null?void 0:s.length:(re=O.analysis.summary)==null?void 0:re.length)||0).toLocaleString()," characters"]}),!O.analysis.isManualOverride&&o.jsxs("div",{className:"flex items-center space-x-1",children:[i&&o.jsx(q,{variant:"ghost",size:"sm",onClick:()=>Ue.mutate(),disabled:Ue.isPending,className:"h-8 w-8 p-0 text-muted-foreground hover:bg-accent hover:text-accent-foreground",title:"Save Changes (S)",children:Ue.isPending?o.jsx(et,{className:"w-4 h-4 animate-spin"}):o.jsx(ev,{className:"w-4 h-4"})}),o.jsx(q,{variant:"ghost",size:"sm",onClick:Qt,className:"h-8 w-8 p-0 text-muted-foreground hover:bg-accent hover:text-accent-foreground",title:n?"Cancel editing":"Edit summary",children:n?o.jsx(On,{className:"w-4 h-4"}):o.jsx(dl,{className:"w-4 h-4"})})]})]}),nt.isPending?o.jsxs("div",{className:"flex items-center space-x-3 py-4",children:[o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-foreground font-medium",children:"Generating new summary..."}),o.jsx("p",{className:"text-muted-foreground text-sm",children:"AI is analyzing the selected article"})]})]}):n&&!O.analysis.isManualOverride?o.jsx(lu,{value:s,onChange:M=>wt(M.target.value),className:"text-base leading-relaxed min-h-[100px] text-foreground bg-background border-input focus-visible:ring-ring",placeholder:"Edit the AI summary..."}):o.jsxs("div",{onMouseUp:dt,className:m?"select-text":"",style:m?{cursor:"text"}:void 0,children:[o.jsx("p",{className:`text-foreground text-base leading-relaxed ${m?"selection:bg-orange-500/40 selection:text-orange-100":""}`,children:O.analysis.summary}),m&&o.jsx("p",{className:"text-xs text-orange-400/70 mt-2 italic",children:"Highlight any text above to create a tag"})]})]}),o.jsxs("div",{className:"flex flex-col pl-6",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[o.jsx("h5",{className:"text-sm font-semibold text-foreground",children:"Tags"}),o.jsx(q,{variant:"ghost",size:"sm",onClick:()=>p(!m),className:`h-6 w-6 p-0 ${m?"text-orange-400 bg-orange-500/20":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"}`,title:m?"Exit tagging mode":"Highlight text to create tags",children:m?o.jsx(On,{className:"w-3.5 h-3.5"}):o.jsx(dl,{className:"w-3.5 h-3.5"})}),o.jsx(q,{variant:"ghost",size:"sm",onClick:()=>g(!0),className:"h-6 w-6 p-0 text-muted-foreground hover:bg-accent hover:text-accent-foreground",title:"Add tag from list",children:o.jsx(Fo,{className:"w-3.5 h-3.5"})}),m&&o.jsx("span",{className:"text-xs text-orange-400",children:"Select text in summary to add tags"})]}),O.analysis.tagsVersion2&&O.analysis.tagsVersion2.length>0?o.jsx("div",{className:"flex flex-wrap gap-2",children:O.analysis.tagsVersion2.map((M,me)=>{const We=M.toLowerCase();let Le="miscellaneous";(We.includes("bitcoin")||M==="BTC")&&(Le="crypto");const ht=Jk(Le),zt=h===M,Br=Oe.isPending;return o.jsx(he,{variant:"outline",className:`text-xs px-1.5 py-0.5 flex items-center space-x-1 cursor-pointer transition-all ${zt?"bg-red-500/20 text-red-400 border-red-500/30":vl(Le)}`,onMouseEnter:()=>f(M),onMouseLeave:()=>f(null),onClick:()=>!Br&&Oe.mutate(M),title:zt?"Click to remove tag":void 0,children:zt?o.jsxs(o.Fragment,{children:[o.jsx(On,{className:"w-2.5 h-2.5"}),o.jsx("span",{children:"Delete?"})]}):o.jsxs(o.Fragment,{children:[o.jsx(ht,{className:"w-2.5 h-2.5"}),o.jsx("span",{children:M})]})},`${M}-${me}`)})}):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No tags applied"})]}),o.jsxs("div",{className:"mt-6",children:[o.jsx("h5",{className:"text-sm font-semibold text-foreground mb-2",children:"More"}),o.jsx(V2,{badge:O.analysis.veriBadge})]})]})]})]})}),((pe=(xe=(de=O==null?void 0:O.analysis)==null?void 0:de.articleTags)==null?void 0:xe.analysisMetadata)==null?void 0:pe.hierarchicalSearch)&&o.jsx(jt,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border-emerald-200",children:o.jsxs(on,{className:"p-6",children:[o.jsx("div",{className:"flex items-start justify-between mb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Yc,{className:"w-5 h-5 text-emerald-600"}),o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Search Strategy"}),o.jsx(he,{variant:"secondary",className:"bg-emerald-100 text-emerald-800",children:(Ze=(bt=(st=(pt=O.analysis)==null?void 0:pt.articleTags)==null?void 0:st.analysisMetadata)==null?void 0:bt.hierarchicalSearch)==null?void 0:Ze.tierUsed})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[o.jsxs("div",{className:"text-center p-3 bg-white rounded-lg border",children:[o.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:(Mn=(kt=(ze=(ve=(gt=O.analysis)==null?void 0:gt.articleTags)==null?void 0:ve.analysisMetadata)==null?void 0:ze.hierarchicalSearch)==null?void 0:kt.diagnostics)==null?void 0:Mn.tier1Results}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Bitcoin Events"})]}),o.jsxs("div",{className:"text-center p-3 bg-white rounded-lg border",children:[o.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:(Ur=(zr=(sr=(Hn=(br=O.analysis)==null?void 0:br.articleTags)==null?void 0:Hn.analysisMetadata)==null?void 0:sr.hierarchicalSearch)==null?void 0:zr.diagnostics)==null?void 0:Ur.tier2Results}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Crypto & Web3"})]}),o.jsxs("div",{className:"text-center p-3 bg-white rounded-lg border",children:[o.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:(Ju=(Kl=(Bl=(Zs=(Ul=O.analysis)==null?void 0:Ul.articleTags)==null?void 0:Zs.analysisMetadata)==null?void 0:Bl.hierarchicalSearch)==null?void 0:Kl.diagnostics)==null?void 0:Ju.tier3Results}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Macroeconomics"})]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("span",{className:"text-muted-foreground",children:["Search Path: ",o.jsx("span",{className:"font-medium text-foreground",children:(K=(H=(A=(ql=(Vl=O.analysis)==null?void 0:Vl.articleTags)==null?void 0:ql.analysisMetadata)==null?void 0:A.hierarchicalSearch)==null?void 0:H.searchPath)==null?void 0:K.join("  ")})]}),((_t=(Qe=(we=(Ie=(te=O.analysis)==null?void 0:te.articleTags)==null?void 0:Ie.analysisMetadata)==null?void 0:we.hierarchicalSearch)==null?void 0:Qe.diagnostics)==null?void 0:_t.fallbackTriggered)&&o.jsx(he,{variant:"outline",className:"text-orange-700 border-orange-300",children:"Fallback Used"})]}),o.jsxs("span",{className:"text-muted-foreground",children:[(Ft=(Cn=(Lt=(ut=O.analysis)==null?void 0:ut.articleTags)==null?void 0:Lt.analysisMetadata)==null?void 0:Cn.hierarchicalSearch)==null?void 0:Ft.totalSearched," total searched"]})]})]})}),((Rt=O==null?void 0:O.analysis)==null?void 0:Rt.topArticleId)&&!O.analysis.topArticleId.includes("no-news-")&&O.analysis.topArticleId!=="none"&&Ct.length>0&&!Ct.find(M=>M.id===O.analysis.topArticleId)&&o.jsx(jt,{className:"border-amber-200 bg-amber-50",children:o.jsx(on,{className:"p-4",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center",children:o.jsx(tv,{className:"w-4 h-4 text-amber-600"})})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-sm font-medium text-amber-800 mb-1",children:"Analysis Based on Older Articles"}),o.jsx("p",{className:"text-sm text-amber-700 mb-3",children:"This analysis was created using different articles than what's currently available. News sources change over time, so the summary and featured article may not match the current articles below."}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(q,{size:"sm",variant:"outline",onClick:oe,disabled:W.isPending||_e,className:"text-amber-700 border-amber-300 hover:bg-amber-100",children:W.isPending?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"animate-spin w-3 h-3 border border-amber-600 border-t-transparent rounded-full mr-2"}),"Analysing..."]}):o.jsxs(o.Fragment,{children:[o.jsx(tv,{className:"w-3 h-3 mr-1"}),"Update Analysis"]})}),o.jsx("span",{className:"text-xs text-amber-600",children:"This will analyze the current articles and update the summary."})]})]})]})})}),(I||Ct.length>0)&&o.jsxs(jt,{className:"bg-background border-border",children:[o.jsx(zs,{className:"bg-background rounded-t-xl pb-2",children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("div",{className:"flex items-center space-x-3",children:o.jsx(Us,{className:"text-foreground",children:"All Sourced Articles"})})})}),o.jsx(on,{className:"space-y-6 bg-background pt-2",children:I&&L?o.jsxs(hm,{value:R,onValueChange:P,className:"w-full",children:[o.jsxs(qu,{className:"inline-flex h-11 items-center justify-start gap-1 rounded-lg bg-muted/50 p-1 border border-border",children:[o.jsxs(gr,{value:"bitcoin",className:`inline-flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all
                      data-[state=inactive]:text-muted-foreground data-[state=inactive]:hover:text-orange-300 data-[state=inactive]:hover:bg-orange-500/10
                      data-[state=active]:bg-orange-500/20 data-[state=active]:text-orange-300 data-[state=active]:shadow-sm`,children:[o.jsx(Jg,{className:"w-4 h-4"}),o.jsx("span",{children:"Bitcoin"}),o.jsx("span",{className:"ml-1 px-1.5 py-0.5 rounded-full bg-orange-500/30 text-orange-200 text-xs font-semibold",children:((vn=L.bitcoin)==null?void 0:vn.length)||0}),V==="bitcoin"&&o.jsx(Rr,{className:"w-3 h-3 text-orange-400 fill-orange-400"})]}),o.jsxs(gr,{value:"crypto",className:`inline-flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all
                      data-[state=inactive]:text-muted-foreground data-[state=inactive]:hover:text-blue-300 data-[state=inactive]:hover:bg-blue-500/10
                      data-[state=active]:bg-blue-500/20 data-[state=active]:text-blue-300 data-[state=active]:shadow-sm`,children:[o.jsx(Qc,{className:"w-4 h-4"}),o.jsx("span",{children:"Crypto"}),o.jsx("span",{className:"ml-1 px-1.5 py-0.5 rounded-full bg-blue-500/30 text-blue-200 text-xs font-semibold",children:((it=L.crypto)==null?void 0:it.length)||0}),V==="crypto"&&o.jsx(Rr,{className:"w-3 h-3 text-blue-400 fill-blue-400"})]}),o.jsxs(gr,{value:"macro",className:`inline-flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all
                      data-[state=inactive]:text-muted-foreground data-[state=inactive]:hover:text-green-300 data-[state=inactive]:hover:bg-green-500/10
                      data-[state=active]:bg-green-500/20 data-[state=active]:text-green-300 data-[state=active]:shadow-sm`,children:[o.jsx(Xw,{className:"w-4 h-4"}),o.jsx("span",{children:"Macro"}),o.jsx("span",{className:"ml-1 px-1.5 py-0.5 rounded-full bg-green-500/30 text-green-200 text-xs font-semibold",children:((vt=L.macro)==null?void 0:vt.length)||0}),V==="macro"&&o.jsx(Rr,{className:"w-3 h-3 text-green-400 fill-green-400"})]})]}),o.jsx(ss,{value:"bitcoin",className:"mt-6",children:Ae(L.bitcoin||[],"bitcoin")}),o.jsx(ss,{value:"crypto",className:"mt-6",children:Ae(L.crypto||[],"crypto")}),o.jsx(ss,{value:"macro",className:"mt-6",children:Ae(L.macro||[],"macro")})]}):o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(cC,{className:"w-12 h-12 mx-auto mb-3 text-muted-foreground"}),o.jsx("p",{children:"No tiered article data available for this date."}),o.jsx("p",{className:"text-sm mt-2",children:"Please re-analyze this date to generate tiered article data."})]})})]}),E&&o.jsx(iU,{open:N,onOpenChange:M=>{C(M),M||D(null)},date:e,selectionMode:E.selectionMode,tieredArticles:E.tieredArticles||{bitcoin:[],crypto:[],macro:[]},geminiSelectedIds:E.geminiSelectedIds,perplexitySelectedIds:E.perplexitySelectedIds,intersectionIds:E.intersectionIds,openaiSuggestedId:E.openaiSuggestedId,onConfirm:async M=>{try{const me=await fetch(`/api/analysis/date/${e}/confirm-selection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({articleId:M,selectionMode:E.selectionMode})});if(!me.ok){const ht=await me.json();throw new Error(ht.error||"Failed to confirm selection")}const We=await me.json();X.refetchQueries({queryKey:[`supabase-date-${e}`]});const Le=e==null?void 0:e.substring(0,4);Le&&X.invalidateQueries({queryKey:[`supabase-year-${Le}`]}),X.invalidateQueries({queryKey:["/api/analysis/stats"]}),u(!0),l(!1),ge(!1),De.current=null,t({title:"Analysis Complete",description:`Summary generated successfully. VeriBadge: ${We.veriBadge}`})}catch(me){throw me}}},`dialog-${N}-${E.selectionMode}`),o.jsx(Zt,{open:w,onOpenChange:M=>{g(M),M||(x(""),b(0))},children:o.jsxs(Vt,{className:"sm:max-w-md",children:[o.jsxs(qt,{children:[o.jsx(Ht,{children:"Add Tag"}),o.jsx(Pn,{children:"Search for an existing tag or create a new one"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Yc,{className:"w-4 h-4 text-muted-foreground"}),o.jsx(An,{placeholder:"Search or enter new tag...",value:y,onChange:M=>{x(M.target.value),b(0)},onKeyDown:M=>{M.key==="Enter"&&y.trim()&&(He.mutate(y.trim()),x(""),g(!1))},autoFocus:!0})]}),y.trim()&&!($!=null&&$.some(M=>M.name.toLowerCase()===y.toLowerCase()))&&o.jsxs(q,{variant:"outline",className:"w-full justify-start text-orange-400 border-orange-500/30 hover:bg-orange-500/10",onClick:()=>{He.mutate(y.trim()),x(""),g(!1)},children:[o.jsx(Fo,{className:"w-4 h-4 mr-2"}),'Create "',y.trim(),'"']}),o.jsxs("div",{className:"space-y-1",children:[$==null?void 0:$.slice(v*j,(v+1)*j).map(M=>{var zt,Br;const me=(Br=(zt=O==null?void 0:O.analysis)==null?void 0:zt.tagsVersion2)==null?void 0:Br.includes(M.name),We=M.subcategory_path||M.subcategoryPath||null,Le=Zz(Array.isArray(We)?We:null,M.category),ht=Le?FT(Le):{name:M.category};return o.jsxs(q,{variant:"ghost",className:`w-full justify-start ${me?"opacity-50":""}`,disabled:me,onClick:()=>{me||(He.mutate(M.name),x(""),g(!1))},children:[o.jsx(rs,{className:"w-4 h-4 mr-2 text-muted-foreground"}),o.jsx("span",{children:M.name}),o.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:ht.name}),me&&o.jsx(Xn,{className:"w-3 h-3 ml-2 text-green-500"})]},`${M.name}-${M.category}`)}),($==null?void 0:$.length)===0&&y&&o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No existing tags found. Press Enter to create a new tag."})]}),$&&$.length>j&&o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[o.jsxs("span",{className:"text-xs text-muted-foreground",children:[v*j+1,"-",Math.min((v+1)*j,$.length)," of ",$.length]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(q,{variant:"outline",size:"sm",className:"h-7 px-2",disabled:v===0,onClick:()=>b(M=>M-1),children:o.jsx(ci,{className:"w-3 h-3"})}),o.jsx(q,{variant:"outline",size:"sm",className:"h-7 px-2",disabled:(v+1)*j>=$.length,onClick:()=>b(M=>M+1),children:o.jsx(Gc,{className:"w-3 h-3"})})]})]})]})]})})]})}function uU(){const e=Nl(),[t,n]=d.useState(new Set),[r,s]=d.useState(new Set),[a,i]=d.useState(new Set),[l,c]=d.useState(.85),[u,h]=d.useState(""),[f,m]=d.useState(!1),{data:p,isLoading:w,refetch:g}=ot({queryKey:["tags-cleanup-unmatched"],queryFn:async()=>{const $=await fetch("/api/tags-manager/unmatched");if(!$.ok)throw new Error("Failed to fetch unmatched tags");return $.json()}}),{data:y,isLoading:x,refetch:v}=ot({queryKey:["tags-cleanup-merges",l],queryFn:async()=>{const $=await fetch("/api/tags-manager/auto-merge-suggestions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({threshold:l})});if(!$.ok)throw new Error("Failed to fetch merge suggestions");return $.json()},enabled:!1}),{data:b,isLoading:j,refetch:S}=ot({queryKey:["tags-cleanup-categorizations"],queryFn:async()=>{const $=await fetch("/api/tags-manager/bulk-categorize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!$.ok)throw new Error("Failed to fetch categorizations");return $.json()},enabled:!1}),_=at({mutationFn:async $=>{const W=await fetch("/api/tags-manager/bulk-apply",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($)});if(!W.ok){const ae=await W.json();throw new Error(ae.error||"Failed to apply changes")}return W.json()},onSuccess:$=>{Hg({title:"Changes Applied",description:`Successfully updated ${$.updated} analyses`}),n(new Set),s(new Set),i(new Set),m(!1),e.invalidateQueries({queryKey:["tags-cleanup"]}),e.invalidateQueries({queryKey:["tags-manager-stats"]}),e.invalidateQueries({queryKey:["supabase-tags-catalog"]}),g(),v(),S()},onError:$=>{Hg({title:"Error",description:$.message,variant:"destructive"})}}),N=()=>{v()},C=()=>{S()},E=()=>{const $=(y==null?void 0:y.suggestions.filter((_e,ge)=>t.has(ge)))||[],W=(b==null?void 0:b.categorized.filter((_e,ge)=>r.has(ge)))||[],ae=(p==null?void 0:p.unmatched.filter((_e,ge)=>a.has(ge)).map(_e=>({name:_e.name,category:_e.category,usageCount:_e.usageCount})))||[];_.mutate({merges:$,categorizations:W,addToMetadata:ae})},D=$=>{const W=new Set(t);W.has($)?W.delete($):W.add($),n(W)},R=$=>{const W=new Set(r);W.has($)?W.delete($):W.add($),s(W)},P=$=>{const W=new Set(a);W.has($)?W.delete($):W.add($),i(W)},G=()=>{y!=null&&y.suggestions&&(t.size===y.suggestions.length?n(new Set):n(new Set(y.suggestions.map(($,W)=>W))))},Q=()=>{b!=null&&b.categorized&&(r.size===b.categorized.length?s(new Set):s(new Set(b.categorized.map(($,W)=>W))))},ce=(p==null?void 0:p.unmatched.filter($=>$.name.toLowerCase().includes(u.toLowerCase())||$.category.toLowerCase().includes(u.toLowerCase())))||[],Y=(y==null?void 0:y.suggestions.filter($=>$.source.name.toLowerCase().includes(u.toLowerCase())||$.target.name.toLowerCase().includes(u.toLowerCase())))||[],O=(b==null?void 0:b.categorized.filter($=>$.name.toLowerCase().includes(u.toLowerCase())||$.oldCategory.toLowerCase().includes(u.toLowerCase())||$.newCategory.toLowerCase().includes(u.toLowerCase())))||[],T=t.size+r.size+a.size,B=T>0&&!_.isPending;return o.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-2",children:[o.jsx(lr,{className:"w-8 h-8 text-blue-600"}),"Tag Cleanup Tool"]}),o.jsx("p",{className:"text-slate-600 mt-1",children:"Auto-merge suggestions, bulk categorize, and fix ~300 unmatched tags"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(q,{onClick:()=>{g(),v(),S()},variant:"outline",disabled:w||x||j,children:[o.jsx(pn,{className:`w-4 h-4 mr-2 ${w||x||j?"animate-spin":""}`}),"Refresh"]}),B&&o.jsxs(q,{onClick:()=>m(!0),disabled:_.isPending,children:[o.jsx(Jw,{className:"w-4 h-4 mr-2"}),"Apply ",T," Changes"]})]})]}),p&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsxs(jt,{className:"p-4",children:[o.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Unmatched Tags"}),o.jsx("div",{className:"text-2xl font-bold text-slate-900",children:p.total}),o.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[p.totalUsage," occurrences"]})]}),o.jsxs(jt,{className:"p-4",children:[o.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Merge Suggestions"}),o.jsx("div",{className:"text-2xl font-bold text-slate-900",children:(y==null?void 0:y.total)||0}),o.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[(y==null?void 0:y.totalUsage)||0," occurrences"]})]}),o.jsxs(jt,{className:"p-4",children:[o.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Categorizations"}),o.jsx("div",{className:"text-2xl font-bold text-slate-900",children:(b==null?void 0:b.total)||0}),o.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[(b==null?void 0:b.totalUsage)||0," occurrences"]})]})]})]}),o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(Yc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),o.jsx(An,{type:"text",placeholder:"Search tags...",value:u,onChange:$=>h($.target.value),className:"pl-10"})]})}),o.jsxs(hm,{defaultValue:"unmatched",className:"space-y-4",children:[o.jsxs(qu,{children:[o.jsxs(gr,{value:"unmatched",children:["Unmatched Tags",p&&p.total>0&&o.jsx(he,{variant:"secondary",className:"ml-2",children:p.total})]}),o.jsxs(gr,{value:"merges",children:["Auto-Merge",y&&y.total>0&&o.jsx(he,{variant:"secondary",className:"ml-2",children:y.total})]}),o.jsxs(gr,{value:"categorize",children:["Bulk Categorize",b&&b.total>0&&o.jsx(he,{variant:"secondary",className:"ml-2",children:b.total})]})]}),o.jsx(ss,{value:"unmatched",className:"space-y-4",children:o.jsxs(jt,{children:[o.jsx("div",{className:"p-4 border-b",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Unmatched Tags"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(es,{htmlFor:"select-all-unmatched",className:"text-sm cursor-pointer",children:"Select All"}),o.jsx(Zr,{id:"select-all-unmatched",checked:p&&a.size===ce.length&&ce.length>0,onCheckedChange:$=>{i($?new Set(ce.map((W,ae)=>ae)):new Set)}})]})]})}),w?o.jsxs("div",{className:"p-12 text-center",children:[o.jsx(et,{className:"w-8 h-8 text-blue-600 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-slate-600",children:"Loading unmatched tags..."})]}):ce.length===0?o.jsxs("div",{className:"p-12 text-center",children:[o.jsx(Jw,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"All Tags Matched!"}),o.jsx("p",{className:"text-slate-500",children:"No unmatched tags found."})]}):o.jsxs(Ea,{children:[o.jsx(ka,{children:o.jsxs(ur,{children:[o.jsx(yt,{className:"w-12"}),o.jsx(yt,{children:"Tag Name"}),o.jsx(yt,{children:"Category"}),o.jsx(yt,{className:"text-right",children:"Usage Count"}),o.jsx(yt,{children:"Suggestions"})]})}),o.jsx(Ta,{children:ce.map(($,W)=>o.jsxs(ur,{children:[o.jsx(xt,{children:o.jsx(Zr,{checked:a.has(W),onCheckedChange:()=>P(W)})}),o.jsx(xt,{className:"font-medium",children:$.name}),o.jsx(xt,{children:o.jsx(he,{variant:"outline",children:$.category})}),o.jsx(xt,{className:"text-right",children:$.usageCount}),o.jsx(xt,{children:$.suggestedMatches&&$.suggestedMatches.length>0?o.jsx("div",{className:"flex flex-wrap gap-1",children:$.suggestedMatches.slice(0,3).map((ae,_e)=>o.jsxs(he,{variant:"secondary",className:"text-xs",children:[ae.name," (",Math.round(ae.similarity*100),"%)"]},_e))}):o.jsx("span",{className:"text-slate-400 text-sm",children:"No suggestions"})})]},`${$.name}-${$.category}`))})]})]})}),o.jsx(ss,{value:"merges",className:"space-y-4",children:o.jsxs(jt,{children:[o.jsx("div",{className:"p-4 border-b",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Auto-Merge Suggestions"}),o.jsx("p",{className:"text-sm text-slate-600 mt-1",children:'High-confidence matches (e.g., "Obama"  "Barack Obama")'})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(es,{htmlFor:"threshold",className:"text-sm",children:"Threshold:"}),o.jsx(An,{id:"threshold",type:"number",min:"0",max:"1",step:"0.05",value:l,onChange:$=>c(parseFloat($.target.value)),className:"w-20"})]}),o.jsxs(q,{onClick:N,disabled:x,children:[o.jsx(lr,{className:"w-4 h-4 mr-2"}),"Generate"]}),y&&y.suggestions.length>0&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(es,{htmlFor:"select-all-merges",className:"text-sm cursor-pointer",children:"Select All"}),o.jsx(Zr,{id:"select-all-merges",checked:t.size===Y.length&&Y.length>0,onCheckedChange:G})]})]})]})}),x?o.jsxs("div",{className:"p-12 text-center",children:[o.jsx(et,{className:"w-8 h-8 text-blue-600 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-slate-600",children:"Generating merge suggestions..."})]}):!y||Y.length===0?o.jsxs("div",{className:"p-12 text-center",children:[o.jsx(Ws,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"No Merge Suggestions"}),o.jsx("p",{className:"text-slate-500 mb-4",children:'Click "Generate" to find high-confidence merge candidates.'}),o.jsxs(q,{onClick:N,children:[o.jsx(lr,{className:"w-4 h-4 mr-2"}),"Generate Suggestions"]})]}):o.jsxs(Ea,{children:[o.jsx(ka,{children:o.jsxs(ur,{children:[o.jsx(yt,{className:"w-12"}),o.jsx(yt,{children:"Source Tag"}),o.jsx(yt,{className:"w-8"}),o.jsx(yt,{children:"Target Tag"}),o.jsx(yt,{className:"text-right",children:"Confidence"}),o.jsx(yt,{className:"text-right",children:"Usage"})]})}),o.jsx(Ta,{children:Y.map(($,W)=>o.jsxs(ur,{children:[o.jsx(xt,{children:o.jsx(Zr,{checked:t.has(W),onCheckedChange:()=>D(W)})}),o.jsx(xt,{children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:$.source.name}),o.jsx(he,{variant:"outline",className:"text-xs mt-1",children:$.source.category})]})}),o.jsx(xt,{children:o.jsx(Gc,{className:"w-4 h-4 text-slate-400"})}),o.jsx(xt,{children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:$.target.name}),o.jsx(he,{variant:"outline",className:"text-xs mt-1",children:$.target.category})]})}),o.jsx(xt,{className:"text-right",children:o.jsxs(he,{variant:$.confidence>=.9?"default":"secondary",children:[Math.round($.confidence*100),"%"]})}),o.jsx(xt,{className:"text-right",children:$.usageCount})]},`${$.source.name}-${$.target.name}`))})]})]})}),o.jsx(ss,{value:"categorize",className:"space-y-4",children:o.jsxs(jt,{children:[o.jsx("div",{className:"p-4 border-b",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Bulk Categorization"}),o.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Automatically categorize obvious tags (countries, people, companies, crypto)"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(q,{onClick:C,disabled:j,children:[o.jsx(Zw,{className:"w-4 h-4 mr-2"}),"Generate"]}),b&&b.categorized.length>0&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(es,{htmlFor:"select-all-cats",className:"text-sm cursor-pointer",children:"Select All"}),o.jsx(Zr,{id:"select-all-cats",checked:r.size===O.length&&O.length>0,onCheckedChange:Q})]})]})]})}),j?o.jsxs("div",{className:"p-12 text-center",children:[o.jsx(et,{className:"w-8 h-8 text-blue-600 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-slate-600",children:"Generating categorizations..."})]}):!b||O.length===0?o.jsxs("div",{className:"p-12 text-center",children:[o.jsx(Ws,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-slate-600 mb-2",children:"No Categorizations"}),o.jsx("p",{className:"text-slate-500 mb-4",children:'Click "Generate" to find tags that need recategorization.'}),o.jsxs(q,{onClick:C,children:[o.jsx(Zw,{className:"w-4 h-4 mr-2"}),"Generate Categorizations"]})]}):o.jsxs(Ea,{children:[o.jsx(ka,{children:o.jsxs(ur,{children:[o.jsx(yt,{className:"w-12"}),o.jsx(yt,{children:"Tag Name"}),o.jsx(yt,{children:"Old Category"}),o.jsx(yt,{className:"w-8"}),o.jsx(yt,{children:"New Category"}),o.jsx(yt,{className:"text-right",children:"Usage"})]})}),o.jsx(Ta,{children:O.map(($,W)=>o.jsxs(ur,{children:[o.jsx(xt,{children:o.jsx(Zr,{checked:r.has(W),onCheckedChange:()=>R(W)})}),o.jsx(xt,{className:"font-medium",children:$.name}),o.jsx(xt,{children:o.jsx(he,{variant:"outline",children:$.oldCategory})}),o.jsx(xt,{children:o.jsx(Gc,{className:"w-4 h-4 text-slate-400"})}),o.jsx(xt,{children:o.jsx(he,{children:$.newCategory})}),o.jsx(xt,{className:"text-right",children:$.usageCount})]},`${$.name}-${$.oldCategory}-${$.newCategory}`))})]})]})})]}),o.jsx(Hx,{open:f,onOpenChange:m,children:o.jsxs(sm,{children:[o.jsxs(om,{children:[o.jsx(im,{children:"Apply Changes?"}),o.jsxs(lm,{children:["You are about to apply:",o.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[t.size>0&&o.jsxs("li",{children:[t.size," merge(s)"]}),r.size>0&&o.jsxs("li",{children:[r.size," categorization(s)"]}),a.size>0&&o.jsxs("li",{children:[a.size," tag(s) added to metadata"]})]}),o.jsx("p",{className:"mt-2 font-medium",children:"This action cannot be undone."})]})]}),o.jsxs(am,{children:[o.jsx(um,{children:"Cancel"}),o.jsx(cm,{onClick:E,disabled:_.isPending,children:_.isPending?o.jsxs(o.Fragment,{children:[o.jsx(et,{className:"w-4 h-4 mr-2 animate-spin"}),"Applying..."]}):"Apply Changes"})]})]})})]})}function dU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const pm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ll(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Qx(e){return"nodeType"in e}function qn(e){var t,n;return e?Ll(e)?e:Qx(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Yx(e){const{Document:t}=qn(e);return e instanceof t}function Hu(e){return Ll(e)?!1:e instanceof qn(e).HTMLElement}function q2(e){return e instanceof qn(e).SVGElement}function Fl(e){return e?Ll(e)?e.document:Qx(e)?Yx(e)?e:Hu(e)||q2(e)?e.ownerDocument:document:document:document}const ls=pm?d.useLayoutEffect:d.useEffect;function gm(e){const t=d.useRef(e);return ls(()=>{t.current=e}),d.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function hU(){const e=d.useRef(null),t=d.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=d.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function cu(e,t){t===void 0&&(t=[e]);const n=d.useRef(e);return ls(()=>{n.current!==e&&(n.current=e)},t),n}function Wu(e,t){const n=d.useRef();return d.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Jh(e){const t=gm(e),n=d.useRef(null),r=d.useCallback(s=>{s!==n.current&&(t==null||t(s,n.current)),n.current=s},[]);return[n,r]}function Xh(e){const t=d.useRef();return d.useEffect(()=>{t.current=e},[e]),t.current}let _p={};function Gu(e,t){return d.useMemo(()=>{if(t)return t;const n=_p[e]==null?0:_p[e]+1;return _p[e]=n,e+"-"+n},[e,t])}function H2(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((a,i)=>{const l=Object.entries(i);for(const[c,u]of l){const h=a[c];h!=null&&(a[c]=h+e*u)}return a},{...t})}}const Fi=H2(1),uu=H2(-1);function fU(e){return"clientX"in e&&"clientY"in e}function vm(e){if(!e)return!1;const{KeyboardEvent:t}=qn(e.target);return t&&e instanceof t}function mU(e){if(!e)return!1;const{TouchEvent:t}=qn(e.target);return t&&e instanceof t}function Zh(e){if(mU(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return fU(e)?{x:e.clientX,y:e.clientY}:null}const Bo=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Bo.Translate.toString(e),Bo.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),rj="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function pU(e){return e.matches(rj)?e:e.querySelector(rj)}const gU={display:"none"};function vU(e){let{id:t,value:n}=e;return Ce.createElement("div",{id:t,style:gU},n)}function yU(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ce.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function xU(){const[e,t]=d.useState("");return{announce:d.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const W2=d.createContext(null);function wU(e){const t=d.useContext(W2);d.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function bU(){const[e]=d.useState(()=>new Set),t=d.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[d.useCallback(r=>{let{type:s,event:a}=r;e.forEach(i=>{var l;return(l=i[s])==null?void 0:l.call(i,a)})},[e]),t]}const jU={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},SU={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function NU(e){let{announcements:t=SU,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=jU}=e;const{announce:a,announcement:i}=xU(),l=Gu("DndLiveRegion"),[c,u]=d.useState(!1);if(d.useEffect(()=>{u(!0)},[]),wU(d.useMemo(()=>({onDragStart(f){let{active:m}=f;a(t.onDragStart({active:m}))},onDragMove(f){let{active:m,over:p}=f;t.onDragMove&&a(t.onDragMove({active:m,over:p}))},onDragOver(f){let{active:m,over:p}=f;a(t.onDragOver({active:m,over:p}))},onDragEnd(f){let{active:m,over:p}=f;a(t.onDragEnd({active:m,over:p}))},onDragCancel(f){let{active:m,over:p}=f;a(t.onDragCancel({active:m,over:p}))}}),[a,t])),!c)return null;const h=Ce.createElement(Ce.Fragment,null,Ce.createElement(vU,{id:r,value:s.draggable}),Ce.createElement(yU,{id:l,announcement:i}));return n?Or.createPortal(h,n):h}var un;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(un||(un={}));function ef(){}function sj(e,t){return d.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function CU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const cs=Object.freeze({x:0,y:0});function G2(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function _U(e,t){const n=Zh(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function Q2(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function EU(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function oj(e){let{left:t,top:n,height:r,width:s}=e;return[{x:t,y:n},{x:t+s,y:n},{x:t,y:n+r},{x:t+s,y:n+r}]}function Y2(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function aj(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const kU=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=aj(t,t.left,t.top),a=[];for(const i of r){const{id:l}=i,c=n.get(l);if(c){const u=G2(aj(c),s);a.push({id:l,data:{droppableContainer:i,value:u}})}}return a.sort(Q2)},TU=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=oj(t),a=[];for(const i of r){const{id:l}=i,c=n.get(l);if(c){const u=oj(c),h=s.reduce((m,p,w)=>m+G2(u[w],p),0),f=Number((h/4).toFixed(4));a.push({id:l,data:{droppableContainer:i,value:f}})}}return a.sort(Q2)};function RU(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),i=s-r,l=a-n;if(r<s&&n<a){const c=t.width*t.height,u=e.width*e.height,h=i*l,f=h/(c+u-h);return Number(f.toFixed(4))}return 0}const PU=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const a of r){const{id:i}=a,l=n.get(i);if(l){const c=RU(l,t);c>0&&s.push({id:i,data:{droppableContainer:a,value:c}})}}return s.sort(EU)};function AU(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function J2(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:cs}function OU(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return s.reduce((i,l)=>({...i,top:i.top+e*l.y,bottom:i.bottom+e*l.y,left:i.left+e*l.x,right:i.right+e*l.x}),{...n})}}const IU=OU(1);function X2(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function MU(e,t,n){const r=X2(t);if(!r)return e;const{scaleX:s,scaleY:a,x:i,y:l}=r,c=e.left-i-(1-s)*parseFloat(n),u=e.top-l-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?e.width/s:e.width,f=a?e.height/a:e.height;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c}}const DU={ignoreTransform:!1};function zl(e,t){t===void 0&&(t=DU);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:h}=qn(e).getComputedStyle(e);u&&(n=MU(n,u,h))}const{top:r,left:s,width:a,height:i,bottom:l,right:c}=n;return{top:r,left:s,width:a,height:i,bottom:l,right:c}}function ij(e){return zl(e,{ignoreTransform:!0})}function $U(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function LU(e,t){return t===void 0&&(t=qn(e).getComputedStyle(e)),t.position==="fixed"}function FU(e,t){t===void 0&&(t=qn(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const a=t[s];return typeof a=="string"?n.test(a):!1})}function ym(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(Yx(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Hu(s)||q2(s)||n.includes(s))return n;const a=qn(e).getComputedStyle(s);return s!==e&&FU(s,a)&&n.push(s),LU(s,a)?n:r(s.parentNode)}return e?r(e):n}function Z2(e){const[t]=ym(e,1);return t??null}function Ep(e){return!pm||!e?null:Ll(e)?e:Qx(e)?Yx(e)||e===Fl(e).scrollingElement?window:Hu(e)?e:null:null}function eR(e){return Ll(e)?e.scrollX:e.scrollLeft}function tR(e){return Ll(e)?e.scrollY:e.scrollTop}function Av(e){return{x:eR(e),y:tR(e)}}var mn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(mn||(mn={}));function nR(e){return!pm||!e?!1:e===document.scrollingElement}function rR(e){const t={x:0,y:0},n=nR(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:s,isLeft:a,isBottom:i,isRight:l,maxScroll:r,minScroll:t}}const zU={x:.2,y:.2};function UU(e,t,n,r,s){let{top:a,left:i,right:l,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=zU);const{isTop:u,isBottom:h,isLeft:f,isRight:m}=rR(e),p={x:0,y:0},w={x:0,y:0},g={height:t.height*s.y,width:t.width*s.x};return!u&&a<=t.top+g.height?(p.y=mn.Backward,w.y=r*Math.abs((t.top+g.height-a)/g.height)):!h&&c>=t.bottom-g.height&&(p.y=mn.Forward,w.y=r*Math.abs((t.bottom-g.height-c)/g.height)),!m&&l>=t.right-g.width?(p.x=mn.Forward,w.x=r*Math.abs((t.right-g.width-l)/g.width)):!f&&i<=t.left+g.width&&(p.x=mn.Backward,w.x=r*Math.abs((t.left+g.width-i)/g.width)),{direction:p,speed:w}}function BU(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:i}=window;return{top:0,left:0,right:a,bottom:i,width:a,height:i}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function sR(e){return e.reduce((t,n)=>Fi(t,Av(n)),cs)}function KU(e){return e.reduce((t,n)=>t+eR(n),0)}function VU(e){return e.reduce((t,n)=>t+tR(n),0)}function oR(e,t){if(t===void 0&&(t=zl),!e)return;const{top:n,left:r,bottom:s,right:a}=t(e);Z2(e)&&(s<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const qU=[["x",["left","right"],KU],["y",["top","bottom"],VU]];class Jx{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=ym(n),s=sR(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,i,l]of qU)for(const c of i)Object.defineProperty(this,c,{get:()=>{const u=l(r),h=s[a]-u;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Cc{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function HU(e){const{EventTarget:t}=qn(e);return e instanceof t?e:Fl(e)}function kp(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var _r;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(_r||(_r={}));function lj(e){e.preventDefault()}function WU(e){e.stopPropagation()}var ct;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(ct||(ct={}));const aR={start:[ct.Space,ct.Enter],cancel:[ct.Esc],end:[ct.Space,ct.Enter,ct.Tab]},GU=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case ct.Right:return{...n,x:n.x+25};case ct.Left:return{...n,x:n.x-25};case ct.Down:return{...n,y:n.y+25};case ct.Up:return{...n,y:n.y-25}}};class Xx{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Cc(Fl(n)),this.windowListeners=new Cc(qn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(_r.Resize,this.handleCancel),this.windowListeners.add(_r.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(_r.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&oR(r),n(cs)}handleKeyDown(t){if(vm(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:a=aR,coordinateGetter:i=GU,scrollBehavior:l="smooth"}=s,{code:c}=t;if(a.end.includes(c)){this.handleEnd(t);return}if(a.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:cs;this.referenceCoordinates||(this.referenceCoordinates=h);const f=i(t,{active:n,context:r.current,currentCoordinates:h});if(f){const m=uu(f,h),p={x:0,y:0},{scrollableAncestors:w}=r.current;for(const g of w){const y=t.code,{isTop:x,isRight:v,isLeft:b,isBottom:j,maxScroll:S,minScroll:_}=rR(g),N=BU(g),C={x:Math.min(y===ct.Right?N.right-N.width/2:N.right,Math.max(y===ct.Right?N.left:N.left+N.width/2,f.x)),y:Math.min(y===ct.Down?N.bottom-N.height/2:N.bottom,Math.max(y===ct.Down?N.top:N.top+N.height/2,f.y))},E=y===ct.Right&&!v||y===ct.Left&&!b,D=y===ct.Down&&!j||y===ct.Up&&!x;if(E&&C.x!==f.x){const R=g.scrollLeft+m.x,P=y===ct.Right&&R<=S.x||y===ct.Left&&R>=_.x;if(P&&!m.y){g.scrollTo({left:R,behavior:l});return}P?p.x=g.scrollLeft-R:p.x=y===ct.Right?g.scrollLeft-S.x:g.scrollLeft-_.x,p.x&&g.scrollBy({left:-p.x,behavior:l});break}else if(D&&C.y!==f.y){const R=g.scrollTop+m.y,P=y===ct.Down&&R<=S.y||y===ct.Up&&R>=_.y;if(P&&!m.x){g.scrollTo({top:R,behavior:l});return}P?p.y=g.scrollTop-R:p.y=y===ct.Down?g.scrollTop-S.y:g.scrollTop-_.y,p.y&&g.scrollBy({top:-p.y,behavior:l});break}}this.handleMove(t,Fi(uu(f,this.referenceCoordinates),p))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Xx.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=aR,onActivation:s}=t,{active:a}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const l=a.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function cj(e){return!!(e&&"distance"in e)}function uj(e){return!!(e&&"delay"in e)}class Zx{constructor(t,n,r){var s;r===void 0&&(r=HU(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:i}=a;this.props=t,this.events=n,this.document=Fl(i),this.documentListeners=new Cc(this.document),this.listeners=new Cc(r),this.windowListeners=new Cc(qn(i)),this.initialCoordinates=(s=Zh(a))!=null?s:cs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(_r.Resize,this.handleCancel),this.windowListeners.add(_r.DragStart,lj),this.windowListeners.add(_r.VisibilityChange,this.handleCancel),this.windowListeners.add(_r.ContextMenu,lj),this.documentListeners.add(_r.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(uj(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(cj(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(_r.Click,WU,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(_r.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:a}=this,{onMove:i,options:{activationConstraint:l}}=a;if(!s)return;const c=(n=Zh(t))!=null?n:cs,u=uu(s,c);if(!r&&l){if(cj(l)){if(l.tolerance!=null&&kp(u,l.tolerance))return this.handleCancel();if(kp(u,l.distance))return this.handleStart()}if(uj(l)&&kp(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}t.cancelable&&t.preventDefault(),i(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===ct.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const QU={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class e0 extends Zx{constructor(t){const{event:n}=t,r=Fl(n.target);super(t,QU,r)}}e0.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const YU={move:{name:"mousemove"},end:{name:"mouseup"}};var Ov;(function(e){e[e.RightClick=2]="RightClick"})(Ov||(Ov={}));class JU extends Zx{constructor(t){super(t,YU,Fl(t.event.target))}}JU.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Ov.RightClick?!1:(r==null||r({event:n}),!0)}}];const Tp={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class XU extends Zx{constructor(t){super(t,Tp)}static setup(){return window.addEventListener(Tp.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Tp.move.name,t)};function t(){}}}XU.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var _c;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(_c||(_c={}));var tf;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(tf||(tf={}));function ZU(e){let{acceleration:t,activator:n=_c.Pointer,canScroll:r,draggingRect:s,enabled:a,interval:i=5,order:l=tf.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:h,delta:f,threshold:m}=e;const p=tB({delta:f,disabled:!a}),[w,g]=hU(),y=d.useRef({x:0,y:0}),x=d.useRef({x:0,y:0}),v=d.useMemo(()=>{switch(n){case _c.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case _c.DraggableRect:return s}},[n,s,c]),b=d.useRef(null),j=d.useCallback(()=>{const _=b.current;if(!_)return;const N=y.current.x*x.current.x,C=y.current.y*x.current.y;_.scrollBy(N,C)},[]),S=d.useMemo(()=>l===tf.TreeOrder?[...u].reverse():u,[l,u]);d.useEffect(()=>{if(!a||!u.length||!v){g();return}for(const _ of S){if((r==null?void 0:r(_))===!1)continue;const N=u.indexOf(_),C=h[N];if(!C)continue;const{direction:E,speed:D}=UU(_,C,v,t,m);for(const R of["x","y"])p[R][E[R]]||(D[R]=0,E[R]=0);if(D.x>0||D.y>0){g(),b.current=_,w(j,i),y.current=D,x.current=E;return}}y.current={x:0,y:0},x.current={x:0,y:0},g()},[t,j,r,g,a,i,JSON.stringify(v),JSON.stringify(p),w,u,S,h,JSON.stringify(m)])}const eB={x:{[mn.Backward]:!1,[mn.Forward]:!1},y:{[mn.Backward]:!1,[mn.Forward]:!1}};function tB(e){let{delta:t,disabled:n}=e;const r=Xh(t);return Wu(s=>{if(n||!r||!s)return eB;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[mn.Backward]:s.x[mn.Backward]||a.x===-1,[mn.Forward]:s.x[mn.Forward]||a.x===1},y:{[mn.Backward]:s.y[mn.Backward]||a.y===-1,[mn.Forward]:s.y[mn.Forward]||a.y===1}}},[n,t,r])}function nB(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Wu(s=>{var a;return t==null?null:(a=r??s)!=null?a:null},[r,t])}function rB(e,t){return d.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,a=s.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...a]},[]),[e,t])}var du;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(du||(du={}));var Iv;(function(e){e.Optimized="optimized"})(Iv||(Iv={}));const dj=new Map;function sB(e,t){let{dragging:n,dependencies:r,config:s}=t;const[a,i]=d.useState(null),{frequency:l,measure:c,strategy:u}=s,h=d.useRef(e),f=y(),m=cu(f),p=d.useCallback(function(x){x===void 0&&(x=[]),!m.current&&i(v=>v===null?x:v.concat(x.filter(b=>!v.includes(b))))},[m]),w=d.useRef(null),g=Wu(x=>{if(f&&!n)return dj;if(!x||x===dj||h.current!==e||a!=null){const v=new Map;for(let b of e){if(!b)continue;if(a&&a.length>0&&!a.includes(b.id)&&b.rect.current){v.set(b.id,b.rect.current);continue}const j=b.node.current,S=j?new Jx(c(j),j):null;b.rect.current=S,S&&v.set(b.id,S)}return v}return x},[e,a,n,f,c]);return d.useEffect(()=>{h.current=e},[e]),d.useEffect(()=>{f||p()},[n,f]),d.useEffect(()=>{a&&a.length>0&&i(null)},[JSON.stringify(a)]),d.useEffect(()=>{f||typeof l!="number"||w.current!==null||(w.current=setTimeout(()=>{p(),w.current=null},l))},[l,f,p,...r]),{droppableRects:g,measureDroppableContainers:p,measuringScheduled:a!=null};function y(){switch(u){case du.Always:return!1;case du.BeforeDragging:return n;default:return!n}}}function t0(e,t){return Wu(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function oB(e,t){return t0(e,t)}function aB(e){let{callback:t,disabled:n}=e;const r=gm(t),s=d.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return d.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function xm(e){let{callback:t,disabled:n}=e;const r=gm(t),s=d.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return d.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function iB(e){return new Jx(zl(e),e)}function hj(e,t,n){t===void 0&&(t=iB);const[r,s]=d.useState(null);function a(){s(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c??n)!=null?u:null}const h=t(e);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const i=aB({callback(c){if(e)for(const u of c){const{type:h,target:f}=u;if(h==="childList"&&f instanceof HTMLElement&&f.contains(e)){a();break}}}}),l=xm({callback:a});return ls(()=>{a(),e?(l==null||l.observe(e),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),i==null||i.disconnect())},[e]),r}function lB(e){const t=t0(e);return J2(e,t)}const fj=[];function cB(e){const t=d.useRef(e),n=Wu(r=>e?r&&r!==fj&&e&&t.current&&e.parentNode===t.current.parentNode?r:ym(e):fj,[e]);return d.useEffect(()=>{t.current=e},[e]),n}function uB(e){const[t,n]=d.useState(null),r=d.useRef(e),s=d.useCallback(a=>{const i=Ep(a.target);i&&n(l=>l?(l.set(i,Av(i)),new Map(l)):null)},[]);return d.useEffect(()=>{const a=r.current;if(e!==a){i(a);const l=e.map(c=>{const u=Ep(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,Av(u)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=e}return()=>{i(e),i(a)};function i(l){l.forEach(c=>{const u=Ep(c);u==null||u.removeEventListener("scroll",s)})}},[s,e]),d.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,i)=>Fi(a,i),cs):sR(e):cs,[e,t])}function mj(e,t){t===void 0&&(t=[]);const n=d.useRef(null);return d.useEffect(()=>{n.current=null},t),d.useEffect(()=>{const r=e!==cs;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?uu(e,n.current):cs}function dB(e){d.useEffect(()=>{if(!pm)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function hB(e,t){return d.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:a}=r;return n[s]=i=>{a(i,t)},n},{}),[e,t])}function iR(e){return d.useMemo(()=>e?$U(e):null,[e])}const pj=[];function fB(e,t){t===void 0&&(t=zl);const[n]=e,r=iR(n?qn(n):null),[s,a]=d.useState(pj);function i(){a(()=>e.length?e.map(c=>nR(c)?r:new Jx(t(c),c)):pj)}const l=xm({callback:i});return ls(()=>{l==null||l.disconnect(),i(),e.forEach(c=>l==null?void 0:l.observe(c))},[e]),s}function lR(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Hu(t)?t:e}function mB(e){let{measure:t}=e;const[n,r]=d.useState(null),s=d.useCallback(u=>{for(const{target:h}of u)if(Hu(h)){r(f=>{const m=t(h);return f?{...f,width:m.width,height:m.height}:m});break}},[t]),a=xm({callback:s}),i=d.useCallback(u=>{const h=lR(u);a==null||a.disconnect(),h&&(a==null||a.observe(h)),r(h?t(h):null)},[t,a]),[l,c]=Jh(i);return d.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const pB=[{sensor:e0,options:{}},{sensor:Xx,options:{}}],gB={current:{}},nh={draggable:{measure:ij},droppable:{measure:ij,strategy:du.WhileDragging,frequency:Iv.Optimized},dragOverlay:{measure:zl}};class Ec extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const vB={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ec,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ef},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:nh,measureDroppableContainers:ef,windowRect:null,measuringScheduled:!1},cR={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ef,draggableNodes:new Map,over:null,measureDroppableContainers:ef},Qu=d.createContext(cR),uR=d.createContext(vB);function yB(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ec}}}function xB(e,t){switch(t.type){case un.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case un.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case un.DragEnd:case un.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case un.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Ec(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case un.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new Ec(e.droppable.containers);return i.set(n,{...a,disabled:s}),{...e,droppable:{...e.droppable,containers:i}}}case un.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const a=new Ec(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function wB(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=d.useContext(Qu),a=Xh(r),i=Xh(n==null?void 0:n.id);return d.useEffect(()=>{if(!t&&!r&&a&&i!=null){if(!vm(a)||document.activeElement===a.target)return;const l=s.get(i);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[c.current,u.current]){if(!h)continue;const f=pU(h);if(f){f.focus();break}}})}},[r,t,s,i,a]),null}function dR(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,a)=>a({transform:s,...r}),n):n}function bB(e){return d.useMemo(()=>({draggable:{...nh.draggable,...e==null?void 0:e.draggable},droppable:{...nh.droppable,...e==null?void 0:e.droppable},dragOverlay:{...nh.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function jB(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const a=d.useRef(!1),{x:i,y:l}=typeof s=="boolean"?{x:s,y:s}:s;ls(()=>{if(!i&&!l||!t){a.current=!1;return}if(a.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const h=n(u),f=J2(h,r);if(i||(f.x=0),l||(f.y=0),a.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const m=Z2(u);m&&m.scrollBy({top:f.y,left:f.x})}},[t,i,l,r,n])}const wm=d.createContext({...cs,scaleX:1,scaleY:1});var lo;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(lo||(lo={}));const SB=d.memo(function(t){var n,r,s,a;let{id:i,accessibility:l,autoScroll:c=!0,children:u,sensors:h=pB,collisionDetection:f=PU,measuring:m,modifiers:p,...w}=t;const g=d.useReducer(xB,void 0,yB),[y,x]=g,[v,b]=bU(),[j,S]=d.useState(lo.Uninitialized),_=j===lo.Initialized,{draggable:{active:N,nodes:C,translate:E},droppable:{containers:D}}=y,R=N!=null?C.get(N):null,P=d.useRef({initial:null,translated:null}),G=d.useMemo(()=>{var de;return N!=null?{id:N,data:(de=R==null?void 0:R.data)!=null?de:gB,rect:P}:null},[N,R]),Q=d.useRef(null),[ce,Y]=d.useState(null),[O,T]=d.useState(null),B=cu(w,Object.values(w)),$=Gu("DndDescribedBy",i),W=d.useMemo(()=>D.getEnabled(),[D]),ae=bB(m),{droppableRects:_e,measureDroppableContainers:ge,measuringScheduled:De}=sB(W,{dragging:_,dependencies:[E.x,E.y],config:ae.droppable}),Ee=nB(C,N),fe=d.useMemo(()=>O?Zh(O):null,[O]),ue=re(),$e=oB(Ee,ae.draggable.measure);jB({activeNode:N!=null?C.get(N):null,config:ue.layoutShiftCompensation,initialRect:$e,measure:ae.draggable.measure});const oe=hj(Ee,ae.draggable.measure,$e),Be=hj(Ee?Ee.parentElement:null),Me=d.useRef({activatorEvent:null,active:null,activeNode:Ee,collisionRect:null,collisions:null,droppableRects:_e,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:D,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ue=D.getNodeFor((n=Me.current.over)==null?void 0:n.id),Oe=mB({measure:ae.dragOverlay.measure}),He=(r=Oe.nodeRef.current)!=null?r:Ee,dt=_?(s=Oe.rect)!=null?s:oe:null,nt=!!(Oe.nodeRef.current&&Oe.rect),mt=lB(nt?null:oe),Qt=iR(He?qn(He):null),wt=cB(_?Ue??Ee:null),Ot=fB(wt),Fe=dR(p,{transform:{x:E.x-mt.x,y:E.y-mt.y,scaleX:1,scaleY:1},activatorEvent:O,active:G,activeNodeRect:oe,containerNodeRect:Be,draggingNodeRect:dt,over:Me.current.over,overlayNodeRect:Oe.rect,scrollableAncestors:wt,scrollableAncestorRects:Ot,windowRect:Qt}),Ct=fe?Fi(fe,E):null,L=uB(wt),I=mj(L),U=mj(L,[oe]),V=Fi(Fe,I),J=dt?IU(dt,Fe):null,ie=G&&J?f({active:G,collisionRect:J,droppableRects:_e,droppableContainers:W,pointerCoordinates:Ct}):null,Pe=Y2(ie,"id"),[Ae,Ge]=d.useState(null),Xe=nt?Fe:Fi(Fe,U),rt=AU(Xe,(a=Ae==null?void 0:Ae.rect)!=null?a:null,oe),tn=d.useRef(null),z=d.useCallback((de,xe)=>{let{sensor:pe,options:pt}=xe;if(Q.current==null)return;const st=C.get(Q.current);if(!st)return;const bt=de.nativeEvent,Ze=new pe({active:Q.current,activeNode:st,event:bt,options:pt,context:Me,onAbort(ve){if(!C.get(ve))return;const{onDragAbort:kt}=B.current,Mn={id:ve};kt==null||kt(Mn),v({type:"onDragAbort",event:Mn})},onPending(ve,ze,kt,Mn){if(!C.get(ve))return;const{onDragPending:Hn}=B.current,sr={id:ve,constraint:ze,initialCoordinates:kt,offset:Mn};Hn==null||Hn(sr),v({type:"onDragPending",event:sr})},onStart(ve){const ze=Q.current;if(ze==null)return;const kt=C.get(ze);if(!kt)return;const{onDragStart:Mn}=B.current,br={activatorEvent:bt,active:{id:ze,data:kt.data,rect:P}};Or.unstable_batchedUpdates(()=>{Mn==null||Mn(br),S(lo.Initializing),x({type:un.DragStart,initialCoordinates:ve,active:ze}),v({type:"onDragStart",event:br}),Y(tn.current),T(bt)})},onMove(ve){x({type:un.DragMove,coordinates:ve})},onEnd:gt(un.DragEnd),onCancel:gt(un.DragCancel)});tn.current=Ze;function gt(ve){return async function(){const{active:kt,collisions:Mn,over:br,scrollAdjustedTranslate:Hn}=Me.current;let sr=null;if(kt&&Hn){const{cancelDrop:zr}=B.current;sr={activatorEvent:bt,active:kt,collisions:Mn,delta:Hn,over:br},ve===un.DragEnd&&typeof zr=="function"&&await Promise.resolve(zr(sr))&&(ve=un.DragCancel)}Q.current=null,Or.unstable_batchedUpdates(()=>{x({type:ve}),S(lo.Uninitialized),Ge(null),Y(null),T(null),tn.current=null;const zr=ve===un.DragEnd?"onDragEnd":"onDragCancel";if(sr){const Ur=B.current[zr];Ur==null||Ur(sr),v({type:zr,event:sr})}})}}},[C]),ne=d.useCallback((de,xe)=>(pe,pt)=>{const st=pe.nativeEvent,bt=C.get(pt);if(Q.current!==null||!bt||st.dndKit||st.defaultPrevented)return;const Ze={active:bt};de(pe,xe.options,Ze)===!0&&(st.dndKit={capturedBy:xe.sensor},Q.current=pt,z(pe,xe))},[C,z]),Se=rB(h,ne);dB(h),ls(()=>{oe&&j===lo.Initializing&&S(lo.Initialized)},[oe,j]),d.useEffect(()=>{const{onDragMove:de}=B.current,{active:xe,activatorEvent:pe,collisions:pt,over:st}=Me.current;if(!xe||!pe)return;const bt={active:xe,activatorEvent:pe,collisions:pt,delta:{x:V.x,y:V.y},over:st};Or.unstable_batchedUpdates(()=>{de==null||de(bt),v({type:"onDragMove",event:bt})})},[V.x,V.y]),d.useEffect(()=>{const{active:de,activatorEvent:xe,collisions:pe,droppableContainers:pt,scrollAdjustedTranslate:st}=Me.current;if(!de||Q.current==null||!xe||!st)return;const{onDragOver:bt}=B.current,Ze=pt.get(Pe),gt=Ze&&Ze.rect.current?{id:Ze.id,rect:Ze.rect.current,data:Ze.data,disabled:Ze.disabled}:null,ve={active:de,activatorEvent:xe,collisions:pe,delta:{x:st.x,y:st.y},over:gt};Or.unstable_batchedUpdates(()=>{Ge(gt),bt==null||bt(ve),v({type:"onDragOver",event:ve})})},[Pe]),ls(()=>{Me.current={activatorEvent:O,active:G,activeNode:Ee,collisionRect:J,collisions:ie,droppableRects:_e,draggableNodes:C,draggingNode:He,draggingNodeRect:dt,droppableContainers:D,over:Ae,scrollableAncestors:wt,scrollAdjustedTranslate:V},P.current={initial:dt,translated:J}},[G,Ee,ie,J,C,He,dt,_e,D,Ae,wt,V]),ZU({...ue,delta:E,draggingRect:J,pointerCoordinates:Ct,scrollableAncestors:wt,scrollableAncestorRects:Ot});const Ne=d.useMemo(()=>({active:G,activeNode:Ee,activeNodeRect:oe,activatorEvent:O,collisions:ie,containerNodeRect:Be,dragOverlay:Oe,draggableNodes:C,droppableContainers:D,droppableRects:_e,over:Ae,measureDroppableContainers:ge,scrollableAncestors:wt,scrollableAncestorRects:Ot,measuringConfiguration:ae,measuringScheduled:De,windowRect:Qt}),[G,Ee,oe,O,ie,Be,Oe,C,D,_e,Ae,ge,wt,Ot,ae,De,Qt]),F=d.useMemo(()=>({activatorEvent:O,activators:Se,active:G,activeNodeRect:oe,ariaDescribedById:{draggable:$},dispatch:x,draggableNodes:C,over:Ae,measureDroppableContainers:ge}),[O,Se,G,oe,x,$,C,Ae,ge]);return Ce.createElement(W2.Provider,{value:b},Ce.createElement(Qu.Provider,{value:F},Ce.createElement(uR.Provider,{value:Ne},Ce.createElement(wm.Provider,{value:rt},u)),Ce.createElement(wB,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Ce.createElement(NU,{...l,hiddenTextDescribedById:$}));function re(){const de=(ce==null?void 0:ce.autoScrollEnabled)===!1,xe=typeof c=="object"?c.enabled===!1:c===!1,pe=_&&!de&&!xe;return typeof c=="object"?{...c,enabled:pe}:{enabled:pe}}}),NB=d.createContext(null),gj="button",CB="Draggable";function _B(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const a=Gu(CB),{activators:i,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:h,draggableNodes:f,over:m}=d.useContext(Qu),{role:p=gj,roleDescription:w="draggable",tabIndex:g=0}=s??{},y=(c==null?void 0:c.id)===t,x=d.useContext(y?wm:NB),[v,b]=Jh(),[j,S]=Jh(),_=hB(i,t),N=cu(n);ls(()=>(f.set(t,{id:t,key:a,node:v,activatorNode:j,data:N}),()=>{const E=f.get(t);E&&E.key===a&&f.delete(t)}),[f,t]);const C=d.useMemo(()=>({role:p,tabIndex:g,"aria-disabled":r,"aria-pressed":y&&p===gj?!0:void 0,"aria-roledescription":w,"aria-describedby":h.draggable}),[r,p,g,y,w,h.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:C,isDragging:y,listeners:r?void 0:_,node:v,over:m,setNodeRef:b,setActivatorNodeRef:S,transform:x}}function hR(){return d.useContext(uR)}const EB="Droppable",kB={timeout:25};function fR(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const a=Gu(EB),{active:i,dispatch:l,over:c,measureDroppableContainers:u}=d.useContext(Qu),h=d.useRef({disabled:n}),f=d.useRef(!1),m=d.useRef(null),p=d.useRef(null),{disabled:w,updateMeasurementsFor:g,timeout:y}={...kB,...s},x=cu(g??r),v=d.useCallback(()=>{if(!f.current){f.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),p.current=null},y)},[y]),b=xm({callback:v,disabled:w||!i}),j=d.useCallback((C,E)=>{b&&(E&&(b.unobserve(E),f.current=!1),C&&b.observe(C))},[b]),[S,_]=Jh(j),N=cu(t);return d.useEffect(()=>{!b||!S.current||(b.disconnect(),f.current=!1,b.observe(S.current))},[S,b]),d.useEffect(()=>(l({type:un.RegisterDroppable,element:{id:r,key:a,disabled:n,node:S,rect:m,data:N}}),()=>l({type:un.UnregisterDroppable,key:a,id:r})),[r]),d.useEffect(()=>{n!==h.current.disabled&&(l({type:un.SetDroppableDisabled,id:r,key:a,disabled:n}),h.current.disabled=n)},[r,a,n,l]),{active:i,rect:m,isOver:(c==null?void 0:c.id)===r,node:S,over:c,setNodeRef:_}}function TB(e){let{animation:t,children:n}=e;const[r,s]=d.useState(null),[a,i]=d.useState(null),l=Xh(n);return!n&&!r&&l&&s(l),ls(()=>{if(!a)return;const c=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(c==null||u==null){s(null);return}Promise.resolve(t(u,a)).then(()=>{s(null)})},[t,r,a]),Ce.createElement(Ce.Fragment,null,n,r?d.cloneElement(r,{ref:i}):null)}const RB={x:0,y:0,scaleX:1,scaleY:1};function PB(e){let{children:t}=e;return Ce.createElement(Qu.Provider,{value:cR},Ce.createElement(wm.Provider,{value:RB},t))}const AB={position:"fixed",touchAction:"none"},OB=e=>vm(e)?"transform 250ms ease":void 0,IB=d.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:a,className:i,rect:l,style:c,transform:u,transition:h=OB}=e;if(!l)return null;const f=s?u:{...u,scaleX:1,scaleY:1},m={...AB,width:l.width,height:l.height,top:l.top,left:l.left,transform:Bo.Transform.toString(f),transformOrigin:s&&r?_U(r,l):void 0,transition:typeof h=="function"?h(r):h,...c};return Ce.createElement(n,{className:i,style:m,ref:t},a)}),MB=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:a,className:i}=e;if(a!=null&&a.active)for(const[l,c]of Object.entries(a.active))c!==void 0&&(s[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,c));if(a!=null&&a.dragOverlay)for(const[l,c]of Object.entries(a.dragOverlay))c!==void 0&&r.node.style.setProperty(l,c);return i!=null&&i.active&&n.node.classList.add(i.active),i!=null&&i.dragOverlay&&r.node.classList.add(i.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);i!=null&&i.active&&n.node.classList.remove(i.active)}},DB=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Bo.Transform.toString(t)},{transform:Bo.Transform.toString(n)}]},$B={duration:250,easing:"ease",keyframes:DB,sideEffects:MB({styles:{active:{opacity:"0"}}})};function LB(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return gm((a,i)=>{if(t===null)return;const l=n.get(a);if(!l)return;const c=l.node.current;if(!c)return;const u=lR(i);if(!u)return;const{transform:h}=qn(i).getComputedStyle(i),f=X2(h);if(!f)return;const m=typeof t=="function"?t:FB(t);return oR(c,s.draggable.measure),m({active:{id:a,data:l.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:i,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function FB(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...$B,...e};return a=>{let{active:i,dragOverlay:l,transform:c,...u}=a;if(!t)return;const h={x:l.rect.left-i.rect.left,y:l.rect.top-i.rect.top},f={scaleX:c.scaleX!==1?i.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?i.rect.height*c.scaleY/l.rect.height:1},m={x:c.x-h.x,y:c.y-h.y,...f},p=s({...u,active:i,dragOverlay:l,transform:{initial:c,final:m}}),[w]=p,g=p[p.length-1];if(JSON.stringify(w)===JSON.stringify(g))return;const y=r==null?void 0:r({active:i,dragOverlay:l,...u}),x=l.node.animate(p,{duration:t,easing:n,fill:"forwards"});return new Promise(v=>{x.onfinish=()=>{y==null||y(),v()}})}}let vj=0;function zB(e){return d.useMemo(()=>{if(e!=null)return vj++,vj},[e])}const UB=Ce.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:a,modifiers:i,wrapperElement:l="div",className:c,zIndex:u=999}=e;const{activatorEvent:h,active:f,activeNodeRect:m,containerNodeRect:p,draggableNodes:w,droppableContainers:g,dragOverlay:y,over:x,measuringConfiguration:v,scrollableAncestors:b,scrollableAncestorRects:j,windowRect:S}=hR(),_=d.useContext(wm),N=zB(f==null?void 0:f.id),C=dR(i,{activatorEvent:h,active:f,activeNodeRect:m,containerNodeRect:p,draggingNodeRect:y.rect,over:x,overlayNodeRect:y.rect,scrollableAncestors:b,scrollableAncestorRects:j,transform:_,windowRect:S}),E=t0(m),D=LB({config:r,draggableNodes:w,droppableContainers:g,measuringConfiguration:v}),R=E?y.setRef:void 0;return Ce.createElement(PB,null,Ce.createElement(TB,{animation:D},f&&N?Ce.createElement(IB,{key:N,id:f.id,ref:R,as:l,activatorEvent:h,adjustScale:t,className:c,transition:a,rect:E,style:{zIndex:u,...s},transform:C},n):null))});function mR(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function BB(e,t){return e.reduce((n,r,s)=>{const a=t.get(r);return a&&(n[s]=a),n},Array(e.length))}function Od(e){return e!==null&&e>=0}function KB(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function VB(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const pR=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const a=mR(t,r,n),i=t[s],l=a[s];return!l||!i?null:{x:l.left-i.left,y:l.top-i.top,scaleX:l.width/i.width,scaleY:l.height/i.height}},Id={scaleX:1,scaleY:1},gR=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:a,overIndex:i}=e;const l=(t=a[n])!=null?t:r;if(!l)return null;if(s===n){const u=a[i];return u?{x:0,y:n<i?u.top+u.height-(l.top+l.height):u.top-l.top,...Id}:null}const c=qB(a,s,n);return s>n&&s<=i?{x:0,y:-l.height-c,...Id}:s<n&&s>=i?{x:0,y:l.height+c,...Id}:{x:0,y:0,...Id}};function qB(e,t,n){const r=e[t],s=e[t-1],a=e[t+1];return r?n<t?s?r.top-(s.top+s.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const vR="Sortable",yR=Ce.createContext({activeIndex:-1,containerId:vR,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:pR,disabled:{draggable:!1,droppable:!1}});function xR(e){let{children:t,id:n,items:r,strategy:s=pR,disabled:a=!1}=e;const{active:i,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:h}=hR(),f=Gu(vR,n),m=l.rect!==null,p=d.useMemo(()=>r.map(_=>typeof _=="object"&&"id"in _?_.id:_),[r]),w=i!=null,g=i?p.indexOf(i.id):-1,y=u?p.indexOf(u.id):-1,x=d.useRef(p),v=!KB(p,x.current),b=y!==-1&&g===-1||v,j=VB(a);ls(()=>{v&&w&&h(p)},[v,p,w,h]),d.useEffect(()=>{x.current=p},[p]);const S=d.useMemo(()=>({activeIndex:g,containerId:f,disabled:j,disableTransforms:b,items:p,overIndex:y,useDragOverlay:m,sortedRects:BB(p,c),strategy:s}),[g,f,j.draggable,j.droppable,b,p,y,c,m,s]);return Ce.createElement(yR.Provider,{value:S},t)}const HB=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return mR(n,r,s).indexOf(t)},WB=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:a,newIndex:i,previousItems:l,previousContainerId:c,transition:u}=e;return!u||!r||l!==a&&s===i?!1:n?!0:i!==s&&t===c},GB={duration:200,easing:"ease"},wR="transform",QB=Bo.Transition.toString({property:wR,duration:0,easing:"linear"}),YB={roleDescription:"sortable"};function JB(e){let{disabled:t,index:n,node:r,rect:s}=e;const[a,i]=d.useState(null),l=d.useRef(n);return ls(()=>{if(!t&&n!==l.current&&r.current){const c=s.current;if(c){const u=zl(r.current,{ignoreTransform:!0}),h={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(h.x||h.y)&&i(h)}}n!==l.current&&(l.current=n)},[t,n,r,s]),d.useEffect(()=>{a&&i(null)},[a]),a}function XB(e){let{animateLayoutChanges:t=WB,attributes:n,disabled:r,data:s,getNewIndex:a=HB,id:i,strategy:l,resizeObserverConfig:c,transition:u=GB}=e;const{items:h,containerId:f,activeIndex:m,disabled:p,disableTransforms:w,sortedRects:g,overIndex:y,useDragOverlay:x,strategy:v}=d.useContext(yR),b=ZB(r,p),j=h.indexOf(i),S=d.useMemo(()=>({sortable:{containerId:f,index:j,items:h},...s}),[f,s,j,h]),_=d.useMemo(()=>h.slice(h.indexOf(i)),[h,i]),{rect:N,node:C,isOver:E,setNodeRef:D}=fR({id:i,data:S,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:_,...c}}),{active:R,activatorEvent:P,activeNodeRect:G,attributes:Q,setNodeRef:ce,listeners:Y,isDragging:O,over:T,setActivatorNodeRef:B,transform:$}=_B({id:i,data:S,attributes:{...YB,...n},disabled:b.draggable}),W=dU(D,ce),ae=!!R,_e=ae&&!w&&Od(m)&&Od(y),ge=!x&&O,De=ge&&_e?$:null,fe=_e?De??(l??v)({rects:g,activeNodeRect:G,activeIndex:m,overIndex:y,index:j}):null,ue=Od(m)&&Od(y)?a({id:i,items:h,activeIndex:m,overIndex:y}):j,$e=R==null?void 0:R.id,oe=d.useRef({activeId:$e,items:h,newIndex:ue,containerId:f}),Be=h!==oe.current.items,Me=t({active:R,containerId:f,isDragging:O,isSorting:ae,id:i,index:j,items:h,newIndex:oe.current.newIndex,previousItems:oe.current.items,previousContainerId:oe.current.containerId,transition:u,wasDragging:oe.current.activeId!=null}),Ue=JB({disabled:!Me,index:j,node:C,rect:N});return d.useEffect(()=>{ae&&oe.current.newIndex!==ue&&(oe.current.newIndex=ue),f!==oe.current.containerId&&(oe.current.containerId=f),h!==oe.current.items&&(oe.current.items=h)},[ae,ue,f,h]),d.useEffect(()=>{if($e===oe.current.activeId)return;if($e!=null&&oe.current.activeId==null){oe.current.activeId=$e;return}const He=setTimeout(()=>{oe.current.activeId=$e},50);return()=>clearTimeout(He)},[$e]),{active:R,activeIndex:m,attributes:Q,data:S,rect:N,index:j,newIndex:ue,items:h,isOver:E,isSorting:ae,isDragging:O,listeners:Y,node:C,overIndex:y,over:T,setNodeRef:W,setActivatorNodeRef:B,setDroppableNodeRef:D,setDraggableNodeRef:ce,transform:Ue??fe,transition:Oe()};function Oe(){if(Ue||Be&&oe.current.newIndex===j)return QB;if(!(ge&&!vm(P)||!u)&&(ae||Me))return Bo.Transition.toString({...u,property:wR})}}function ZB(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function nf(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const e9=[ct.Down,ct.Right,ct.Up,ct.Left],t9=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:a,over:i,scrollableAncestors:l}}=t;if(e9.includes(e.code)){if(e.preventDefault(),!n||!r)return;const c=[];a.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const m=s.get(f.id);if(m)switch(e.code){case ct.Down:r.top<m.top&&c.push(f);break;case ct.Up:r.top>m.top&&c.push(f);break;case ct.Left:r.left>m.left&&c.push(f);break;case ct.Right:r.left<m.left&&c.push(f);break}});const u=TU({collisionRect:r,droppableRects:s,droppableContainers:c});let h=Y2(u,"id");if(h===(i==null?void 0:i.id)&&u.length>1&&(h=u[1].id),h!=null){const f=a.get(n.id),m=a.get(h),p=m?s.get(m.id):null,w=m==null?void 0:m.node.current;if(w&&p&&f&&m){const y=ym(w).some((_,N)=>l[N]!==_),x=bR(f,m),v=n9(f,m),b=y||!x?{x:0,y:0}:{x:v?r.width-p.width:0,y:v?r.height-p.height:0},j={x:p.left,y:p.top};return b.x&&b.y?j:uu(j,b)}}}};function bR(e,t){return!nf(e)||!nf(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function n9(e,t){return!nf(e)||!nf(t)||!bR(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function jR({id:e,children:t,isOver:n,className:r=""}){const{setNodeRef:s,isOver:a}=fR({id:e}),i=n||a;return o.jsx("div",{ref:s,className:`${r} ${i?"bg-accent/50 ring-2 ring-accent ring-inset":""} transition-colors rounded-md`,children:t})}function SR({tag:e,onDelete:t,onRename:n}){const{attributes:r,listeners:s,setNodeRef:a,transform:i,transition:l,isDragging:c}=XB({id:e.id}),u={transform:Bo.Transform.toString(i),transition:l,opacity:c?.5:1};return o.jsxs("div",{ref:a,style:u,className:`group flex items-center gap-2 p-2 rounded-md bg-muted/30 hover:bg-muted/50 border border-border/50 transition-colors ${c?"z-50 shadow-lg ring-2 ring-primary":""}`,children:[o.jsx("button",{...r,...s,className:"cursor-grab active:cursor-grabbing text-muted-foreground hover:text-foreground",children:o.jsx(mC,{className:"w-4 h-4"})}),o.jsx("span",{className:"flex-1 text-sm text-foreground truncate",children:e.name}),o.jsx(he,{variant:"outline",className:"text-xs bg-background",children:e.usageCount||0}),o.jsxs(Ol,{children:[o.jsx(Il,{asChild:!0,children:o.jsx(q,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(hC,{className:"w-3.5 h-3.5"})})}),o.jsxs(Ya,{align:"end",className:"bg-background border-border",children:[o.jsxs(nr,{onClick:()=>n(e),children:[o.jsx(dl,{className:"w-3.5 h-3.5 mr-2"}),"Rename"]}),o.jsx(bx,{}),o.jsxs(nr,{onClick:()=>t(e),className:"text-red-400 focus:text-red-400",children:[o.jsx(ku,{className:"w-3.5 h-3.5 mr-2"}),"Delete"]})]})]})]})}function NR({subcategory:e,categoryKey:t,depth:n,openPaths:r,togglePath:s,onDeleteTag:a,onRenameTag:i,onAddTag:l,onAddSubcategory:c,onRenameSubcategory:u,onDeleteSubcategory:h,activeDropId:f}){const m=r.has(e.key),p=e.tags.map(x=>x.id);e.tags.length>0||e.subcategories.length>0;const w=`drop:${t}:${e.key}`,g=f===w,y=x=>x.split(".");return o.jsx("div",{className:"ml-4 border-l border-border/30 pl-3",children:o.jsxs(tm,{open:m,onOpenChange:()=>s(e.key),children:[o.jsx(jR,{id:w,isOver:g,children:o.jsxs("div",{className:"flex items-center justify-between py-1.5 hover:bg-muted/20 rounded-md px-2 -ml-2 group",children:[o.jsx(nm,{asChild:!0,children:o.jsxs("button",{className:"flex items-center gap-2 text-sm flex-1",children:[o.jsx("span",{className:"text-xs text-muted-foreground/60 font-mono min-w-[2.5rem]",children:e.key}),o.jsx("span",{className:"text-muted-foreground font-medium",children:e.name}),o.jsx(he,{variant:"secondary",className:"text-xs h-5 px-1.5",children:e.totalTags})]})}),o.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100",children:[o.jsx(q,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:x=>{x.stopPropagation(),l(t,y(e.key))},title:"Add tag",children:o.jsx(Fo,{className:"w-3.5 h-3.5"})}),o.jsxs(Ol,{children:[o.jsx(Il,{asChild:!0,children:o.jsx(q,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:x=>x.stopPropagation(),children:o.jsx(hC,{className:"w-3.5 h-3.5"})})}),o.jsxs(Ya,{align:"end",className:"bg-background border-border",children:[o.jsxs(nr,{onClick:()=>c(t,y(e.key),e.name),children:[o.jsx(fC,{className:"w-3.5 h-3.5 mr-2"}),"Add Subcategory"]}),o.jsxs(nr,{onClick:()=>u(t,e.key,e.name),children:[o.jsx(dl,{className:"w-3.5 h-3.5 mr-2"}),"Rename"]}),o.jsx(bx,{}),o.jsxs(nr,{onClick:()=>h(t,e.key,e.name,e.totalTags),className:"text-red-400 focus:text-red-400",children:[o.jsx(ku,{className:"w-3.5 h-3.5 mr-2"}),"Delete"]})]})]})]})]})}),o.jsxs(rm,{children:[e.subcategories.map(x=>o.jsx(NR,{subcategory:x,categoryKey:t,depth:n+1,openPaths:r,togglePath:s,onDeleteTag:a,onRenameTag:i,onAddTag:l,onAddSubcategory:c,onRenameSubcategory:u,onDeleteSubcategory:h,activeDropId:f},x.key)),e.tags.length>0&&o.jsx("div",{className:"space-y-1 py-2 ml-4",children:o.jsx(xR,{items:p,strategy:gR,children:e.tags.map(x=>o.jsx(SR,{tag:x,onDelete:a,onRename:i},x.id))})}),e.tags.length===0&&e.subcategories.length===0&&o.jsx("div",{className:"py-2 ml-4 text-xs text-muted-foreground italic",children:"Drop tags here"})]})]})})}function r9({category:e,isOpen:t,onToggle:n,openPaths:r,togglePath:s,onDeleteTag:a,onRenameTag:i,onAddTag:l,onAddSubcategory:c,onRenameSubcategory:u,onDeleteSubcategory:h,activeDropId:f}){const m=e.tags.map(g=>g.id),p=`drop:${e.category}:root`,w=f===p;return o.jsx(tm,{open:t,onOpenChange:n,children:o.jsxs("div",{className:"border border-border rounded-lg bg-background overflow-hidden",children:[o.jsx(jR,{id:p,isOver:w,children:o.jsx(nm,{asChild:!0,children:o.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-muted/30 cursor-pointer transition-colors group",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[t?o.jsx(Wo,{className:"w-4 h-4 text-muted-foreground"}):o.jsx(ul,{className:"w-4 h-4 text-muted-foreground"}),e.emoji&&o.jsx("span",{children:e.emoji}),o.jsx("span",{className:"font-medium text-foreground",children:e.name}),o.jsx(he,{variant:"secondary",className:"text-xs",children:e.totalTags})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(q,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:g=>{g.stopPropagation(),l(e.category,[])},title:"Add tag",children:o.jsx(Fo,{className:"w-4 h-4"})}),o.jsx(q,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 opacity-0 group-hover:opacity-100",onClick:g=>{g.stopPropagation(),c(e.category,[],e.name)},title:"Add subcategory",children:o.jsx(fC,{className:"w-4 h-4"})})]})]})})}),o.jsx(rm,{children:o.jsxs("div",{className:"p-3 pt-0 border-t border-border/50",children:[e.subcategories.map(g=>o.jsx(NR,{subcategory:g,categoryKey:e.category,depth:1,openPaths:r,togglePath:s,onDeleteTag:a,onRenameTag:i,onAddTag:l,onAddSubcategory:c,onRenameSubcategory:u,onDeleteSubcategory:h,activeDropId:f},g.key)),e.tags.length>0&&o.jsxs("div",{className:"space-y-1 py-2",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-2 ml-1",children:"Root tags:"}),o.jsx(xR,{items:m,strategy:gR,children:e.tags.map(g=>o.jsx(SR,{tag:g,onDelete:a,onRename:i},g.id))})]}),e.tags.length===0&&e.subcategories.length===0&&o.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:"No tags in this category"})]})})]})})}function s9({tag:e}){return o.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md bg-accent border border-primary shadow-xl scale-105",children:[o.jsx(mC,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm text-foreground font-medium",children:e.name}),o.jsx(he,{variant:"outline",className:"text-xs",children:e.usageCount||0})]})}function o9(){var wt,Ot,Fe,Ct,L;const{toast:e}=wr(),t=Nl(),[n,r]=d.useState(""),[s,a]=d.useState(new Set),[i,l]=d.useState(new Set),[c,u]=d.useState(null),[h,f]=d.useState(null),[m,p]=d.useState({open:!1,tag:null}),[w,g]=d.useState({open:!1,categoryKey:null,subcategoryPath:[]}),[y,x]=d.useState({open:!1,tag:null}),[v,b]=d.useState({open:!1,categoryKey:null,parentPath:[],parentName:""}),[j,S]=d.useState({open:!1,categoryKey:null,subcategoryKey:"",currentName:""}),[_,N]=d.useState({open:!1,categoryKey:null,subcategoryKey:"",subcategoryName:"",tagCount:0}),[C,E]=d.useState(""),[D,R]=d.useState(""),[P,G]=d.useState(""),[Q,ce]=d.useState(!1),{data:Y,isLoading:O}=ot({queryKey:["/api/tags/filter-tree"],queryFn:async()=>{const I=await fetch("/api/tags/filter-tree");if(!I.ok)throw new Error("Failed to fetch tags");return I.json()}}),{data:T,isLoading:B}=ot({queryKey:["/api/tags/quality-check"],queryFn:async()=>{const I=await fetch("/api/tags/quality-check");if(!I.ok)throw new Error("Failed to fetch quality check");return I.json()},enabled:Q}),$=d.useMemo(()=>{if(!(Y!=null&&Y.categories))return[];if(!n)return Y.categories;const I=n.toLowerCase(),U=J=>J.filter(ie=>ie.name.toLowerCase().includes(I)),V=J=>{const ie=U(J.tags),Pe=J.subcategories.map(V).filter(Ae=>Ae!==null);return ie.length===0&&Pe.length===0?null:{...J,tags:ie,subcategories:Pe,totalTags:ie.length+Pe.reduce((Ae,Ge)=>Ae+Ge.totalTags,0)}};return Y.categories.map(J=>{const ie=U(J.tags),Pe=J.subcategories.map(V).filter(Ae=>Ae!==null);return ie.length===0&&Pe.length===0?null:{...J,tags:ie,subcategories:Pe,totalTags:ie.length+Pe.reduce((Ae,Ge)=>Ae+Ge.totalTags,0)}}).filter(J=>J!==null)},[Y,n]),W=CU(sj(e0,{activationConstraint:{distance:8}}),sj(Xx,{coordinateGetter:t9})),ae=at({mutationFn:async({tagId:I,category:U,subcategoryKey:V})=>{const J=await fetch(`/api/tags/${I}/move`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:U,subcategoryKey:V})});if(!J.ok)throw new Error("Failed to move tag");return J.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/tags/filter-tree"]}),e({description:"Tag moved successfully"})},onError:I=>{e({variant:"destructive",description:`Failed to move tag: ${I.message}`})}}),_e=at({mutationFn:async({id:I,updates:U})=>{const V=await fetch(`/api/tags/${I}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(U)});if(!V.ok)throw new Error("Failed to update tag");return V.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/tags/filter-tree"]}),e({description:"Tag renamed successfully"})}}),ge=at({mutationFn:async({name:I,category:U,subcategoryPath:V})=>{const J=await fetch("/api/tags",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:I,category:U,subcategoryPath:V})});if(!J.ok)throw new Error("Failed to create tag");return J.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/tags/filter-tree"]}),e({description:"Tag created successfully"})}}),De=at({mutationFn:async I=>{const U=await fetch(`/api/tags/${I}`,{method:"DELETE"});if(!U.ok)throw new Error("Failed to delete tag");return U.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/tags/filter-tree"]}),e({description:"Tag deleted successfully"})}}),Ee=at({mutationFn:async({category:I,parentPath:U,name:V})=>{const J=await fetch("/api/tags/subcategory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:I,parentPath:U,name:V})});if(!J.ok)throw new Error("Failed to create subcategory");return J.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/tags/filter-tree"]}),e({description:"Subcategory created successfully"})}}),fe=at({mutationFn:async({category:I,subcategoryKey:U,newName:V})=>{const J=await fetch("/api/tags/subcategory/rename",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:I,subcategoryKey:U,newName:V})});if(!J.ok)throw new Error("Failed to rename subcategory");return J.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/tags/filter-tree"]}),e({description:"Subcategory renamed successfully"})}}),ue=at({mutationFn:async({category:I,subcategoryKey:U,action:V})=>{const J=await fetch("/api/tags/subcategory/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:I,subcategoryKey:U,action:V})});if(!J.ok)throw new Error("Failed to delete subcategory");return J.json()},onSuccess:(I,U)=>{t.invalidateQueries({queryKey:["/api/tags/filter-tree"]}),e({description:U.action==="delete"?"Subcategory and tags deleted":"Tags moved to parent, subcategory removed"})}}),$e=I=>(V=>{for(const J of V){const ie=J.tags.find(Ge=>Ge.id===I);if(ie)return ie;const Pe=Ge=>{for(const Xe of Ge){const rt=Xe.tags.find(z=>z.id===I);if(rt)return rt;const tn=Pe(Xe.subcategories);if(tn)return tn}return null},Ae=Pe(J.subcategories);if(Ae)return Ae}return null})($),oe=I=>{const U=$e(I.active.id);U&&u(U)},Be=I=>{const{over:U}=I;U!=null&&U.id&&typeof U.id=="string"&&U.id.startsWith("drop:")?f(U.id):f(null)},Me=I=>{const{active:U,over:V}=I;if(u(null),f(null),!V||!U)return;const J=V.id;if(!J.startsWith("drop:"))return;const ie=J.split(":");if(ie.length<3)return;const Pe=ie[1],Ae=ie.slice(2).join(":");ae.mutate({tagId:U.id,category:Pe,subcategoryKey:Ae})},Ue=I=>{a(U=>{const V=new Set(U);return V.has(I)?V.delete(I):V.add(I),V})},Oe=I=>{l(U=>{const V=new Set(U);return V.has(I)?V.delete(I):V.add(I),V})},He=()=>{const I=new Set,U=V=>{V.forEach(J=>{I.add(J.key),U(J.subcategories)})};$.forEach(V=>{I.add(V.category),U(V.subcategories)}),a(new Set($.map(V=>V.category))),l(I)},dt=()=>{a(new Set),l(new Set)},nt=()=>{!C.trim()||!w.categoryKey||(ge.mutate({name:C.trim(),category:w.categoryKey,subcategoryPath:w.subcategoryPath}),E(""),g({open:!1,categoryKey:null,subcategoryPath:[]}))},mt=()=>{!D.trim()||!m.tag||(_e.mutate({id:m.tag.id,updates:{name:D.trim()}}),R(""),p({open:!1,tag:null}))},Qt=()=>{y.tag&&De.mutate(y.tag.id),x({open:!1,tag:null})};return O?o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsx("div",{className:"h-10 w-64 bg-muted animate-pulse rounded-md"}),o.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(I=>o.jsx("div",{className:"h-16 bg-muted animate-pulse rounded-lg"},I))})]}):o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Tag Manager"}),o.jsxs(he,{variant:"outline",children:[(Y==null?void 0:Y.totalTags)||0," tags"]}),o.jsxs(he,{variant:"secondary",children:[$.length," categories"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(q,{variant:Q?"default":"outline",size:"sm",onClick:()=>ce(!Q),children:[B||!T?o.jsx(et,{className:"w-4 h-4 mr-2 animate-spin"}):(((wt=T.tagsWithoutPath)==null?void 0:wt.length)||0)+(((Ot=T.unusedTags)==null?void 0:Ot.length)||0)>0?o.jsx(ws,{className:"w-4 h-4 mr-2 text-orange-500"}):o.jsx(Xn,{className:"w-4 h-4 mr-2 text-green-500"}),"Quality Check"]}),o.jsx(q,{variant:"outline",size:"sm",onClick:He,children:"Expand All"}),o.jsx(q,{variant:"outline",size:"sm",onClick:dt,children:"Collapse All"})]})]}),Q&&o.jsxs("div",{className:"p-4 border-b border-border bg-muted/30 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Quality Check Results"}),o.jsx(q,{variant:"ghost",size:"sm",onClick:()=>ce(!1),children:o.jsx(On,{className:"w-4 h-4"})})]}),B?o.jsx("div",{className:"flex items-center justify-center py-4",children:o.jsx(et,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):T?o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"rounded-lg border border-border bg-background p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[T.tagsWithoutPath.length>0?o.jsx(ws,{className:"w-4 h-4 text-orange-500"}):o.jsx(Xn,{className:"w-4 h-4 text-green-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Tags without subcategory"}),o.jsx(he,{variant:T.tagsWithoutPath.length>0?"destructive":"secondary",children:T.tagsWithoutPath.length})]}),o.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Tags at root level without a subcategory path"}),T.tagsWithoutPath.length>0&&o.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-1",children:[T.tagsWithoutPath.slice(0,20).map(I=>o.jsxs("div",{className:"text-xs flex items-center justify-between px-2 py-1 bg-muted rounded",children:[o.jsx("span",{className:"truncate",children:I.name}),o.jsx(he,{variant:"outline",className:"text-[10px] ml-2",children:I.category})]},I.id)),T.tagsWithoutPath.length>20&&o.jsxs("p",{className:"text-xs text-muted-foreground px-2",children:["+",T.tagsWithoutPath.length-20," more..."]})]})]}),o.jsxs("div",{className:"rounded-lg border border-border bg-background p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[T.unusedTags.length>0?o.jsx(ws,{className:"w-4 h-4 text-orange-500"}):o.jsx(Xn,{className:"w-4 h-4 text-green-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Unused tags"}),o.jsx(he,{variant:T.unusedTags.length>0?"destructive":"secondary",children:T.unusedTags.length})]}),o.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Tags in database but never used in summaries"}),T.unusedTags.length>0&&o.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-1",children:[T.unusedTags.slice(0,20).map(I=>o.jsxs("div",{className:"text-xs flex items-center justify-between px-2 py-1 bg-muted rounded",children:[o.jsx("span",{className:"truncate",children:I.name}),o.jsx(he,{variant:"outline",className:"text-[10px] ml-2",children:I.category})]},I.id)),T.unusedTags.length>20&&o.jsxs("p",{className:"text-xs text-muted-foreground px-2",children:["+",T.unusedTags.length-20," more..."]})]})]})]}):null,T&&o.jsxs("div",{className:"text-xs text-muted-foreground",children:["Total tags in database: ",T.totalTags," | Used in summaries: ",T.totalUsedInSummaries]})]}),o.jsxs("div",{className:"p-4 border-b border-border",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Yc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx(An,{placeholder:"Search tags...",value:n,onChange:I=>r(I.target.value),className:"pl-9 bg-background"}),n&&o.jsx(q,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7 p-0",onClick:()=>r(""),children:o.jsx(On,{className:"w-4 h-4"})})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:" Drag tags between categories and subcategories to reorganize"})]}),o.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-3",children:[o.jsxs(SB,{sensors:W,collisionDetection:kU,onDragStart:oe,onDragOver:Be,onDragEnd:Me,children:[$.map(I=>o.jsx(r9,{category:I,isOpen:s.has(I.category),onToggle:()=>Ue(I.category),openPaths:i,togglePath:Oe,onDeleteTag:U=>x({open:!0,tag:U}),onRenameTag:U=>{R(U.name),p({open:!0,tag:U})},onAddTag:(U,V)=>g({open:!0,categoryKey:U,subcategoryPath:V}),onAddSubcategory:(U,V,J)=>{G(""),b({open:!0,categoryKey:U,parentPath:V,parentName:J})},onRenameSubcategory:(U,V,J)=>{R(J),S({open:!0,categoryKey:U,subcategoryKey:V,currentName:J})},onDeleteSubcategory:(U,V,J,ie)=>{N({open:!0,categoryKey:U,subcategoryKey:V,subcategoryName:J,tagCount:ie})},activeDropId:h},I.category)),o.jsx(UB,{children:c?o.jsx(s9,{tag:c}):null})]}),$.length===0&&o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx("p",{children:"No tags found"}),n&&o.jsx(q,{variant:"link",className:"mt-2",onClick:()=>r(""),children:"Clear search"})]})]}),o.jsx(Zt,{open:w.open,onOpenChange:I=>g({open:I,categoryKey:I?w.categoryKey:null,subcategoryPath:I?w.subcategoryPath:[]}),children:o.jsxs(Vt,{className:"bg-background border-border",children:[o.jsxs(qt,{children:[o.jsx(Ht,{children:"Add Tag"}),o.jsxs(Pn,{children:["Category: ",o.jsx("code",{className:"bg-muted px-1 rounded",children:w.categoryKey}),w.subcategoryPath.length>0&&o.jsxs(o.Fragment,{children:["  Path: ",o.jsx("code",{className:"bg-muted px-1 rounded",children:w.subcategoryPath.join("  ")})]})]})]}),o.jsx(An,{placeholder:"Tag name",value:C,onChange:I=>E(I.target.value),onKeyDown:I=>I.key==="Enter"&&nt(),autoFocus:!0}),o.jsxs(Xr,{children:[o.jsx(q,{variant:"outline",onClick:()=>g({open:!1,categoryKey:null,subcategoryPath:[]}),children:"Cancel"}),o.jsx(q,{onClick:nt,disabled:!C.trim(),children:"Add Tag"})]})]})}),o.jsx(Zt,{open:m.open,onOpenChange:I=>p({open:I,tag:I?m.tag:null}),children:o.jsxs(Vt,{className:"bg-background border-border",children:[o.jsxs(qt,{children:[o.jsx(Ht,{children:"Rename Tag"}),o.jsxs(Pn,{children:['Renaming: "',(Fe=m.tag)==null?void 0:Fe.name,'"']})]}),o.jsx(An,{placeholder:"New tag name",value:D,onChange:I=>R(I.target.value),onKeyDown:I=>I.key==="Enter"&&mt(),autoFocus:!0}),o.jsxs(Xr,{children:[o.jsx(q,{variant:"outline",onClick:()=>p({open:!1,tag:null}),children:"Cancel"}),o.jsx(q,{onClick:mt,disabled:!D.trim(),children:"Rename"})]})]})}),o.jsx(Zt,{open:y.open,onOpenChange:I=>x({...y,open:I}),children:o.jsxs(Vt,{className:"bg-background border-border",children:[o.jsxs(qt,{children:[o.jsx(Ht,{children:"Delete Tag?"}),o.jsxs(Pn,{children:['Are you sure you want to delete "',(Ct=y.tag)==null?void 0:Ct.name,'"? This tag is used in ',((L=y.tag)==null?void 0:L.usageCount)||0," analyses. This action cannot be undone."]})]}),o.jsxs(Xr,{children:[o.jsx(q,{variant:"outline",onClick:()=>x({open:!1,tag:null}),children:"Cancel"}),o.jsx(q,{variant:"destructive",onClick:Qt,children:"Delete"})]})]})}),o.jsx(Zt,{open:v.open,onOpenChange:I=>b({...v,open:I}),children:o.jsxs(Vt,{className:"bg-background border-border",children:[o.jsxs(qt,{children:[o.jsx(Ht,{children:"Add Subcategory"}),o.jsxs(Pn,{children:['Create a new subcategory under "',v.parentName,'"',v.parentPath.length>0&&o.jsxs("span",{className:"block mt-1",children:["Path: ",o.jsx("code",{className:"bg-muted px-1 rounded",children:v.parentPath.join("  ")})]})]})]}),o.jsx(An,{placeholder:"Subcategory name",value:P,onChange:I=>G(I.target.value),onKeyDown:I=>{I.key==="Enter"&&P.trim()&&v.categoryKey&&(Ee.mutate({category:v.categoryKey,parentPath:v.parentPath,name:P.trim()}),G(""),b({open:!1,categoryKey:null,parentPath:[],parentName:""}))},autoFocus:!0}),o.jsxs(Xr,{children:[o.jsx(q,{variant:"outline",onClick:()=>b({open:!1,categoryKey:null,parentPath:[],parentName:""}),children:"Cancel"}),o.jsx(q,{onClick:()=>{P.trim()&&v.categoryKey&&(Ee.mutate({category:v.categoryKey,parentPath:v.parentPath,name:P.trim()}),G(""),b({open:!1,categoryKey:null,parentPath:[],parentName:""}))},disabled:!P.trim(),children:"Create"})]})]})}),o.jsx(Zt,{open:j.open,onOpenChange:I=>S({...j,open:I}),children:o.jsxs(Vt,{className:"bg-background border-border",children:[o.jsxs(qt,{children:[o.jsx(Ht,{children:"Rename Subcategory"}),o.jsxs(Pn,{children:['Renaming: "',j.currentName,'"']})]}),o.jsx(An,{placeholder:"New name",value:D,onChange:I=>R(I.target.value),onKeyDown:I=>{I.key==="Enter"&&D.trim()&&j.categoryKey&&(fe.mutate({category:j.categoryKey,subcategoryKey:j.subcategoryKey,newName:D.trim()}),R(""),S({open:!1,categoryKey:null,subcategoryKey:"",currentName:""}))},autoFocus:!0}),o.jsxs(Xr,{children:[o.jsx(q,{variant:"outline",onClick:()=>S({open:!1,categoryKey:null,subcategoryKey:"",currentName:""}),children:"Cancel"}),o.jsx(q,{onClick:()=>{D.trim()&&j.categoryKey&&(fe.mutate({category:j.categoryKey,subcategoryKey:j.subcategoryKey,newName:D.trim()}),R(""),S({open:!1,categoryKey:null,subcategoryKey:"",currentName:""}))},disabled:!D.trim(),children:"Rename"})]})]})}),o.jsx(Zt,{open:_.open,onOpenChange:I=>N({..._,open:I}),children:o.jsxs(Vt,{className:"bg-background border-border",children:[o.jsxs(qt,{children:[o.jsx(Ht,{children:"Delete Subcategory?"}),o.jsxs(Pn,{children:['Are you sure you want to delete "',_.subcategoryName,'"? This subcategory contains ',_.tagCount," tags."]})]}),o.jsxs("div",{className:"space-y-3 py-2",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"What would you like to do with the tags?"}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(q,{variant:"outline",className:"justify-start",onClick:()=>{_.categoryKey&&(ue.mutate({category:_.categoryKey,subcategoryKey:_.subcategoryKey,action:"move_to_parent"}),N({open:!1,categoryKey:null,subcategoryKey:"",subcategoryName:"",tagCount:0}))},children:"Move tags to parent category"}),o.jsx(q,{variant:"destructive",className:"justify-start",onClick:()=>{_.categoryKey&&(ue.mutate({category:_.categoryKey,subcategoryKey:_.subcategoryKey,action:"delete"}),N({open:!1,categoryKey:null,subcategoryKey:"",subcategoryName:"",tagCount:0}))},children:"Delete subcategory and all tags"})]})]}),o.jsx(Xr,{children:o.jsx(q,{variant:"outline",onClick:()=>N({open:!1,categoryKey:null,subcategoryKey:"",subcategoryName:"",tagCount:0}),children:"Cancel"})})]})})]})}function a9(){return o.jsx("div",{className:"h-[calc(100vh-4rem)]",children:o.jsx(o9,{})})}function i9(e,t){return d.useReducer((n,r)=>t[n][r]??n,e)}var n0="ScrollArea",[CR]=Nn(n0),[l9,Lr]=CR(n0),_R=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...i}=e,[l,c]=d.useState(null),[u,h]=d.useState(null),[f,m]=d.useState(null),[p,w]=d.useState(null),[g,y]=d.useState(null),[x,v]=d.useState(0),[b,j]=d.useState(0),[S,_]=d.useState(!1),[N,C]=d.useState(!1),E=qe(t,R=>c(R)),D=Al(s);return o.jsx(l9,{scope:n,type:r,dir:D,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:h,content:f,onContentChange:m,scrollbarX:p,onScrollbarXChange:w,scrollbarXEnabled:S,onScrollbarXEnabledChange:_,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:N,onScrollbarYEnabledChange:C,onCornerWidthChange:v,onCornerHeightChange:j,children:o.jsx(ye.div,{dir:D,...i,ref:E,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});_R.displayName=n0;var ER="ScrollAreaViewport",kR=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...a}=e,i=Lr(ER,n),l=d.useRef(null),c=qe(t,l,i.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(ye.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:o.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});kR.displayName=ER;var Es="ScrollAreaScrollbar",r0=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Lr(Es,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=s,l=e.orientation==="horizontal";return d.useEffect(()=>(l?a(!0):i(!0),()=>{l?a(!1):i(!1)}),[l,a,i]),s.type==="hover"?o.jsx(c9,{...r,ref:t,forceMount:n}):s.type==="scroll"?o.jsx(u9,{...r,ref:t,forceMount:n}):s.type==="auto"?o.jsx(TR,{...r,ref:t,forceMount:n}):s.type==="always"?o.jsx(s0,{...r,ref:t}):null});r0.displayName=Es;var c9=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Lr(Es,e.__scopeScrollArea),[a,i]=d.useState(!1);return d.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),i(!0)},h=()=>{c=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),o.jsx($t,{present:n||a,children:o.jsx(TR,{"data-state":a?"visible":"hidden",...r,ref:t})})}),u9=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Lr(Es,e.__scopeScrollArea),a=e.orientation==="horizontal",i=jm(()=>c("SCROLL_END"),100),[l,c]=i9("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return d.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),d.useEffect(()=>{const u=s.viewport,h=a?"scrollLeft":"scrollTop";if(u){let f=u[h];const m=()=>{const p=u[h];f!==p&&(c("SCROLL"),i()),f=p};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[s.viewport,a,c,i]),o.jsx($t,{present:n||l!=="hidden",children:o.jsx(s0,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Z(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Z(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),TR=d.forwardRef((e,t)=>{const n=Lr(Es,e.__scopeScrollArea),{forceMount:r,...s}=e,[a,i]=d.useState(!1),l=e.orientation==="horizontal",c=jm(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;i(l?u:h)}},10);return yl(n.viewport,c),yl(n.content,c),o.jsx($t,{present:r||a,children:o.jsx(s0,{"data-state":a?"visible":"hidden",...s,ref:t})})}),s0=d.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=Lr(Es,e.__scopeScrollArea),a=d.useRef(null),i=d.useRef(0),[l,c]=d.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=IR(l.viewport,l.content),h={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:m=>i.current=m};function f(m,p){return g9(m,i.current,l,p)}return n==="horizontal"?o.jsx(d9,{...h,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollLeft,p=yj(m,l,s.dir);a.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=f(m,s.dir))}}):n==="vertical"?o.jsx(h9,{...h,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollTop,p=yj(m,l);a.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=f(m))}}):null}),d9=d.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=Lr(Es,e.__scopeScrollArea),[i,l]=d.useState(),c=d.useRef(null),u=qe(t,c,a.onScrollbarXChange);return d.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(PR,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":bm(n)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.x),onDragScroll:h=>e.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(a.viewport){const m=a.viewport.scrollLeft+h.deltaX;e.onWheelScroll(m),DR(m,f)&&h.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:sf(i.paddingLeft),paddingEnd:sf(i.paddingRight)}})}})}),h9=d.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=Lr(Es,e.__scopeScrollArea),[i,l]=d.useState(),c=d.useRef(null),u=qe(t,c,a.onScrollbarYChange);return d.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(PR,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":bm(n)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.y),onDragScroll:h=>e.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(a.viewport){const m=a.viewport.scrollTop+h.deltaY;e.onWheelScroll(m),DR(m,f)&&h.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:sf(i.paddingTop),paddingEnd:sf(i.paddingBottom)}})}})}),[f9,RR]=CR(Es),PR=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:h,onResize:f,...m}=e,p=Lr(Es,n),[w,g]=d.useState(null),y=qe(t,E=>g(E)),x=d.useRef(null),v=d.useRef(""),b=p.viewport,j=r.content-r.viewport,S=Et(h),_=Et(c),N=jm(f,10);function C(E){if(x.current){const D=E.clientX-x.current.left,R=E.clientY-x.current.top;u({x:D,y:R})}}return d.useEffect(()=>{const E=D=>{const R=D.target;(w==null?void 0:w.contains(R))&&S(D,j)};return document.addEventListener("wheel",E,{passive:!1}),()=>document.removeEventListener("wheel",E,{passive:!1})},[b,w,j,S]),d.useEffect(_,[r,_]),yl(w,N),yl(p.content,N),o.jsx(f9,{scope:n,scrollbar:w,hasThumb:s,onThumbChange:Et(a),onThumbPointerUp:Et(i),onThumbPositionChange:_,onThumbPointerDown:Et(l),children:o.jsx(ye.div,{...m,ref:y,style:{position:"absolute",...m.style},onPointerDown:Z(e.onPointerDown,E=>{E.button===0&&(E.target.setPointerCapture(E.pointerId),x.current=w.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),C(E))}),onPointerMove:Z(e.onPointerMove,C),onPointerUp:Z(e.onPointerUp,E=>{const D=E.target;D.hasPointerCapture(E.pointerId)&&D.releasePointerCapture(E.pointerId),document.body.style.webkitUserSelect=v.current,p.viewport&&(p.viewport.style.scrollBehavior=""),x.current=null})})})}),rf="ScrollAreaThumb",AR=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=RR(rf,e.__scopeScrollArea);return o.jsx($t,{present:n||s.hasThumb,children:o.jsx(m9,{ref:t,...r})})}),m9=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,a=Lr(rf,n),i=RR(rf,n),{onThumbPositionChange:l}=i,c=qe(t,f=>i.onThumbChange(f)),u=d.useRef(void 0),h=jm(()=>{u.current&&(u.current(),u.current=void 0)},100);return d.useEffect(()=>{const f=a.viewport;if(f){const m=()=>{if(h(),!u.current){const p=v9(f,l);u.current=p,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[a.viewport,h,l]),o.jsx(ye.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Z(e.onPointerDownCapture,f=>{const p=f.target.getBoundingClientRect(),w=f.clientX-p.left,g=f.clientY-p.top;i.onThumbPointerDown({x:w,y:g})}),onPointerUp:Z(e.onPointerUp,i.onThumbPointerUp)})});AR.displayName=rf;var o0="ScrollAreaCorner",OR=d.forwardRef((e,t)=>{const n=Lr(o0,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?o.jsx(p9,{...e,ref:t}):null});OR.displayName=o0;var p9=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=Lr(o0,n),[a,i]=d.useState(0),[l,c]=d.useState(0),u=!!(a&&l);return yl(s.scrollbarX,()=>{var f;const h=((f=s.scrollbarX)==null?void 0:f.offsetHeight)||0;s.onCornerHeightChange(h),c(h)}),yl(s.scrollbarY,()=>{var f;const h=((f=s.scrollbarY)==null?void 0:f.offsetWidth)||0;s.onCornerWidthChange(h),i(h)}),u?o.jsx(ye.div,{...r,ref:t,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function sf(e){return e?parseInt(e,10):0}function IR(e,t){const n=e/t;return isNaN(n)?0:n}function bm(e){const t=IR(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function g9(e,t,n,r="ltr"){const s=bm(n),a=s/2,i=t||a,l=s-i,c=n.scrollbar.paddingStart+i,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,h=n.content-n.viewport,f=r==="ltr"?[0,h]:[h*-1,0];return MR([c,u],f)(e)}function yj(e,t,n="ltr"){const r=bm(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,i=t.content-t.viewport,l=a-r,c=n==="ltr"?[0,i]:[i*-1,0],u=pv(e,c);return MR([0,i],[0,l])(u)}function MR(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function DR(e,t){return e>0&&e<t}var v9=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return(function s(){const a={left:e.scrollLeft,top:e.scrollTop},i=n.left!==a.left,l=n.top!==a.top;(i||l)&&t(),n=a,r=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(r)};function jm(e,t){const n=Et(e),r=d.useRef(0);return d.useEffect(()=>()=>window.clearTimeout(r.current),[]),d.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function yl(e,t){const n=Et(t);en(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var $R=_R,y9=kR,x9=OR;const LR=d.forwardRef(({className:e,children:t,...n},r)=>o.jsxs($R,{ref:r,className:ee("relative overflow-hidden",e),...n,children:[o.jsx(y9,{className:"h-full w-full rounded-[inherit]",children:t}),o.jsx(FR,{}),o.jsx(x9,{})]}));LR.displayName=$R.displayName;const FR=d.forwardRef(({className:e,orientation:t="vertical",...n},r)=>o.jsx(r0,{ref:r,orientation:t,className:ee("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:o.jsx(AR,{className:"relative flex-1 rounded-full bg-border"})}));FR.displayName=r0.displayName;function wn(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function w9(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const Md=43200,xj=1440;let b9={};function j9(){return b9}function wj(e){const t=wn(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function rh(e,t){const n=wn(e),r=wn(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function S9(e){return w9(e,Date.now())}function N9(e,t){const n=wn(e),r=wn(t),s=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return s*12+a}function C9(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function _9(e,t){return+wn(e)-+wn(t)}function E9(e){const t=wn(e);return t.setHours(23,59,59,999),t}function k9(e){const t=wn(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function T9(e){const t=wn(e);return+E9(t)==+k9(t)}function R9(e,t){const n=wn(e),r=wn(t),s=rh(n,r),a=Math.abs(N9(n,r));let i;if(a<1)i=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*a);let l=rh(n,r)===-s;T9(wn(e))&&a===1&&rh(e,r)===1&&(l=!1),i=s*(a-Number(l))}return i===0?0:i}function P9(e,t,n){const r=_9(e,t)/1e3;return C9(n==null?void 0:n.roundingMethod)(r)}const A9={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},O9=(e,t,n)=>{let r;const s=A9[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Rp(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const I9={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},M9={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},D9={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$9={date:Rp({formats:I9,defaultWidth:"full"}),time:Rp({formats:M9,defaultWidth:"full"}),dateTime:Rp({formats:D9,defaultWidth:"full"})},L9={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},F9=(e,t,n,r)=>L9[e];function nc(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):i;s=e.formattingValues[l]||e.formattingValues[i]}else{const i=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[l]||e.values[i]}const a=e.argumentCallback?e.argumentCallback(t):t;return s[a]}}const z9={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},U9={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},B9={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},K9={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},V9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},q9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},H9=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},W9={ordinalNumber:H9,era:nc({values:z9,defaultWidth:"wide"}),quarter:nc({values:U9,defaultWidth:"wide",argumentCallback:e=>e-1}),month:nc({values:B9,defaultWidth:"wide"}),day:nc({values:K9,defaultWidth:"wide"}),dayPeriod:nc({values:V9,defaultWidth:"wide",formattingValues:q9,defaultFormattingWidth:"wide"})};function rc(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const i=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?Q9(l,f=>f.test(i)):G9(l,f=>f.test(i));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const h=t.slice(i.length);return{value:u,rest:h}}}function G9(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Q9(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Y9(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],a=t.match(e.parsePattern);if(!a)return null;let i=e.valueCallback?e.valueCallback(a[0]):a[0];i=n.valueCallback?n.valueCallback(i):i;const l=t.slice(s.length);return{value:i,rest:l}}}const J9=/^(\d+)(th|st|nd|rd)?/i,X9=/\d+/i,Z9={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},e7={any:[/^b/i,/^(a|c)/i]},t7={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},n7={any:[/1/i,/2/i,/3/i,/4/i]},r7={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},s7={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},o7={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},a7={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},i7={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},l7={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},c7={ordinalNumber:Y9({matchPattern:J9,parsePattern:X9,valueCallback:e=>parseInt(e,10)}),era:rc({matchPatterns:Z9,defaultMatchWidth:"wide",parsePatterns:e7,defaultParseWidth:"any"}),quarter:rc({matchPatterns:t7,defaultMatchWidth:"wide",parsePatterns:n7,defaultParseWidth:"any",valueCallback:e=>e+1}),month:rc({matchPatterns:r7,defaultMatchWidth:"wide",parsePatterns:s7,defaultParseWidth:"any"}),day:rc({matchPatterns:o7,defaultMatchWidth:"wide",parsePatterns:a7,defaultParseWidth:"any"}),dayPeriod:rc({matchPatterns:i7,defaultMatchWidth:"any",parsePatterns:l7,defaultParseWidth:"any"})},u7={code:"en-US",formatDistance:O9,formatLong:$9,formatRelative:F9,localize:W9,match:c7,options:{weekStartsOn:0,firstWeekContainsDate:1}};function d7(e,t,n){const r=j9(),s=(n==null?void 0:n.locale)??r.locale??u7,a=2520,i=rh(e,t);if(isNaN(i))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:i});let c,u;i>0?(c=wn(t),u=wn(e)):(c=wn(e),u=wn(t));const h=P9(u,c),f=(wj(u)-wj(c))/1e3,m=Math.round((h-f)/60);let p;if(m<2)return n!=null&&n.includeSeconds?h<5?s.formatDistance("lessThanXSeconds",5,l):h<10?s.formatDistance("lessThanXSeconds",10,l):h<20?s.formatDistance("lessThanXSeconds",20,l):h<40?s.formatDistance("halfAMinute",0,l):h<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):m===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",m,l);if(m<45)return s.formatDistance("xMinutes",m,l);if(m<90)return s.formatDistance("aboutXHours",1,l);if(m<xj){const w=Math.round(m/60);return s.formatDistance("aboutXHours",w,l)}else{if(m<a)return s.formatDistance("xDays",1,l);if(m<Md){const w=Math.round(m/xj);return s.formatDistance("xDays",w,l)}else if(m<Md*2)return p=Math.round(m/Md),s.formatDistance("aboutXMonths",p,l)}if(p=R9(u,c),p<12){const w=Math.round(m/Md);return s.formatDistance("xMonths",w,l)}else{const w=p%12,g=Math.trunc(p/12);return w<3?s.formatDistance("aboutXYears",g,l):w<9?s.formatDistance("overXYears",g,l):s.formatDistance("almostXYears",g+1,l)}}function h7(e,t){return d7(e,S9(e),t)}const f7=e=>h7(new Date(e),{addSuffix:!0}).replace(/minutes?/g,"mins").replace(/seconds?/g,"secs").replace(/hours?/g,"hrs").replace(/days?/g,"days").replace(/months?/g,"mos").replace(/years?/g,"yrs"),m7={pending:o.jsx(et,{className:"w-3 h-3 animate-spin text-yellow-400"}),success:o.jsx(Xn,{className:"w-3 h-3 text-green-400"}),error:o.jsx(Ws,{className:"w-3 h-3 text-red-400"}),cached:o.jsx(rv,{className:"w-3 h-3 text-blue-400"})},p7={pending:"bg-yellow-500/10 border-yellow-500/30",success:"bg-green-500/10 border-green-500/30",error:"bg-red-500/10 border-red-500/30",cached:"bg-blue-500/10 border-blue-500/30"},g7=e=>({openai:"OpenAI",gemini:"Gemini",perplexity:"Perplexity","perplexity-cleaner":"Perplexity Cleaner",exa:"Exa",health:"Health"})[e.toLowerCase()]||e.charAt(0).toUpperCase()+e.slice(1).toLowerCase(),v7=e=>{var n;const t=e.requestData||{};return e.service==="perplexity-cleaner"?t.date?` Resolving contradiction for ${t.date}`:" Resolving contradicted event":e.service==="perplexity"?t.date?` Fact-checking event for ${t.date}`:t.query?` Perplexity search: "${t.query.substring(0,50)}${t.query.length>50?"...":""}"`:" Perplexity analysis":e.service==="exa"?t.query?` Searching: "${t.query.length>60?t.query.substring(0,60)+"...":t.query}"`:t.dateRange?` News search for ${t.dateRange}`:" EXA news search":e.service==="openai"?e.tagName&&e.context==="tag-categorization"?` Categorizing tag: "${e.tagName}"`:(n=t.openaiResponse)!=null&&n.summary?` Generated summary: "${t.openaiResponse.summary.substring(0,60)}${t.openaiResponse.summary.length>60?"...":""}"`:t.date?` Analyzing news for ${t.date}`:t.purpose?` ${t.purpose}`:" OpenAI processing":`${e.method} ${e.endpoint}`};function zR(){const[e,t]=d.useState(!1),[n,r]=d.useState([]),[s,a]=d.useState({totalRequests:0,requestsLastHour:0,requestsLastMinute:0,errorRate:0,cacheHitRate:0,serviceBreakdown:{exa:0,openai:0,health:0}}),[i,l]=d.useState("disconnected"),c=d.useRef(null),u=d.useRef(null),h=d.useRef(null),f=()=>{var v;if(((v=c.current)==null?void 0:v.readyState)===WebSocket.OPEN)return;const x=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/api/monitor/ws`;l("connecting"),c.current=new WebSocket(x),c.current.onopen=()=>{console.log(" Connected to API monitor"),l("connected")},c.current.onmessage=b=>{try{const j=JSON.parse(b.data);j.type==="init"?(a(j.stats),r(j.recentRequests||[])):j.type==="request"?(r(S=>{const _=S.findIndex(N=>N.id===j.data.id);if(_>=0){const N=[...S];return N[_]={...N[_],...j.data},N}return[j.data,...S.slice(0,49)]}),h.current&&clearTimeout(h.current),h.current=setTimeout(m,1e3)):j.type==="request-updated"&&r(S=>{var N,C;const _=S.findIndex(E=>E.id===j.data.id);if(_>=0){const E=[...S],D=E[_],R=D.requestData||j.data.requestData?{...D.requestData,...j.data.requestData,openaiResponse:((N=j.data.requestData)==null?void 0:N.openaiResponse)||((C=D.requestData)==null?void 0:C.openaiResponse)}:void 0;return E[_]={...D,...j.data,requestData:R},E}return S})}catch(j){console.error("Failed to parse WebSocket message:",j)}},c.current.onclose=()=>{console.log(" Disconnected from API monitor"),l("disconnected"),u.current&&clearTimeout(u.current),u.current=setTimeout(f,3e3)},c.current.onerror=b=>{console.error(" WebSocket error:",b),l("disconnected")}},m=async()=>{try{const y=await fetch("/api/monitor/stats");if(y.ok){const x=await y.json();a(x)}}catch(y){console.error("Failed to fetch API stats:",y)}},p=async()=>{try{(await fetch("/api/monitor/clear",{method:"DELETE"})).ok&&(r([]),m())}catch(y){console.error("Failed to clear history:",y)}},w=async()=>{try{const y=await fetch("/api/monitor/requests?limit=50");if(y.ok){const x=await y.json();r(x)}}catch(y){console.error("Failed to fetch API requests:",y)}};d.useEffect(()=>{if(e){f();const y=setInterval(()=>{w(),m()},2e3);return w(),m(),()=>{clearInterval(y),c.current&&c.current.close(),u.current&&clearTimeout(u.current),h.current&&clearTimeout(h.current)}}return()=>{c.current&&c.current.close(),u.current&&clearTimeout(u.current),h.current&&clearTimeout(h.current)}},[e]);const g=()=>{switch(i){case"connected":return"text-green-500";case"connecting":return"text-yellow-500";default:return"text-red-500"}};return o.jsxs(Zt,{open:e,onOpenChange:t,children:[o.jsx(fx,{asChild:!0,children:o.jsx(q,{variant:"ghost",size:"sm",className:"relative",children:o.jsx(Qw,{className:`w-4 h-4 ${g()} ${s.requestsLastMinute>0?"animate-heartbeat":""}`})})}),o.jsxs(Vt,{className:"max-w-4xl max-h-[80vh] overflow-hidden",children:[o.jsx(qt,{className:"pb-3",children:o.jsxs(Ht,{className:"flex items-center gap-2",children:[o.jsx(Qw,{className:`w-5 h-5 ${g()}`}),"API Request Monitor",o.jsx(he,{variant:"outline",className:`ml-2 ${i==="connected"?"bg-green-500/20 text-green-400 border-green-500/30":i==="connecting"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-red-500/20 text-red-400 border-red-500/30"}`,children:i})]})}),o.jsxs("div",{className:"grid grid-cols-4 gap-3 mb-2",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-blue-600/5 border border-blue-500/20 rounded-lg p-4 backdrop-blur-sm",children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-2 font-medium",children:"Requests"}),o.jsx("div",{className:"text-2xl font-bold text-foreground mb-1",children:s.totalRequests}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.requestsLastMinute,"/min  ",s.requestsLastHour,"/hr"]})]}),o.jsxs("div",{className:`bg-gradient-to-br rounded-lg p-4 backdrop-blur-sm border ${s.errorRate>.15?"from-red-500/10 to-red-600/5 border-red-500/20":s.errorRate>.05?"from-yellow-500/10 to-yellow-600/5 border-yellow-500/20":"from-green-500/10 to-green-600/5 border-green-500/20"}`,children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-2 font-medium",children:"Error Rate"}),o.jsxs("div",{className:`text-2xl font-bold ${s.errorRate>.15?"text-red-400":s.errorRate>.05?"text-yellow-400":"text-green-400"}`,children:[(s.errorRate*100).toFixed(1),"%"]}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Cache: ",(s.cacheHitRate*100).toFixed(1),"%"]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-purple-600/5 border border-purple-500/20 rounded-lg p-4 backdrop-blur-sm",children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-2 font-medium",children:"Services"}),o.jsxs("div",{className:"text-xs space-y-1 text-foreground",children:[o.jsxs("div",{children:["Exa: ",s.serviceBreakdown.exa||s.serviceBreakdown.exa||0]}),o.jsxs("div",{children:["OpenAI: ",s.serviceBreakdown.openai||s.serviceBreakdown.openai||0]}),o.jsxs("div",{children:["Gemini: ",s.serviceBreakdown.gemini||0]}),o.jsxs("div",{children:["Perplexity: ",s.serviceBreakdown.perplexity||0]}),s.serviceBreakdown["perplexity-cleaner"]?o.jsxs("div",{children:["Perplexity Cleaner: ",s.serviceBreakdown["perplexity-cleaner"]]}):null]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-indigo-500/10 to-indigo-600/5 border border-indigo-500/20 rounded-lg p-4 backdrop-blur-sm",children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-2 font-medium",children:"Quality"}),o.jsxs("div",{className:"text-2xl font-bold text-foreground mb-1",children:[s.retryRate?(s.retryRate*100).toFixed(1):"0.0","%"]}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Retry Rate"})]})]}),s.errorBreakdown&&Object.values(s.errorBreakdown).some(y=>y>0)&&o.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 mb-3",children:[o.jsx("div",{className:"text-sm font-medium text-red-400 mb-2",children:"Error Breakdown"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-red-300",children:[s.errorBreakdown.validation>0&&o.jsxs("div",{children:["Validation: ",s.errorBreakdown.validation]}),s.errorBreakdown.network>0&&o.jsxs("div",{children:["Network: ",s.errorBreakdown.network]}),s.errorBreakdown["rate-limit"]>0&&o.jsxs("div",{children:["Rate Limit: ",s.errorBreakdown["rate-limit"]]}),s.errorBreakdown.parsing>0&&o.jsxs("div",{children:["Parsing: ",s.errorBreakdown.parsing]}),s.errorBreakdown.other>0&&o.jsxs("div",{children:["Other: ",s.errorBreakdown.other]})]})]}),o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Live Request Feed"}),o.jsxs(q,{onClick:p,variant:"ghost",size:"sm",className:"flex items-center gap-1.5 h-7 px-2 text-xs text-muted-foreground hover:text-foreground",children:[o.jsx(ku,{className:"w-3 h-3"}),"Clear"]})]}),o.jsx(LR,{className:"h-96",children:n.length===0?o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No API requests yet. Start using the app to see requests here."}):o.jsxs(Ea,{children:[o.jsx(ka,{children:o.jsxs(ur,{children:[o.jsx(yt,{className:"w-[40px]"}),o.jsx(yt,{className:"w-[90px]",children:"Service"}),o.jsx(yt,{children:"Description"}),o.jsx(yt,{className:"w-[80px]",children:"Duration"}),o.jsx(yt,{className:"w-[100px]",children:"Time"})]})}),o.jsx(Ta,{children:n.map((y,x)=>o.jsxs(ur,{className:`${p7[y.status]} hover:bg-muted/30`,children:[o.jsx(xt,{className:"py-2",children:m7[y.status]}),o.jsx(xt,{className:"py-2",children:o.jsx("span",{className:"text-xs font-medium text-foreground",children:g7(y.service)})}),o.jsx(xt,{className:"py-2",children:o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("div",{className:"text-xs text-foreground",children:v7(y)}),o.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:[y.method," ",y.endpoint]}),y.error&&o.jsx("div",{className:"text-xs text-red-400 mt-1",children:y.error})]})}),o.jsx(xt,{className:"py-2",children:y.duration?o.jsxs("span",{className:"text-xs text-muted-foreground",children:[y.duration,"ms"]}):o.jsx("span",{className:"text-xs text-muted-foreground",children:""})}),o.jsx(xt,{className:"py-2",children:o.jsx("span",{className:"text-xs text-muted-foreground",children:f7(y.timestamp)})})]},`${y.id}-${x}-${y.timestamp}`))})]})})]})]})}function Pp(){var rt,tn,z,ne,Se,Ne;const{sourceDate:e,date:t}=Cf(),[n,r]=_u(),{toast:s}=wr(),[a,i]=d.useState(null),[l,c]=d.useState(0),[u,h]=d.useState(!1),[f,m]=d.useState(null),[p,w]=d.useState([]),[g,y]=d.useState(null),[x,v]=d.useState({}),[b,j]=d.useState(null),[S,_]=d.useState("expanded"),N=n.startsWith("/violation"),C=n.startsWith("/fact-check"),E=N||C?t:e,{data:D}=ot({queryKey:["/api/quality-check/violations"],enabled:N}),R=(D==null?void 0:D.data)||[],P=R.find(F=>F.date===E),{data:G}=ot({queryKey:["/api/fact-check/results"],enabled:C}),{data:Q}=ot({queryKey:["/api/perplexity-fact-check/results"],enabled:C,queryFn:async()=>{const F=await fetch("/api/perplexity-fact-check/results");if(!F.ok)throw new Error("Failed to fetch Perplexity fact-check results");return F.json()}}),Y=((G==null?void 0:G.data)||[]).find(F=>F.date===E),T=((Q==null?void 0:Q.data)||[]).find(F=>F.date===E),B=(T==null?void 0:T.verdict)==="contradicted",$=B&&!!(T!=null&&T.correctDateText),W=(T==null?void 0:T.correctDateText)||null,{data:ae=[]}=ot({queryKey:["/api/conflicts/all-grouped"],queryFn:async()=>(await fetch("/api/conflicts/all-grouped")).json(),enabled:!N&&!C}),{data:_e}=ot({queryKey:[`/api/conflicts/cluster/${E}`],enabled:!N&&!C&&!!E}),ge=(N||C)&&E?{clusterId:C?`factcheck-${E}`:`violation-${E}`,dates:[E],conflictIds:[]}:_e,De=ae.findIndex(F=>F.clusterId===(ge==null?void 0:ge.clusterId)),Ee=(ge==null?void 0:ge.dates)||[],fe=iM({queries:Ee.map(F=>({queryKey:[`/api/analysis/date/${F}`],enabled:!!F}))}),ue=(rt=fe[0])==null?void 0:rt.data,$e=Ee.slice(1).map((F,re)=>({date:F,id:(ge==null?void 0:ge.conflictIds[re])||0})),oe=fe.slice(1),Be=at({mutationFn:async({date:F,articleId:re})=>{i(re);const de=await Tr("PUT",`/api/analysis/date/${F}/select-article`,{articleId:re});return{date:F,result:await de.json()}},onSuccess:({date:F})=>{i(null),X.invalidateQueries({queryKey:[`/api/analysis/date/${F}`]}),F===E&&X.invalidateQueries({queryKey:[`/api/analysis/date/${E}`]}),s({title:"Article Selected",description:"Summary updated with selected article"})},onError:F=>{i(null),s({variant:"destructive",title:"Selection Failed",description:"Failed to update summary"})}}),Me=(F,re)=>{a||Be.isPending||Be.mutate({date:F,articleId:re})},{data:Ue}=ot({queryKey:[`/api/analysis/date/${W}`],enabled:C&&!!W&&!!$}),Oe=at({mutationFn:async F=>{const re=await fetch("/api/cleaner/resolve-contradiction",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:F})});if(!re.ok){const de=await re.json();throw new Error(de.error||"Failed to resolve contradiction")}return re.json()},onSuccess:async F=>{s({title:"Resolution Successful",description:F.message||`Event for ${E} has been resolved.`,variant:"default"}),await X.invalidateQueries({queryKey:["/api/analysis/date",E]}),W&&await X.invalidateQueries({queryKey:["/api/analysis/date",W]}),await X.invalidateQueries({queryKey:["/api/perplexity-fact-check/results"]}),await X.invalidateQueries({queryKey:["/api/fact-check/results"]})},onError:F=>{s({title:"Resolution Failed",description:F.message||"An unexpected error occurred.",variant:"destructive"})}}),He=at({mutationFn:async()=>(await Tr("DELETE",`/api/conflicts/resolve/${E}`)).json(),onSuccess:()=>{X.invalidateQueries({queryKey:["/api/conflicts/all-grouped"]}),X.invalidateQueries({queryKey:["/api/conflicts/all"]}),X.invalidateQueries({queryKey:["/api/conflicts"]}),s({title:"Conflict Resolved",description:"All changes saved and conflict removed"}),r("/cleaner")},onError:()=>{s({variant:"destructive",title:"Error",description:"Failed to resolve conflict"})}}),dt=at({mutationFn:async()=>Ee.length?(await Tr("POST","/api/conflicts/ai-recommendations",{sourceDate:Ee[0],duplicateDates:Ee.slice(1)})).json():{groups:[],recommendations:[],overallStrategy:""},onSuccess:F=>{const re=F.recommendations.map(de=>{var st;const xe=Ee.findIndex(bt=>bt===de.date),pe=(st=fe[xe])==null?void 0:st.data;let pt="bitcoin";if(de.articleId&&pe&&pe.tieredArticles){const{bitcoin:bt=[],crypto:Ze=[],macro:gt=[]}=pe.tieredArticles;bt.some(ve=>ve.id===de.articleId)?pt="bitcoin":Ze.some(ve=>ve.id===de.articleId)?pt="crypto":gt.some(ve=>ve.id===de.articleId)&&(pt="macro")}return{...de,category:pt}});m({...F,recommendations:re}),s({title:"Strategic Analysis Ready",description:`${F.groups.length} theme groups with ${re.length} recommendations`})},onError:()=>{s({variant:"destructive",title:"Error",description:"Failed to get AI recommendations"})}}),nt=at({mutationFn:async()=>Ee.length?(await Tr("POST","/api/conflicts/smart-dedup",{sourceDate:Ee[0],duplicateDates:Ee.slice(1)})).json():{suggestions:[],overlapGroups:[]},onSuccess:F=>{w(F.suggestions),Ee.forEach(re=>{X.invalidateQueries({queryKey:[`/api/analysis/date/${re}`]})}),s({title:"Smart Dedup Complete",description:`Found ${F.overlapGroups.length} overlapping topics. ${F.suggestions.length} alternative articles suggested.`})},onError:()=>{s({variant:"destructive",title:"Error",description:"Failed to perform smart deduplication"})}}),mt=async()=>{if((N||C)&&g===E&&x[E])try{await J.mutateAsync({date:E,summary:x[E]})}catch{return}r(N?"/cleaner?tab=quality":C?"/cleaner?tab=factcheck":"/cleaner")},Qt=()=>{h(!0)},wt=()=>{He.mutate()},Ot=()=>{dt.mutate()},Fe=()=>{nt.mutate()},Ct=F=>{F.action==="switch"&&F.articleId&&Me(F.date,F.articleId)},L=F=>{Me(F.date,F.suggestedArticleId)},I=(F,re)=>{y(F),v(de=>({...de,[F]:re}))},U=(F,re)=>{v(de=>({...de,[F]:re}))},V=F=>{y(null),v(re=>{const de={...re};return delete de[F],de})},J=at({mutationFn:async({date:F,summary:re})=>(await Tr("PATCH",`/api/analysis/date/${F}`,{summary:re})).json(),onSuccess:(F,re)=>{X.invalidateQueries({queryKey:[`/api/analysis/date/${re.date}`]}),y(null),v(de=>{const xe={...de};return delete xe[re.date],xe}),s({title:"Summary Updated",description:"The summary has been saved successfully"})},onError:()=>{s({variant:"destructive",title:"Error",description:"Failed to save summary"})}}),ie=at({mutationFn:async F=>(j(F),(await Tr("POST",`/api/analysis/date/${F}/reanalyze-all`,{})).json()),onSuccess:(F,re)=>{j(null),X.invalidateQueries({queryKey:[`/api/analysis/date/${re}`]}),s({title:"Re-analysis Complete",description:`Fetched ${F.totalArticles} articles from all tiers. Select an article to generate summary.`})},onError:(F,re)=>{j(null),s({variant:"destructive",title:"Re-analysis Failed",description:"Failed to fetch news from all tiers"})}}),Pe=()=>{if(De>0){const F=ae[De-1];r(`/conflict/${F.dates[0]}`)}},Ae=()=>{if(De<ae.length-1){const F=ae[De+1];r(`/conflict/${F.dates[0]}`)}},Ge=F=>new Date(F).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),Xe=(F,re,de=!1)=>{var pt,st,bt,Ze;if(!(F!=null&&F.tieredArticles))return o.jsx("div",{className:"text-sm text-slate-500",children:"No cached news available"});const xe=(pt=F.analysis)==null?void 0:pt.topArticleId,pe=F.winningTier||"bitcoin";return[...F.tieredArticles.bitcoin||[],...F.tieredArticles.crypto||[],...F.tieredArticles.macro||[]],o.jsxs(hm,{defaultValue:pe,className:"w-full",children:[o.jsxs(qu,{className:"grid w-full grid-cols-3",children:[o.jsxs(gr,{value:"bitcoin",children:["Bitcoin (",((st=F.tieredArticles.bitcoin)==null?void 0:st.length)||0,")"]}),o.jsxs(gr,{value:"crypto",children:["Crypto (",((bt=F.tieredArticles.crypto)==null?void 0:bt.length)||0,")"]}),o.jsxs(gr,{value:"macro",children:["Macro (",((Ze=F.tieredArticles.macro)==null?void 0:Ze.length)||0,")"]})]}),["bitcoin","crypto","macro"].map(gt=>{var ve;return o.jsx(ss,{value:gt,className:"space-y-2 max-h-96 overflow-y-auto",children:(((ve=F.tieredArticles)==null?void 0:ve[gt])||[]).map(ze=>{const kt=ze.id===xe;return o.jsx(jt,{className:`p-3 ${kt?"border-orange-500 bg-orange-50":""}`,children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[o.jsx(q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>Me(re,ze.id),disabled:a===ze.id||Be.isPending,"data-testid":`select-article-${ze.id}`,children:a===ze.id?o.jsx(pn,{className:"w-4 h-4 animate-spin text-orange-600"}):kt?o.jsx(Rr,{className:"w-4 h-4 fill-orange-600 text-orange-600"}):o.jsx(Rr,{className:"w-4 h-4 text-slate-400 hover:text-orange-600 transition-colors"})}),o.jsx(q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>window.open(ze.url,"_blank"),title:"Open article in new tab","data-testid":`open-article-${ze.id}`,children:o.jsx(Tf,{className:"w-4 h-4 text-slate-400 hover:text-blue-600 transition-colors"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"text-sm font-semibold text-slate-900 truncate",children:ze.title}),o.jsx("p",{className:"text-xs text-slate-600 line-clamp-2 mt-1",children:ze.summary}),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx("span",{className:"text-xs text-slate-500",children:ze.author||"Unknown"}),o.jsx("span",{className:"text-xs text-slate-400",children:""}),o.jsx("span",{className:"text-xs text-slate-500",children:new Date(ze.publishedDate).toLocaleDateString()})]})]})]})},ze.id)})},gt)})]})};return!ge||!Ee.length?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"text-center",children:o.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Loading cluster..."})})}):o.jsxs("div",{className:"fixed inset-0 bg-white z-50 flex flex-col",children:[o.jsx("div",{className:"border-b bg-slate-50 p-4",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(q,{variant:"ghost",size:"sm",onClick:mt,"data-testid":"button-close-cockpit",children:o.jsx(On,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-slate-900",children:N?"Quality Violation Editor":C?"Fact-Check Review":"Conflict Resolution Cockpit"}),o.jsx("p",{className:"text-sm text-slate-600",children:N?"Fix quality violations and browse articles":C?"Review fact-check verdict and browse articles":"Review and resolve duplicate events"})]})]}),N&&P&&o.jsx("div",{className:"flex flex-wrap gap-2",children:P.violations.map((F,re)=>o.jsx(he,{variant:"outline",className:"bg-red-100 text-red-700 border-red-300",children:F},re))}),C&&(T||Y)&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[((T==null?void 0:T.verdict)||(Y==null?void 0:Y.verdict))==="verified"&&o.jsxs(he,{variant:"outline",className:"bg-green-100 text-green-700 border-green-300 flex items-center gap-1",children:[o.jsx(Ai,{className:"w-3 h-3"}),"Verified"]}),((T==null?void 0:T.verdict)||(Y==null?void 0:Y.verdict))==="contradicted"&&o.jsxs(he,{variant:"outline",className:"bg-red-100 text-red-700 border-red-300 flex items-center gap-1",children:[o.jsx(uC,{className:"w-3 h-3"}),"Contradicted"]}),((T==null?void 0:T.verdict)||(Y==null?void 0:Y.verdict))==="uncertain"&&o.jsxs(he,{variant:"outline",className:"bg-amber-100 text-amber-700 border-amber-300 flex items-center gap-1",children:[o.jsx(Ws,{className:"w-3 h-3"}),"Uncertain"]}),o.jsxs(he,{variant:"outline",className:"text-xs",children:["Confidence: ",Math.round((T==null?void 0:T.confidence)||(Y==null?void 0:Y.confidence)||0),"%"]})]}),((T==null?void 0:T.reasoning)||(Y==null?void 0:Y.reasoning))&&o.jsx("p",{className:"text-xs text-slate-600 max-w-md",children:(T==null?void 0:T.reasoning)||(Y==null?void 0:Y.reasoning)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(q,{variant:"outline",size:"sm",onClick:()=>_(S==="expanded"?"compact":"expanded"),"data-testid":"button-toggle-view",title:S==="expanded"?"Switch to Compact View":"Switch to Expanded View",children:S==="expanded"?o.jsxs(o.Fragment,{children:[o.jsx(gD,{className:"w-4 h-4 mr-2"}),"Compact"]}):o.jsxs(o.Fragment,{children:[o.jsx(pD,{className:"w-4 h-4 mr-2"}),"Expanded"]})}),!N&&!C&&o.jsxs(q,{variant:"outline",size:"sm",onClick:Ot,disabled:dt.isPending,"data-testid":"button-ask-ai",children:[dt.isPending?o.jsx(et,{className:"w-4 h-4 animate-spin mr-2"}):o.jsx(lr,{className:"w-4 h-4 mr-2"}),"Ask AI for Help"]}),C&&B&&o.jsxs(q,{variant:"default",size:"sm",onClick:()=>Oe.mutate(E),disabled:Oe.isPending,className:"bg-blue-600 hover:bg-blue-700","data-testid":"button-ai-resolve",children:[Oe.isPending?o.jsx(et,{className:"w-4 h-4 animate-spin mr-2"}):o.jsx(lr,{className:"w-4 h-4 mr-2"}),"AI Resolve"]}),!N&&!C&&o.jsxs(q,{variant:"outline",size:"sm",onClick:Fe,disabled:nt.isPending,"data-testid":"button-smart-dedup",className:"bg-purple-50 hover:bg-purple-100 border-purple-200",children:[nt.isPending?o.jsx(et,{className:"w-4 h-4 animate-spin mr-2"}):o.jsx(lr,{className:"w-4 h-4 mr-2 text-purple-600"}),"Smart Dedup"]}),N||C?o.jsxs(q,{variant:"default",size:"sm",onClick:mt,"data-testid":"button-save-close",className:"bg-green-600 hover:bg-green-700",children:[o.jsx(Ai,{className:"w-4 h-4 mr-2"}),"Save & Close"]}):o.jsxs(q,{variant:"default",size:"sm",onClick:Qt,disabled:He.isPending,"data-testid":"button-done-delete",className:"bg-green-600 hover:bg-green-700",children:[He.isPending?o.jsx(et,{className:"w-4 h-4 animate-spin mr-2"}):o.jsx(Ai,{className:"w-4 h-4 mr-2"}),"Done & Delete"]}),o.jsx(zR,{}),!N&&!C&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"h-6 w-px bg-slate-300 mx-2"}),o.jsxs("span",{className:"text-sm text-slate-600",children:[De+1," / ",ae.length]}),o.jsx(q,{variant:"outline",size:"sm",onClick:Pe,disabled:De===0,"data-testid":"button-prev-conflict",children:o.jsx(Xg,{className:"w-4 h-4"})}),o.jsx(q,{variant:"outline",size:"sm",onClick:Ae,disabled:De===ae.length-1,"data-testid":"button-next-conflict",children:o.jsx(ul,{className:"w-4 h-4"})})]}),N&&R.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"h-6 w-px bg-slate-300 mx-2"}),o.jsxs("span",{className:"text-sm text-slate-600",children:[R.findIndex(F=>F.date===E)+1," / ",R.length]}),o.jsx(q,{variant:"outline",size:"sm",onClick:()=>{const F=R.findIndex(re=>re.date===E);F>0&&r(`/violation/${R[F-1].date}`)},disabled:R.findIndex(F=>F.date===E)===0,"data-testid":"button-prev-violation",children:o.jsx(Xg,{className:"w-4 h-4"})}),o.jsx(q,{variant:"outline",size:"sm",onClick:()=>{const F=R.findIndex(re=>re.date===E);F<R.length-1&&r(`/violation/${R[F+1].date}`)},disabled:R.findIndex(F=>F.date===E)===R.length-1,"data-testid":"button-next-violation",children:o.jsx(ul,{className:"w-4 h-4"})})]})]})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:o.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[o.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Mo,{className:"w-6 h-6 text-blue-600"}),o.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Source Date"}),o.jsx(he,{variant:"default",className:"ml-2",children:"Canonical"})]}),o.jsxs("div",{className:S==="expanded"?"grid grid-cols-1 lg:grid-cols-3 gap-6":"space-y-6",children:[o.jsx("div",{className:S==="expanded"?"lg:col-span-2":"",children:o.jsxs("div",{className:"bg-white rounded-lg p-4 border",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"font-semibold text-slate-900",children:Ge(E)}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-sm text-slate-500",children:[g===E?((tn=x[E])==null?void 0:tn.length)||0:((ne=(z=ue==null?void 0:ue.analysis)==null?void 0:z.summary)==null?void 0:ne.length)||0," chars"]}),g!==E&&o.jsx(q,{variant:"ghost",size:"sm",onClick:()=>{var F;return I(E,((F=ue==null?void 0:ue.analysis)==null?void 0:F.summary)||"")},"data-testid":`edit-summary-${E}`,children:o.jsx(dl,{className:"w-4 h-4"})})]})]}),g===E?o.jsxs(o.Fragment,{children:[o.jsx(lu,{value:x[E]||"",onChange:F=>U(E,F.target.value),className:"text-slate-800 text-lg leading-relaxed mb-3 min-h-[100px] bg-white",placeholder:"Edit the summary...","data-testid":`textarea-summary-${E}`}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(q,{size:"sm",variant:"outline",onClick:()=>V(E),"data-testid":`cancel-edit-${E}`,children:"Cancel"}),o.jsxs(q,{size:"sm",onClick:()=>J.mutate({date:E,summary:x[E]||""}),disabled:J.isPending,className:"bg-green-600 hover:bg-green-700","data-testid":`save-edit-${E}`,children:[J.isPending?o.jsx(et,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(ev,{className:"w-4 h-4 mr-2"}),"Save"]})]})]}):o.jsx("p",{className:"text-slate-700",children:(Se=ue==null?void 0:ue.analysis)==null?void 0:Se.summary})]})}),S==="expanded"&&o.jsx("div",{className:"lg:col-span-1",children:o.jsxs("div",{className:"bg-white rounded-lg p-4 border",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"font-semibold text-slate-900",children:"Cached News"}),o.jsxs(q,{size:"sm",variant:"outline",onClick:()=>E&&ie.mutate(E),disabled:b===E||ie.isPending,"data-testid":`reanalyze-${E}`,title:"Fetch news from all tiers (Bitcoin, Crypto, Macro)",children:[b===E?o.jsx(et,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(pn,{className:"w-4 h-4 mr-2"}),"Re-analyze"]})]}),Xe(ue,E)]})})]})]}),C&&$&&W&&o.jsxs("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-lg p-6",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Mo,{className:"w-6 h-6 text-amber-600"}),o.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Suggested Correct Date"}),o.jsx(he,{variant:"outline",className:"ml-2 bg-amber-100 text-amber-700 border-amber-300",children:"Perplexity Suggested"})]}),o.jsxs("div",{className:S==="expanded"?"grid grid-cols-1 lg:grid-cols-3 gap-6":"space-y-6",children:[o.jsx("div",{className:S==="expanded"?"lg:col-span-2":"",children:o.jsxs("div",{className:"bg-white rounded-lg p-4 border",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsx("h3",{className:"font-semibold text-slate-900",children:/^\d{4}-\d{2}-\d{2}$/.test(W)?Ge(W):W})}),(Ne=Ue==null?void 0:Ue.analysis)!=null&&Ne.summary?o.jsx("p",{className:"text-slate-700",children:Ue.analysis.summary}):o.jsx("p",{className:"text-slate-500 italic",children:"No analysis exists for this date yet. The AI resolution may move the summary here."})]})}),o.jsx("div",{className:"",children:Ue&&Xe(Ue,W)})]})]}),f&&o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-300 rounded-lg p-6 shadow-lg",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(lr,{className:"w-6 h-6 text-blue-600"}),o.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Strategic Cluster Analysis"}),o.jsx(he,{variant:"default",className:"bg-blue-600",children:"AI-Powered"})]}),o.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4 border border-blue-200",children:[o.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Overall Resolution Strategy"}),o.jsx("p",{className:"text-sm text-slate-700",children:f.overallStrategy})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h3",{className:"text-sm font-semibold text-slate-900",children:["Theme Groups (",f.groups.length,")"]}),f.groups.map((F,re)=>o.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(he,{variant:"outline",className:"bg-slate-100 text-slate-800",children:F.theme}),o.jsxs("span",{className:"text-xs text-slate-500",children:[F.dates.length," date",F.dates.length>1?"s":""]})]}),o.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:F.dates.map((de,xe)=>o.jsx(he,{variant:"secondary",className:"text-xs",children:de},xe))})]}),o.jsx(he,{variant:"outline",className:F.action.toLowerCase().includes("keep")?"bg-green-100 text-green-700 border-green-300":"bg-yellow-100 text-yellow-700 border-yellow-300",children:F.action})]}),o.jsx("p",{className:"text-xs text-slate-600",children:F.reasoning})]},re))]})]}),o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:["Duplicate Dates (",$e.length,")"]}),o.jsx("div",{className:"space-y-4",children:$e.map(({date:F,id:re},de)=>{var pt,st,bt,Ze,gt;const xe=(pt=oe[de])==null?void 0:pt.data,pe=f==null?void 0:f.recommendations.find(ve=>ve.date===F);return o.jsx("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-lg p-6",children:o.jsxs("div",{className:S==="expanded"?"grid grid-cols-1 lg:grid-cols-3 gap-6":"space-y-6",children:[o.jsx("div",{className:S==="expanded"?"lg:col-span-2":"",children:o.jsxs("div",{className:"bg-white rounded-lg p-4 border",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"font-semibold text-slate-900",children:Ge(F)}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-sm text-slate-500",children:[g===F?((st=x[F])==null?void 0:st.length)||0:((Ze=(bt=xe==null?void 0:xe.analysis)==null?void 0:bt.summary)==null?void 0:Ze.length)||0," chars"]}),g!==F&&o.jsx(q,{variant:"ghost",size:"sm",onClick:()=>{var ve;return I(F,((ve=xe==null?void 0:xe.analysis)==null?void 0:ve.summary)||"")},"data-testid":`edit-summary-${F}`,children:o.jsx(dl,{className:"w-4 h-4"})})]})]}),g===F?o.jsxs(o.Fragment,{children:[o.jsx(lu,{value:x[F]||"",onChange:ve=>U(F,ve.target.value),className:"text-slate-800 text-lg leading-relaxed mb-3 min-h-[100px] bg-white",placeholder:"Edit the summary...","data-testid":`textarea-summary-${F}`}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(q,{size:"sm",variant:"outline",onClick:()=>V(F),"data-testid":`cancel-edit-${F}`,children:"Cancel"}),o.jsxs(q,{size:"sm",onClick:()=>J.mutate({date:F,summary:x[F]||""}),disabled:J.isPending,className:"bg-green-600 hover:bg-green-700","data-testid":`save-edit-${F}`,children:[J.isPending?o.jsx(et,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(ev,{className:"w-4 h-4 mr-2"}),"Save"]})]})]}):o.jsx("p",{className:"text-slate-700",children:((gt=xe==null?void 0:xe.analysis)==null?void 0:gt.summary)||"No summary available"}),(()=>{const ve=p.find(ze=>ze.date===F);return ve?o.jsx("div",{className:"mt-4 p-4 bg-purple-50 border-2 border-purple-300 rounded-lg",children:o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(lr,{className:"w-5 h-5 text-purple-600"}),o.jsx("span",{className:"text-sm font-bold text-purple-900",children:"Smart Dedup Suggestion"})]}),o.jsxs("div",{className:"space-y-2 mb-3",children:[o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(he,{variant:"outline",className:"bg-red-100 text-red-700 border-red-300 shrink-0",children:"Current Topic"}),o.jsx("p",{className:"text-sm text-slate-700 flex-1",children:ve.currentTopic})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(he,{variant:"outline",className:"bg-green-100 text-green-700 border-green-300 shrink-0",children:"Suggested Topic"}),o.jsx("p",{className:"text-sm text-slate-700 flex-1",children:ve.newTopic})]})]}),o.jsxs("div",{className:"bg-white p-2 rounded border border-purple-200 mb-2",children:[o.jsx("p",{className:"text-xs text-slate-600 font-semibold mb-1",children:"AI Reasoning:"}),o.jsx("p",{className:"text-xs text-slate-700",children:ve.reasoning})]}),o.jsxs("p",{className:"text-xs text-purple-600 font-mono",children:["Article ID: ",ve.suggestedArticleId]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(q,{size:"sm",variant:"outline",onClick:()=>w(ze=>ze.filter(kt=>kt.date!==F)),"data-testid":`reject-smart-dedup-${F}`,children:"Reject"}),o.jsx(q,{size:"sm",onClick:()=>{L(ve),w(ze=>ze.filter(kt=>kt.date!==F))},"data-testid":`accept-smart-dedup-${F}`,className:"bg-purple-600 hover:bg-purple-700",children:"Accept"})]})]})}):null})(),pe&&o.jsx("div",{className:`mt-4 p-3 ${pe.action==="keep"?"bg-green-50 border border-green-200":"bg-blue-50 border border-blue-200"} rounded-lg`,children:o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(lr,{className:"w-4 h-4 text-blue-600"}),o.jsx("span",{className:"text-sm font-semibold text-blue-900",children:"AI Recommendation"}),o.jsx(he,{variant:"outline",className:pe.action==="keep"?"bg-green-100 text-green-700 border-green-300":"bg-yellow-100 text-yellow-700 border-yellow-300",children:pe.action.toUpperCase()}),pe.category&&o.jsx(he,{variant:"outline",className:`text-xs ${pe.category==="bitcoin"?"bg-orange-100 text-orange-700 border-orange-300":pe.category==="crypto"?"bg-purple-100 text-purple-700 border-purple-300":"bg-blue-100 text-blue-700 border-blue-300"}`,children:pe.category})]}),pe.action==="switch"&&pe.newTopic&&o.jsxs("div",{className:"mb-2 p-2 bg-white rounded border border-blue-200",children:[o.jsx("p",{className:"text-xs text-slate-600 font-semibold mb-1",children:"Suggested Topic:"}),o.jsx("p",{className:"text-sm text-slate-800",children:pe.newTopic})]}),o.jsx("p",{className:"text-sm text-slate-700 mb-2",children:pe.reasoning}),pe.articleId&&o.jsxs("p",{className:"text-xs text-slate-500",children:["Article ID: ",pe.articleId]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(q,{size:"sm",variant:"outline",onClick:()=>m(ve=>ve?{...ve,recommendations:ve.recommendations.filter(ze=>ze.date!==F)}:null),"data-testid":`reject-recommendation-${F}`,children:"Dismiss"}),pe.action==="switch"&&pe.articleId&&o.jsx(q,{size:"sm",onClick:()=>{Ct(pe),m(ve=>ve?{...ve,recommendations:ve.recommendations.filter(ze=>ze.date!==F)}:null)},"data-testid":`accept-recommendation-${F}`,className:"bg-green-600 hover:bg-green-700",children:"Apply Switch"})]})]})})]})}),S==="expanded"&&o.jsx("div",{className:"lg:col-span-1",children:o.jsxs("div",{className:"bg-white rounded-lg p-4 border",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"font-semibold text-slate-900",children:"Cached News"}),o.jsxs(q,{size:"sm",variant:"outline",onClick:()=>ie.mutate(F),disabled:b===F||ie.isPending,"data-testid":`reanalyze-${F}`,title:"Fetch news from all tiers (Bitcoin, Crypto, Macro)",children:[b===F?o.jsx(et,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(pn,{className:"w-4 h-4 mr-2"}),"Re-analyze"]})]}),Xe(xe,F)]})})]})},re)})})]})]})}),o.jsx(Hx,{open:u,onOpenChange:h,children:o.jsxs(sm,{children:[o.jsxs(om,{children:[o.jsx(im,{children:"Confirm Resolution"}),o.jsx(lm,{children:"Are you sure you want to mark this conflict as resolved? This will save all current article selections and remove the conflict from the database."})]}),o.jsxs(am,{children:[o.jsx(um,{children:"Cancel"}),o.jsx(cm,{onClick:wt,className:"bg-green-600 hover:bg-green-700",children:"Confirm & Delete"})]})]})})]})}const y7={SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd0ZmJwdm9obm1tY3ZocmJxYXlxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyODM3NTksImV4cCI6MjA3ODg1OTc1OX0.tc76cHxWVy8bR_mWOvPkfDpBl365HyWRh7-bK1fwz8U",SUPABASE_URL:"https://gtfbpvohnmmcvhrbqayq.supabase.co"},zi=y7,bj=zi.VITE_SUPABASE_URL??zi.SUPABASE_URL??zi.PUBLIC_SUPABASE_URL,jj=zi.VITE_SUPABASE_ANON_KEY??zi.SUPABASE_ANON_KEY??zi.PUBLIC_SUPABASE_ANON_KEY,li=bj&&jj?IT(bj,jj,{auth:{persistSession:!1}}):null;function x7(){const[e,t]=d.useState([]),[n,r]=d.useState(!0),[s,a]=d.useState(!1),[i,l]=d.useState(!1),[c,u]=d.useState(null),[h,f]=d.useState({title:"",details:"",importance:1}),m=!!li,p=async(g=!0)=>{if(!li)return;g?r(!0):a(!0);const{data:y,error:x}=await li.from("isolated_lab_samples").select("*").order("created_at",{ascending:!1});x?u(x.message):(u(null),t(y??[])),g?r(!1):a(!1)};d.useEffect(()=>{if(!li){u("Supabase credentials are missing. Please set SUPABASE_URL and SUPABASE_ANON_KEY (VITE_/PUBLIC_ prefixes also work)."),r(!1);return}p()},[]);const w=async g=>{if(g.preventDefault(),!li)return;if(!h.title.trim()){u("Title is required.");return}l(!0),u(null);const{error:y}=await li.from("isolated_lab_samples").insert({title:h.title.trim(),details:h.details.trim()||null,importance:h.importance});y?u(y.message):(f({title:"",details:"",importance:1}),p(!1)),l(!1)};return o.jsx("div",{style:Tt.wrapper,children:o.jsxs("div",{style:Tt.card,children:[o.jsxs("header",{style:Tt.header,children:[o.jsxs("div",{children:[o.jsx("p",{style:Tt.eyebrow,children:"Supabase Lab"}),o.jsx("h1",{style:Tt.title,children:"Isolated Testing Ground"}),o.jsxs("p",{style:Tt.subtitle,children:["Minimal React page that talks directly to the Supabase table",o.jsx("code",{style:Tt.code,children:"isolated_lab_samples"}),"."]})]}),o.jsx("button",{style:Tt.refreshButton,onClick:()=>p(!1),disabled:!m||n||s,children:s?"Refreshing":"Manual Refresh"})]}),!m&&o.jsx("div",{style:Tt.alert,children:"Supabase client is not configured. Set environment variables and reload."}),c&&o.jsx("div",{style:Tt.error,children:c}),o.jsx("section",{children:o.jsxs("form",{style:Tt.form,onSubmit:w,children:[o.jsxs("label",{style:Tt.label,children:["Title",o.jsx("input",{style:Tt.input,type:"text",value:h.title,onChange:g=>f(y=>({...y,title:g.target.value})),placeholder:"Quick headline",required:!0,disabled:!m||i})]}),o.jsxs("label",{style:Tt.label,children:["Details",o.jsx("textarea",{style:{...Tt.input,minHeight:80,resize:"vertical"},value:h.details,onChange:g=>f(y=>({...y,details:g.target.value})),placeholder:"Longer note for context (optional)",disabled:!m||i})]}),o.jsxs("label",{style:Tt.label,children:["Importance (0-5)",o.jsx("input",{style:Tt.input,type:"number",min:0,max:5,step:1,value:h.importance,onChange:g=>f(y=>({...y,importance:Number(g.target.value)})),disabled:!m||i})]}),o.jsx("button",{style:Tt.primaryButton,type:"submit",disabled:!m||i,children:i?"Saving":"Insert Row"})]})}),o.jsxs("section",{children:[o.jsxs("h2",{style:Tt.sectionTitle,children:["Latest rows (",e.length,")"]}),n?o.jsx("p",{style:Tt.muted,children:"Loading data"}):e.length===0?o.jsx("p",{style:Tt.muted,children:"No entries yet. Add one above to populate the table."}):o.jsx("div",{style:Tt.list,children:e.map(g=>o.jsxs("article",{style:Tt.listItem,children:[o.jsxs("div",{style:Tt.listItemHeader,children:[o.jsx("strong",{children:g.title}),o.jsxs("span",{style:Tt.badge,children:["importance ",g.importance]})]}),g.details&&o.jsx("p",{style:Tt.details,children:g.details}),o.jsx("p",{style:Tt.timestamp,children:new Date(g.created_at).toLocaleString()})]},g.id))})]})]})})}const Tt={wrapper:{minHeight:"100vh",padding:"32px",background:"linear-gradient(120deg, rgba(13,17,23,1) 0%, rgba(29,35,42,1) 60%, rgba(43,50,61,1) 100%)",color:"#f2f4f8",fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif'},card:{maxWidth:960,margin:"0 auto",background:"rgba(10, 12, 15, 0.65)",borderRadius:16,border:"1px solid rgba(255,255,255,0.08)",padding:32,boxShadow:"0 20px 60px rgba(0,0,0,0.35)",backdropFilter:"blur(10px)"},header:{display:"flex",justifyContent:"space-between",gap:16,flexWrap:"wrap",marginBottom:24},eyebrow:{textTransform:"uppercase",letterSpacing:2,fontSize:12,color:"#a0aec0",marginBottom:4},title:{fontSize:32,margin:0},subtitle:{marginTop:8,color:"#cbd5f5"},code:{marginLeft:8,padding:"2px 6px",borderRadius:4,background:"rgba(255,255,255,0.08)",fontSize:14},refreshButton:{alignSelf:"flex-start",padding:"10px 18px",background:"#1e293b",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"#e2e8f0",cursor:"pointer"},alert:{padding:16,borderRadius:8,border:"1px solid #facc15",background:"rgba(250,204,21,0.1)",color:"#facc15",marginBottom:16},error:{padding:16,borderRadius:8,border:"1px solid #f87171",background:"rgba(248,113,113,0.1)",color:"#fca5a5",marginBottom:16},form:{display:"flex",flexDirection:"column",gap:16,marginBottom:32},label:{display:"flex",flexDirection:"column",gap:8,fontSize:14,color:"#cbd5f5"},input:{padding:"12px 14px",borderRadius:10,border:"1px solid rgba(255,255,255,0.12)",background:"rgba(15,18,25,0.9)",color:"#f8fafc",fontSize:16},primaryButton:{padding:"12px 18px",borderRadius:10,border:"none",background:"linear-gradient(135deg, rgba(56,189,248,1), rgba(14,165,233,1))",color:"#0f172a",fontWeight:600,cursor:"pointer"},sectionTitle:{fontSize:22,marginBottom:12},muted:{color:"#94a3b8"},list:{display:"flex",flexDirection:"column",gap:16},listItem:{padding:20,borderRadius:12,border:"1px solid rgba(148,163,184,0.25)",background:"rgba(15,18,25,0.9)"},listItemHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8,gap:16},badge:{fontSize:12,padding:"4px 8px",borderRadius:999,background:"rgba(14,165,233,0.15)",color:"#38bdf8",textTransform:"uppercase",letterSpacing:1},details:{margin:"8px 0 12px",color:"#e2e8f0",lineHeight:1.5},timestamp:{fontSize:13,color:"#94a3b8"}};function w7(e,t=[]){let n=[];function r(a,i){const l=d.createContext(i);l.displayName=a+"Context";const c=n.length;n=[...n,i];const u=f=>{var x;const{scope:m,children:p,...w}=f,g=((x=m==null?void 0:m[e])==null?void 0:x[c])||l,y=d.useMemo(()=>w,Object.values(w));return o.jsx(g.Provider,{value:y,children:p})};u.displayName=a+"Provider";function h(f,m){var g;const p=((g=m==null?void 0:m[e])==null?void 0:g[c])||l,w=d.useContext(p);if(w)return w;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[u,h]}const s=()=>{const a=n.map(i=>d.createContext(i));return function(l){const c=(l==null?void 0:l[e])||a;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,b7(s,...t)]}function b7(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const i=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}var a0="Progress",i0=100,[j7]=w7(a0),[S7,N7]=j7(a0),UR=d.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=C7,...i}=e;(s||s===0)&&!Sj(s)&&console.error(_7(`${s}`,"Progress"));const l=Sj(s)?s:i0;r!==null&&!Nj(r,l)&&console.error(E7(`${r}`,"Progress"));const c=Nj(r,l)?r:null,u=of(c)?a(c,l):void 0;return o.jsx(S7,{scope:n,value:c,max:l,children:o.jsx(Jf.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":of(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":VR(c,l),"data-value":c??void 0,"data-max":l,...i,ref:t})})});UR.displayName=a0;var BR="ProgressIndicator",KR=d.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=N7(BR,n);return o.jsx(Jf.div,{"data-state":VR(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});KR.displayName=BR;function C7(e,t){return`${Math.round(e/t*100)}%`}function VR(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function of(e){return typeof e=="number"}function Sj(e){return of(e)&&!isNaN(e)&&e>0}function Nj(e,t){return of(e)&&!isNaN(e)&&e<=t&&e>=0}function _7(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${i0}\`.`}function E7(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${i0} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var qR=UR,k7=KR;const l0=d.forwardRef(({className:e,value:t,...n},r)=>o.jsx(qR,{ref:r,className:ee("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:o.jsx(k7,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));l0.displayName=qR.displayName;function T7({open:e,onClose:t,onImportComplete:n,buttonVariant:r="ghost",buttonSize:s="sm",showLabel:a=!1}={}){const[i,l]=d.useState(!1),c=e!==void 0?e:i,u=t!==void 0?R=>{R||t()}:l,[h,f]=d.useState(null),[m,p]=d.useState(!1),[w,g]=d.useState(0),[y,x]=d.useState(null),[v,b]=d.useState(null),{toast:j}=wr(),S=R=>R.name.toLowerCase().endsWith(".csv")?R.size>5*1024*1024?"CSV file must be smaller than 5MB":null:"Please select a CSV file (must have .csv extension)",_=R=>{var Q;const P=(Q=R.target.files)==null?void 0:Q[0];if(!P)return;const G=S(P);if(G){b(G),f(null);return}f(P),b(null)},N=R=>{var ce,Y;const P=R.trim().split(`
`),G=[],Q=(ce=P[0])!=null&&ce.toLowerCase().includes("date")||(Y=P[0])!=null&&Y.toLowerCase().includes("summary")?1:0;for(let O=Q;O<P.length;O++){const T=P[O].trim();if(!T)continue;const B=T.match(/^"?([^",]+)"?,\s*"?([^"]*)"?$/);if(B){const[,$,W]=B;$&&W&&/^\d{4}-\d{2}-\d{2}$/.test($.trim())&&G.push({date:$.trim(),summary:W.trim().replace(/"/g,"")})}}return G},C=async()=>{if(h){p(!0),g(0),b(null),x(null);try{const R=await h.text(),P=N(R);if(P.length===0)throw new Error("No valid entries found in CSV. Please check the format: Date,Summary");let G=0,Q=0;const ce=[];for(let Y=0;Y<P.length;Y++){const O=P[Y];g((Y+1)/P.length*100);try{const T=await fetch("/api/manual-entries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:O.date,title:O.summary,summary:O.summary,description:`Imported from CSV on ${new Date().toLocaleDateString()}`})});if(T.ok)G++;else{const B=await T.text();T.status===409?Q++:ce.push(`${O.date}: ${B}`)}}catch(T){ce.push(`${O.date}: ${T.message}`)}}x({total:P.length,imported:G,skipped:Q,errors:ce}),G>0&&(j({title:"Import Complete",description:`Successfully imported ${G} key dates`}),n==null||n())}catch(R){const P=R.message;P.includes("encoding")?b("File encoding error: Please save your CSV file with UTF-8 encoding and try again"):P.includes("parse")||P.includes("malformed")?b("CSV parsing error: File appears to be corrupted or malformed. Please check your file format"):P.includes("memory")||P.includes("size")?b("File too large: Cannot process this CSV file due to size limitations"):P.includes("network")||P.includes("fetch")?b("Network error: Unable to connect to server. Please check your internet connection"):b(`Import failed: ${P}

Please verify your CSV file format and try again`)}finally{p(!1)}}},E=()=>{f(null),g(0),x(null),b(null),u(!1)},D=()=>{const R=`Date,Summary
2009-01-03,Bitcoin Genesis Block created by Satoshi Nakamoto
2009-01-12,First Bitcoin transaction between Satoshi and Hal Finney
2010-05-22,First commercial Bitcoin transaction - 10000 BTC for two pizzas
2010-07-17,Mt. Gox exchange launches
2011-02-09,Bitcoin reaches parity with US Dollar
2012-11-28,First Bitcoin halving reduces block reward to 25 BTC
2013-12-17,Bitcoin price peaks at over $1000 for first time
2017-12-17,Bitcoin reaches all-time high near $20000
2020-05-11,Third Bitcoin halving reduces block reward to 6.25 BTC
2021-02-08,Tesla announces $1.5B Bitcoin purchase`,P=new Blob([R],{type:"text/csv;charset=utf-8;"}),G=document.createElement("a"),Q=URL.createObjectURL(P);G.setAttribute("href",Q),G.setAttribute("download","bitcoin-events-template.csv"),G.style.visibility="hidden",document.body.appendChild(G),G.click(),document.body.removeChild(G),j({title:"Template Downloaded",description:"Use this CSV template as a guide for your imports"})};return o.jsxs(Zt,{open:c,onOpenChange:u,children:[o.jsx(fx,{asChild:!0,children:o.jsxs(q,{variant:r,size:s,title:"Import Bitcoin Events",children:[o.jsx(Xd,{className:"w-4 h-4"}),a&&o.jsx("span",{className:"ml-2",children:"Import Bitcoin Events"})]})}),o.jsxs(Vt,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto","aria-describedby":"import-description",children:[o.jsx(qt,{children:o.jsxs(Ht,{className:"flex items-center gap-2",children:[o.jsx(Xd,{className:"w-5 h-5"}),"Import Bitcoin Events & Key Dates"]})}),o.jsx("div",{id:"import-description",className:"sr-only",children:"Dialog to import Bitcoin events and key dates from CSV files"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(es,{htmlFor:"csv-file",children:"Select CSV File"}),o.jsxs(q,{variant:"outline",size:"sm",onClick:D,className:"text-xs",children:[o.jsx(Zg,{className:"w-3 h-3 mr-1"}),"Download Template"]})]}),o.jsx(An,{id:"csv-file",type:"file",accept:".csv",onChange:_,disabled:m}),o.jsx("p",{className:"text-sm text-slate-500",children:"CSV format: Date,Summary (e.g., 2009-01-03,Bitcoin Genesis Block)"})]}),v&&o.jsxs(Dh,{variant:"destructive",children:[o.jsx(Ws,{className:"h-4 w-4"}),o.jsx($h,{children:v})]}),m&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Xd,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:"Importing key dates..."})]}),o.jsx(l0,{value:w,className:"w-full"})]}),y&&o.jsxs(Dh,{children:[o.jsx(Xn,{className:"h-4 w-4"}),o.jsx($h,{children:o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{children:o.jsx("strong",{children:"Import Summary:"})}),o.jsxs("p",{children:[" Total records: ",y.total]}),o.jsxs("p",{children:[" Imported: ",y.imported]}),o.jsxs("p",{children:[" Skipped (already exists): ",y.skipped]}),y.errors.length>0&&o.jsxs("p",{children:[" Errors: ",y.errors.length]})]})})]})]}),o.jsxs(Xr,{children:[o.jsx(q,{variant:"outline",onClick:E,children:"Cancel"}),o.jsx(q,{onClick:C,disabled:!h||m,children:m?"Importing...":"Import CSV"})]})]})]})}function R7(){const{toast:e}=wr(),[t,n]=d.useState(!1),[r,s]=d.useState(!1),a=async()=>{n(!0);try{const u=await fetch(`/api/analysis/filter?startDate=2008-01-01&endDate=${new Date().toISOString().split("T")[0]}`);if(!u.ok)throw new Error("Failed to fetch analysis data");const h=await u.json();if(!h||h.length===0){e({title:"No Data Found",description:"No analysis data available for export.",variant:"destructive"});return}h.sort((x,v)=>{const b=new Date(x.date),j=new Date(v.date);return b.getTime()-j.getTime()});const f=new Set(h.filter(x=>x.isManualOverride).map(x=>x.date)),m=[];m.push(["Date","Summary","Type"]),h.forEach(x=>{const v=`'${x.date}`,b=x.summary||"No summary available",S=f.has(x.date)?"Key Date":"";m.push([v,b,S]),m.push([v,b,S])});const p=m.map(x=>x.map(v=>`"${v.toString().replace(/"/g,'""')}"`).join(",")).join(`
`),w=new Blob([p],{type:"text/csv;charset=utf-8;"}),g=document.createElement("a"),y=URL.createObjectURL(w);g.setAttribute("href",y),g.setAttribute("download",`bitcoin-news-analysis-${new Date().toISOString().split("T")[0]}.csv`),g.style.visibility="hidden",document.body.appendChild(g),g.click(),document.body.removeChild(g),e({title:"Export Successful",description:`Exported ${h.length*2} rows (${h.length} unique days, duplicated) to CSV file with Key Date indicators.`})}catch(u){console.error("Export failed:",u),e({title:"Export Failed",description:u instanceof Error?u.message:"Failed to export data. Please try again.",variant:"destructive"})}finally{n(!1)}},i=async()=>{n(!0);try{const u=await fetch(`/api/analysis/filter?startDate=2008-01-01&endDate=${new Date().toISOString().split("T")[0]}`);if(!u.ok)throw new Error("Failed to fetch analysis data");const h=await u.json();if(!h||h.length===0){e({title:"No Data Found",description:"No analysis data available for export.",variant:"destructive"});return}h.sort((g,y)=>{const x=new Date(g.date),v=new Date(y.date);return x.getTime()-v.getTime()});let f=`Bitcoin News Analysis - Historical Timeline
`;f+="=".repeat(50)+`

`,h.forEach((g,y)=>{const x=g.date,v=g.summary||"No summary available",b=g.isManualOverride;f+=`${y+1}. ${x}${b?" [KEY DATE]":""}
`,f+=`${v}

`});const m=new Blob([f],{type:"text/plain;charset=utf-8;"}),p=document.createElement("a"),w=URL.createObjectURL(m);p.setAttribute("href",w),p.setAttribute("download",`bitcoin-news-analysis-${new Date().toISOString().split("T")[0]}.txt`),p.style.visibility="hidden",document.body.appendChild(p),p.click(),document.body.removeChild(p),e({title:"Export Successful",description:`Exported ${h.length} analyses to TXT file.`})}catch(u){console.error("Export failed:",u),e({title:"Export Failed",description:u instanceof Error?u.message:"Failed to export data. Please try again.",variant:"destructive"})}finally{n(!1)}},l=()=>{s(!0)},c=u=>{s(!1),u==="csv"?a():i()};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Admin"}),o.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage data imports and system administration"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(jt,{children:[o.jsxs(zs,{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Xd,{className:"w-5 h-5"}),o.jsx(Us,{children:"Import Bitcoin Events"})]}),o.jsx(tu,{children:"Upload CSV files to import Bitcoin news events into the database"})]}),o.jsxs(on,{className:"space-y-4",children:[o.jsx("div",{children:o.jsx(T7,{buttonVariant:"default",buttonSize:"default",showLabel:!0})}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload a CSV file with Bitcoin events. The file should have two columns: Date (YYYY-MM-DD format) and Summary."})]})]}),o.jsxs(jt,{children:[o.jsxs(zs,{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Zg,{className:"w-5 h-5"}),o.jsx(Us,{children:"Export Data"})]}),o.jsx(tu,{children:"Download all Bitcoin news analysis data to CSV or TXT file"})]}),o.jsxs(on,{className:"space-y-4",children:[o.jsxs(q,{variant:"outline",size:"sm",onClick:l,disabled:t,"data-testid":"button-export",children:[t?o.jsx(et,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(Zg,{className:"w-4 h-4 mr-2"}),t?"Exporting...":"Export Data"]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Export all historical Bitcoin news analyses. Choose between CSV (for spreadsheets) or TXT (for reading) format."})]})]})]}),o.jsx(Zt,{open:r,onOpenChange:s,children:o.jsxs(Vt,{className:"sm:max-w-md",children:[o.jsxs(qt,{children:[o.jsx(Ht,{children:"Choose Export Format"}),o.jsx(Pn,{children:"Select the format for exporting your Bitcoin news analysis data."})]}),o.jsxs("div",{className:"flex flex-col space-y-3 mt-4",children:[o.jsxs(q,{variant:"outline",onClick:()=>c("csv"),className:"flex items-center justify-start space-x-3 p-4 h-auto",children:[o.jsx(Ss,{className:"w-5 h-5"}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-medium",children:"CSV Format"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Comma-separated values, good for spreadsheets"})]})]}),o.jsxs(q,{variant:"outline",onClick:()=>c("txt"),className:"flex items-center justify-start space-x-3 p-4 h-auto",children:[o.jsx(Ss,{className:"w-5 h-5"}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-medium",children:"TXT Format"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Plain text, easy to read and share"})]})]})]})]})})]})}const Ap=[{id:"empty-summary",label:"Empty Summary",filterFn:e=>!e.summary||e.summary.trim()===""},{id:"untagged",label:"Untagged",filterFn:e=>!e.tags_version2||e.tags_version2.length===0},{id:"too-short",label:"Too short (< 100 chars)",filterFn:e=>e.length>0&&e.length<100},{id:"too-long",label:"Too long (> 110 chars)",filterFn:e=>e.length>110},{id:"ends-period",label:"Ends with period",filterFn:e=>{var t;return((t=e.summary)==null?void 0:t.trim().endsWith("."))||e.violations.some(n=>n.toLowerCase().includes("period"))}},{id:"has-hyphen",label:"Contains unusual symbols",filterFn:e=>e.violations.some(t=>t.includes("unusual symbols")||t.includes("hyphen")||t.includes("semicolon")||t.includes("colon")||t.includes("question mark"))},{id:"truncated",label:"Truncated ending",filterFn:e=>e.violations.some(t=>t.includes("Ends with")||t.includes("Truncated"))},{id:"excessive-dots",label:"Excessive dots",filterFn:e=>e.violations.some(t=>t.toLowerCase().includes("excessive dots"))},{id:"generic-fallback",label:"Generic fallback",filterFn:e=>e.violations.some(t=>t.toLowerCase().includes("generic")||t.toLowerCase().includes("fallback"))},{id:"repeated-words",label:"Repeated words",filterFn:e=>e.violations.some(t=>t.toLowerCase().includes("repeated"))},{id:"placeholder-text",label:"Placeholder text",filterFn:e=>e.violations.some(t=>t.toLowerCase().includes("placeholder"))},{id:"duplicate-summary",label:"Duplicate summary",filterFn:e=>e.violations.some(t=>t.toLowerCase().includes("duplicate"))},{id:"missing-months",label:"Missing months",filterFn:e=>e.violations.some(t=>t.includes("Missing month"))}],Cj=[50,200,500];function P7(){var Vl,ql;const{toast:e}=wr(),[,t]=_u(),[n,r]=d.useState("keywords"),[s,a]=d.useState(50),[i,l]=d.useState(new Set),[c,u]=d.useState(!1),[h,f]=d.useState(new Set),[m,p]=d.useState(1),[w,g]=d.useState(!1),[y,x]=d.useState(""),[v,b]=d.useState(""),[j,S]=d.useState(!1),[_,N]=d.useState(""),[C,E]=d.useState(!1),[D,R]=d.useState(!1),[P,G]=d.useState(null);d.useEffect(()=>{const A=setTimeout(()=>{b(y),p(1)},300);return()=>clearTimeout(A)},[y]);const[Q,ce]=d.useState(!1),[Y,O]=d.useState(!1),[T,B]=d.useState(!1),[$,W]=d.useState(""),[ae,_e]=d.useState("crypto"),[ge,De]=d.useState(!1),[Ee,fe]=d.useState(!1),[ue,$e]=d.useState(null),[oe,Be]=d.useState(null),[Me,Ue]=d.useState(1),{data:Oe,isLoading:He}=ot({queryKey:["quality-violations"],queryFn:async()=>{const A=await fetch("/api/quality-check/violations");if(!A.ok)throw new Error("Failed to fetch quality violations");return(await A.json()).data||[]},staleTime:1e3*60*5}),{data:dt,isLoading:nt}=ot({queryKey:["events-manager-empty-summaries"],queryFn:async()=>{if(!Ye)return console.warn("Supabase not configured for empty summary check"),{entries:[],totalCount:0};let A=[],H=0;const K=1e3;let te=!0;for(;te;){const{data:Ft,error:Rt}=await Ye.from("historical_news_analyses").select("date, summary").range(H,H+K-1);if(Rt)throw console.error("Error fetching summaries:",Rt),Rt;Ft&&Ft.length>0?(A=A.concat(Ft),H+=K,te=Ft.length===K):te=!1}const Ie=new Date("2009-01-03"),we=A.filter(Ft=>new Date(Ft.date)>=Ie),Qe=we.filter(Ft=>!Ft.summary||Ft.summary.trim()===""),_t=new Set(we.map(Ft=>Ft.date)),ut=we.map(Ft=>Ft.date).sort(),Lt=[];if(ut.length>0){const Ft=new Date("2009-01-03"),Rt=new Date(ut[ut.length-1]),vn=new Date(Ft);for(;vn<=Rt;){const it=vn.toISOString().split("T")[0];_t.has(it)||Lt.push({date:it,summary:""}),vn.setDate(vn.getDate()+1)}}const Cn=[...Qe,...Lt];return console.log(`Empty summaries: ${Qe.length}, Missing dates: ${Lt.length}, Total: ${Cn.length}`),{entries:Cn,totalCount:Cn.length}},staleTime:1e3*60*5}),{data:mt,isLoading:Qt}=ot({queryKey:["events-manager-untagged"],queryFn:async()=>{if(!Ye)return console.warn("Supabase not configured for untagged check"),{entries:[],totalCount:0};let A=[],H=0;const K=1e3;let te=!0;for(;te;){const{data:we,error:Qe}=await Ye.from("historical_news_analyses").select("date, summary, tags_version2").range(H,H+K-1);if(Qe)throw console.error("Error fetching untagged analyses:",Qe),Qe;we&&we.length>0?(A=A.concat(we),H+=K,te=we.length===K):te=!1}const Ie=A.filter(we=>!we.tags_version2||Array.isArray(we.tags_version2)&&we.tags_version2.length===0);return console.log(`Untagged analyses: ${Ie.length}`),{entries:Ie,totalCount:Ie.length}},staleTime:1e3*60*5}),{data:wt,isLoading:Ot}=ot({queryKey:["events-manager-missing-months"],queryFn:async()=>{if(!Ye)return console.warn("Supabase not configured for missing months check"),{entries:[],totalCount:0};let A=[],H=0;const K=1e3;let te=!0;for(;te;){const{data:it,error:vt}=await Ye.from("historical_news_analyses").select("date").range(H,H+K-1);if(vt)throw console.error("Error fetching dates:",vt),vt;it&&it.length>0?(A=A.concat(it),H+=K,te=it.length===K):te=!1}const Ie=new Map;A.forEach(it=>{const vt=new Date(it.date),M=vt.getFullYear(),me=vt.getMonth()+1,We=`${M}-${String(me).padStart(2,"0")}`;Ie.has(We)||Ie.set(We,{year:M,month:me,daysPresent:new Set}),Ie.get(We).daysPresent.add(it.date)});const we=new Date("2009-01-03"),Qe=new Date("2024-12-31"),_t=[],ut=new Date(we.getFullYear(),we.getMonth(),1),Lt=["January","February","March","April","May","June","July","August","September","October","November","December"],Cn=new Date,Ft=Cn.getFullYear(),Rt=Cn.getMonth()+1,vn=Cn.getDate();for(;ut<=Qe;){const it=ut.getFullYear(),vt=ut.getMonth()+1,M=`${it}-${String(vt).padStart(2,"0")}`,me=new Date(it,vt,0).getDate();let We=me;it===2009&&vt===1&&(We=me-2),it===Ft&&vt===Rt&&(We=vn);const Le=Ie.get(M),ht=Le?Le.daysPresent.size:0;if(it===2025){ut.setMonth(ut.getMonth()+1);continue}if(ht<We){const zt=new Date(it,vt-1,1),Br=Lt[vt-1],Xa=We-ht;_t.push({date:zt.toISOString().split("T")[0],summary:`${Br} ${it}: ${ht}/${We} days${it===Ft&&vt===Rt?" (current month)":""}`,violations:[`Missing ${Xa} day${Xa!==1?"s":""} in ${Br} ${it}`],length:0,year:it,month:vt,monthName:Br,daysPresent:ht,totalDays:We,missingDays:Xa})}ut.setMonth(ut.getMonth()+1)}return _t.sort((it,vt)=>it.year!==vt.year?it.year-vt.year:it.month-vt.month),console.log(`Incomplete months: ${_t.length}`),{entries:_t,totalCount:_t.length}},staleTime:1e3*60*5}),{data:Fe,isLoading:Ct}=ot({queryKey:["events-manager-veribadge-manual"],queryFn:async()=>{if(!Ye)return console.warn("Supabase not configured for veribadge check"),{entries:[],totalCount:0};const{data:A,error:H}=await Ye.from("historical_news_analyses").select("date, summary, veri_badge").eq("veri_badge","Manual");if(H)throw console.error("Error fetching manual analyses:",H),H;const K=(A||[]).map(te=>({date:te.date,summary:te.summary||"",veri_badge:te.veri_badge}));return{entries:K,totalCount:K.length}},staleTime:1e3*60*5}),{data:L,isLoading:I}=ot({queryKey:["events-manager-veribadge-orphan"],queryFn:async()=>{if(!Ye)return console.warn("Supabase not configured for veribadge check"),{entries:[],totalCount:0};const{data:A,error:H}=await Ye.from("historical_news_analyses").select("date, summary, veri_badge").eq("veri_badge","Orphan");if(H)throw console.error("Error fetching orphan analyses:",H),H;const K=(A||[]).map(te=>({date:te.date,summary:te.summary||"",veri_badge:te.veri_badge}));return{entries:K,totalCount:K.length}},staleTime:1e3*60*5}),{data:U,isLoading:V}=ot({queryKey:["events-manager-veribadge-verified"],queryFn:async()=>{if(!Ye)return console.warn("Supabase not configured for veribadge check"),{entries:[],totalCount:0};const{data:A,error:H}=await Ye.from("historical_news_analyses").select("date, summary, veri_badge").eq("veri_badge","Verified");if(H)throw console.error("Error fetching verified analyses:",H),H;const K=(A||[]).map(te=>({date:te.date,summary:te.summary||"",veri_badge:te.veri_badge}));return{entries:K,totalCount:K.length}},staleTime:1e3*60*5}),{data:J,isLoading:ie}=ot({queryKey:["events-manager-veribadge-not-available"],queryFn:async()=>{if(!Ye)return console.warn("Supabase not configured for veribadge check"),{entries:[],totalCount:0};const{data:A,error:H}=await Ye.from("historical_news_analyses").select("date, summary, veri_badge").eq("veri_badge","Not Available");if(H)throw console.error("Error fetching not available analyses:",H),H;const K=(A||[]).map(te=>({date:te.date,summary:te.summary||"",veri_badge:te.veri_badge}));return{entries:K,totalCount:K.length}},staleTime:1e3*60*5}),{data:Pe,isLoading:Ae}=ot({queryKey:["events-manager-veribadge-empty"],queryFn:async()=>{if(!Ye)return console.warn("Supabase not configured for veribadge check"),{entries:[],totalCount:0};let A=[],H=0;const K=1e3;let te=!0;for(;te;){const{data:we,error:Qe}=await Ye.from("historical_news_analyses").select("date, summary, veri_badge").range(H,H+K-1);if(Qe)throw console.error("Error fetching analyses:",Qe),Qe;we&&we.length>0?(A=A.concat(we),H+=K,te=we.length===K):te=!1}const Ie=A.filter(we=>!we.veri_badge||we.veri_badge.trim()==="").map(we=>({date:we.date,summary:we.summary||"",veri_badge:null}));return{entries:Ie,totalCount:Ie.length}},staleTime:1e3*60*5}),Ge=d.useMemo(()=>{const A=[],H=Oe||[],K=(dt==null?void 0:dt.totalCount)||0,te=(mt==null?void 0:mt.totalCount)||0,Ie=(wt==null?void 0:wt.totalCount)||0,we=nt,Qe=Qt,_t=Ot,ut=!Oe&&He;A.push({id:"empty-summary",label:"Empty Summary",count:K,hasIssues:K>0,isLoading:we}),A.push({id:"untagged",label:"Untagged",count:te,hasIssues:te>0,isLoading:Qe}),A.push({id:"missing-months",label:"Missing months",count:Ie,hasIssues:Ie>0,isLoading:_t});for(const Lt of Ap){if(Lt.id==="empty-summary"||Lt.id==="untagged"||Lt.id==="missing-months")continue;const Cn=ut?0:H.filter(Lt.filterFn).length;A.push({id:Lt.id,label:Lt.label,count:Cn,hasIssues:Cn>0,isLoading:ut})}return A},[Oe,dt,mt,wt,He,nt,Qt,Ot]),Xe=d.useMemo(()=>[{id:"manual",label:"Manual",count:(Fe==null?void 0:Fe.totalCount)||0,hasIssues:!1,isLoading:Ct},{id:"orphan",label:"Orphan",count:(L==null?void 0:L.totalCount)||0,hasIssues:!1,isLoading:I},{id:"verified",label:"Verified",count:(U==null?void 0:U.totalCount)||0,hasIssues:!1,isLoading:V},{id:"not-available",label:"Not available",count:(J==null?void 0:J.totalCount)||0,hasIssues:!1,isLoading:ie},{id:"empty",label:"Empty",count:(Pe==null?void 0:Pe.totalCount)||0,hasIssues:!1,isLoading:Ae}],[Fe,L,U,J,Pe,Ct,I,V,ie,Ae]),rt=d.useMemo(()=>{if(oe){if(oe==="manual")return((Fe==null?void 0:Fe.entries)||[]).map(K=>{var te;return{date:K.date,summary:K.summary||"",violations:[`VeriBadge: ${K.veri_badge}`],length:((te=K.summary)==null?void 0:te.length)||0,tags_version2:null}});if(oe==="orphan")return((L==null?void 0:L.entries)||[]).map(K=>{var te;return{date:K.date,summary:K.summary||"",violations:[`VeriBadge: ${K.veri_badge}`],length:((te=K.summary)==null?void 0:te.length)||0,tags_version2:null}});if(oe==="verified")return((U==null?void 0:U.entries)||[]).map(K=>{var te;return{date:K.date,summary:K.summary||"",violations:[`VeriBadge: ${K.veri_badge}`],length:((te=K.summary)==null?void 0:te.length)||0,tags_version2:null}});if(oe==="not-available")return((J==null?void 0:J.entries)||[]).map(K=>{var te;return{date:K.date,summary:K.summary||"",violations:[`VeriBadge: ${K.veri_badge}`],length:((te=K.summary)==null?void 0:te.length)||0,tags_version2:null}});if(oe==="empty")return((Pe==null?void 0:Pe.entries)||[]).map(K=>{var te;return{date:K.date,summary:K.summary||"",violations:["VeriBadge: Empty"],length:((te=K.summary)==null?void 0:te.length)||0,tags_version2:null}})}if(!ue)return[];if(ue==="empty-summary")return((dt==null?void 0:dt.entries)||[]).map(K=>({date:K.date,summary:K.summary||"",violations:["Empty summary"],length:0,tags_version2:null}));if(ue==="untagged")return((mt==null?void 0:mt.entries)||[]).map(K=>{var te;return{date:K.date,summary:K.summary||"",violations:["Untagged"],length:((te=K.summary)==null?void 0:te.length)||0,tags_version2:K.tags_version2||null}});if(ue==="missing-months")return((wt==null?void 0:wt.entries)||[]).map(K=>({date:K.date,summary:K.summary||`${K.monthName} ${K.year}: ${K.daysPresent}/${K.totalDays} days`,violations:K.violations||[`Missing ${K.missingDays} day${K.missingDays!==1?"s":""} in ${K.monthName} ${K.year}`],length:0,tags_version2:null,monthName:K.monthName,year:K.year,month:K.month,daysPresent:K.daysPresent,totalDays:K.totalDays,missingDays:K.missingDays}));const A=Oe||[],H=Ap.find(K=>K.id===ue);return H?A.filter(H.filterFn):A},[ue,oe,Oe,dt,mt,wt,Fe,L,U,J,Pe]),tn=d.useMemo(()=>{const A=(Me-1)*s;return rt.slice(A,A+s)},[rt,Me,s]),{data:z,error:ne}=ot({queryKey:["tags-catalog-v2"],queryFn:async()=>{var K;const A=await fetch("/api/tags/catalog-v2");if(!A.ok){const te=await A.text();throw console.error("Catalog v2 API error:",A.status,te),new Error(`Failed to fetch catalog: ${A.statusText}`)}const H=await A.json();return console.log("Catalog v2 data received:",{tagCount:((K=H.tags)==null?void 0:K.length)||0,taggedCount:H.taggedCount}),H},retry:1}),{data:Se,refetch:Ne}=ot({queryKey:["tags-filter-tree"],queryFn:async()=>{const A=await fetch("/api/tags/filter-tree");if(!A.ok)throw new Error("Failed to fetch filter tree");return A.json()},staleTime:0,refetchOnMount:!0}),{data:F}=ot({queryKey:["tags-hierarchy"],queryFn:async()=>{const A=await fetch("/api/tags/hierarchy");if(!A.ok)throw new Error("Failed to fetch hierarchy");return A.json()},staleTime:1e3*60*60,enabled:!Se}),re=Se||F,de=d.useMemo(()=>{if(!(re!=null&&re.categories))return null;const A={};return re.categories.forEach(H=>{const K=H.category,te=we=>{const Qe=[];let _t=we.totalTags||0;return we.subcategories&&Object.keys(we.subcategories).length>0&&Object.values(we.subcategories).forEach(ut=>{const Lt=te(ut);Lt&&Qe.push(Lt)}),we.tags&&Array.isArray(we.tags)&&we.tags.forEach(ut=>{Qe.push({name:ut.name,category:K,count:ut.usageCount||0,isTag:!0})}),Qe.sort((ut,Lt)=>ut.isTag&&!Lt.isTag?1:!ut.isTag&&Lt.isTag?-1:ut.name.localeCompare(Lt.name)),Qe.length===0?null:{category:K,name:we.name,count:_t,isParent:!0,children:Qe}},Ie=[];H.tags&&Array.isArray(H.tags)&&H.tags.forEach(we=>{Ie.push({name:we.name,category:K,count:we.usageCount||0,isTag:!0})}),H.subcategories&&Object.values(H.subcategories).forEach(we=>{const Qe=te(we);Qe&&Ie.push(Qe)}),Ie.sort((we,Qe)=>we.isTag&&!Qe.isTag?1:!we.isTag&&Qe.isTag?-1:we.name.localeCompare(Qe.name)),Ie.length>0&&(A[K]=Ie)}),{entitiesByCategory:A,taggedCount:(z==null?void 0:z.taggedCount)||0,untaggedCount:(z==null?void 0:z.untaggedCount)||0,totalAnalyses:(z==null?void 0:z.totalAnalyses)||0}},[z,re]),{data:xe,isLoading:pe,refetch:pt}=ot({queryKey:["supabase-tags-analyses",Array.from(i).sort().join(","),c,v,m,s],refetchOnMount:!0,refetchOnWindowFocus:!1,queryFn:async()=>{var Cn,Ft;if(!Ye)throw new Error("Supabase not configured");let A=Ye.from("historical_news_analyses").select("date, summary, tags_version2, tier_used, is_manual_override",{count:"exact"});c||i.size>0,v&&(A=A.ilike("summary",`%${v}%`)),A=A.order("date",{ascending:!1});let H=[],K=null;const te=c||i.size>0;if(te){let Rt=[],vn=0;const it=1e3;for(;;){const{data:vt,error:M}=await A.range(vn,vn+it-1);if(M)throw M;if(!vt||vt.length===0||(Rt=Rt.concat(vt),vt.length<it))break;vn+=it}H=Rt,K=Rt.length}else{const Rt=(m-1)*s,vn=Rt+s-1;A=A.range(Rt,vn);const{data:it,error:vt,count:M}=await A;if(vt)throw vt;H=it||[],K=M}console.log(" Analyses Query Result:",JSON.stringify({analysesCount:H==null?void 0:H.length,totalCount:K,showUntagged:c,selectedEntitiesCount:i.size,needsClientSideFiltering:te,firstAnalysisDate:(Cn=H==null?void 0:H[0])==null?void 0:Cn.date,firstAnalysisTags:(Ft=H==null?void 0:H[0])==null?void 0:Ft.tags_version2},null,2));let Ie=H||[];c&&(Ie=Ie.filter(Rt=>!Rt.tags_version2||Rt.tags_version2.length===0)),i.size>0&&!c&&(Ie=Ie.filter(Rt=>!Rt.tags_version2||!Array.isArray(Rt.tags_version2)?!1:Array.from(i).some(vn=>{const[it,vt]=vn.split("::");return Rt.tags_version2.includes(vt)})));const we=(m-1)*s,Qe=we+s,_t=Ie.slice(we,Qe),ut=te?Ie.length:K||Ie.length,Lt=Math.ceil(ut/s);return console.log(" Received:",_t.length,"analyses, filtered total:",ut),{analyses:_t,pagination:{currentPage:m,pageSize:s,totalCount:ut,totalPages:Lt}}}}),st=de?Object.entries(de.entitiesByCategory).map(([A,H])=>({category:A,entities:H.sort((K,te)=>te.count-K.count),totalCount:H.reduce((K,te)=>K+te.count,0)})).sort((A,H)=>H.totalCount-A.totalCount):[];de&&st.length>0&&console.log(" Available categories:",st.map(A=>A.category));const Ze=["bitcoin","money-economics","technology","organizations","people","regulation-law","markets-geography","education-community","crime-security","topics","miscellaneous"];let gt=n==="keywords"?(st||[]).filter(({category:A})=>Ze.includes(A)):(st||[]).filter(({category:A})=>A.toLowerCase()==="topics");Array.isArray(gt)||(gt=[]),gt.length===0&&st&&st.length>0&&(console.warn(" Filtering removed all categories, showing all categories instead"),gt=st),de&&(console.log(" Filtered categories:",gt.map(A=>A.category),"viewMode:",n),console.log(" All categories:",st.map(A=>({cat:A.category,count:A.entities.length}))));const ve=(xe==null?void 0:xe.analyses)||[];xe!=null&&xe.pagination.totalPages;const ze=(xe==null?void 0:xe.pagination.totalCount)||0,kt=A=>_x(A,de),Mn=()=>{if(w){g(!1),f(new Set);return}const A=ve.length>0&&ve.every(H=>h.has(H.date));f(A?H=>{const K=new Set(H);return ve.forEach(te=>K.delete(te.date)),K}:H=>{const K=new Set(H);return ve.forEach(te=>K.add(te.date)),K})},br=async()=>{if(!Ye)throw new Error("Supabase not configured");let A=Ye.from("historical_news_analyses").select("date, tags_version2, summary");v&&(A=A.ilike("summary",`%${v}%`));const{data:H,error:K}=await A;if(K)throw K;let te=H||[];return c&&(te=te.filter(Ie=>!Ie.tags_version2||Ie.tags_version2.length===0)),i.size>0&&!c&&(te=te.filter(Ie=>!Ie.tags_version2||!Array.isArray(Ie.tags_version2)?!1:Array.from(i).some(we=>{const[Qe,_t]=we.split("::");return Ie.tags_version2.includes(_t)}))),te.map(Ie=>Ie.date)},Hn=at({mutationFn:async({dates:A,tag:H})=>Tr("POST","/api/tags/bulk-add",{dates:A,tag:H}),onSuccess:(A,H)=>{X.invalidateQueries({queryKey:["supabase-tags-catalog"]}),X.invalidateQueries({queryKey:["supabase-tags-analyses"]}),e({title:"Tags Added",description:`Successfully added tag to ${H.dates.length} analyses`}),ce(!1),W(""),f(new Set),g(!1)},onError:A=>{e({title:"Error",description:A.message,variant:"destructive"})}}),sr=at({mutationFn:async({dates:A,tag:H})=>Tr("POST","/api/tags/bulk-remove",{dates:A,tag:H}),onSuccess:(A,H)=>{X.invalidateQueries({queryKey:["supabase-tags-catalog"]}),X.invalidateQueries({queryKey:["supabase-tags-analyses"]}),X.invalidateQueries({queryKey:["supabase-tags-selected-summaries"]}),e({title:"Tag Removed",description:`Successfully removed tag from ${H.dates.length} analyses`})},onError:A=>{e({title:"Error",description:A.message,variant:"destructive"})}}),zr=at({mutationFn:async({tagName:A,oldCategory:H,newName:K,newCategory:te,newSubcategoryPath:Ie})=>{const we=await fetch("/api/tags-manager/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tagName:A,oldCategory:H,newName:K,newCategory:te,newSubcategoryPath:Ie})});if(!we.ok){let Qe="Failed to update tag";try{Qe=(await we.json()).error||Qe}catch{Qe=`Error ${we.status}: ${we.statusText||"Unknown error"}`}throw new Error(Qe)}return await we.json()},onSuccess:async A=>{e({title:"Tag Updated",description:`Tag has been updated in ${A.updated} analyses`}),await X.invalidateQueries({queryKey:["supabase-tags-catalog"]}),await X.invalidateQueries({queryKey:["tags-catalog-v2"]}),await X.invalidateQueries({queryKey:["tags-filter-tree"]}),await X.invalidateQueries({queryKey:["supabase-tags-analyses"]}),E(!1),G(null)},onError:A=>{e({title:"Update Failed",description:A.message,variant:"destructive"})}}),Ur=at({mutationFn:async({tagName:A,category:H})=>{const K=await fetch("/api/tags-manager/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tagName:A,category:H})});if(!K.ok){let te="Failed to delete tag";try{te=(await K.json()).error||te}catch{te=`Error ${K.status}: ${K.statusText||"Unknown error"}`}throw new Error(te)}return await K.json()},onSuccess:async A=>{e({title:"Tag Deleted",description:`Tag has been deleted from ${A.updated} analyses`}),await X.invalidateQueries({queryKey:["supabase-tags-catalog"]}),await X.invalidateQueries({queryKey:["tags-catalog-v2"]}),await X.invalidateQueries({queryKey:["tags-filter-tree"]}),await X.invalidateQueries({queryKey:["tags-hierarchy"]}),await X.invalidateQueries({queryKey:["supabase-tags-analyses"]}),await X.refetchQueries({queryKey:["tags-filter-tree"]}),R(!1),G(null)},onError:A=>{e({title:"Delete Failed",description:A.message,variant:"destructive"})}});at({mutationFn:async()=>{const A=await fetch("/api/tags/flush-cache",{method:"POST"});if(!A.ok)throw new Error("Failed to flush cache");return await A.json()},onSuccess:async()=>{e({title:"Cache Flushed",description:"Tag cache has been cleared successfully"}),await X.invalidateQueries({queryKey:["tags-catalog-v2"]}),await X.invalidateQueries({queryKey:["tags-filter-tree"]}),await X.invalidateQueries({queryKey:["tags-hierarchy"]}),await X.refetchQueries({queryKey:["tags-catalog-v2"]}),await X.refetchQueries({queryKey:["tags-filter-tree"]})},onError:A=>{e({title:"Cache Flush Failed",description:A.message,variant:"destructive"})}});const Ul=async()=>{if(!$.trim()){e({title:"Error",description:"Please enter a tag name",variant:"destructive"});return}try{let A;w?A=await br():A=Array.from(h),Hn.mutate({dates:A,tag:{name:$.trim(),category:ae}})}catch{e({title:"Error",description:"Failed to prepare bulk operation",variant:"destructive"})}},{data:Zs=[],isLoading:Bl}=ot({queryKey:["supabase-tags-selected-summaries",Array.from(h).sort(),w,v,c],queryFn:async()=>{if(!Ye)throw new Error("Supabase not configured");let A;if(w)try{A=await br()}catch{return[]}else{if(h.size===0)return[];A=Array.from(h)}const{data:H,error:K}=await Ye.from("historical_news_analyses").select("tags_version2").in("date",A);if(K)throw K;const te=new Map;return H==null||H.forEach(Ie=>{Ie.tags_version2&&Array.isArray(Ie.tags_version2)&&Ie.tags_version2.forEach(we=>{const Qe=kt(we),_t=`${Qe}::${we}`;te.has(_t)||te.set(_t,{name:we,category:Qe})})}),Array.from(te.values())},enabled:(Y||T)&&(h.size>0||w)}),Kl=async A=>{try{let H;w?H=await br():H=Array.from(h),sr.mutate({dates:H,tag:A})}catch{e({title:"Error",description:"Failed to prepare bulk operation",variant:"destructive"})}},Ju=async()=>{try{let A;if(w){e({title:"Too many items",description:"Cannot copy more than 50 items at once. Please refine your selection.",variant:"destructive"});return}if(h.size>0){if(h.size>50){e({title:"Too many items",description:"Cannot copy more than 50 items at once.",variant:"destructive"});return}A=Array.from(h)}else A=ve.map(te=>te.date);let H=ve.filter(te=>A.includes(te.date));if(H.length<A.length){if(!Ye)throw new Error("Supabase not configured");const{data:te,error:Ie}=await Ye.from("historical_news_analyses").select("date, summary, tags").in("date",A);if(Ie)throw Ie;H=te||[]}if(H.length===0){e({title:"Nothing to Copy",description:"No analyses selected",variant:"destructive"});return}const K=H.map(te=>`${new Date(te.date).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"2-digit"})} - ${te.summary}`).join(`
`);N(K),S(!0)}catch(A){console.error("Copy to clipboard error:",A),e({title:"Copy Failed",description:A instanceof Error?A.message:"Failed to prepare text for copying",variant:"destructive"})}};return ve.length>0&&ve.every(A=>h.has(A.date)),o.jsx(Zf,{className:"w-full",children:o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row",children:[o.jsx("div",{className:"lg:w-72 shrink-0",children:o.jsx(r2,{catalogData:de,selectedEntities:i,showUntagged:c,searchQuery:y,mode:"inline",showCategories:!1,showOverview:!1,qualityCheckItems:Ge,selectedQualityCheck:ue,onQualityCheckSelect:A=>{$e(ue===A?null:A),Be(null),Ue(1),u(!1),l(new Set)},veriBadgeItems:Xe,selectedVeriBadge:oe,onVeriBadgeSelect:A=>{Be(oe===A?null:A),$e(null),Ue(1),u(!1),l(new Set)},onEntitySelect:A=>{const H=new Set(i);H.has(A)?H.delete(A):H.add(A),l(H),u(!1),$e(null),Be(null),p(1)},onUntaggedToggle:()=>{u(!c),l(new Set),$e(null),Be(null),p(1)},onSearchChange:A=>{x(A),p(1)}})}),o.jsxs("div",{className:"flex-1 space-y-4",children:[o.jsx("div",{className:"space-y-6",children:o.jsx(jt,{className:"pt-0 px-6 pb-6 border-0",children:ue||oe?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("h2",{className:"text-lg font-semibold text-foreground",children:oe?((Vl=Xe.find(A=>A.id===oe))==null?void 0:Vl.label)||"VeriBadge":((ql=Ap.find(A=>A.id===ue))==null?void 0:ql.label)||"Quality Check"}),o.jsxs(he,{variant:"secondary",className:"font-normal",children:[rt.length.toLocaleString()," ",oe?"entr":"issue",rt.length!==1?"ies":"y"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[ue==="empty-summary"&&o.jsxs(q,{variant:"default",size:"sm",disabled:ge||rt.length===0,onClick:async()=>{De(!0);const A=rt.map(K=>K.date);let H=0;for(const K of A)try{await fetch(`/api/analysis/date/${K}`,{method:"POST"}),H++}catch(te){console.error(`Failed to analyze ${K}:`,te)}De(!1),X.invalidateQueries({queryKey:["empty-summary-entries"]}),X.invalidateQueries({queryKey:["quality-violations"]}),e({title:"Analysis complete",description:`Analyzed ${H} date(s)`})},children:[ge?o.jsx(et,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(pn,{className:"w-4 h-4 mr-2"}),"Analyse All Days"]}),(ue==="too-short"||ue==="too-long")&&o.jsxs(pl,{onValueChange:async A=>{if(A==="adjust-length"){De(!0);try{const K=await(await fetch("/api/quality-check/bulk-adjust-length",{method:"POST"})).json();e({title:"Length adjustment complete",description:`Updated ${K.updated} summaries`}),X.invalidateQueries({queryKey:["quality-violations"]})}catch{e({title:"Error",description:"Failed to adjust lengths",variant:"destructive"})}De(!1)}else if(A==="regenerate"){De(!0);try{const K=await(await fetch("/api/quality-check/bulk-regenerate-summaries",{method:"POST"})).json();e({title:"Regeneration complete",description:`Updated ${K.updated} summaries`}),X.invalidateQueries({queryKey:["quality-violations"]})}catch{e({title:"Error",description:"Failed to regenerate summaries",variant:"destructive"})}De(!1)}},children:[o.jsx(Ba,{className:"w-[200px]",disabled:ge,children:o.jsx(gl,{placeholder:"Select bulk action"})}),o.jsxs(Ka,{children:[o.jsx(nn,{value:"adjust-length",children:"Adjust Length"}),o.jsx(nn,{value:"regenerate",children:"Regenerate Summaries"})]})]}),ue==="ends-period"&&o.jsxs(q,{variant:"default",size:"sm",disabled:ge||rt.length===0,onClick:async()=>{De(!0);try{const H=await(await fetch("/api/quality-check/bulk-remove-periods",{method:"POST"})).json();e({title:"Periods removed",description:`Updated ${H.updated} summaries`}),X.invalidateQueries({queryKey:["quality-violations"]})}catch{e({title:"Error",description:"Failed to remove periods",variant:"destructive"})}De(!1)},children:[ge?o.jsx(et,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(On,{className:"w-4 h-4 mr-2"}),"Remove All Periods"]})]})]}),o.jsx(Kh,{analyses:tn.map(A=>({date:A.date,summary:A.summary||"",tags_version2:[],tier:void 0,url:void 0,source_url:void 0,isManualOverride:!1})),isLoading:oe==="manual"?Ct:oe==="orphan"?I:oe==="verified"?V:oe==="not-available"?ie:oe==="empty"?Ae:ue==="empty-summary"?nt:ue==="untagged"?Qt:ue==="missing-months"?Ot:He,selectedDates:h,onDateSelect:A=>{f(H=>new Set(H).add(A))},onDateDeselect:A=>{f(H=>{const K=new Set(H);return K.delete(A),K})},onRowClick:A=>t(`/day/${A}`),onTagClick:A=>x(A),emptyMessage:"No issues found in this category",showCheckbox:!0,pageSize:s,currentPage:Me,totalCount:rt.length,catalogData:de,onPageChange:A=>Ue(A),onPageSizeChange:A=>{a(A),Ue(1)},onSelectAll:Mn,selectAllMatching:w,pageSizeOptions:Cj,showPagination:!0,showSelectAll:!0,showBulkActions:!0,bulkActions:{showSelectAllLink:!0,onSelectAllMatching:()=>g(!0),onClearSelection:()=>{f(new Set),g(!1)}}})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("h2",{className:"text-lg font-semibold text-foreground",children:c?"Untagged Analyses":"Events Manager"}),o.jsxs(he,{variant:"secondary",className:"font-normal",children:[ze.toLocaleString()," result",ze!==1?"s":""]})]}),ze>0&&o.jsxs(q,{variant:"outline",size:"sm",onClick:Ju,disabled:w||h.size>50,className:"flex items-center space-x-2","data-testid":"button-copy-txt",children:[o.jsx(dC,{className:"w-4 h-4"}),o.jsx("span",{children:"Copy TXT"})]})]}),o.jsx(Kh,{analyses:ve,isLoading:pe,selectedDates:h,onDateSelect:A=>{f(H=>new Set(H).add(A))},onDateDeselect:A=>{f(H=>{const K=new Set(H);return K.delete(A),K})},onRowClick:A=>t(`/day/${A}`),onTagClick:A=>x(A),emptyMessage:c?"No untagged analyses found":i.size>0?"No analyses match the selected entities":v?"No analyses match your search":"No tagged analyses found",showCheckbox:!0,pageSize:s,currentPage:m,totalCount:ze,catalogData:de,onPageChange:A=>p(A),onPageSizeChange:A=>{a(A),p(1)},onSelectAll:Mn,selectAllMatching:w,pageSizeOptions:Cj,showPagination:!0,showSelectAll:!0,showBulkActions:!0,bulkActions:{showSelectAllLink:!0,onSelectAllMatching:()=>g(!0),onClearSelection:()=>{f(new Set),g(!1)},customActions:o.jsxs(o.Fragment,{children:[o.jsxs(Ol,{children:[o.jsx(Il,{asChild:!0,children:o.jsxs(q,{variant:"outline",size:"sm",disabled:ge,title:"Re-analyze (R)",children:[o.jsx(pn,{className:`w-4 h-4 mr-2 ${ge?"animate-spin":""}`}),"Re-analyze",o.jsx(Wo,{className:"w-4 h-4 ml-2"})]})}),o.jsxs(Ya,{align:"end",children:[o.jsxs(nr,{onClick:async()=>{De(!0);const A=w?ve.map(H=>H.date):Array.from(h);for(const H of A)try{await fetch(`/api/analysis/date/${H}`,{method:"POST"})}catch(K){console.error(`Failed to analyze ${H}:`,K)}De(!1),X.invalidateQueries({queryKey:["analyses"]}),e({title:"Re-analysis complete",description:`Analyzed ${A.length} date(s)`})},disabled:ge,children:[o.jsx(pn,{className:"w-4 h-4 mr-2"}),"Analyse Days"]}),o.jsxs(nr,{onClick:async()=>{De(!0);const A=w?ve.map(H=>H.date):Array.from(h);for(const H of A)try{await fetch(`/api/analysis/date/${H}/redo-summary`,{method:"POST"})}catch(K){console.error(`Failed to redo summary for ${H}:`,K)}De(!1),X.invalidateQueries({queryKey:["analyses"]}),e({title:"Summaries updated",description:`Redid summaries for ${A.length} date(s)`})},disabled:ge,children:[o.jsx(Ss,{className:"w-4 h-4 mr-2"}),"Redo Summaries"]})]})]}),o.jsxs(q,{variant:"outline",size:"sm",disabled:Ee,onClick:async()=>{fe(!0);try{await fetch("/api/tags/categorize/start",{method:"POST"}),e({title:"Auto Tagging started",description:"AI is categorizing tags in the background"})}catch{e({title:"Error",description:"Failed to start auto tagging",variant:"destructive"})}fe(!1)},children:[Ee?o.jsx(et,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(Ex,{className:"w-4 h-4 mr-2"}),"Auto Tagging"]}),o.jsxs(q,{variant:"outline",size:"sm",onClick:()=>B(!0),children:[o.jsx(Jc,{className:"w-4 h-4 mr-2"}),"Manage Tags"]})]})}})]})})}),o.jsx(Zt,{open:j,onOpenChange:S,children:o.jsxs(Vt,{className:"max-w-2xl",children:[o.jsxs(qt,{children:[o.jsx(Ht,{children:"Copy Analyses to Clipboard"}),o.jsx(Pn,{children:"The text below has been selected for you. Press Ctrl+C or Cmd+C to copy."})]}),o.jsx("div",{className:"mt-4",children:o.jsx("textarea",{readOnly:!0,value:_,className:"w-full h-64 p-2 border rounded bg-slate-50 text-sm text-slate-800",onFocus:A=>A.target.select(),autoFocus:!0,"data-testid":"textarea-copy"})}),o.jsx("div",{className:"flex justify-end pt-4",children:o.jsx(q,{onClick:()=>S(!1),variant:"outline","data-testid":"button-close-copy-dialog",children:"Close"})})]})}),o.jsx(Zt,{open:Q,onOpenChange:ce,children:o.jsxs(Vt,{children:[o.jsx(qt,{children:o.jsxs(Ht,{children:["Add Tag to ",w?ze:h.size," Analyses"]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-slate-700 mb-1 block",children:"Tag Name"}),o.jsx(An,{placeholder:"Enter tag name",value:$,onChange:A=>W(A.target.value),"data-testid":"input-bulk-tag-name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-slate-700 mb-1 block",children:"Category"}),o.jsxs("select",{value:ae,onChange:A=>_e(A.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-md","data-testid":"select-bulk-category",children:[o.jsx("option",{value:"crypto",children:"Cryptocurrency"}),o.jsx("option",{value:"company",children:"Company"}),o.jsx("option",{value:"person",children:"Person"}),o.jsx("option",{value:"country",children:"Country"}),o.jsx("option",{value:"organization",children:"Organization"}),o.jsx("option",{value:"protocol",children:"Protocol"}),o.jsx("option",{value:"topic",children:"Topic"})]})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(q,{variant:"outline",onClick:()=>ce(!1),"data-testid":"button-cancel-bulk-add",children:"Cancel"}),o.jsx(q,{onClick:Ul,disabled:Hn.isPending,"data-testid":"button-confirm-bulk-add",children:Hn.isPending?"Adding...":"Add Tag"})]})]})]})}),o.jsx(Zt,{open:Y,onOpenChange:O,children:o.jsxs(Vt,{className:"max-w-2xl",children:[o.jsx(qt,{children:o.jsxs(Ht,{children:["Remove Tags from ",w?ze:h.size," Analyses"]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-slate-600",children:"Click on any tag below to remove it from all selected analyses:"}),Bl?o.jsx("div",{className:"text-center py-8 text-slate-500",children:"Loading tags..."}):Zs.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(rs,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),o.jsx("p",{className:"text-slate-500",children:"No tags found in selected analyses"})]}):o.jsx("div",{className:"max-h-96 overflow-y-auto",children:o.jsx("div",{className:"flex flex-wrap gap-2",children:Zs.map(A=>o.jsxs(he,{variant:"outline",className:`${vl(A.category)} cursor-pointer hover:opacity-70 transition-opacity px-3 py-2`,onClick:()=>Kl(A),"data-testid":`badge-remove-${A.category}-${A.name}`,children:[o.jsx("span",{className:"font-medium",children:A.name}),o.jsxs("span",{className:"ml-2 text-xs opacity-60",children:["(",A.category,")"]}),o.jsx(On,{className:"w-3 h-3 ml-2"})]},`${A.category}::${A.name}`))})}),o.jsx("div",{className:"flex justify-end space-x-2 pt-2 border-t",children:o.jsx(q,{variant:"outline",onClick:()=>O(!1),"data-testid":"button-cancel-bulk-remove",children:"Close"})})]})]})}),o.jsx(Zt,{open:T,onOpenChange:B,children:o.jsxs(Vt,{className:"max-w-2xl",children:[o.jsxs(qt,{children:[o.jsxs(Ht,{className:"flex items-center gap-2",children:[o.jsx(Jc,{className:"w-5 h-5"}),"Manage Tags for ",w?ze.toLocaleString():h.size," Analyses"]}),o.jsx(Pn,{children:"View, add, or remove tags from all selected analyses"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg border",children:[o.jsxs("h4",{className:"text-sm font-medium mb-3 flex items-center gap-2",children:[o.jsx(Fo,{className:"w-4 h-4"}),"Add New Tag"]}),o.jsxs("div",{className:"flex items-end gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"Tag Name"}),o.jsx(An,{placeholder:"Enter tag name",value:$,onChange:A=>W(A.target.value),className:"h-9"})]}),o.jsxs("div",{className:"w-40",children:[o.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"Category"}),o.jsxs(pl,{value:ae,onValueChange:_e,children:[o.jsx(Ba,{className:"h-9",children:o.jsx(gl,{})}),o.jsxs(Ka,{children:[o.jsx(nn,{value:"crypto",children:"Cryptocurrency"}),o.jsx(nn,{value:"company",children:"Company"}),o.jsx(nn,{value:"person",children:"Person"}),o.jsx(nn,{value:"country",children:"Country"}),o.jsx(nn,{value:"organization",children:"Organization"}),o.jsx(nn,{value:"protocol",children:"Protocol"}),o.jsx(nn,{value:"topic",children:"Topic"})]})]})]}),o.jsx(q,{size:"sm",onClick:()=>{$.trim()&&(Ul(),B(!1))},disabled:!$.trim()||Hn.isPending,className:"h-9",children:Hn.isPending?o.jsx(et,{className:"w-4 h-4 animate-spin"}):o.jsx(Fo,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-medium mb-3 flex items-center gap-2",children:[o.jsx(rs,{className:"w-4 h-4"}),"Existing Tags",o.jsx(he,{variant:"secondary",className:"font-normal ml-1",children:Zs.length})]}),Bl?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(et,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading tags..."]}):Zs.length===0?o.jsxs("div",{className:"text-center py-8 border border-dashed rounded-lg",children:[o.jsx(rs,{className:"w-10 h-10 text-muted-foreground/30 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"No tags found in selected analyses"})]}):o.jsx("div",{className:"max-h-64 overflow-y-auto border rounded-lg p-3",children:o.jsx("div",{className:"flex flex-wrap gap-2",children:Zs.map(A=>o.jsxs(he,{variant:"outline",className:`${vl(A.category)} group cursor-pointer hover:opacity-80 transition-all px-3 py-1.5`,onClick:()=>Kl(A),children:[o.jsx("span",{className:"font-medium",children:A.name}),o.jsxs("span",{className:"ml-1.5 text-xs opacity-60",children:["(",A.category,")"]}),o.jsx(On,{className:"w-3 h-3 ml-2 opacity-0 group-hover:opacity-100 transition-opacity"})]},`manage-${A.category}::${A.name}`))})}),o.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Click on a tag to remove it from all selected analyses"})]}),o.jsx("div",{className:"flex justify-end pt-2 border-t",children:o.jsx(q,{variant:"outline",onClick:()=>B(!1),children:"Done"})})]})]})}),o.jsx(zT,{open:C,onOpenChange:E,tag:P,onConfirm:A=>{P&&zr.mutate({tagName:P.name,oldCategory:P.category,newName:A.newName,newCategory:A.newCategory,newSubcategoryPath:A.newSubcategoryPath})},isLoading:zr.isPending}),o.jsx(UT,{open:D,onOpenChange:R,tag:P,onConfirm:async()=>{if(P)try{const A=await fetch(`/api/tags-manager/find-categories?tagName=${encodeURIComponent(P.name)}`);if(A.ok){const H=await A.json();if(H.categories&&H.categories.length>0){const K=H.categories.map(we=>fetch("/api/tags-manager/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tagName:P.name,category:we.category})})),te=await Promise.all(K);if(te.every(we=>we.ok)){const Qe=(await Promise.all(te.map(_t=>_t.json().then(ut=>ut.updated||0)))).reduce((_t,ut)=>_t+ut,0);e({title:"Tag Deleted",description:`Tag has been deleted from ${Qe} analyses across ${H.categories.length} category(ies)`}),await X.invalidateQueries({queryKey:["supabase-tags-catalog"]}),await X.invalidateQueries({queryKey:["tags-catalog-v2"]}),await X.invalidateQueries({queryKey:["supabase-tags-analyses"]}),R(!1),G(null)}else throw new Error("Some deletions failed")}else console.warn(`No categories found for "${P.name}", using provided category: ${P.category}`),Ur.mutate({tagName:P.name,category:P.category})}else console.warn(`Failed to find categories for "${P.name}", using provided category: ${P.category}`),Ur.mutate({tagName:P.name,category:P.category})}catch(A){console.error(`Error finding categories for "${P.name}":`,A),Ur.mutate({tagName:P.name,category:P.category})}},isLoading:Ur.isPending})]})]})})})}function A7(){return o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-background p-4",children:o.jsxs(jt,{className:"w-full max-w-lg",children:[o.jsxs(zs,{className:"text-center",children:[o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("div",{className:"rounded-full bg-muted p-3",children:o.jsx(Ws,{className:"h-12 w-12 text-muted-foreground"})})}),o.jsx(Us,{className:"text-4xl font-bold",children:"404"}),o.jsx(tu,{className:"text-lg mt-2",children:"Page Not Found"})]}),o.jsx(on,{className:"text-center",children:o.jsx("p",{className:"text-muted-foreground",children:"The page you're looking for doesn't exist or has been moved."})}),o.jsx(sx,{className:"flex justify-center",children:o.jsx(kn,{href:"/",children:o.jsxs(q,{children:[o.jsx(pC,{className:"mr-2 h-4 w-4"}),"Go Home"]})})})]})})}var Ja="NavigationMenu",[c0,HR,O7]=_l(Ja),[Mv,I7,M7]=_l(Ja),[u0]=Nn(Ja,[O7,M7]),[D7,Fr]=u0(Ja),[$7,L7]=u0(Ja),WR=d.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,value:r,onValueChange:s,defaultValue:a,delayDuration:i=200,skipDelayDuration:l=300,orientation:c="horizontal",dir:u,...h}=e,[f,m]=d.useState(null),p=qe(t,E=>m(E)),w=Al(u),g=d.useRef(0),y=d.useRef(0),x=d.useRef(0),[v,b]=d.useState(!0),[j,S]=rr({prop:r,onChange:E=>{const D=E!=="",R=l>0;D?(window.clearTimeout(x.current),R&&b(!1)):(window.clearTimeout(x.current),x.current=window.setTimeout(()=>b(!0),l)),s==null||s(E)},defaultProp:a??"",caller:Ja}),_=d.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>S(""),150)},[S]),N=d.useCallback(E=>{window.clearTimeout(y.current),S(E)},[S]),C=d.useCallback(E=>{j===E?window.clearTimeout(y.current):g.current=window.setTimeout(()=>{window.clearTimeout(y.current),S(E)},i)},[j,S,i]);return d.useEffect(()=>()=>{window.clearTimeout(g.current),window.clearTimeout(y.current),window.clearTimeout(x.current)},[]),o.jsx(GR,{scope:n,isRootMenu:!0,value:j,dir:w,orientation:c,rootNavigationMenu:f,onTriggerEnter:E=>{window.clearTimeout(g.current),v?C(E):N(E)},onTriggerLeave:()=>{window.clearTimeout(g.current),_()},onContentEnter:()=>window.clearTimeout(y.current),onContentLeave:_,onItemSelect:E=>{S(D=>D===E?"":E)},onItemDismiss:()=>S(""),children:o.jsx(ye.nav,{"aria-label":"Main","data-orientation":c,dir:w,...h,ref:p})})});WR.displayName=Ja;var Dv="NavigationMenuSub",F7=d.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,value:r,onValueChange:s,defaultValue:a,orientation:i="horizontal",...l}=e,c=Fr(Dv,n),[u,h]=rr({prop:r,onChange:s,defaultProp:a??"",caller:Dv});return o.jsx(GR,{scope:n,isRootMenu:!1,value:u,dir:c.dir,orientation:i,rootNavigationMenu:c.rootNavigationMenu,onTriggerEnter:f=>h(f),onItemSelect:f=>h(f),onItemDismiss:()=>h(""),children:o.jsx(ye.div,{"data-orientation":i,...l,ref:t})})});F7.displayName=Dv;var GR=e=>{const{scope:t,isRootMenu:n,rootNavigationMenu:r,dir:s,orientation:a,children:i,value:l,onItemSelect:c,onItemDismiss:u,onTriggerEnter:h,onTriggerLeave:f,onContentEnter:m,onContentLeave:p}=e,[w,g]=d.useState(null),[y,x]=d.useState(new Map),[v,b]=d.useState(null);return o.jsx(D7,{scope:t,isRootMenu:n,rootNavigationMenu:r,value:l,previousValue:jx(l),baseId:Un(),dir:s,orientation:a,viewport:w,onViewportChange:g,indicatorTrack:v,onIndicatorTrackChange:b,onTriggerEnter:Et(h),onTriggerLeave:Et(f),onContentEnter:Et(m),onContentLeave:Et(p),onItemSelect:Et(c),onItemDismiss:Et(u),onViewportContentChange:d.useCallback((j,S)=>{x(_=>(_.set(j,S),new Map(_)))},[]),onViewportContentRemove:d.useCallback(j=>{x(S=>S.has(j)?(S.delete(j),new Map(S)):S)},[]),children:o.jsx(c0.Provider,{scope:t,children:o.jsx($7,{scope:t,items:y,children:i})})})},QR="NavigationMenuList",YR=d.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,...r}=e,s=Fr(QR,n),a=o.jsx(ye.ul,{"data-orientation":s.orientation,...r,ref:t});return o.jsx(ye.div,{style:{position:"relative"},ref:s.onIndicatorTrackChange,children:o.jsx(c0.Slot,{scope:n,children:s.isRootMenu?o.jsx(aP,{asChild:!0,children:a}):a})})});YR.displayName=QR;var JR="NavigationMenuItem",[z7,XR]=u0(JR),ZR=d.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,value:r,...s}=e,a=Un(),i=r||a||"LEGACY_REACT_AUTO_VALUE",l=d.useRef(null),c=d.useRef(null),u=d.useRef(null),h=d.useRef(()=>{}),f=d.useRef(!1),m=d.useCallback((w="start")=>{if(l.current){h.current();const g=Lv(l.current);g.length&&f0(w==="start"?g:g.reverse())}},[]),p=d.useCallback(()=>{if(l.current){const w=Lv(l.current);w.length&&(h.current=W7(w))}},[]);return o.jsx(z7,{scope:n,value:i,triggerRef:c,contentRef:l,focusProxyRef:u,wasEscapeCloseRef:f,onEntryKeyDown:m,onFocusProxyEnter:m,onRootContentClose:p,onContentFocusOutside:p,children:o.jsx(ye.li,{...s,ref:t})})});ZR.displayName=JR;var $v="NavigationMenuTrigger",eP=d.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,disabled:r,...s}=e,a=Fr($v,e.__scopeNavigationMenu),i=XR($v,e.__scopeNavigationMenu),l=d.useRef(null),c=qe(l,i.triggerRef,t),u=lP(a.baseId,i.value),h=cP(a.baseId,i.value),f=d.useRef(!1),m=d.useRef(!1),p=i.value===a.value;return o.jsxs(o.Fragment,{children:[o.jsx(c0.ItemSlot,{scope:n,value:i.value,children:o.jsx(iP,{asChild:!0,children:o.jsx(ye.button,{id:u,disabled:r,"data-disabled":r?"":void 0,"data-state":m0(p),"aria-expanded":p,"aria-controls":h,...s,ref:c,onPointerEnter:Z(e.onPointerEnter,()=>{m.current=!1,i.wasEscapeCloseRef.current=!1}),onPointerMove:Z(e.onPointerMove,af(()=>{r||m.current||i.wasEscapeCloseRef.current||f.current||(a.onTriggerEnter(i.value),f.current=!0)})),onPointerLeave:Z(e.onPointerLeave,af(()=>{r||(a.onTriggerLeave(),f.current=!1)})),onClick:Z(e.onClick,()=>{a.onItemSelect(i.value),m.current=p}),onKeyDown:Z(e.onKeyDown,w=>{const y={horizontal:"ArrowDown",vertical:a.dir==="rtl"?"ArrowLeft":"ArrowRight"}[a.orientation];p&&w.key===y&&(i.onEntryKeyDown(),w.preventDefault())})})})}),p&&o.jsxs(o.Fragment,{children:[o.jsx(L1,{"aria-hidden":!0,tabIndex:0,ref:i.focusProxyRef,onFocus:w=>{const g=i.contentRef.current,y=w.relatedTarget,x=y===l.current,v=g==null?void 0:g.contains(y);(x||!v)&&i.onFocusProxyEnter(x?"start":"end")}}),a.viewport&&o.jsx("span",{"aria-owns":h})]})]})});eP.displayName=$v;var U7="NavigationMenuLink",_j="navigationMenu.linkSelect",tP=d.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,active:r,onSelect:s,...a}=e;return o.jsx(iP,{asChild:!0,children:o.jsx(ye.a,{"data-active":r?"":void 0,"aria-current":r?"page":void 0,...a,ref:t,onClick:Z(e.onClick,i=>{const l=i.target,c=new CustomEvent(_j,{bubbles:!0,cancelable:!0});if(l.addEventListener(_j,u=>s==null?void 0:s(u),{once:!0}),Wc(l,c),!c.defaultPrevented&&!i.metaKey){const u=new CustomEvent(sh,{bubbles:!0,cancelable:!0});Wc(l,u)}},{checkForDefaultPrevented:!1})})})});tP.displayName=U7;var d0="NavigationMenuIndicator",nP=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Fr(d0,e.__scopeNavigationMenu),a=!!s.value;return s.indicatorTrack?e1.createPortal(o.jsx($t,{present:n||a,children:o.jsx(B7,{...r,ref:t})}),s.indicatorTrack):null});nP.displayName=d0;var B7=d.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,...r}=e,s=Fr(d0,n),a=HR(n),[i,l]=d.useState(null),[c,u]=d.useState(null),h=s.orientation==="horizontal",f=!!s.value;d.useEffect(()=>{var g;const w=(g=a().find(y=>y.value===s.value))==null?void 0:g.ref.current;w&&l(w)},[a,s.value]);const m=()=>{i&&u({size:h?i.offsetWidth:i.offsetHeight,offset:h?i.offsetLeft:i.offsetTop})};return Fv(i,m),Fv(s.indicatorTrack,m),c?o.jsx(ye.div,{"aria-hidden":!0,"data-state":f?"visible":"hidden","data-orientation":s.orientation,...r,ref:t,style:{position:"absolute",...h?{left:0,width:c.size+"px",transform:`translateX(${c.offset}px)`}:{top:0,height:c.size+"px",transform:`translateY(${c.offset}px)`},...r.style}}):null}),xl="NavigationMenuContent",rP=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Fr(xl,e.__scopeNavigationMenu),a=XR(xl,e.__scopeNavigationMenu),i=qe(a.contentRef,t),l=a.value===s.value,c={value:a.value,triggerRef:a.triggerRef,focusProxyRef:a.focusProxyRef,wasEscapeCloseRef:a.wasEscapeCloseRef,onContentFocusOutside:a.onContentFocusOutside,onRootContentClose:a.onRootContentClose,...r};return s.viewport?o.jsx(K7,{forceMount:n,...c,ref:i}):o.jsx($t,{present:n||l,children:o.jsx(sP,{"data-state":m0(l),...c,ref:i,onPointerEnter:Z(e.onPointerEnter,s.onContentEnter),onPointerLeave:Z(e.onPointerLeave,af(s.onContentLeave)),style:{pointerEvents:!l&&s.isRootMenu?"none":void 0,...c.style}})})});rP.displayName=xl;var K7=d.forwardRef((e,t)=>{const n=Fr(xl,e.__scopeNavigationMenu),{onViewportContentChange:r,onViewportContentRemove:s}=n;return en(()=>{r(e.value,{ref:t,...e})},[e,t,r]),en(()=>()=>s(e.value),[e.value,s]),null}),sh="navigationMenu.rootContentDismiss",sP=d.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,value:r,triggerRef:s,focusProxyRef:a,wasEscapeCloseRef:i,onRootContentClose:l,onContentFocusOutside:c,...u}=e,h=Fr(xl,n),f=d.useRef(null),m=qe(f,t),p=lP(h.baseId,r),w=cP(h.baseId,r),g=HR(n),y=d.useRef(null),{onItemDismiss:x}=h;d.useEffect(()=>{const b=f.current;if(h.isRootMenu&&b){const j=()=>{var S;x(),l(),b.contains(document.activeElement)&&((S=s.current)==null||S.focus())};return b.addEventListener(sh,j),()=>b.removeEventListener(sh,j)}},[h.isRootMenu,e.value,s,x,l]);const v=d.useMemo(()=>{const j=g().map(D=>D.value);h.dir==="rtl"&&j.reverse();const S=j.indexOf(h.value),_=j.indexOf(h.previousValue),N=r===h.value,C=_===j.indexOf(r);if(!N&&!C)return y.current;const E=(()=>{if(S!==_){if(N&&_!==-1)return S>_?"from-end":"from-start";if(C&&S!==-1)return S>_?"to-start":"to-end"}return null})();return y.current=E,E},[h.previousValue,h.value,h.dir,g,r]);return o.jsx(aP,{asChild:!0,children:o.jsx(Js,{id:w,"aria-labelledby":p,"data-motion":v,"data-orientation":h.orientation,...u,ref:m,disableOutsidePointerEvents:!1,onDismiss:()=>{var j;const b=new Event(sh,{bubbles:!0,cancelable:!0});(j=f.current)==null||j.dispatchEvent(b)},onFocusOutside:Z(e.onFocusOutside,b=>{var S;c();const j=b.target;(S=h.rootNavigationMenu)!=null&&S.contains(j)&&b.preventDefault()}),onPointerDownOutside:Z(e.onPointerDownOutside,b=>{var N;const j=b.target,S=g().some(C=>{var E;return(E=C.ref.current)==null?void 0:E.contains(j)}),_=h.isRootMenu&&((N=h.viewport)==null?void 0:N.contains(j));(S||_||!h.isRootMenu)&&b.preventDefault()}),onKeyDown:Z(e.onKeyDown,b=>{var _;const j=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!j){const N=Lv(b.currentTarget),C=document.activeElement,E=N.findIndex(P=>P===C),R=b.shiftKey?N.slice(0,E).reverse():N.slice(E+1,N.length);f0(R)?b.preventDefault():(_=a.current)==null||_.focus()}}),onEscapeKeyDown:Z(e.onEscapeKeyDown,b=>{i.current=!0})})})}),h0="NavigationMenuViewport",oP=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=!!Fr(h0,e.__scopeNavigationMenu).value;return o.jsx($t,{present:n||a,children:o.jsx(V7,{...r,ref:t})})});oP.displayName=h0;var V7=d.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,children:r,...s}=e,a=Fr(h0,n),i=qe(t,a.onViewportChange),l=L7(xl,e.__scopeNavigationMenu),[c,u]=d.useState(null),[h,f]=d.useState(null),m=c?(c==null?void 0:c.width)+"px":void 0,p=c?(c==null?void 0:c.height)+"px":void 0,w=!!a.value,g=w?a.value:a.previousValue;return Fv(h,()=>{h&&u({width:h.offsetWidth,height:h.offsetHeight})}),o.jsx(ye.div,{"data-state":m0(w),"data-orientation":a.orientation,...s,ref:i,style:{pointerEvents:!w&&a.isRootMenu?"none":void 0,"--radix-navigation-menu-viewport-width":m,"--radix-navigation-menu-viewport-height":p,...s.style},onPointerEnter:Z(e.onPointerEnter,a.onContentEnter),onPointerLeave:Z(e.onPointerLeave,af(a.onContentLeave)),children:Array.from(l.items).map(([x,{ref:v,forceMount:b,...j}])=>{const S=g===x;return o.jsx($t,{present:b||S,children:o.jsx(sP,{...j,ref:Cl(v,_=>{S&&_&&f(_)})})},x)})})}),q7="FocusGroup",aP=d.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,...r}=e,s=Fr(q7,n);return o.jsx(Mv.Provider,{scope:n,children:o.jsx(Mv.Slot,{scope:n,children:o.jsx(ye.div,{dir:s.dir,...r,ref:t})})})}),Ej=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],H7="FocusGroupItem",iP=d.forwardRef((e,t)=>{const{__scopeNavigationMenu:n,...r}=e,s=I7(n),a=Fr(H7,n);return o.jsx(Mv.ItemSlot,{scope:n,children:o.jsx(ye.button,{...r,ref:t,onKeyDown:Z(e.onKeyDown,i=>{if(["Home","End",...Ej].includes(i.key)){let c=s().map(f=>f.ref.current);if([a.dir==="rtl"?"ArrowRight":"ArrowLeft","ArrowUp","End"].includes(i.key)&&c.reverse(),Ej.includes(i.key)){const f=c.indexOf(i.currentTarget);c=c.slice(f+1)}setTimeout(()=>f0(c)),i.preventDefault()}})})})});function Lv(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function f0(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}function W7(e){return e.forEach(t=>{t.dataset.tabindex=t.getAttribute("tabindex")||"",t.setAttribute("tabindex","-1")}),()=>{e.forEach(t=>{const n=t.dataset.tabindex;t.setAttribute("tabindex",n)})}}function Fv(e,t){const n=Et(t);en(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}function m0(e){return e?"open":"closed"}function lP(e,t){return`${e}-trigger-${t}`}function cP(e,t){return`${e}-content-${t}`}function af(e){return t=>t.pointerType==="mouse"?e(t):void 0}var uP=WR,dP=YR,G7=ZR,hP=eP,Q7=tP,fP=nP,mP=rP,pP=oP;const gP=d.forwardRef(({className:e,children:t,...n},r)=>o.jsx(uP,{ref:r,className:ee("relative z-10 flex max-w-max flex-1 items-center justify-center",e),...n,children:t}));gP.displayName=uP.displayName;const vP=d.forwardRef(({className:e,...t},n)=>o.jsx(dP,{ref:n,className:ee("group flex flex-1 list-none items-center justify-center space-x-1",e),...t}));vP.displayName=dP.displayName;const zv=d.forwardRef(({className:e,...t},n)=>o.jsx(G7,{ref:n,className:ee("relative",e),...t}));zv.displayName="NavigationMenuItem";const yP=Ho("group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent"),xP=d.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(hP,{ref:r,className:ee(yP(),"group",e),...n,children:[t," ",o.jsx(Wo,{className:"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180","aria-hidden":"true"})]}));xP.displayName=hP.displayName;const wP=d.forwardRef(({className:e,...t},n)=>o.jsx(mP,{ref:n,className:ee("absolute left-0 top-full mt-1.5 w-auto rounded-md border bg-popover text-popover-foreground shadow-lg data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95",e),...t}));wP.displayName=mP.displayName;const Dd=Q7,Y7=d.forwardRef(({className:e,...t},n)=>o.jsx("div",{className:ee("absolute left-0 top-full flex justify-start"),children:o.jsx(pP,{className:ee("origin-top-left relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",e),ref:n,...t})}));Y7.displayName=pP.displayName;const J7=d.forwardRef(({className:e,...t},n)=>o.jsx(fP,{ref:n,className:ee("top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",e),...t,children:o.jsx("div",{className:"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md"})}));J7.displayName=fP.displayName;function X7(){const[e,t]=d.useState([]),{data:n,isLoading:r,error:s}=ot({queryKey:["/api/health/status"],refetchInterval:3e5,staleTime:28e4,retry:3,retryDelay:h=>Math.min(1e3*2**h,3e4)}),a=n&&n.overall!=="operational"&&!e.length;return{health:n,isLoading:r,error:s,showBanner:a,dismissBanner:()=>{if(n){const h=n.apis.filter(f=>f.status!=="operational").map(f=>`${f.name}:${f.status}`);t(f=>[...f,...h])}},getStatusColor:h=>{switch(h){case"operational":return"text-green-600";case"degraded":return"text-yellow-600";case"outage":return"text-red-600";default:return"text-gray-600"}},getStatusDot:h=>{switch(h){case"operational":return"bg-green-500";case"degraded":return"bg-yellow-500";case"outage":return"bg-red-500";default:return"bg-gray-500"}},formatStatus:h=>h.status==="operational"?`${h.name} (${h.responseTime}ms)`:`${h.name} experiencing issues`}}var Sm="Popover",[bP]=Nn(Sm,[_s]),Yu=_s(),[Z7,Xo]=bP(Sm),jP=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:i=!1}=e,l=Yu(t),c=d.useRef(null),[u,h]=d.useState(!1),[f,m]=rr({prop:r,defaultProp:s??!1,onChange:a,caller:Sm});return o.jsx(Ru,{...l,children:o.jsx(Z7,{scope:t,contentId:Un(),triggerRef:c,open:f,onOpenChange:m,onOpenToggle:d.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:u,onCustomAnchorAdd:d.useCallback(()=>h(!0),[]),onCustomAnchorRemove:d.useCallback(()=>h(!1),[]),modal:i,children:n})})};jP.displayName=Sm;var SP="PopoverAnchor",eK=d.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Xo(SP,n),a=Yu(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=s;return d.useEffect(()=>(i(),()=>l()),[i,l]),o.jsx(Rl,{...a,...r,ref:t})});eK.displayName=SP;var NP="PopoverTrigger",CP=d.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Xo(NP,n),a=Yu(n),i=qe(t,s.triggerRef),l=o.jsx(ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":RP(s.open),...r,ref:i,onClick:Z(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:o.jsx(Rl,{asChild:!0,...a,children:l})});CP.displayName=NP;var p0="PopoverPortal",[tK,nK]=bP(p0,{forceMount:void 0}),_P=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,a=Xo(p0,t);return o.jsx(tK,{scope:t,forceMount:n,children:o.jsx($t,{present:n||a.open,children:o.jsx(Wa,{asChild:!0,container:s,children:r})})})};_P.displayName=p0;var wl="PopoverContent",EP=d.forwardRef((e,t)=>{const n=nK(wl,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,a=Xo(wl,e.__scopePopover);return o.jsx($t,{present:r||a.open,children:a.modal?o.jsx(sK,{...s,ref:t}):o.jsx(oK,{...s,ref:t})})});EP.displayName=wl;var rK=$a("PopoverContent.RemoveScroll"),sK=d.forwardRef((e,t)=>{const n=Xo(wl,e.__scopePopover),r=d.useRef(null),s=qe(t,r),a=d.useRef(!1);return d.useEffect(()=>{const i=r.current;if(i)return Ff(i)},[]),o.jsx(Mu,{as:rK,allowPinchZoom:!0,children:o.jsx(kP,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Z(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),a.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Z(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Z(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),oK=d.forwardRef((e,t)=>{const n=Xo(wl,e.__scopePopover),r=d.useRef(!1),s=d.useRef(!1);return o.jsx(kP,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),kP=d.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:h,...f}=e,m=Xo(wl,n),p=Yu(n);return Df(),o.jsx(Iu,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(Js,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:o.jsx(Pu,{"data-state":RP(m.open),role:"dialog",id:m.contentId,...p,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),TP="PopoverClose",aK=d.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Xo(TP,n);return o.jsx(ye.button,{type:"button",...r,ref:t,onClick:Z(e.onClick,()=>s.onOpenChange(!1))})});aK.displayName=TP;var iK="PopoverArrow",lK=d.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Yu(n);return o.jsx(Au,{...s,...r,ref:t})});lK.displayName=iK;function RP(e){return e?"open":"closed"}var cK=jP,uK=CP,dK=_P,PP=EP;const hK=cK,fK=uK,AP=d.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},s)=>o.jsx(dK,{children:o.jsx(PP,{ref:s,align:t,sideOffset:n,className:ee("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...r})}));AP.displayName=PP.displayName;function mK(){const{health:e,isLoading:t,getStatusDot:n}=X7();if(t)return o.jsx(iu,{className:"w-4 h-4 rounded-full"});if(!e)return o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Status Unknown"})]});const r=n(e.overall),s=a=>({openai:"OpenAI",gemini:"Gemini",perplexity:"Perplexity",exa:"Exa",EXA:"Exa"})[a.toLowerCase()]||a.charAt(0).toUpperCase()+a.slice(1).toLowerCase();return o.jsxs(hK,{children:[o.jsx(fK,{asChild:!0,children:o.jsxs(q,{variant:"ghost",size:"sm",className:"flex items-center space-x-2 h-8 px-2",children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${r}`}),o.jsx("span",{className:"text-sm",children:"API Status"})]})}),o.jsx(AP,{className:"w-72",align:"end",children:o.jsxs("div",{className:"space-y-2.5",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h4",{className:"font-semibold text-sm",children:"API Status"}),o.jsx(he,{variant:e.overall==="operational"?"default":"destructive",className:e.overall==="operational"?"bg-green-500/20 text-green-400 border-green-500/30 text-xs px-1.5 py-0":"text-xs px-1.5 py-0",children:e.overall})]}),o.jsx("div",{className:"space-y-1.5",children:e.apis.map(a=>o.jsxs("div",{className:"flex items-center justify-between py-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${n(a.status)}`}),o.jsx("span",{className:"font-medium text-xs",children:s(a.name)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[a.responseTime&&a.status==="operational"&&o.jsxs("span",{className:"text-xs text-muted-foreground",children:[a.responseTime,"ms"]}),a.error&&o.jsx("div",{className:"text-xs text-destructive max-w-28 truncate",children:a.error})]})]},a.name))}),o.jsxs("div",{className:"text-xs text-muted-foreground pt-1.5",children:["Last checked: ",new Date(e.lastUpdate).toLocaleTimeString()]})]})})]})}function pK(){const{activeAnalyses:e,stopAnalysis:t,hasActiveAnalyses:n}=c_(),{toast:r}=wr(),[s,a]=d.useState(!1);if(d.useEffect(()=>{n&&s&&a(!1)},[n,s]),!n)return null;const i=(u,h)=>{t(u),r({title:"Analysis stopped",description:`${h} has been cancelled.`})},l=u=>{const h=Math.floor((Date.now()-u)/1e3),f=Math.floor(h/60),m=h%60;return f>0?`${f}m ${m}s`:`${m}s`},c=u=>{switch(u){case"year":return cC;case"month":return Mo;case"batch":return Mo;default:return Mo}};return s?o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-blue-200 px-4 py-2 flex items-center justify-between shadow-sm",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),o.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[e.size," analysis",e.size>1?"es":""," running"]})]}),o.jsx(q,{variant:"ghost",size:"sm",onClick:()=>a(!1),className:"h-6 px-2 text-blue-700 hover:bg-blue-100",children:"Show"})]}):o.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-blue-200 px-4 py-3 shadow-sm",children:o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),o.jsxs("h3",{className:"text-sm font-semibold text-blue-900",children:["Running Analyses (",e.size,")"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(q,{variant:"ghost",size:"sm",onClick:()=>a(!0),className:"h-6 px-2 text-blue-700 hover:bg-blue-100",children:"Minimize"}),o.jsxs(q,{variant:"ghost",size:"sm",onClick:()=>{Array.from(e.keys()).forEach(u=>{const h=e.get(u);h&&i(u,h.label)})},className:"h-6 px-2 text-red-700 hover:bg-red-100",children:[o.jsx(On,{className:"w-3 h-3 mr-1"}),"Stop All"]})]})]}),o.jsx("div",{className:"space-y-3",children:Array.from(e.values()).map(u=>{const h=c(u.type),f=u.total>0?Math.round(u.completed/u.total*100):0;return o.jsxs("div",{className:"bg-white rounded-lg border border-blue-200 p-3",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(h,{className:"w-4 h-4 text-blue-600"}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-sm font-medium text-slate-900",children:u.label}),o.jsx(he,{variant:"secondary",className:"text-xs",children:u.type})]}),o.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[u.completed," / ",u.total," completed",u.currentDate&&o.jsxs("span",{className:"ml-2",children:[" Currently: ",u.currentDate]}),o.jsxs("span",{className:"ml-2",children:[" ",l(u.startTime)]})]})]})]}),o.jsxs(q,{variant:"outline",size:"sm",onClick:()=>i(u.id,u.label),className:"flex items-center space-x-1 text-red-600 border-red-200 hover:bg-red-50",children:[o.jsx(uD,{className:"w-3 h-3"}),o.jsx("span",{children:"Stop"})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex justify-between text-xs text-slate-600",children:[o.jsxs("span",{children:[f,"% complete"]}),o.jsxs("span",{children:[u.completed," / ",u.total]})]}),o.jsx(l0,{value:f,className:"h-2"})]})]},u.id)})})]})})}function gK({children:e}){const[t]=_u(),n=[{path:"/",label:"Home",icon:rs},{path:"/monthly",label:"Monthly View",icon:Mo}];return o.jsxs("div",{className:"min-h-screen",children:[o.jsx(pK,{}),o.jsx("header",{className:"sticky top-0 z-40 bg-card",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"relative flex justify-between items-center h-16",children:[o.jsx("div",{className:"flex items-center",children:o.jsxs(kn,{href:"/",className:"flex items-center space-x-2 hover:opacity-80",children:[o.jsx("div",{className:"w-8 h-8 bg-black border border-white rounded-full flex items-center justify-center",children:o.jsx(Jg,{className:"text-white w-4 h-4"})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("h1",{className:"text-xl font-bold text-foreground leading-tight",children:"The Origins"}),o.jsx("span",{className:"text-[10px] text-muted-foreground leading-tight",children:"News Analyser"})]})]})}),o.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2",children:o.jsx(gP,{className:"hidden md:flex",delayDuration:0,children:o.jsxs(vP,{className:"gap-1",children:[n.map(r=>{const s=t===r.path;return o.jsx(zv,{children:o.jsx(kn,{href:r.path,children:o.jsx(Dd,{className:yP({className:`${s?"bg-accent text-accent-foreground":""}`}),children:r.label})})},r.path)}),o.jsxs(zv,{children:[o.jsx(xP,{children:"Manager"}),o.jsx(wP,{children:o.jsxs("ul",{className:"grid w-[280px] gap-1 p-2 bg-accent rounded-md",children:[o.jsx("li",{children:o.jsx(Dd,{asChild:!0,children:o.jsxs(kn,{href:"/admin",className:"block select-none space-y-0.5 rounded-md p-2 leading-none no-underline outline-none transition-all duration-200 bg-accent hover:bg-primary/10 hover:shadow-sm focus:bg-primary/10 focus:text-accent-foreground cursor-pointer group",children:[o.jsx("div",{className:"text-xs font-medium leading-none group-hover:text-primary transition-colors",children:"Admin"}),o.jsx("p",{className:"line-clamp-2 text-xs leading-snug text-muted-foreground group-hover:text-foreground/80 transition-colors",children:"Export data and settings."})]})})}),o.jsx("li",{children:o.jsx(Dd,{asChild:!0,children:o.jsxs(kn,{href:"/tags-manager",className:"block select-none space-y-0.5 rounded-md p-2 leading-none no-underline outline-none transition-all duration-200 bg-accent hover:bg-primary/10 hover:shadow-sm focus:bg-primary/10 focus:text-accent-foreground cursor-pointer group",children:[o.jsx("div",{className:"text-xs font-medium leading-none group-hover:text-primary transition-colors",children:"Tag Manager"}),o.jsx("p",{className:"line-clamp-2 text-xs leading-snug text-muted-foreground group-hover:text-foreground/80 transition-colors",children:"Organize and manage tags with drag-drop."})]})})}),o.jsx("li",{children:o.jsx(Dd,{asChild:!0,children:o.jsxs(kn,{href:"/events",className:"block select-none space-y-0.5 rounded-md p-2 leading-none no-underline outline-none transition-all duration-200 bg-accent hover:bg-primary/10 hover:shadow-sm focus:bg-primary/10 focus:text-accent-foreground cursor-pointer group",children:[o.jsx("div",{className:"text-xs font-medium leading-none group-hover:text-primary transition-colors",children:"Events"}),o.jsx("p",{className:"line-clamp-2 text-xs leading-snug text-muted-foreground group-hover:text-foreground/80 transition-colors",children:"View and change events."})]})})})]})})]})]})})}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(mK,{}),o.jsx(zR,{})]})]})})}),o.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e})]})}function vK(){return o.jsx(gK,{children:o.jsxs(OI,{children:[o.jsx(Wn,{path:"/",component:nj}),o.jsx(Wn,{path:"/monthly",component:H8}),o.jsx(Wn,{path:"/month/:year/:month",component:B8}),o.jsx(Wn,{path:"/day/:date",component:cU}),o.jsx(Wn,{path:"/events",component:P7}),o.jsx(Wn,{path:"/tags-browser",component:nj}),o.jsx(Wn,{path:"/tags-cleanup",component:uU}),o.jsx(Wn,{path:"/tags-manager",component:a9}),o.jsx(Wn,{path:"/conflict/:sourceDate",component:Pp}),o.jsx(Wn,{path:"/violation/:date",component:Pp}),o.jsx(Wn,{path:"/fact-check/:date",component:Pp}),o.jsx(Wn,{path:"/admin",component:R7}),o.jsx(Wn,{path:"/lab/isolated",component:x7}),o.jsx(Wn,{component:A7})]})})}function yK(){return o.jsx(t3,{children:o.jsx(sM,{client:X,children:o.jsx(n3,{children:o.jsxs(r_,{children:[o.jsx(s4,{}),o.jsx(vK,{})]})})})})}typeof window<"u"&&(window.addEventListener("unhandledrejection",e=>{var n;const t=((n=e.reason)==null?void 0:n.toString())||"";if(t.includes("NetworkError")||t.includes("fetch")||t.includes("AbortError")||t.includes("The user aborted a request")){e.preventDefault();return}console.group(" Unhandled Promise Rejection"),console.error("Promise rejection:",e.reason),console.error("Promise:",e.promise),console.trace("Stack trace"),console.groupEnd(),e.preventDefault()}),window.addEventListener("error",e=>{console.group(" Uncaught JavaScript Error"),console.error("Error:",e.error),console.error("Message:",e.message),console.error("Filename:",e.filename),console.error("Line:",e.lineno),console.error("Column:",e.colno),console.trace("Stack trace"),console.groupEnd()}));t1(document.getElementById("root")).render(o.jsx(yK,{}));
